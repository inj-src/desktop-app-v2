"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5851],{80516:function(e,i,s){s.d(i,{Z:function(){return G}});var t=s(68328),n=s(72940),l=s(6780),r=s(67732);let a=async e=>{let{pcId:i,from:s,to:t,page:a=1,limit:d=10,isPaid:o,isCommissionPaid:c,marketerId:h}=e;try{let e="string"==typeof s?s:s.toISOString(),r="string"==typeof t?t:t.toISOString(),x=await l.default.get("".concat("http://sasthotech.local:5000/api/v1","/pcGroup/marketer/pc/").concat(i,"/details"),{...n.FD,params:{from:e,to:r,page:a,limit:d,...void 0!==o&&{isPaid:o},...void 0!==c&&{isCommissionPaid:c},...h&&{marketerId:h}}});return{success:!0,data:x.data.data}}catch(e){if(e instanceof r.d7){var x;return{success:!1,data:null===(x=e.response)||void 0===x?void 0:x.data.message}}return{success:!1,data:"An error occurred"}}};var d=s(22975),o=s(68242),c=s(22041),h=s(22614),x=s(14587),m=s(41224),u=s(48604),j=s(29663),p=s(11114),T=s(77303),f=s(87967),v=s(54632),b=s(7140),C=s(31204),g=s(7965),y=s(29013),w=s(4505),P=s(57620);let z=e=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e);var G=e=>{let{opened:i,onClose:s,pcId:n,dateRange:l,marketerId:r}=e,[G,B]=(0,w.useState)(null),[D,S]=(0,w.useState)(!1),[Z,A]=(0,w.useState)(1),[U,k]=(0,w.useState)("all"),[I,F]=(0,w.useState)("all");(0,w.useEffect)(()=>{n&&i&&E()},[n,i,Z,U,I]);let E=async()=>{if(n){S(!0);try{let{success:e,data:i}=await a({pcId:n,from:l.from,to:l.to,page:Z,limit:10,isPaid:"all"===U?void 0:"true"===U,isCommissionPaid:"all"===I?void 0:"true"===I,marketerId:r});e&&B(i)}finally{S(!1)}}},N=()=>{A(1),k("all"),F("all"),s()};return G||D?(0,t.jsx)(d.u,{opened:i,onClose:N,size:"xl",title:G?(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.Title,{order:3,children:[G.pc.name," (",G.pc.pcCode,")"]}),(0,t.jsxs)(c.Text,{size:"sm",c:"dimmed",children:["Group: ",G.pcGroup.name]})]}):"Loading...",children:D&&!G?(0,t.jsx)(h.Group,{justify:"center",py:"xl",children:(0,t.jsx)(x.Loader,{})}):G?(0,t.jsxs)(m.Stack,{gap:"md",children:[(0,t.jsx)(u.Z,{withBorder:!0,children:(0,t.jsxs)(j.Grid,{children:[(0,t.jsx)(j.Grid.Col,{span:6,children:(0,t.jsxs)(h.Group,{gap:"xs",children:[(0,t.jsx)(g.Z,{size:16}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Text,{size:"xs",c:"dimmed",children:"PC Name"}),(0,t.jsx)(c.Text,{size:"sm",fw:500,children:G.pc.name})]})]})}),(0,t.jsx)(j.Grid.Col,{span:6,children:(0,t.jsxs)(h.Group,{gap:"xs",children:[(0,t.jsx)(y.Z,{size:16}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Text,{size:"xs",c:"dimmed",children:"Mobile"}),(0,t.jsx)(c.Text,{size:"sm",fw:500,children:G.pc.mobile})]})]})}),(0,t.jsxs)(j.Grid.Col,{span:12,children:[(0,t.jsx)(c.Text,{size:"xs",c:"dimmed",children:"Percentage"}),(0,t.jsxs)(p.C,{color:"blue",variant:"filled",children:[G.pc.percentage,"%"]})]})]})}),(0,t.jsx)(T.Divider,{label:"Statistics",labelPosition:"center"}),(0,t.jsxs)(j.Grid,{children:[(0,t.jsx)(j.Grid.Col,{span:{base:12,md:6},children:(0,t.jsx)(P.Z,{title:"Total Income",value:z(G.statistics.totalIncome),icon:(0,t.jsx)(g.Z,{}),color:"green"})}),(0,t.jsx)(j.Grid.Col,{span:{base:12,md:6},children:(0,t.jsx)(P.Z,{title:"Total Commission",value:z(G.statistics.totalCommission),icon:(0,t.jsx)(g.Z,{}),color:"blue"})}),(0,t.jsx)(j.Grid.Col,{span:{base:12,md:6},children:(0,t.jsx)(P.Z,{title:"Commission Paid",value:z(G.statistics.commissionPaid),icon:(0,t.jsx)(g.Z,{}),color:"teal",subtitle:"".concat(G.statistics.billsWithCommissionPaid," bills")})}),(0,t.jsx)(j.Grid.Col,{span:{base:12,md:6},children:(0,t.jsx)(P.Z,{title:"Commission Unpaid",value:z(G.statistics.commissionUnpaid),icon:(0,t.jsx)(g.Z,{}),color:"red",subtitle:"".concat(G.statistics.billsWithCommissionUnpaid," bills")})})]}),(0,t.jsx)(T.Divider,{label:"Bills",labelPosition:"center"}),(0,t.jsxs)(h.Group,{gap:"md",children:[(0,t.jsx)(f.P,{label:"Payment Status",value:U,onChange:e=>{k(e||"all"),A(1)},data:[{value:"all",label:"All Bills"},{value:"true",label:"Paid"},{value:"false",label:"Unpaid"}],style:{flex:1}}),(0,t.jsx)(f.P,{label:"Commission Status",value:I,onChange:e=>{F(e||"all"),A(1)},data:[{value:"all",label:"All Commissions"},{value:"true",label:"Commission Paid"},{value:"false",label:"Commission Unpaid"}],style:{flex:1}})]}),0===G.bills.items.length?(0,t.jsx)(c.Text,{c:"dimmed",ta:"center",py:"xl",children:"No bills found for the selected filters."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(v.i,{striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[(0,t.jsx)(v.i.Thead,{children:(0,t.jsxs)(v.i.Tr,{children:[(0,t.jsx)(v.i.Th,{children:"Bill ID"}),(0,t.jsx)(v.i.Th,{children:"Patient"}),(0,t.jsx)(v.i.Th,{children:"Phone"}),(0,t.jsx)(v.i.Th,{children:"Total"}),(0,t.jsx)(v.i.Th,{children:"Commission"}),(0,t.jsx)(v.i.Th,{children:"Paid"}),(0,t.jsx)(v.i.Th,{children:"Comm. Paid"}),(0,t.jsx)(v.i.Th,{children:"Date"})]})}),(0,t.jsx)(v.i.Tbody,{children:G.bills.items.map(e=>(0,t.jsxs)(v.i.Tr,{children:[(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(p.C,{variant:"light",children:e.billId})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(c.Text,{size:"sm",children:e.name})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(c.Text,{size:"sm",children:e.phone})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(c.Text,{size:"sm",fw:500,children:z(e.totalAmountWithDiscount)})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(c.Text,{size:"sm",c:"blue",children:z(e.commissionAmount)})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(p.C,{color:e.isPaid?"green":"red",children:e.isPaid?"Paid":"Unpaid"})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(p.C,{color:e.isCommissionPaid?"green":"orange",children:e.isCommissionPaid?"Paid":"Unpaid"})}),(0,t.jsx)(v.i.Td,{children:(0,t.jsx)(c.Text,{size:"sm",children:new Date(e.createdAt).toLocaleDateString()})})]},e.id))})]}),G.bills.totalPage>1&&(0,t.jsx)(h.Group,{justify:"center",children:(0,t.jsx)(b.t,{value:Z,onChange:A,total:G.bills.totalPage})})]}),(0,t.jsx)(h.Group,{justify:"flex-end",children:(0,t.jsx)(C.Button,{variant:"outline",onClick:N,children:"Close"})})]}):null}):null}},79033:function(e,i,s){var t=s(68328),n=s(22041),l=s(54632),r=s(11114),a=s(76029),d=s(34022),o=s(31204),c=s(60711);s(4505);let h=e=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e);i.Z=e=>{let{pcStats:i,onViewDetails:s}=e;if(0===i.length)return(0,t.jsx)(n.Text,{c:"dimmed",ta:"center",py:"xl",children:"No PC data available for the selected period."});let x=(e,i)=>0===i?0:e/i*100;return(0,t.jsxs)(l.i,{striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[(0,t.jsx)(l.i.Thead,{children:(0,t.jsxs)(l.i.Tr,{children:[(0,t.jsx)(l.i.Th,{children:"PC Code"}),(0,t.jsx)(l.i.Th,{children:"PC Name"}),(0,t.jsx)(l.i.Th,{children:"Total Income"}),(0,t.jsx)(l.i.Th,{children:"Commission"}),(0,t.jsx)(l.i.Th,{children:"Paid"}),(0,t.jsx)(l.i.Th,{children:"Unpaid"}),(0,t.jsx)(l.i.Th,{children:"Bills"}),(0,t.jsx)(l.i.Th,{children:"Payment Status"}),(0,t.jsx)(l.i.Th,{children:"Actions"})]})}),(0,t.jsx)(l.i.Tbody,{children:i.map(e=>{let i=x(e.commissionPaid,e.totalCommission);return(0,t.jsxs)(l.i.Tr,{children:[(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(r.C,{variant:"light",children:e.pc.pcCode})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(n.Text,{size:"sm",fw:500,children:e.pc.name})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(n.Text,{size:"sm",fw:600,children:h(e.totalIncome)})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(n.Text,{size:"sm",c:"blue",children:h(e.totalCommission)})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(n.Text,{size:"sm",c:"green",children:h(e.commissionPaid)})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(n.Text,{size:"sm",c:"red",children:h(e.commissionUnpaid)})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(r.C,{color:"gray",variant:"filled",children:e.totalBills})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(a.u,{label:"".concat(i.toFixed(1),"% paid"),position:"top",children:(0,t.jsx)(d.E,{value:i,color:100===i?"green":"blue",size:"md",radius:"xl"})})}),(0,t.jsx)(l.i.Td,{children:(0,t.jsx)(o.Button,{variant:"light",size:"xs",leftSection:(0,t.jsx)(c.Z,{size:14}),onClick:()=>s(e.pc.id),children:"View"})})]},e.pc.id)})})]})}},57620:function(e,i,s){var t=s(68328),n=s(48604),l=s(22614),r=s(41224),a=s(22041),d=s(58812);i.Z=e=>{let{title:i,value:s,icon:o,color:c="blue",subtitle:h}=e;return(0,t.jsx)(n.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,t.jsxs)(l.Group,{justify:"apart",wrap:"nowrap",children:[(0,t.jsxs)(r.Stack,{gap:"xs",style:{flex:1},children:[(0,t.jsx)(a.Text,{size:"sm",c:"dimmed",tt:"uppercase",fw:700,children:i}),(0,t.jsx)(a.Text,{size:"xl",fw:700,children:s}),h&&(0,t.jsx)(a.Text,{size:"xs",c:"dimmed",children:h})]}),(0,t.jsx)(d.k,{color:c,size:"xl",radius:"md",variant:"light",children:o})]})})}},72940:function(e,i,s){s.d(i,{FD:function(){return n},Hn:function(){return t},y4:function(){return l}});let t={headers:{"Content-Type":"application/json"}},n={withCredentials:!0},l={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78101:function(e,i,s){s.d(i,{g:function(){return a}});var t=s(49854),n=s(68240),l=s(94183),r=s(28317);let a=(0,n.LC)({baseQuery:(0,l.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,i)=>fetch(e,i).then(async s=>{let n="string"==typeof e?e:e.url;return n.includes("?")||(null==i?void 0:i.body)||"string"!=typeof e&&e.body||await (0,r.t8)(n,await s.clone().json().catch(()=>null),(0,t.x)()),s}).catch(async s=>{if(s instanceof TypeError){let s="string"==typeof e?e:e.url;if(!s.includes("?")&&!(null==i?void 0:i.body)&&!("string"!=typeof e&&e.body)){let e=await (0,r.U2)(s,(0,t.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw s})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,i,s){let t;s.d(i,{d:function(){return o},x:function(){return d}});var n=s(72940),l=s(6780),r=s(67732),a=s(28317);function d(){return t||(t=(0,a.MT)("cached-responses-store","cached-responses")),t}async function o(e,i){try{let s=await l.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:i,...n.FD});return await (0,a.t8)(e,s.data,d()),s.data}catch(i){if(i instanceof r.d7&&[r.d7.ERR_NETWORK,r.d7.ETIMEDOUT].includes(i.code)){let i=await (0,a.U2)(e,d());if(i)return i}throw i instanceof r.d7&&i.response&&401===i.response.status||console.error(i),i}}}}]);