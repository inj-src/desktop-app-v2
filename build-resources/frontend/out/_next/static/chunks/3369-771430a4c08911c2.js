"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3369],{71530:function(e,i,s){s.d(i,{g:function(){return E}});var n=s(68328),t=s(22614),r=s(14587),o=s(46373),l=s(34473),a=s(41224),d=s(3741),c=s(68242),h=s(22041),u=s(31204),v=s(89043),m=s(54632),x=s(11114),p=s(63998),j=s(45437),f=s(51973),g=s(60711),T=s(12697),y=s(12450),b=s(67030),S=s(4505),A=s(34703),w=s(35294);function E(e){var i,s;let{id:E}=e,z=(0,y.useRouter)(),{data:C,isLoading:Z,error:N}=(0,b.M)(E),[R,P]=(0,S.useState)(new Set),k=null==C?void 0:C.data,V=e=>{P(i=>{let s=new Set(i);return s.has(e)?s.delete(e):s.add(e),s})};return Z?(0,n.jsx)(t.Group,{justify:"center",py:"xl",children:(0,n.jsx)(r.Loader,{size:"lg"})}):N||!k?(0,n.jsx)(o.b,{title:"Error",color:"red",children:"Failed to load service details. Please try again later."}):(0,n.jsxs)(l.Container,{fluid:!0,children:[(0,n.jsx)(A.Z,{}),(0,n.jsxs)(a.Stack,{gap:"lg",children:[(0,n.jsxs)(t.Group,{justify:"space-between",children:[(0,n.jsxs)(t.Group,{children:[(0,n.jsx)(d.A,{variant:"subtle",onClick:()=>z.push("/superadmin/version-admin/services"),children:(0,n.jsx)(p.Z,{size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Title,{order:2,children:k.displayName||k.name}),(0,n.jsx)(h.Text,{size:"sm",c:"dimmed",children:k.description||"No description"})]})]}),(0,n.jsx)(u.Button,{leftSection:(0,n.jsx)(j.Z,{size:16}),disabled:!0,children:"Edit Service"})]}),(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsxs)(t.Group,{justify:"space-between",mb:"md",children:[(0,n.jsxs)(c.Title,{order:4,children:["Environment Variables (",(null===(i=k.environmentVariables)||void 0===i?void 0:i.length)||0,")"]}),(0,n.jsx)(w.Z,{environmentVariables:k.environmentVariables||[],filename:"".concat(k.name,".env")})]}),k.environmentVariables&&k.environmentVariables.length>0?(0,n.jsxs)(m.i,{striped:!0,highlightOnHover:!0,children:[(0,n.jsx)(m.i.Thead,{children:(0,n.jsxs)(m.i.Tr,{children:[(0,n.jsx)(m.i.Th,{children:"Key"}),(0,n.jsx)(m.i.Th,{children:"Value"}),(0,n.jsx)(m.i.Th,{children:"Description"}),(0,n.jsx)(m.i.Th,{children:"Secret"}),(0,n.jsx)(m.i.Th,{children:"Actions"})]})}),(0,n.jsx)(m.i.Tbody,{children:k.environmentVariables.map(e=>(0,n.jsxs)(m.i.Tr,{children:[(0,n.jsx)(m.i.Td,{children:(0,n.jsx)(h.Text,{fw:500,children:e.key})}),(0,n.jsx)(m.i.Td,{children:(0,n.jsxs)(t.Group,{gap:"xs",children:[e.isSecret&&!R.has(e.key)?(0,n.jsx)(h.Text,{children:"*".repeat(8)}):(0,n.jsx)(h.Text,{style:{fontFamily:"monospace"},children:e.value}),e.isSecret&&(0,n.jsx)(d.A,{size:"sm",variant:"subtle",onClick:()=>V(e.key),children:R.has(e.key)?(0,n.jsx)(f.Z,{size:16}):(0,n.jsx)(g.Z,{size:16})})]})}),(0,n.jsx)(m.i.Td,{children:(0,n.jsx)(h.Text,{size:"sm",c:"dimmed",children:e.description||"-"})}),(0,n.jsx)(m.i.Td,{children:e.isSecret?(0,n.jsx)(x.C,{color:"red",variant:"light",size:"sm",children:"Yes"}):(0,n.jsx)(x.C,{color:"gray",variant:"light",size:"sm",children:"No"})}),(0,n.jsx)(m.i.Td,{children:(0,n.jsxs)(t.Group,{gap:"xs",children:[(0,n.jsx)(d.A,{variant:"light",color:"yellow",size:"sm",children:(0,n.jsx)(j.Z,{size:14})}),(0,n.jsx)(d.A,{variant:"light",color:"red",size:"sm",children:(0,n.jsx)(T.Z,{size:14})})]})})]},e.id||e.key))})]}):(0,n.jsx)(h.Text,{c:"dimmed",children:"No environment variables defined"})]}),(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsxs)(c.Title,{order:4,mb:"md",children:["Volumes (",(null===(s=k.volumes)||void 0===s?void 0:s.length)||0,")"]}),k.volumes&&k.volumes.length>0?(0,n.jsxs)(m.i,{striped:!0,highlightOnHover:!0,children:[(0,n.jsx)(m.i.Thead,{children:(0,n.jsxs)(m.i.Tr,{children:[(0,n.jsx)(m.i.Th,{children:"Host Path"}),(0,n.jsx)(m.i.Th,{children:"Container Path"}),(0,n.jsx)(m.i.Th,{children:"Description"}),(0,n.jsx)(m.i.Th,{children:"Actions"})]})}),(0,n.jsx)(m.i.Tbody,{children:k.volumes.map(e=>(0,n.jsxs)(m.i.Tr,{children:[(0,n.jsx)(m.i.Td,{children:(0,n.jsx)(h.Text,{style:{fontFamily:"monospace"},children:e.hostPath})}),(0,n.jsx)(m.i.Td,{children:(0,n.jsx)(h.Text,{style:{fontFamily:"monospace"},children:e.containerPath})}),(0,n.jsx)(m.i.Td,{children:(0,n.jsx)(h.Text,{size:"sm",c:"dimmed",children:e.description||"-"})}),(0,n.jsx)(m.i.Td,{children:(0,n.jsxs)(t.Group,{gap:"xs",children:[(0,n.jsx)(d.A,{variant:"light",color:"yellow",size:"sm",children:(0,n.jsx)(j.Z,{size:14})}),(0,n.jsx)(d.A,{variant:"light",color:"red",size:"sm",children:(0,n.jsx)(T.Z,{size:14})})]})})]},e.id||e.hostPath))})]}):(0,n.jsx)(h.Text,{c:"dimmed",children:"No volumes defined"})]}),k.versionReleases&&k.versionReleases.length>0&&(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsxs)(c.Title,{order:4,mb:"md",children:["Version Releases (",k.versionReleases.length,")"]}),(0,n.jsx)(a.Stack,{gap:"xs",children:k.versionReleases.map(e=>(0,n.jsxs)(t.Group,{justify:"space-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(t.Group,{gap:"xs",children:[(0,n.jsx)(h.Text,{fw:500,children:e.version}),e.isStable&&(0,n.jsx)(x.C,{color:"green",variant:"light",size:"sm",children:"Stable"}),e.isMandatory&&(0,n.jsx)(x.C,{color:"red",variant:"light",size:"sm",children:"Mandatory"})]}),(0,n.jsxs)(h.Text,{size:"sm",c:"dimmed",children:["Released ",new Date(e.releasedAt).toLocaleDateString()]})]}),(0,n.jsx)(u.Button,{variant:"light",size:"xs",onClick:()=>z.push("/superadmin/version-admin/versions?id=".concat(e.id)),children:"View Details"})]},e.id))})]})]})]})}},35294:function(e,i,s){s.d(i,{Z:function(){return l}});var n=s(68328),t=s(31204),r=s(42870),o=s(22115);function l(e){let{environmentVariables:i,filename:s=".env"}=e,l=()=>{let e="# Environment Variables\n";return e+="# Generated on ".concat(new Date().toLocaleString(),"\n\n"),i.forEach(i=>{i.description&&(e+="# ".concat(i.description,"\n")),i.isSecret&&(e+="# SECRET: Keep this value secure\n");let s=/[\s#"'$`\\]/.test(i.value)?'"'.concat(i.value,'"'):i.value;e+="".concat(i.key,"=").concat(s,"\n\n")}),e};return(0,n.jsx)(t.Button,{size:"xs",variant:"light",color:"blue",leftSection:(0,n.jsx)(r.Z,{size:14}),onClick:()=>{if(!i||0===i.length){o.N9.show({title:"No variables to export",message:"There are no environment variables to export",color:"yellow"});return}try{let e=l(),n=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),o.N9.show({title:"Success",message:"Exported ".concat(i.length," environment variable").concat(1!==i.length?"s":""),color:"green"})}catch(e){o.N9.show({title:"Error",message:"Failed to export .env file",color:"red"})}},disabled:!i||0===i.length,children:"Export .env"})}},81014:function(e,i,s){s.d(i,{Z:function(){return x}});var n=s(68328),t=s(13342),r=s(22614),o=s(21288),l=s(31204),a=s(41224),d=s(57956),c=s(2534),h=s(91024),u=s(12921),v=s(22115),m=s(4505);function x(e){let{onEnvVarsExtracted:i}=e,[s,x]=(0,m.useState)(null),[p,j]=(0,m.useState)(""),f=e=>{let i=e.split("\n"),s=[],n="";for(let e of i){let i=e.trim();if(!i){n="";continue}if(i.startsWith("#")){n=i.substring(1).trim();continue}let t=i.match(/^([A-Za-z_][A-Za-z0-9_]*)=(.*)$/);if(t){let e=t[1],i=t[2];(i.startsWith('"')&&i.endsWith('"')||i.startsWith("'")&&i.endsWith("'"))&&(i=i.slice(1,-1));let r=/^(.*_)?(SECRET|PASSWORD|KEY|TOKEN|PRIVATE|API_KEY|AUTH|CREDENTIAL)(_.*)?$/i.test(e);s.push({key:e,value:i,description:n,isSecret:r}),n=""}}return s},g=e=>{let s=f(e);if(0===s.length){v.N9.show({title:"No variables found",message:"The content doesn't contain any valid environment variables",color:"yellow"});return}i(s),v.N9.show({title:"Success",message:"Imported ".concat(s.length," environment variable").concat(1!==s.length?"s":""),color:"green"})},T=async()=>{if(!s){v.N9.show({title:"No file selected",message:"Please select a .env file to upload",color:"red"});return}try{let e=await s.text();g(e),x(null)}catch(e){v.N9.show({title:"Error",message:"Failed to parse .env file",color:"red"})}};return(0,n.jsxs)(t.m,{defaultValue:"upload",children:[(0,n.jsxs)(t.m.List,{children:[(0,n.jsx)(t.m.Tab,{value:"upload",leftSection:(0,n.jsx)(c.Z,{size:14}),children:"Upload File"}),(0,n.jsx)(t.m.Tab,{value:"paste",leftSection:(0,n.jsx)(h.Z,{size:14}),children:"Paste Content"})]}),(0,n.jsx)(t.m.Panel,{value:"upload",pt:"xs",children:(0,n.jsxs)(r.Group,{gap:"xs",align:"flex-end",children:[(0,n.jsx)(o.S,{placeholder:"Select .env file",leftSection:(0,n.jsx)(c.Z,{size:16}),value:s,onChange:e=>{x(e)},accept:"text/plain,.env,.env.local,.env.production,.env.development,.txt",style:{flex:1},description:"Tip: On Mac, press Cmd+Shift+. to show hidden files"}),(0,n.jsx)(l.Button,{leftSection:(0,n.jsx)(u.Z,{size:16}),onClick:T,disabled:!s,variant:"light",children:"Import"})]})}),(0,n.jsx)(t.m.Panel,{value:"paste",pt:"xs",children:(0,n.jsxs)(a.Stack,{gap:"xs",children:[(0,n.jsx)(d.g,{placeholder:"Paste your .env file content here... Example: NODE_ENV=production DATABASE_URL=postgresql://localhost:5432/db API_KEY=your_key_here",value:p,onChange:e=>j(e.target.value),minRows:6,maxRows:12,style:{fontFamily:"monospace"}}),(0,n.jsx)(r.Group,{justify:"flex-end",children:(0,n.jsx)(l.Button,{leftSection:(0,n.jsx)(u.Z,{size:16}),onClick:()=>{if(!p.trim()){v.N9.show({title:"No content",message:"Please paste some .env content first",color:"red"});return}g(p),j("")},disabled:!p.trim(),variant:"light",children:"Import from Paste"})})]})})]})}},34703:function(e,i,s){s.d(i,{Z:function(){return m}});var n=s(68328),t=s(13342),r=s(12450),o=s(74556),l=s(56959),a=s(74625),d=s(71140),c=s(91024),h=s(31662),u=s(25539),v=s(39870);function m(){let e=(0,r.useRouter)(),i=(0,r.usePathname)();return(0,n.jsx)(t.m,{value:i.includes("/dashboard")?"dashboard":i.includes("/services")?"services":i.includes("/versions")?"versions":i.includes("/hospitals")?"hospitals":i.includes("/logs")?"logs":i.includes("/notifications")?"notifications":i.includes("/devices")?"devices":i.includes("/sessions")?"sessions":"dashboard",onChange:i=>{i&&e.push("/superadmin/version-admin/".concat(i))},mb:"lg",children:(0,n.jsxs)(t.m.List,{children:[(0,n.jsx)(t.m.Tab,{value:"dashboard",leftSection:(0,n.jsx)(o.Z,{size:16}),children:"Dashboard"}),(0,n.jsx)(t.m.Tab,{value:"services",leftSection:(0,n.jsx)(l.Z,{size:16}),children:"Services"}),(0,n.jsx)(t.m.Tab,{value:"versions",leftSection:(0,n.jsx)(a.Z,{size:16}),children:"Versions"}),(0,n.jsx)(t.m.Tab,{value:"hospitals",leftSection:(0,n.jsx)(d.Z,{size:16}),children:"Hospitals"}),(0,n.jsx)(t.m.Tab,{value:"logs",leftSection:(0,n.jsx)(c.Z,{size:16}),children:"Update Logs"}),(0,n.jsx)(t.m.Tab,{value:"notifications",leftSection:(0,n.jsx)(h.Z,{size:16}),children:"Notifications"}),(0,n.jsx)(t.m.Tab,{value:"sessions",leftSection:(0,n.jsx)(u.Z,{size:16}),children:"Sessions"}),(0,n.jsx)(t.m.Tab,{value:"devices",leftSection:(0,n.jsx)(v.Z,{size:16}),children:"Devices"})]})})}},72940:function(e,i,s){s.d(i,{FD:function(){return t},Hn:function(){return n},y4:function(){return r}});let n={headers:{"Content-Type":"application/json"}},t={withCredentials:!0},r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},67030:function(e,i,s){s.d(i,{GM:function(){return l},M:function(){return t},MD:function(){return r},NG:function(){return n},nR:function(){return o}});let{useGetAllServicesQuery:n,useGetServiceQuery:t,useCreateServiceMutation:r,useUpdateServiceMutation:o,useDeleteServiceMutation:l,useAddServiceEnvVarMutation:a,useUpdateServiceEnvVarMutation:d,useDeleteServiceEnvVarMutation:c,useAddServiceVolumeMutation:h,useUpdateServiceVolumeMutation:u,useDeleteServiceVolumeMutation:v}=s(78101).g.injectEndpoints({endpoints:e=>({getAllServices:e.query({query:e=>({url:"/version-admin/services",method:"GET",params:e||{limit:50,offset:0}}),providesTags:["versionAdmin-services"]}),getService:e.query({query:e=>({url:"/version-admin/services/".concat(e),method:"GET"}),providesTags:(e,i,s)=>[{type:"versionAdmin-services",id:s}]}),createService:e.mutation({query:e=>({url:"/version-admin/services",method:"POST",body:e}),invalidatesTags:["versionAdmin-services"]}),updateService:e.mutation({query:e=>{let{id:i,data:s}=e;return{url:"/version-admin/services/".concat(i),method:"PUT",body:s}},invalidatesTags:(e,i,s)=>{let{id:n}=s;return["versionAdmin-services",{type:"versionAdmin-services",id:n}]}}),deleteService:e.mutation({query:e=>({url:"/version-admin/services/".concat(e),method:"DELETE"}),invalidatesTags:["versionAdmin-services"]}),addServiceEnvVar:e.mutation({query:e=>({url:"/version-admin/services/env",method:"POST",body:e}),invalidatesTags:(e,i,s)=>{let{serviceId:n}=s;return["versionAdmin-services",{type:"versionAdmin-services",id:n}]}}),updateServiceEnvVar:e.mutation({query:e=>{let{id:i,data:s}=e;return{url:"/version-admin/services/env/".concat(i),method:"PUT",body:s}},invalidatesTags:(e,i,s)=>{let{serviceId:n}=s;return n?["versionAdmin-services",{type:"versionAdmin-services",id:n}]:["versionAdmin-services"]}}),deleteServiceEnvVar:e.mutation({query:e=>{let{id:i}=e;return{url:"/version-admin/services/env/".concat(i),method:"DELETE"}},invalidatesTags:(e,i,s)=>{let{serviceId:n}=s;return n?["versionAdmin-services",{type:"versionAdmin-services",id:n}]:["versionAdmin-services"]}}),addServiceVolume:e.mutation({query:e=>({url:"/version-admin/services/volumes",method:"POST",body:e}),invalidatesTags:(e,i,s)=>{let{serviceId:n}=s;return["versionAdmin-services",{type:"versionAdmin-services",id:n}]}}),updateServiceVolume:e.mutation({query:e=>{let{id:i,data:s}=e;return{url:"/version-admin/services/volumes/".concat(i),method:"PUT",body:s}},invalidatesTags:(e,i,s)=>{let{serviceId:n}=s;return n?["versionAdmin-services",{type:"versionAdmin-services",id:n}]:["versionAdmin-services"]}}),deleteServiceVolume:e.mutation({query:e=>{let{id:i}=e;return{url:"/version-admin/services/volumes/".concat(i),method:"DELETE"}},invalidatesTags:(e,i,s)=>{let{serviceId:n}=s;return n?["versionAdmin-services",{type:"versionAdmin-services",id:n}]:["versionAdmin-services"]}})})})},78101:function(e,i,s){s.d(i,{g:function(){return l}});var n=s(49854),t=s(68240),r=s(94183),o=s(28317);let l=(0,t.LC)({baseQuery:(0,r.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,i)=>fetch(e,i).then(async s=>{let t="string"==typeof e?e:e.url;return t.includes("?")||(null==i?void 0:i.body)||"string"!=typeof e&&e.body||await (0,o.t8)(t,await s.clone().json().catch(()=>null),(0,n.x)()),s}).catch(async s=>{if(s instanceof TypeError){let s="string"==typeof e?e:e.url;if(!s.includes("?")&&!(null==i?void 0:i.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(s,(0,n.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw s})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,i,s){let n;s.d(i,{d:function(){return d},x:function(){return a}});var t=s(72940),r=s(6780),o=s(67732),l=s(28317);function a(){return n||(n=(0,l.MT)("cached-responses-store","cached-responses")),n}async function d(e,i){try{let s=await r.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:i,...t.FD});return await (0,l.t8)(e,s.data,a()),s.data}catch(i){if(i instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(i.code)){let i=await (0,l.U2)(e,a());if(i)return i}throw i instanceof o.d7&&i.response&&401===i.response.status||console.error(i),i}}}}]);