(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5189],{55054:function(e,s,i){"use strict";i.d(s,{u:function(){return u}});var a=i(68328),t=i(4505),l=i(55911),r=i(55106),n=i.n(r);function u(e){var s;let[i,r]=(0,t.useState)(!1),u=(null===(s=e.value)||void 0===s?void 0:s.toString().trim().length)!==0||i||void 0;return(0,a.jsx)(l.TextInput,{classNames:n(),onFocus:()=>r(!0),onBlur:()=>r(!1),"data-floating":u,labelProps:{"data-floating":u},...e})}},32730:function(e,s,i){"use strict";var a=i(68328),t=i(4505),l=i(55054),r=i(23583),n=i(89043),u=i(41224),c=i(22041),o=i(22614),d=i(3741),p=i(59406),m=i(92766),h=i(90660),T=i.n(h);let v=e=>{let{templateName:s,references:i,templateId:t}=e,h=(0,r.TA)({initialValues:i.reduce((e,s)=>(e[s.referenceName]=s.value.toString(),e),{}),onSubmit:async e=>{try{let a=i[0].template;i.forEach(s=>{let i=s.matchString.replace(/\[[^\]]*\]/,"[".concat(e[s.referenceName],"]"));a=a.replace(s.matchString,i)});let{success:l,data:r}=await (0,m.K)({id:t,name:s,value:a});l?T().fire("Success","Reference Updated","success"):T().fire("Error",r,"error")}catch(e){}},enableReinitialize:!0});return(0,a.jsx)(n.X,{shadow:"xs",p:"md",withBorder:!0,children:(0,a.jsx)("form",{onSubmit:h.handleSubmit,children:(0,a.jsxs)(u.Stack,{gap:"xs",children:[(0,a.jsx)(c.Text,{w:500,size:"sm",color:"gray.7",children:s}),(0,a.jsxs)(o.Group,{align:"flex-end",children:[i.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(l.u,{label:e.referenceName,name:'["'.concat(e.referenceName,'"]'),value:h.values[e.referenceName],onChange:h.handleChange,placeholder:"Enter Value"}),(0,a.jsxs)(c.Text,{size:"xs",c:"gray.6",mt:4,children:["Previous Value/Range: ",e.value]})]},e.referenceName)),(0,a.jsx)(d.A,{type:"submit",color:"blue",size:"lg",children:(0,a.jsx)(p.Z,{size:20})})]})]})})})};s.Z=e=>{let{item:s}=e,i=(0,t.useMemo)(()=>{var e;return(null===(e=s.testTemplates)||void 0===e?void 0:e.reduce((e,s)=>{var i;let a=(i=s.value)?Array.from(i.matchAll(/{&(?:amp;)?}-{([^}]+)}\[([^\]]+)\]/g),e=>{var s;let[a,t,l]=e;return{matchString:a||"",referenceName:(null!==(s=null==t?void 0:t.trim())&&void 0!==s?s:"").replace(/<[^>]*>/g,""),value:function(e){if(!e)return"";let s=Number(e);return isNaN(s)?e:s}(l.replaceAll("&nbsp;","")),originalContent:e[0],template:i}}):[];return a.length>0&&e.push({[s.name+","+s.id]:a}),e},[]))||[]},[s]);return 0===i.length?(0,a.jsx)(c.Text,{c:"gray.6",py:"md",children:"No Reference Fields Found"}):(0,a.jsxs)(u.Stack,{gap:"md",children:[(0,a.jsx)(c.Text,{size:"lg",w:500,c:"gray.8",children:"Test Reference Values"}),i.map((e,s)=>Object.entries(e).map(e=>{var s,i,t;let[l,r]=e;return(0,a.jsx)(v,{templateId:null===(s=l.split(","))||void 0===s?void 0:s[1],templateName:null===(i=l.split(","))||void 0===i?void 0:i[0],references:r},null===(t=l.split(","))||void 0===t?void 0:t[0])}))]})}},70772:function(e,s,i){"use strict";i.d(s,{P:function(){return y},s:function(){return b}});var a=i(68328),t=i(16098),l=i(9722),r=i(29259),n=i(76889),u=i(22041),c=i(22614),o=i(8715),d=i(59406),p=i(42177),m=i.n(p),h=i(4505),T=i(90660),v=i.n(T),g=i(51248),x=i(25499),f=i(83501),S=i(25626);let b=e=>{let{test:s}=e,i=(0,t.j)({components:{Input:l.I.extend({classNames:m()}),NumberInput:r.Y.extend({classNames:m()})}}),d=(0,x.C)(e=>e.auth),p=(0,x.T)(),T=async e=>{let{success:i,data:a}=await (0,g.p)(s.id,e);if(i){var t;if(v().fire("Success","Discount Updated Successfully","success"),(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.role)==="superadmin");else{let{success:e,data:s}=await (0,f.Y)();e&&p((0,S.Z2)(s))}}else v().fire("Failed",a||"Invalid Server Response","error")},[b,F]=(0,h.useState)(!1);return(0,a.jsx)(n.MantineProvider,{theme:i,children:(0,a.jsx)("div",{children:0===s.discount?(0,a.jsx)(a.Fragment,{children:b?(0,a.jsx)(y,{test:s,updateDiscountAction:T,discount:s.discount,setDiscountOpen:F}):(0,a.jsx)(u.Text,{className:"cursor",onClick:()=>F(!0),children:"Click to set Discount"})}):(0,a.jsx)(a.Fragment,{children:b?(0,a.jsx)(y,{test:s,updateDiscountAction:T,discount:s.discount,setDiscountOpen:F}):(0,a.jsxs)(c.Group,{children:[(0,a.jsxs)(u.Text,{c:"#14B13B",fw:700,children:[s.discount,"amount"===s.discountType?"TK":"%"]}),(0,a.jsx)(u.Text,{onClick:()=>F(!0),className:"cursor",c:"#979797",children:(0,a.jsx)(o.Z,{})})]})})})})},y=e=>{let{setDiscountOpen:s,discount:i,test:t,updateDiscountAction:l}=e,[n,u]=(0,h.useState)(i),[p,m]=(0,h.useState)("percentage");return(0,a.jsxs)(c.Group,{gap:3,align:"end",children:[(0,a.jsx)(r.Y,{styles:{label:{background:t?"white":"#1A72E9",width:"100%",fontWeight:600}},label:"TK",rightSection:(0,a.jsx)(a.Fragment,{}),defaultValue:0!==i&&(null==t?void 0:t.discountType)==="amount"?i:0,onBlur:()=>m("amount"),onChange:e=>{u(e)},w:75,min:0,max:(null==t?void 0:t.price)||void 0,radius:"xs",placeholder:"TAKA"}),(0,a.jsx)(r.Y,{styles:{label:{background:t?"white":"#1A72E9",width:"100%",fontWeight:600}},label:"%",rightSection:(0,a.jsx)(a.Fragment,{}),onBlur:()=>m("percentage"),onChange:e=>{u(e)},defaultValue:0!==i&&(null==t?void 0:t.discountType)==="percentage"?i:0,w:75,min:0,max:100,radius:"xs",placeholder:"%"}),(0,a.jsx)(o.Z,{className:"text-danger cursor",onClick:()=>s(!1)}),(0,a.jsx)(d.Z,{onClick:()=>l({discount:parseInt(n),discountType:p}),className:"cursor text-dark"})]})}},50002:function(e,s,i){"use strict";var a=i(68328),t=i(4505),l=i(59406),r=i(37947),n=i(45437),u=i(87967),c=i(22614),o=i(3741),d=i(78530),p=i(94372),m=i(90660),h=i.n(m),T=i(51248),v=i(25499),g=i(25626);s.Z=e=>{var s,i;let{item:m}=e,[x,f]=(0,t.useState)(!1),[S,b]=(0,t.useState)(null!==(s=null==m?void 0:m.sample)&&void 0!==s?s:""),[y,F]=(0,t.useState)(null!==(i=null==m?void 0:m.sample)&&void 0!==i?i:""),j=(0,v.T)(),[w,C]=(0,t.useState)(!1),N=async()=>{try{let e,s;C(!0),console.log(m,"ittem");let i=await (0,T.p)(m.id,{sample:y});e=i.success,s=i.data,e?(h().fire("Success","Test Updated Successfully","success"),j((0,g.Zw)([s]))):h().fire("Failed",s,"error")}finally{C(!1)}};return x?(0,a.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,a.jsx)(u.P,{value:y,onChange:e=>F(null!=e?e:""),data:null!==p.V&&void 0!==p.V?p.V:[],placeholder:"Select Test Sample",searchable:!0,clearable:!0,size:"sm",className:"min-w-[200px]",leftSection:(0,a.jsx)(d.Z,{className:"w-4 h-4 text-gray-500"})}),(0,a.jsxs)(c.Group,{children:[(0,a.jsx)(o.A,{onClick:N,loading:w,className:"hover:bg-green-50 p-1 rounded text-green-600",title:"Save",children:(0,a.jsx)(l.Z,{className:"w-4 h-4"})}),(0,a.jsx)(o.A,{onClick:()=>{f(!1),F(S)},className:"hover:bg-red-50 p-1 rounded text-red-600",title:"Cancel",children:(0,a.jsx)(r.Z,{className:"w-4 h-4"})})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,a.jsx)("span",{className:"flex-grow text-sm",children:(null==m?void 0:m.sample)||"No sample selected"}),(0,a.jsx)("button",{onClick:()=>{f(!0),F(S)},className:"hover:bg-blue-50 p-1 rounded text-blue-600",title:"Edit sample",children:(0,a.jsx)(n.Z,{className:"w-4 h-4"})})]})}},86127:function(e,s,i){"use strict";i.d(s,{p:function(){return x}});var a=i(68328),t=i(51248),l=i(25499),r=i(25626),n=i(22975),u=i(31204),c=i(76029),o=i(3741),d=i(46557),p=i(76283),m=i(45437),h=i(23583),T=i(90660),v=i.n(T),g=i(38823);function x(e){let{item:s}=e,[i,{open:T,close:x}]=(0,d.q)(!1),[f,S]=(0,d.q)(!1),b=(0,l.T)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.u,{opened:i,onClose:x,title:"Quick Edit",children:(0,a.jsx)(h.J9,{initialValues:{name:s.name,price:s.price},onSubmit:async e=>{x(),S.open();let{success:i,data:a}=await (0,t.p)(s.id,e);i?b((0,r._W)(a)):v().fire("Failed",a,"error"),S.close()},children:(0,a.jsxs)(h.l0,{children:[(0,a.jsx)(g.Z,{label:"Test name",name:"name",mt:0}),(0,a.jsx)(g.Z,{label:"Test price",name:"price",type:"number",mt:"md"}),(0,a.jsx)(u.Button,{type:"submit",leftSection:(0,a.jsx)(p.Z,{}),mt:"md",children:"Save"})]})})}),(0,a.jsx)(c.u,{label:"Quick Edit",children:(0,a.jsx)(o.A,{onClick:T,variant:"subtle",loading:f,children:(0,a.jsx)(m.Z,{})})})]})}},38823:function(e,s,i){"use strict";i.d(s,{E:function(){return d}});var a=i(68328),t=i(30331),l=i(55911),r=i(73626),n=i(23583),u=i(4505),c=i(49749),o=i.n(c);let d={size:"md",variant:"filled",radius:"md"},p={mt:"md",withAsterisk:!1},m=(0,u.memo)(function(e){let{onChange:s,onBlur:i,onClick:n,value:c,useFieldResult:m,...h}=e,[{value:T,onChange:v,onBlur:g,...x},f,S]=m,b=(0,u.useRef)(null),y=(0,r.y)(()=>{if(b.current){let e;let{type:s,value:i}=b.current;S.setValue("number"===s?isNaN(e=parseFloat(i))?"":e:i)}},200);return(0,u.useEffect)(()=>{b.current&&b.current.value!==T&&!(document.hasFocus()&&document.activeElement===b.current)&&(b.current.value=null!=T?T:"")},[T]),(0,a.jsx)(l.TextInput,{ref:b,error:f.touched&&f.error,defaultValue:T,classNames:o(),onChange:e=>{y()},onBlur:e=>{null==i||i(e),g(e)},onClick:e=>{"number"===h.type&&"0"===e.currentTarget.value&&e.currentTarget.select(),null==n||n(e)},onWheel:t.P,...x,...p,...d,...h})},(e,s)=>e.useFieldResult[0].value===s.useFieldResult[0].value&&e.useFieldResult[1].touched===s.useFieldResult[1].touched&&e.useFieldResult[1].error===s.useFieldResult[1].error&&e.error===s.error);s.Z=e=>(0,a.jsx)(m,{useFieldResult:(0,n.U$)(e.name),...e})},94372:function(e,s,i){"use strict";i.d(s,{V:function(){return a}});let a=["Blood","Serum","Plasma","Urine","Saliva","Sputum","Stool (Feces)","Tissue (Biopsy)","Throat Swab","Nasal Swab","Wound Swab","Cerebrospinal Fluid (CSF)","Amniotic Fluid","Bone","Hair","Nail","Semen","Synovial Fluid (Joint Fluid)","Gastric Fluid","Vaginal Swab","Cervical Swab","Pleural Fluid","Peritoneal Fluid","Pericardial Fluid","Breast Milk","Ear Swab","Rectal Swab","Buccal Swab (Cheek Swab)","Sweat","Bone Marrow","Ascitic Fluid (from abdominal cavity)","Endometrial Biopsy","Eye Fluid (Aqueous or Vitreous Humor)","Prostatic Fluid","Lymph Node Biopsy","Nasal Aspirate","Bronchoalveolar Lavage (BAL) Fluid","Pleural Biopsy","Peritoneal Biopsy","Pericardial Biopsy","Skin Scrapings","Chorionic Villus Sample (for prenatal genetic testing)","Exudate (from infected wounds or lesions)","Breast Tissue","Liver Tissue","Kidney Tissue","Lung Tissue","Pancreatic Fluid","Bile","Tonsillar Tissue","Prostate Tissue","Vitreous Humor (Eye Fluid)","Nerve Biopsy","Muscle Biopsy","Cord Blood (from umbilical cord)","Fetal Tissue","Chyle (lymphatic fluid)","Meconium (newbornâ€™s first stool)","Sweat Gland Tissue","Salivary Gland Biopsy","Adipose Tissue (Fat Biopsy)","Lacrimal Fluid (Tears)","Pericardial Sac Fluid","Pancreatic Tissue","Nasal Mucus","Prostate Fluid","Corneal Scraping","Endocervical Tissue","Esophageal Tissue","Duodenal Tissue","Bladder Washings","Esophageal Manometry Sample","Cystic Fluid (from cysts)","Fingernail Clippings","Placental Tissue","Perianal Swab","Bile Duct Tissue","Bone Fragments","Testicular Biopsy","Gallbladder Tissue","Tongue Biopsy","Vocal Cord Tissue","Thymus Tissue","Adrenal Gland Tissue","Parathyroid Tissue","Thyroid Tissue","Spleen Tissue","Ovarian Tissue","Fallopian Tube Tissue","Cardiac Muscle Tissue","Brain Tissue","Skeletal Muscle Tissue","Smooth Muscle Tissue","Cartilage Tissue","Tendon Tissue","Ligament Tissue","Appendix Tissue","Small Intestine Tissue","Large Intestine Tissue","Rectum Tissue","Bronchial Aspirate","Tracheal Aspirate","Follicular Fluid","Gingival Crevicular Fluid","Middle Ear Fluid","Lymphatic Fluid","Seminal Vesicle Fluid","Ventricular Fluid","Subretinal Fluid","Dental Pulp","Dentin Sample","Enamel Sample","Arterial Wall Tissue","Venous Wall Tissue","Umbilical Cord Tissue","Amniotic Membrane","Retinal Tissue","Corneal Tissue","Lens Tissue","Iris Tissue","Scleral Tissue","Pineal Gland Tissue","Pituitary Gland Tissue","Hippocampal Tissue","Substantia Nigra Tissue","Corpus Callosum Tissue","Cerebellum Tissue","Meningeal Tissue","Spinal Cord Tissue","Peripheral Nerve Tissue","Autonomic Nerve Tissue","Bone Marrow Aspirate","Synovial Membrane","Articular Cartilage","Meniscus Tissue","Bursa Fluid","Ganglion Cyst Fluid","Epididymal Tissue","Vas Deferens Tissue","Mammary Duct Tissue","Areolar Tissue","Periosteum Tissue","Endosteum Tissue","Omentum Tissue","Mesentery Tissue","Dura Mater","Arachnoid Membrane","Pia Mater","Choroid Plexus Tissue","Epicardial Tissue","Myocardial Tissue","Endocardial Tissue","Valve Tissue (Heart)","Bronchial Tissue","Alveolar Tissue","Pleural Tissue","Peritoneal Tissue","Glomerular Tissue","Renal Tubule Tissue","Ureter Tissue","Urethra Tissue"]},51248:function(e,s,i){"use strict";i.d(s,{p:function(){return r}});var a=i(72940),t=i(6780),l=i(67732);let r=async(e,s)=>{try{let i=await t.default.patch("".concat("http://sasthotech.local:5000/api/v1","/test/").concat(e),s,{...a.FD,...a.Hn});return{success:!0,data:i.data.data}}catch(e){if(e instanceof l.d7){var i;return{success:!1,data:null===(i=e.response)||void 0===i?void 0:i.data.message}}return{success:!1,data:"An error occurred"}}}},92766:function(e,s,i){"use strict";i.d(s,{K:function(){return r}});var a=i(72940),t=i(6780),l=i(67732);let r=async e=>{let{id:s,...i}=e;try{let e=await t.default.patch("".concat("http://sasthotech.local:5000/api/v1","/testTemplate/").concat(s),JSON.stringify(i),{...a.FD,...a.Hn});return{success:!0,data:e.data.data}}catch(e){if(e instanceof l.d7){var r;return{success:!1,data:null===(r=e.response)||void 0===r?void 0:r.data.message}}return{success:!1,data:"An error occurred"}}}},30331:function(e,s,i){"use strict";function a(e){e.currentTarget.blur(),e.stopPropagation(),setTimeout(()=>{var s;null==e||null===(s=e.currentTarget)||void 0===s||s.focus()},0)}i.d(s,{P:function(){return a}})},55106:function(e){e.exports={root:"FloatingLabelInput_root__tdRUu",label:"FloatingLabelInput_label__wEg7O",required:"FloatingLabelInput_required__oDYC1",input:"FloatingLabelInput_input__2uBwa"}},42177:function(e){e.exports={input:"Discount_input__SKVMX"}},49749:function(e){e.exports={input:"InputFieldWithOptionsFast_input__HgGdh",placeholder:"InputFieldWithOptionsFast_placeholder__EagU9",wrapper:"InputFieldWithOptionsFast_wrapper__8GXHB"}}}]);