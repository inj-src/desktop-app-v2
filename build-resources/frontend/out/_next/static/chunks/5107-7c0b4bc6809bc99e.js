(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5107],{45107:function(e,t,n){"use strict";n.r(t);var r=n(68328),a=n(64366),o=n(58539),i=n(95325),s=n(28301),c=n(25499),l=n(22614),d=n(87967),u=n(31204),h=n(29593),m=n(22041),p=n(7140),v=n(94131),f=n(12450),g=n(4505),x=n(70818),j=n(53502),w=n(90660),y=n.n(w),D=n(7602),C=n(56815),S=n.n(C),A=n(32278),b=n(2736);t.default=e=>{let{isGetStarted:t}=e,n=(0,f.useRouter)(),w=(0,c.T)(),C=(0,f.useSearchParams)(),N=(0,a.Z)(),_=(0,j.v9)(e=>e.doctors),B=Number(C.get("page")||1),T=Number(C.get("limit")||12),E=C.get("search")||"",[I,k]=(0,g.useState)([]),[F,O]=(0,g.useState)(1),[L,Z]=(0,g.useState)(0),[P,R]=(0,g.useState)(E);return(0,g.useEffect)(()=>{(async()=>{let{success:e,data:t}=await (0,i.$)(B,T,E);e?(k(t.items),O(t.totalPage),Z(t.totalItems)):y().fire("Error",t,"error")})()},[B,T,E]),(0,g.useEffect)(()=>{(async()=>{let{success:e,data:t}=await (0,o.c)();e&&w((0,s.v1)(t.items))})()},[w]),(0,g.useEffect)(()=>{let e=setTimeout(()=>{n.push("?page=1&limit=".concat(T,"&search=").concat(encodeURIComponent(P)))},500);return()=>clearTimeout(e)},[P]),(0,r.jsxs)("div",{className:S().container,children:[(0,r.jsxs)(l.Group,{justify:"space-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"fw-bold",children:"Add Doctor"}),t&&(0,r.jsxs)("p",{className:"text-lg",children:["Search and select doctors."," ",(0,r.jsx)("span",{className:S().highlight,children:"You can also add doctor later."})]})]}),(0,r.jsx)(d.P,{label:"Select Limit",data:["12","24","48","72","96"],value:String(T),onChange:e=>n.push("?page=1&limit=".concat(e,"&search=").concat(E))})]}),(0,r.jsxs)(l.Group,{justify:"space-between",align:"end",children:[(0,r.jsx)("div",{style:{width:(null==N?void 0:N.width)&&N.width>750?"400px":"100%"},children:(0,r.jsx)(D.A,{fieldName:"doctorId",optionComponent:e=>(0,r.jsx)(b.Z,{buttonFunc:A.R,doctor:e}),optionsData:I,search:P,setSearch:R,labelText:"Select or Search Doctor",withAsterisk:!0,placeholderText:"Select or Search Doctor"})}),t?(0,r.jsx)(u.Button,{onClick:()=>n.push("/get-started/add-receptionist"),color:"rgba(20, 177, 59, 1)",children:"Next"}):(0,r.jsxs)(u.Button,{color:"#2A85FF",onClick:()=>n.push("/doctor/add-doctor/new-doctor"),children:[(0,r.jsx)(v.Z,{}),(0,r.jsx)(h.Space,{w:4}),"Add New Doctor"]})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsxs)(m.Text,{c:"dimmed",children:[L," doctors found"]})}),(0,r.jsx)(x.default,{className:"mt-4",children:I.map(e=>{var t;let n=null===(t=_.adminDoctors)||void 0===t?void 0:t.some(t=>"".concat(t.name).concat(t.designation)==="".concat(e.name).concat(e.designation));return(0,r.jsx)(A.Z,{doctor:e,isAlreadyAdded:n},e.id)})}),(0,r.jsx)("div",{className:S().pagination,children:(0,r.jsx)(p.t,{value:B,total:F,onChange:e=>n.push("?page=".concat(e,"&limit=").concat(T,"&search=").concat(E))})})]})}},32278:function(e,t,n){"use strict";n.d(t,{R:function(){return S},Z:function(){return A}});var r=n(68328),a=n(8260);n(42604);var o=n(58539);n(66217);var i=n(28301),s=n(25499),c=n(48604),l=n(22614),d=n(22041),u=n(29593),h=n(31204),m=n(25299),p=n(99174),v=n(12450),f=n(4505),g=n(42062),x=n(53502),j=n(90660),w=n.n(j),y=e=>{let{text:t,highlight:n}=e;if(!n.trim())return(0,r.jsx)(r.Fragment,{children:t});let a=t.split(RegExp("(".concat(n,")"),"gi"));return(0,r.jsx)(r.Fragment,{children:a.map((e,t)=>e.toLowerCase()===n.toLowerCase()?(0,r.jsx)("span",{style:{backgroundColor:"#ffd700"},children:e},t):(0,r.jsx)("span",{children:e},t))})},D=n(2706),C=n.n(D);let S=async e=>{let{name:t,designation:n}=e,r=new FormData;r.append("name",t),r.append("designation",n),r.append("isAppointed","true"),e.phone1&&r.append("phone1",e.phone1),e.phone2&&r.append("phone2",e.phone2);let{success:o}=await (0,a.M)(r);return o};var A=e=>{let{isAlreadyAdded:t,isDoctorList:n=!1,doctor:a,deleteDoctor:j,searchTerm:D=""}=e,A=(0,s.T)(),b=(0,v.useRouter)(),[N,_]=(0,f.useState)(!1);(0,f.useEffect)(()=>{t&&_(t)},[t]),(0,x.v9)(e=>e.doctors.chamberedDoctors);let B=async e=>{if(await S(e)){let{success:e,data:t}=await (0,o.c)();e&&(A((0,i.v1)(t.items)),_(!0)),w().fire("Success","","success")}};return(0,r.jsx)(g.default,{className:"mt-3 align-items-stretch",lg:6,xl:4,children:(0,r.jsxs)(c.Z,{className:C().Card,shadow:"xl",padding:"xl",component:"a",target:"_blank",children:[j&&(0,r.jsx)(l.Group,{justify:"end",children:(0,r.jsx)(p.Z,{onClick:()=>{m.qk.openConfirmModal({title:"Delete",centered:!0,children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"d-block h4",children:"Are you sure?"})}),labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>j(a.id)})},className:"cursor text-danger"})}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:a&&a.image?(0,r.jsx)("img",{className:C().cardImage,src:a.image,alt:"Doctors Image"}):(0,r.jsx)("img",{className:C().cardImage,src:"https://i.ibb.co/hfGdGHp/doctor.jpg",alt:"Doctors Image"})}),(0,r.jsx)(d.Text,{ta:"center",fw:700,size:"lg",mt:"md",children:(0,r.jsx)(y,{text:null==a?void 0:a.name,highlight:D})}),(0,r.jsx)(d.Text,{ta:"center",mt:"xs",size:"md",children:(0,r.jsx)(y,{text:null==a?void 0:a.designation,highlight:D})}),(0,r.jsx)(d.Text,{ta:"center",mt:"xs",size:"md",children:(0,r.jsx)(y,{text:(null==a?void 0:a.specialist)||"",highlight:D})}),(0,r.jsx)(u.Space,{h:"md"}),(0,r.jsx)("div",{className:"card-btn d-flex flex-column align-items-center ",children:n?(0,r.jsx)(h.Button,{onClick:()=>b.push("/doctor/details?doctorId=".concat(a.id)),variant:"default",children:"See Details / Edit"}):N?(0,r.jsxs)(h.Button,{variant:"transparent",color:"green",children:[(0,r.jsxs)("svg",{width:"18",height:"21",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{opacity:"0.4",d:"M18 16.5V6.5C18 4.29086 16.2091 2.5 14 2.5H4C1.79086 2.5 0 4.29086 0 6.5V16.5C0 18.7091 1.79086 20.5 4 20.5H14C16.2091 20.5 18 18.7091 18 16.5Z",fill:"#14B13B"}),(0,r.jsx)("rect",{x:"5",y:"0.5",width:"8",height:"4",rx:"2",fill:"#14B13B"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4939 9.93558C12.8056 10.2083 12.8372 10.6822 12.5645 10.9939L9.69455 14.2738C9.07786 14.9786 8.01561 15.0729 7.28433 14.4879L5.53151 13.0857C5.20806 12.8269 5.15562 12.3549 5.41438 12.0315C5.67313 11.708 6.1451 11.6556 6.46855 11.9144L8.22137 13.3166C8.32584 13.4002 8.47759 13.3867 8.56569 13.286L11.4356 10.0061C11.7084 9.6944 12.1822 9.66282 12.4939 9.93558Z",fill:"#14B13B"})]})," ",(0,r.jsx)(u.Space,{w:"md"}),"Added"]}):(0,r.jsx)(h.Button,{onClick:()=>{B(a)},className:"w-50",variant:"default",children:"Add"})})]})})}},2736:function(e,t,n){"use strict";var r=n(68328),a=n(58539),o=n(28301),i=n(25499),s=n(97428),c=n(22041),l=n(31204),d=n(53502),u=n(56815),h=n.n(u),m=n(40839),p=n.n(m),v=n(90660),f=n.n(v);t.Z=e=>{var t;let{doctor:n,buttonFunc:u}=e,m=(0,d.v9)(e=>e.doctors),v=null==m?void 0:null===(t=m.adminDoctors)||void 0===t?void 0:t.some(e=>(null==e?void 0:e.name)+e.designation===(null==n?void 0:n.name)+n.designation),g=(0,i.T)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"d-flex gap-3  ".concat(u?"justify-content-between":""," align-items-center ").concat(v?p().wrapper:""),children:[(0,r.jsx)(s.q,{src:null==n?void 0:n.image,radius:"xl"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Text,{className:"d-block",fw:600,size:"md",children:null==n?void 0:n.name}),(0,r.jsxs)(c.Text,{className:h().designation,children:[null==n?void 0:n.specialist," , ",null==n?void 0:n.designation," "]})]}),u&&(0,r.jsx)(l.Button,{disabled:v,onClick:async()=>{if(await u(n)){f().fire("Success","Doctor Added","success");let{success:e,data:t}=await (0,a.c)();e&&g((0,o.v1)(t.items))}else f().fire("Failed","Duplicate Doctor","error")},children:"Add"})]})})}},7602:function(e,t,n){"use strict";n.d(t,{A:function(){return g}});var r=n(68328),a=n(67961),o=n(91166),i=n(77303),s=n(76889),c=n(80745),l=n(87513),d=n(89822),u=n(4505),h=n(92597),m=n.n(h),p=n(49238),v=n(25499),f=n(81943);function g(e){let{error:t,setFieldValue:n,search:h,setSearch:g,setValueArray:x,optionsData:j,labelText:w="",withAsterisk:y=!1,emptyComponent:D,optionComponent:C,fieldName:S,placeholderText:A,propName:b,secondFieldName:N=!1,selectedId:_,setSelectedObj:B,disabled:T=!1,searchPropName:E,patientInfo:I=!1}=e,k=(0,v.T)(),F=(0,a.K)({onDropdownClose:()=>F.resetSelectedOption()}),[O,L]=(0,u.useState)(),[Z,P]=(0,u.useState)(!1),R=(null==j?void 0:j.every(e=>(null==e?void 0:e.name)!==h))?null==j?void 0:j.filter(e=>{var t;return null==e?void 0:null===(t=e["".concat(null!=E?E:"name")])||void 0===t?void 0:t.toLowerCase().includes(null==h?void 0:h.toLowerCase().trim())}):j,M=null==R?void 0:R.map(e=>(0,r.jsxs)(o.h.Option,{value:JSON.stringify(e),children:[C?C(e):null,(0,r.jsx)(i.Divider,{my:"sm"})]},e.id));return(0,u.useEffect)(()=>{if(_){let e=j.find(e=>e.id===_);e&&x&&"doctorId"===S&&x(e),g(null==e?void 0:e.name)}},[_,j,g,x,S]),(0,r.jsx)(s.MantineProvider,{children:(0,r.jsxs)(o.h,{store:F,withinPortal:!1,onOptionSubmit:e=>{P(!0),k((0,f.aE)([]));try{let t=JSON.parse(e);L(t),B&&(console.log("parsedObject",t),B(t),I&&n("name",null==t?void 0:t.name)),S&&"testId"===S?g(""):g(null==t?void 0:t["".concat(null!=E?E:"name")]),x&&x(e=>Array.isArray(e)?[...e,t]:t),n&&(b?n("".concat(S.split("|")[0]),t.propName):n("".concat(S.split("|")[0]),t.id))}catch(e){console.error("Error Parsing JSON")}F.closeDropdown()},children:[(0,r.jsx)(o.h.Target,{children:(0,r.jsx)(c.M,{classNames:m(),label:w,description:" ",withAsterisk:y,size:"md",radius:"md",error:t,name:"doctorId",disabled:T,variant:"filled",rightSection:null!==O?(0,r.jsx)(l.P,{size:"sm",onMouseDown:e=>e.preventDefault(),onClick:()=>{L({}),g("")},"aria-label":"Clear value"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p.Z,{})}),value:h,onChange:e=>{F.openDropdown(),F.updateSelectedOptionIndex();try{g(JSON.parse(e.currentTarget.value).name)}catch(t){g(e.currentTarget.value)}},onClick:()=>F.openDropdown(),onFocus:()=>F.openDropdown(),onBlur:()=>{var e,t,r;F.closeDropdown(),g(h),n&&(N&&!Z?n("".concat(S.split("|")[1]),null!==(e=null==O?void 0:O.name)&&void 0!==e?e:h):b?n("".concat(S.split("|")[0]),null!==(t=null==O?void 0:O.propName)&&void 0!==t?t:h):n("".concat(S.split("|")[0]),null!==(r=null==O?void 0:O.id)&&void 0!==r?r:h)),P(!1)},placeholder:A,rightSectionPointerEvents:null===O?"none":"all"})}),(0,r.jsx)(o.h.Dropdown,{children:(0,r.jsx)(o.h.Options,{children:(0,r.jsx)(d.x.Autosize,{type:"scroll",mah:500,children:(null==M?void 0:M.length)>0?M:(0,r.jsx)(o.h.Empty,{children:D||"Nothing found"})})})})]})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return a},Hn:function(){return r},y4:function(){return o}});let r={headers:{"Content-Type":"application/json"}},a={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},64366:function(e,t,n){"use strict";var r=n(4505);t.Z=()=>{let[e,t]=(0,r.useState)({width:void 0,height:void 0});return(0,r.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}},8260:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(72940),a=n(6780),o=n(67732);let i=async e=>{try{let t=await a.default.post("".concat("http://sasthotech.local:5000/api/v1","/admin/doctor"),e,{...r.FD,...r.y4});return{success:!0,data:t.data.data}}catch(e){if(e instanceof o.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}}},42604:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(72940),a=n(6780),o=n(67732);let i=async e=>{try{let t=await a.default.delete("".concat("http://sasthotech.local:5000/api/v1","/doctorchamber/").concat(e),r.FD);return{success:!0,data:t.data.data}}catch(e){if(e instanceof o.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}}},58539:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(49854),a=n(67732);let o=async(e,t,n)=>{try{let a=new URLSearchParams(Object.fromEntries(Object.entries({page:e,limit:t,search:n}).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,String(n)]}))),o="admin/doctor?".concat(a.toString()),i=await (0,r.d)(o);return{success:!0,data:i.data}}catch(e){if(e instanceof a.d7){var o;return{success:!1,data:null===(o=e.response)||void 0===o?void 0:o.data.message}}return{success:!1,data:"An error occurred"}}}},95325:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(49854),a=n(67732);let o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{let a=await (0,r.d)("doctor",{page:e,limit:t,search:n});return{success:!0,data:a.data}}catch(e){if(e instanceof a.d7){var o;return{success:!1,data:null===(o=e.response)||void 0===o?void 0:o.data.message}}return{success:!1,data:"An error occurred"}}}},66217:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(49854),a=n(67732);let o=async()=>{try{let e=await (0,r.d)("doctorChamber");return{success:!0,data:e.data}}catch(t){if(t instanceof a.d7){var e;return{success:!1,data:null===(e=t.response)||void 0===e?void 0:e.data.message}}return{success:!1,data:"An error occurred"}}}},81943:function(e,t,n){"use strict";n.d(t,{Im:function(){return a},aE:function(){return i},aT:function(){return s}});let r=(0,n(79258).createSlice)({name:"bills",initialState:{allBills:null,selectedBills:[],categories:[]},reducers:{setBills:(e,t)=>{e.allBills=t.payload},setCategories:(e,t)=>{e.categories=t.payload},setCommissions:(e,t)=>{e.categories=t.payload},removeBill:(e,t)=>{var n;e.allBills=null===(n=e.allBills)||void 0===n?void 0:n.filter(e=>e.id!==t.payload)},setSelectedBills:(e,t)=>{Array.isArray(t.payload)?e.selectedBills=[...e.selectedBills,...t.payload]:e.selectedBills=[...e.selectedBills,t.payload]},removeSelectedBill:(e,t)=>{var n;Array.isArray(t.payload)?e.selectedBills=[]:e.selectedBills=null===(n=e.selectedBills)||void 0===n?void 0:n.filter(e=>e.billId!==t.payload)}}}),{setBills:a,removeBill:o,setSelectedBills:i,removeSelectedBill:s,setCategories:c}=r.actions;t.ZP=r.reducer},28301:function(e,t,n){"use strict";let r;n.d(t,{At:function(){return j},F0:function(){return u},GO:function(){return h},cv:function(){return x},id:function(){return g},ox:function(){return f},pF:function(){return l},v1:function(){return p}});var a=n(79258),o=n(69192),i=n(28317);let s=new Intl.Collator;function c(){return r||(r=(0,i.MT)("doctor-frequency-store","doctor-frequency")),r}let l=(0,a.createAsyncThunk)("doctors/increaseDoctorFrequencies",async e=>(await Promise.resolve((0,i.Vx)(e,e=>(e||0)+1,c())).catch(),await (0,i.qh)(c()).catch(()=>[]))),d=(0,a.createSlice)({name:"doctors",initialState:{allDoctors:null,chamberedDoctors:null,adminDoctors:null,addedDoctors:[],paginatedAdminDoctors:null},reducers:{setAllDoctors:(e,t)=>{e.allDoctors=t.payload},setChamberedDoctors:(e,t)=>{e.chamberedDoctors=t.payload},setAdminDoctors:(e,t)=>{Array.isArray(t.payload)?e.adminDoctors=t.payload:e.adminDoctors?e.adminDoctors=[...e.adminDoctors,t.payload]:e.adminDoctors=t.payload},setPaginatedAdminDoctors:(e,t)=>{e.paginatedAdminDoctors=t.payload},setAddedDoctors:(e,t)=>{e.addedDoctors=[...e.addedDoctors,t.payload]},removeChamberedDoctor:(e,t)=>{e.addedDoctors=e.chamberedDoctors.filter(e=>e.Doctor.id!==t.payload)},removeAdminDoctor:(e,t)=>{var n,r;e.adminDoctors=null!==(r=null===(n=e.adminDoctors)||void 0===n?void 0:n.filter(e=>e.id!==t.payload))&&void 0!==r?r:null},removePaginatedAdminDoctor:(e,t)=>{var n,r;e.paginatedAdminDoctors=null!==(r=null===(n=e.paginatedAdminDoctors)||void 0===n?void 0:n.filter(e=>e.id!==t.payload))&&void 0!==r?r:null}},extraReducers:e=>{e.addCase(l.fulfilled,(e,t)=>{var n;let r=new Map(t.payload);null===(n=e.adminDoctors)||void 0===n||n.sort((e,t)=>{var n,a;return(null!==(n=r.get(t.id))&&void 0!==n?n:0)-(null!==(a=r.get(e.id))&&void 0!==a?a:0)||s.compare(e.name,t.name)})})}}),u=(0,o.createSelector)([e=>e.doctors,e=>{var t;return null===(t=e.auth.diagnostic)||void 0===t?void 0:t.showOnlyAdminDoctor}],(e,t)=>{let{adminDoctors:n,allDoctors:r,chamberedDoctors:a}=e,o=a?a.map(e=>e.Doctor):[],i=new Map;return[...n||[],...o&&!t?o:[],...r&&!t?r:[]].forEach(e=>{var t,n;let r=(null==e?void 0:null===(t=e.name)||void 0===t?void 0:t.trim())+(null==e?void 0:null===(n=e.designation)||void 0===n?void 0:n.trim());i.has(r)||i.set(r,e)}),Array.from(i.values())}),{setAllDoctors:h,setChamberedDoctors:m,setAdminDoctors:p,setAddedDoctors:v,removeChamberedDoctor:f,removeAdminDoctor:g,setPaginatedAdminDoctors:x,removePaginatedAdminDoctor:j}=d.actions;t.ZP=d.reducer},25499:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return a}});var r=n(53502);let a=()=>(0,r.I0)(),o=r.v9},49854:function(e,t,n){"use strict";let r;n.d(t,{d:function(){return l},x:function(){return c}});var a=n(72940),o=n(6780),i=n(67732),s=n(28317);function c(){return r||(r=(0,s.MT)("cached-responses-store","cached-responses")),r}async function l(e,t){try{let n=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...a.FD});return await (0,s.t8)(e,n.data,c()),n.data}catch(t){if(t instanceof i.d7&&[i.d7.ERR_NETWORK,i.d7.ETIMEDOUT].includes(t.code)){let t=await (0,s.U2)(e,c());if(t)return t}throw t instanceof i.d7&&t.response&&401===t.response.status||console.error(t),t}}},40839:function(e){e.exports={wrapper:"DoctorComboBoxOption_wrapper__3IL5N"}},56815:function(e){e.exports={container:"DoctorContainer_container___SgT1",highlight:"DoctorContainer_highlight__zZjVl",pagination:"DoctorContainer_pagination__6BY_I",designation:"DoctorContainer_designation__rwOlQ"}},2706:function(e){e.exports={Card:"doctorCard_Card__NLymI",cardImage:"doctorCard_cardImage__V1FV3"}},92597:function(e){e.exports={input:"CustomSelect_input__BQHd4",designation:"CustomSelect_designation__jgzum",wrapper:"CustomSelect_wrapper__sFYKN"}}}]);