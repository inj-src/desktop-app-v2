"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7647],{84153:function(l,e,t){var o=t(68328),i=t(89043),n=t(22041),d=t(41224),s=t(31204),r=t(9323),a=t(65850),u=t(42870),c=t(42116),h=t(4505);let v=(0,h.memo)(l=>{let{PDFTemplate:e}=l,[t,d]=(0,a.Eb)({document:(0,o.jsx)(e,{})});return((0,h.useEffect)(()=>{let l,i=0;return t.error&&(console.log("PDF ERROR: ",t.error),t.error&&i<3&&(l=setTimeout(()=>{console.log("Retrying PDF generation attempt ".concat(i+1,"/").concat(3)),d((0,o.jsx)(e,{})),i++},2e3))),()=>{l&&clearTimeout(l)}},[e,t.error,d]),t.loading)?(0,o.jsx)(i.X,{shadow:"xs",p:"xl",withBorder:!0,children:(0,o.jsx)(n.Text,{size:"lg",ta:"center",children:"Loading PDF..."})}):t.error?(0,o.jsx)(i.X,{shadow:"xs",p:"xl",withBorder:!0,bg:"red.1",children:(0,o.jsxs)(n.Text,{c:"red",size:"lg",ta:"center",children:["Error loading PDF. Attempting to reload...",JSON.stringify(t.error)]})}):(0,o.jsx)(x,{instance:t})});v.displayName="RenderReactPdfWithRetry";let x=(0,h.memo)(l=>{let{instance:e}=l,t=(0,r.a)("(max-width: 768px)");return e.url?t?(0,o.jsxs)(d.Stack,{align:"center",justify:"center",gap:"lg",p:"xl",h:"100%",children:[(0,o.jsx)(n.Text,{size:"lg",fw:500,ta:"center",c:"dimmed",children:"PDF preview is not available on mobile devices"}),(0,o.jsx)(s.Button,{component:"a",href:e.url,download:"document.pdf",leftSection:(0,o.jsx)(u.Z,{size:24}),children:"Download PDF"}),(0,o.jsx)(n.Text,{size:"sm",c:"dimmed",ta:"center",children:"Tap the button above to download and view the PDF"})]}):(0,o.jsx)("iframe",{src:e.url,width:"100%",height:"1000px",style:{border:"none"}}):null});x.displayName="PDFPreview",e.Z=(0,c.default)(()=>Promise.resolve(v),{ssr:!1})},25985:function(l,e,t){var o=t(68328),i=t(65850),n=t(6780),d=t(4505);let s=i.mM.create({wrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",zIndex:-1},watermark:{opacity:.08}});e.Z=l=>{let{diagnosticState:e,fallbackImageUrl:t="/images/demo-fallback-logo.png",timeoutDuration:r=5e3,pageSize:a="A4"}=l,[u,c]=(0,d.useState)(null),[h,v]=(0,d.useState)(!0),[x,y]=(0,d.useState)(!1),m=(null==e?void 0:e.logo)||(null==e?void 0:e.offlineLogo)||null;if((0,d.useEffect)(()=>{if(!m){y(!0),v(!1);return}v(!0),(async()=>{try{let l=await n.default.get(m,{timeout:r,responseType:"blob"}),e=await new Promise((e,t)=>{let o=new FileReader;o.onload=()=>e(o.result),o.onerror=t,o.readAsDataURL(l.data)});c(e),y(!1)}catch(l){y(!0)}finally{v(!1)}})()},[m,r]),h)return null;let b=x?t:u;if(!b)return null;let g=a.includes("A5");return(0,o.jsx)(i.G7,{fixed:!0,style:s.wrapper,children:(0,o.jsx)(i.Ee,{src:b,style:[s.watermark,{width:g?250:450,height:g?250:450}]})})}},57647:function(l,e,t){t.d(e,{y:function(){return T}});var o=t(68328),i=t(65850),n=t(97698),d=t(4505),s=t(84153),r=t(71149),a=t(78284),u=t(25499),c=t(88531),h=t(62471),v=t(62549),x=t(25985);i.Zx.register({family:"Roboto",fonts:[{src:"https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf",fontWeight:"normal"},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc9.ttf",fontWeight:"bold"}]}),i.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let y=i.mM.create({page:{padding:10,fontFamily:"Roboto",fontSize:10},header:{flexDirection:"row",marginBottom:10,borderBottomWidth:1,borderBottomColor:"#000000",paddingBottom:10},logo:{width:40,height:40,marginRight:10},hospitalInfo:{flexDirection:"column"},hospitalName:{fontSize:14,fontWeight:"bold"},hospitalDetails:{fontSize:9},patientInfo:{flexDirection:"row",borderTopWidth:1,borderTopColor:"#000000",paddingBottom:5,marginBottom:2,paddingTop:5,marginTop:5},leftColumn:{width:"50%"},rightColumn:{width:"50%"},sectionTitle:{fontSize:9,fontWeight:"bold",marginTop:3},normalText:{fontSize:9,marginBottom:2,fontWeight:"bold"},billTitle:{fontSize:12,fontWeight:"bold",textAlign:"center",marginVertical:5,paddingTop:5,borderTopWidth:1,borderTopColor:"#000000"},table:{display:"flex",width:"auto",borderStyle:"solid",borderWidth:1,borderColor:"#000",borderRightWidth:0,borderBottomWidth:0},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#000"},tableCol:{borderRightWidth:1,borderRightColor:"#000"},tableCell:{padding:3,fontSize:9},tableCellRight:{padding:3,fontSize:9,textAlign:"right"},totalRow:{flexDirection:"row",justifyContent:"flex-end",marginTop:5},totalLabel:{fontSize:9,fontWeight:"bold",marginRight:5},totalValue:{fontSize:9,fontWeight:"bold",width:80,textAlign:"right"},detailedBreakupTitle:{fontSize:12,fontWeight:"bold",textAlign:"center",marginVertical:10,paddingTop:5,marginTop:5,borderTopWidth:1,borderTopColor:"#000"},tableHeader:{backgroundColor:"#f0f0f0",fontWeight:"bold"},subtotalRow:{flexDirection:"row",justifyContent:"flex-end",paddingTop:3,paddingBottom:3,borderBottomWidth:1,borderBottomColor:"#000"},subtotalLabel:{fontSize:9,fontWeight:"bold",textAlign:"right",paddingRight:3},subtotalValue:{fontSize:9,fontWeight:"bold",textAlign:"right"},categoryHeader:{backgroundColor:"#f0f0f0",fontSize:9,fontWeight:"bold",padding:3,borderBottomWidth:1,borderBottomColor:"#000",borderRightWidth:1,borderRightColor:"#000"},footer:{position:"absolute",bottom:5,left:0,right:0,width:"100%",borderTopWidth:1,borderTopColor:"#e0e0e0",paddingTop:5},footerContent:{display:"flex",paddingHorizontal:5,flexDirection:"row",justifyContent:"space-between"},footerText:{fontSize:8,color:"#757575"}}),m=l=>{var e,t,d,s,r,a,u,h,m,b,g,j,f,p,C,w,S,R,G,D,T,B,M,N,W,A,F,L,I,P,z,k,Z,V,E,_,H,q,O,Y,K,U,X,J,Q,$,ll,le,lt,lo,li,ln,ld,ls,lr,la,lu,lc,lh,lv,lx,ly,lm,lb;let{bill:lg,beds:lj,provisionalBill:lf,diagnosticState:lp,pageSize:lC,isSummaryBill:lw,watermarkEnabled:lS=!0,manualBedDayCount:lR}=l,lG=(null!=lC?lC:"").includes("A5")?"A5":"A4",lD=lR&&lR>0;return(0,o.jsx)(i.BB,{children:(0,o.jsxs)(i.T3,{size:lG,style:y.page,children:[lS&&(0,o.jsx)(x.Z,{diagnosticState:lp,pageSize:lG}),(0,o.jsx)(v.default,{diagnosticState:lp}),(0,o.jsxs)(i.G7,{style:y.patientInfo,children:[(0,o.jsxs)(i.G7,{style:y.leftColumn,children:[(0,o.jsxs)(i.xv,{style:y.normalText,children:["Patient ID: ",null==lg?void 0:null===(e=lg.patient)||void 0===e?void 0:e.patientId]}),(0,o.jsxs)(i.xv,{style:y.normalText,children:["Name: ",null==lg?void 0:null===(t=lg.patient)||void 0===t?void 0:t.name," (",null==lg?void 0:null===(d=lg.patient)||void 0===d?void 0:d.gender,")"]}),(0,o.jsxs)(i.xv,{style:y.normalText,children:["Age: ",(null==lg?void 0:null===(s=lg.patient)||void 0===s?void 0:s.ageYear)?(null==lg?void 0:null===(r=lg.patient)||void 0===r?void 0:r.ageYear)+" Y":""," ",(null==lg?void 0:null===(a=lg.patient)||void 0===a?void 0:a.ageMonth)?(null==lg?void 0:null===(u=lg.patient)||void 0===u?void 0:u.ageMonth)+" M":""," ",(null==lg?void 0:null===(h=lg.patient)||void 0===h?void 0:h.ageDay)?(null==lg?void 0:null===(m=lg.patient)||void 0===m?void 0:m.ageDay)+" D":""]}),(0,o.jsxs)(i.xv,{style:y.normalText,children:["Address: ",null==lg?void 0:null===(b=lg.patient)||void 0===b?void 0:b.address," ",null!==($=null==lg?void 0:null===(g=lg.patient)||void 0===g?void 0:g.thana)&&void 0!==$?$:" "+(null==lg?void 0:null===(j=lg.patient)||void 0===j?void 0:j.thana)," ",null!==(ll=null==lg?void 0:null===(f=lg.patient)||void 0===f?void 0:f.district)&&void 0!==ll?ll:" "+(null==lg?void 0:null===(p=lg.patient)||void 0===p?void 0:p.district),", Contact No:"," ",null==lg?void 0:null===(C=lg.patient)||void 0===C?void 0:C.phone]}),((null==lg?void 0:lg.contactName)||(null==lg?void 0:lg.contactNumber))&&(0,o.jsx)(i.xv,{style:y.sectionTitle,children:"Contact Person Details"}),(null==lg?void 0:lg.contactName)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["Name: ",null==lg?void 0:lg.contactName," (",(null==lg?void 0:lg.contactRelation)?(null==lg?void 0:lg.contactRelation)+" of the patient":"",")"]}),(null==lg?void 0:lg.contactNumber)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["Phone: ",null==lg?void 0:lg.contactNumber]}),(null==lg?void 0:lg.discountReferrer)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["Discount Reference: ",null==lg?void 0:lg.discountReferrer.name]})]}),(0,o.jsxs)(i.G7,{style:y.rightColumn,children:[(0,o.jsxs)(i.xv,{style:y.normalText,children:["Bill ID : ",null==lg?void 0:lg.billId]}),(0,o.jsxs)(i.xv,{style:y.normalText,children:["Print Date: ",(0,n.Z)(new Date,"dd MMM yyyy hh:mm a")]}),(0,o.jsxs)(i.xv,{style:y.normalText,children:["Admission Date:",(0,n.Z)(new Date(null!==(le=null==lg?void 0:lg.createdAt)&&void 0!==le?le:""),"dd-MMM-yyyy hh:mm a")]}),(null==lg?void 0:lg.releasedDate)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["Discharge Date:"," ",(null==lg?void 0:lg.releasedDate)?(0,n.Z)(new Date(null==lg?void 0:lg.releasedDate),"dd-MMM-yyyy hh:mm a"):"Not Yet"]}),lj.length>0&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["Bed No(s): ",lj.map(l=>l.shortForm).join(", ")]})]})]}),((null==lg?void 0:null===(R=lg.operations)||void 0===R?void 0:null===(S=R[0])||void 0===S?void 0:null===(w=S.surgeon)||void 0===w?void 0:w.name)||(null==lg?void 0:lg.doctor)||(null==lg?void 0:lg.referredDoctor))&&(0,o.jsx)(i.xv,{style:y.sectionTitle,children:"Consulting Doctors:"}),(null==lg?void 0:null===(T=lg.operations)||void 0===T?void 0:null===(D=T[0])||void 0===D?void 0:null===(G=D.surgeon)||void 0===G?void 0:G.name)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["-Surgeon : ",null==lg?void 0:null===(N=lg.operations)||void 0===N?void 0:null===(M=N[0])||void 0===M?void 0:null===(B=M.surgeon)||void 0===B?void 0:B.name,"(",(null==lg?void 0:null===(F=lg.operations)||void 0===F?void 0:null===(A=F[0])||void 0===A?void 0:null===(W=A.surgeon)||void 0===W?void 0:W.designation)?null==lg?void 0:null===(P=lg.operations)||void 0===P?void 0:null===(I=P[0])||void 0===I?void 0:null===(L=I.surgeon)||void 0===L?void 0:L.designation:"",")"]}),(null==lg?void 0:lg.doctor)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["-Duty Doctor: ",null==lg?void 0:null===(z=lg.doctor)||void 0===z?void 0:z.name," (",(null==lg?void 0:null===(k=lg.doctor)||void 0===k?void 0:k.designation)?null==lg?void 0:null===(Z=lg.doctor)||void 0===Z?void 0:Z.designation:"",")"]}),(null==lg?void 0:lg.referredDoctor)&&(0,o.jsxs)(i.xv,{style:y.normalText,children:["-Referred Doctor: ",null==lg?void 0:null===(V=lg.referredDoctor)||void 0===V?void 0:V.name," (",(null==lg?void 0:null===(E=lg.referredDoctor)||void 0===E?void 0:E.designation)?null==lg?void 0:null===(_=lg.referredDoctor)||void 0===_?void 0:_.designation:"",")"]}),(0,o.jsx)(i.xv,{style:y.billTitle,children:"BILL SUMMARY"}),(0,o.jsxs)(i.G7,{style:y.table,children:[(0,o.jsxs)(i.G7,{style:[y.tableRow,y.tableHeader],children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:"SL"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"60%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:"Particulars"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"30%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:"Amount"})})]}),lf.map((l,e)=>{var t;return(0,o.jsxs)(i.G7,{style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:(e+1).toString().padStart(4,"0")})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"60%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:l.particulars})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"30%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:(null!==(t=l.amount)&&void 0!==t?t:0).toLocaleString()})})]},e)})]}),(0,o.jsxs)(i.G7,{style:y.totalRow,children:[(0,o.jsx)(i.xv,{style:y.totalLabel,children:"Total Bill Amount:"}),(0,o.jsx)(i.xv,{style:y.totalValue,children:(null!==(lt=null==lg?void 0:lg.totalAmount)&&void 0!==lt?lt:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:y.totalRow,children:[(0,o.jsx)(i.xv,{style:y.totalLabel,children:"Amount Payable:"}),(0,o.jsx)(i.xv,{style:y.totalValue,children:(null!==(lo=null==lg?void 0:lg.totalAmountWithDiscount)&&void 0!==lo?lo:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:y.totalRow,children:[(0,o.jsx)(i.xv,{style:y.totalLabel,children:"Amount Paid:"}),(0,o.jsx)(i.xv,{style:y.totalValue,children:(null!==(li=null==lg?void 0:lg.paidAmount)&&void 0!==li?li:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:y.totalRow,children:[(0,o.jsx)(i.xv,{style:y.totalLabel,children:"Due:"}),(0,o.jsx)(i.xv,{style:y.totalValue,children:((null!==(ln=null==lg?void 0:lg.totalAmountWithDiscount)&&void 0!==ln?ln:0)-(null!==(ld=null==lg?void 0:lg.paidAmount)&&void 0!==ld?ld:0)).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:[y.totalRow,{marginBottom:10}],children:[(0,o.jsx)(i.xv,{style:y.totalLabel,children:"Paid amount in words :"}),(0,o.jsxs)(i.xv,{style:[y.totalValue,{textTransform:"capitalize"}],children:[(0,c.V)(null!==(ls=null==lg?void 0:lg.paidAmount)&&void 0!==ls?ls:0)||"Zero"," Taka"]})]}),!1===lw&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.xv,{style:y.detailedBreakupTitle,children:"DETAILED BREAKDOWN"}),(0,o.jsxs)(i.G7,{style:y.table,children:[(0,o.jsxs)(i.G7,{wrap:!1,style:[y.tableRow,y.tableHeader],children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:"Date & Time"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:"Particulars"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:"Rate"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:"Units"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:"Amount"})})]}),(0,o.jsx)(i.G7,{wrap:!1,style:y.tableRow,children:(0,o.jsx)(i.G7,{style:[y.categoryHeader,{width:"100%"}],children:(0,o.jsx)(i.xv,{children:"Admission Fees"})})}),(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:(0,n.Z)(new Date(null!==(lr=null==lg?void 0:lg.admissionFee)&&void 0!==lr?lr:""),"dd MMM yyyy hh:mm a")})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:"Admission Fee"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:[y.tableCellRight],children:null==lg?void 0:lg.admissionFee.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:1})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:null==lg?void 0:lg.admissionFee.toFixed(2)})})]}),(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:y.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:[y.subtotalValue,{textAlign:"right"}],children:null==lg?void 0:lg.admissionFee.toFixed(2)})})]}),(null!==(la=null==lj?void 0:lj.length)&&void 0!==la?la:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:y.tableRow,children:(0,o.jsx)(i.G7,{style:[y.categoryHeader,{width:"100%"}],children:(0,o.jsxs)(i.xv,{children:["Room/Bed Charges ",lD?"(".concat(lR," Days)"):""]})})}),lj.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:"".concat(l.startDate," - ").concat(l.endDate)})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:l.shortForm})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:l.price.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsxs)(i.xv,{style:y.tableCellRight,children:[lD?lR:l.stays," days"]})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:lD?(l.price*lR).toFixed(2):(l.price*l.stays).toFixed(2)})})]},e)),(null!==(lu=null==lj?void 0:lj.length)&&void 0!==lu?lu:0)>0&&(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:y.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:y.subtotalValue,children:lD?(lj.reduce((l,e)=>l+e.price,0)*lR).toFixed(2):lj.reduce((l,e)=>l+e.price*e.stays,0).toFixed(2)})})]}),(null!==(lc=null==lg?void 0:null===(H=lg.services)||void 0===H?void 0:H.length)&&void 0!==lc?lc:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:y.tableRow,children:(0,o.jsx)(i.G7,{style:[y.categoryHeader,{width:"100%"}],children:(0,o.jsx)(i.xv,{children:"Service Charges"})})}),null==lg?void 0:lg.services.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:(0,n.Z)(new Date(l.createdAt),"dd MMM yyyy hh:mm a")})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:l.name})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:l.price.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:l.unit})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:(l.price*l.unit).toFixed(2)})})]},e)),(null!==(lh=null==lg?void 0:null===(q=lg.services)||void 0===q?void 0:q.length)&&void 0!==lh?lh:0)>0&&(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:y.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:y.subtotalValue,children:(null!==(lv=null==lg?void 0:null===(O=lg.services)||void 0===O?void 0:O.reduce((l,e)=>l+ +e.price*+e.unit-e.discount,0))&&void 0!==lv?lv:0).toFixed(2).toLocaleString()})})]}),(null!==(lx=null==lg?void 0:null===(Y=lg.inventoryItems)||void 0===Y?void 0:Y.length)&&void 0!==lx?lx:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:y.tableRow,children:(0,o.jsx)(i.G7,{style:[y.categoryHeader,{width:"100%"}],children:(0,o.jsx)(i.xv,{children:"Inventory Items"})})}),null==lg?void 0:null===(K=lg.inventoryItems)||void 0===K?void 0:K.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:l.createdAt?(0,n.Z)(new Date(l.createdAt),"dd MMM yyyy hh:mm a"):"-"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:l.name})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:(Number(l.unitCost)||0).toFixed(2)})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:Number(l.quantity)||0})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:((Number(l.unitCost)||0)*(Number(l.quantity)||0)).toFixed(2)})})]},e)),(null!==(ly=null==lg?void 0:null===(U=lg.inventoryItems)||void 0===U?void 0:U.length)&&void 0!==ly?ly:0)>0&&(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:y.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:y.subtotalValue,children:(null!==(lm=null==lg?void 0:null===(X=lg.inventoryItems)||void 0===X?void 0:X.reduce((l,e)=>l+(Number(e.unitCost)||0)*(Number(e.quantity)||0),0))&&void 0!==lm?lm:0).toFixed(2).toLocaleString()})})]}),(null!==(lb=null==lg?void 0:null===(J=lg.operations)||void 0===J?void 0:J.length)&&void 0!==lb?lb:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:y.tableRow,children:(0,o.jsx)(i.G7,{style:[y.categoryHeader,{width:"100%",fontSize:10}],children:(0,o.jsx)(i.xv,{children:"Operation Charges"})})}),null==lg?void 0:null===(Q=lg.operations)||void 0===Q?void 0:Q.map((l,e)=>{var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.G7,{wrap:!1,style:y.tableRow,children:(0,o.jsx)(i.G7,{style:[y.categoryHeader,{width:"100%"}],children:(0,o.jsxs)(i.xv,{children:[e+1," . ",null==l?void 0:l.name]})})}),null==l?void 0:null===(t=l.breakdownFees)||void 0===t?void 0:t.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:(0,n.Z)(new Date(l.createdAt),"dd MMM yyyy hh:mm a")})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:y.tableCell,children:l.name})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:l.amount.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:1})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:y.tableCellRight,children:l.amount.toFixed(2)})})]},e)),(0,o.jsxs)(i.G7,{wrap:!1,style:y.tableRow,children:[(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:y.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[y.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:y.subtotalValue,children:l.price.toFixed(2)})})]})]})})]})]}),(0,o.jsx)(i.G7,{fixed:!0,style:y.footer,children:(0,o.jsxs)(i.G7,{style:y.footerContent,children:[(0,o.jsx)(i.xv,{style:y.footerText,render:l=>{let{pageNumber:e,totalPages:t}=l;return"Page ".concat(e," of ").concat(t)}}),(0,o.jsx)(i.xv,{style:y.footerText,children:"Powered By Sasthotech"}),(0,o.jsx)(i.xv,{style:y.footerText,children:(0,n.Z)(new Date,"dd-MMM-yyyy hh:mm a")})]})})]})})},b=l=>{let{onShortFormReceived:e,booking:t}=l,o=(0,a.p)(t.bedId),i=(0,d.useRef)(!1),{price:s,duration:r}=(()=>{var l,e,o,i,n;let d=(null==t?void 0:t.discountType)==="amount"?null!==(l=t.discount)&&void 0!==l?l:0:Math.floor((null!==(e=t.price)&&void 0!==e?e:0)*(null!==(o=t.discount)&&void 0!==o?o:0)/100),s=(null!==(i=null==t?void 0:t.price)&&void 0!==i?i:0)-d;return{price:s,duration:Math.ceil((null!==(n=t.totalCost)&&void 0!==n?n:0)/(null!=s?s:0))}})();return(0,d.useEffect)(()=>{if(o&&!i.current&&"Not Selected"!==o){var l,d;i.current=!0,e({bedId:t.bedId,shortForm:o,price:s,stays:r,startDate:(0,n.Z)(new Date(null!==(l=null==t?void 0:t.startDate)&&void 0!==l?l:""),"dd MMM yyyy hh:mm:ss aa"),endDate:(null==t?void 0:t.endDate)?(0,n.Z)(new Date(null!==(d=null==t?void 0:t.endDate)&&void 0!==d?d:""),"dd MMM yyyy hh:mm:ss aa"):"*"})}},[o,e,t]),null};i.Zx.register({family:"Roboto",fonts:[{src:"https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf",fontWeight:"normal"},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc9.ttf",fontWeight:"bold"}]}),i.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let g=i.mM.create({page:{padding:10,fontFamily:"Roboto",fontSize:10},separator:{borderBottomWidth:1,borderBottomColor:"#000000",marginVertical:5},patientInfoContainer:{flexDirection:"row",marginBottom:5},leftColumn:{width:"50%",paddingRight:5},rightColumn:{width:"50%",paddingLeft:5},infoRow:{flexDirection:"row",marginBottom:2},label:{fontSize:9,fontWeight:"bold",marginRight:3},value:{fontSize:9},sectionTitle:{fontSize:11,fontWeight:"bold",textAlign:"center",marginVertical:4,backgroundColor:"#cfe2f3",padding:3,marginTop:5,borderRadius:2},table:{display:"flex",width:"auto",borderStyle:"solid",marginBottom:5},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#000"},tableHeader:{backgroundColor:"#efefef",fontWeight:"bold"},tableColLeft:{width:"50%",padding:3},tableColRight:{width:"50%",padding:3},tableCell:{fontSize:9},tableCellRight:{fontSize:9,textAlign:"right"},summaryContainer:{marginTop:5},summaryRow:{flexDirection:"row",padding:3},summaryLabel:{width:"70%",fontSize:9,textAlign:"right",paddingRight:5},summaryValue:{width:"30%",fontSize:9,textAlign:"right"},footer:{marginTop:26,borderTopWidth:1,borderTopColor:"#000",paddingTop:5},footerText:{fontSize:8,marginBottom:2},footerCenter:{fontSize:8,marginTop:3},bulletPoint:{fontSize:9,marginBottom:2}}),j=l=>{var e,t,d,s,r,a,u,h,y,m,b,j,f,p,C,w,S,R,G,D,T,B,M,N,W,A,F,L,I,P;let{bill:z,beds:k,provisionalBill:Z,diagnosticState:V,pageSize:E,watermarkEnabled:_=!0}=l,H=(null!=E?E:"").includes("A5")?"A5":"A4";return(0,o.jsx)(i.BB,{children:(0,o.jsxs)(i.T3,{size:H,style:g.page,children:[_&&(0,o.jsx)(x.Z,{diagnosticState:V,pageSize:H}),(0,o.jsx)(v.default,{diagnosticState:V}),(0,o.jsxs)(i.G7,{style:g.patientInfoContainer,children:[(0,o.jsxs)(i.G7,{style:g.leftColumn,children:[(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Name: ",null==z?void 0:null===(e=z.patient)||void 0===e?void 0:e.name]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Contact: ",null==z?void 0:null===(t=z.patient)||void 0===t?void 0:t.phone]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Gender: ",null==z?void 0:null===(d=z.patient)||void 0===d?void 0:d.gender]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Age: ",(null==z?void 0:null===(s=z.patient)||void 0===s?void 0:s.ageYear)?(null==z?void 0:null===(r=z.patient)||void 0===r?void 0:r.ageYear)+" Y":""," ",(null==z?void 0:null===(a=z.patient)||void 0===a?void 0:a.ageMonth)?(null==z?void 0:null===(u=z.patient)||void 0===u?void 0:u.ageMonth)+" M":""," ",(null==z?void 0:null===(h=z.patient)||void 0===h?void 0:h.ageDay)?(null==z?void 0:null===(y=z.patient)||void 0===y?void 0:y.ageDay)+" D":""]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Address: ",null==z?void 0:null===(m=z.patient)||void 0===m?void 0:m.address," ",(null==z?void 0:null===(b=z.patient)||void 0===b?void 0:b.thana)?(null==z?void 0:null===(j=z.patient)||void 0===j?void 0:j.thana)+", ":"",(null==z?void 0:null===(f=z.patient)||void 0===f?void 0:f.district)?null==z?void 0:null===(p=z.patient)||void 0===p?void 0:p.district:""]})}),(null==z?void 0:null===(C=z.discountReferrer)||void 0===C?void 0:C.name)&&(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Discount Reference: ",null==z?void 0:null===(w=z.discountReferrer)||void 0===w?void 0:w.name]})})]}),(0,o.jsxs)(i.G7,{style:g.rightColumn,children:[(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Patient Id: ",null==z?void 0:null===(S=z.patient)||void 0===S?void 0:S.patientId]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Bill Id: ",null==z?void 0:z.billId]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Admission Date:"," ",(null==z?void 0:z.createdAt)?(0,n.Z)(new Date(z.createdAt),"dd-MMM-yyyy hh:mm a"):""]})}),(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Released Date:"," ",(null==z?void 0:z.releasedDate)?(0,n.Z)(new Date(z.releasedDate),"dd-MMM-yyyy hh:mm a"):""]})}),k.length>0&&(0,o.jsx)(i.G7,{style:g.infoRow,children:(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Bed: ",k.map(l=>l.shortForm).join(", ")]})})]})]}),((null==z?void 0:z.doctor)||(null==z?void 0:z.referredDoctor))&&(0,o.jsxs)(i.G7,{style:{marginTop:5,marginBottom:5},children:[(0,o.jsx)(i.xv,{style:[g.bulletPoint,{fontWeight:"bold"}],children:"Consulting Doctors:"}),(null==z?void 0:z.doctor)&&(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Duty Doctor: ",null==z?void 0:null===(R=z.doctor)||void 0===R?void 0:R.name]}),(null==z?void 0:z.referredDoctor)&&(0,o.jsxs)(i.xv,{style:g.bulletPoint,children:["• Referred Doctor: ",null==z?void 0:null===(G=z.referredDoctor)||void 0===G?void 0:G.name,(null==z?void 0:null===(D=z.referredDoctor)||void 0===D?void 0:D.designation)&&" (".concat(null==z?void 0:null===(T=z.referredDoctor)||void 0===T?void 0:T.designation,")")]})]}),(0,o.jsx)(i.G7,{style:g.separator}),(0,o.jsx)(i.xv,{style:g.sectionTitle,children:"Bill Summary"}),(0,o.jsxs)(i.G7,{style:g.table,children:[(0,o.jsxs)(i.G7,{style:[g.tableRow,g.tableHeader],children:[(0,o.jsx)(i.G7,{style:g.tableColLeft,children:(0,o.jsx)(i.xv,{style:g.tableCell})}),(0,o.jsx)(i.G7,{style:g.tableColRight,children:(0,o.jsx)(i.xv,{style:g.tableCellRight,children:"Amount"})})]}),Z.map((l,e)=>{var t;return(0,o.jsxs)(i.G7,{style:g.tableRow,children:[(0,o.jsx)(i.G7,{style:g.tableColLeft,children:(0,o.jsx)(i.xv,{style:g.tableCell,children:l.particulars})}),(0,o.jsx)(i.G7,{style:g.tableColRight,children:(0,o.jsx)(i.xv,{style:g.tableCellRight,children:(null!==(t=l.amount)&&void 0!==t?t:0).toLocaleString()})})]},e)})]}),(0,o.jsxs)(i.G7,{style:g.summaryContainer,children:[(0,o.jsxs)(i.G7,{style:g.summaryRow,children:[(0,o.jsx)(i.xv,{style:g.summaryLabel,children:"Total Amount:"}),(0,o.jsx)(i.xv,{style:g.summaryValue,children:(null!==(M=null==z?void 0:z.totalAmount)&&void 0!==M?M:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:g.summaryRow,children:[(0,o.jsx)(i.xv,{style:g.summaryLabel,children:"Discount:"}),(0,o.jsx)(i.xv,{style:g.summaryValue,children:((null!==(N=null==z?void 0:z.totalAmount)&&void 0!==N?N:0)-(null!==(W=null==z?void 0:z.totalAmountWithDiscount)&&void 0!==W?W:0)).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:g.summaryRow,children:[(0,o.jsx)(i.xv,{style:g.summaryLabel,children:"Total Payable:"}),(0,o.jsx)(i.xv,{style:g.summaryValue,children:(null!==(A=null==z?void 0:z.totalAmountWithDiscount)&&void 0!==A?A:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:g.summaryRow,children:[(0,o.jsx)(i.xv,{style:g.summaryLabel,children:"Amount Paid:"}),(0,o.jsx)(i.xv,{style:g.summaryValue,children:(null!==(F=null==z?void 0:z.paidAmount)&&void 0!==F?F:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:g.summaryRow,children:[(0,o.jsx)(i.xv,{style:g.summaryLabel,children:"Due:"}),(0,o.jsx)(i.xv,{style:g.summaryValue,children:((null!==(L=null==z?void 0:z.totalAmountWithDiscount)&&void 0!==L?L:0)-(null!==(I=null==z?void 0:z.paidAmount)&&void 0!==I?I:0)).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:[g.summaryRow,{borderBottomWidth:0}],children:[(0,o.jsx)(i.xv,{style:g.summaryLabel,children:"Paid Amount in word:"}),(0,o.jsxs)(i.xv,{style:[g.summaryValue,{textTransform:"capitalize"}],children:[(0,c.V)(null!==(P=null==z?void 0:z.paidAmount)&&void 0!==P?P:0)||"Zero"," Taka"]})]})]}),(0,o.jsxs)(i.G7,{style:g.footer,children:[(0,o.jsxs)(i.xv,{style:g.footerText,children:["Print By: ",null==z?void 0:null===(B=z.user)||void 0===B?void 0:B.name]}),(0,o.jsx)(i.G7,{style:g.separator}),(0,o.jsxs)(i.xv,{style:g.footerCenter,children:["Printing time: ",(0,n.Z)(new Date,"dd/MM/yy, hh:mm a")]})]})]})})},f=l=>{let{onShortFormReceived:e,booking:t}=l,o=(0,a.p)(t.bedId),i=(0,d.useRef)(!1),{price:s,duration:r}=(()=>{var l,e,o,i,n;let d=(null==t?void 0:t.discountType)==="amount"?null!==(l=t.discount)&&void 0!==l?l:0:Math.floor((null!==(e=t.price)&&void 0!==e?e:0)*(null!==(o=t.discount)&&void 0!==o?o:0)/100),s=(null!==(i=null==t?void 0:t.price)&&void 0!==i?i:0)-d;return{price:s,duration:Math.ceil((null!==(n=t.totalCost)&&void 0!==n?n:0)/(null!=s?s:0))}})();return(0,d.useEffect)(()=>{if(o&&!i.current&&"Not Selected"!==o){var l,d;i.current=!0,e({bedId:t.bedId,shortForm:o,price:s,stays:r,startDate:(0,n.Z)(new Date(null!==(l=null==t?void 0:t.startDate)&&void 0!==l?l:""),"dd MMM yyyy hh:mm:ss aa"),endDate:(null==t?void 0:t.endDate)?(0,n.Z)(new Date(null!==(d=null==t?void 0:t.endDate)&&void 0!==d?d:""),"dd MMM yyyy hh:mm:ss aa"):"*"})}},[o,e,t]),null};i.Zx.register({family:"Roboto",fonts:[{src:"https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf",fontWeight:"normal"},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc9.ttf",fontWeight:"bold"}]}),i.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let p=i.mM.create({page:{padding:10,fontFamily:"Roboto",fontSize:10},separator:{borderBottomWidth:1,borderBottomColor:"#000000",marginVertical:5},patientInfoContainer:{flexDirection:"row",marginBottom:5},leftColumn:{width:"50%",paddingRight:5},rightColumn:{width:"50%",paddingLeft:5},infoRow:{flexDirection:"row",marginBottom:2},label:{fontSize:9,fontWeight:"bold",marginRight:3},value:{fontSize:9},sectionTitle:{fontSize:11,fontWeight:"bold",textAlign:"center",marginVertical:4,backgroundColor:"#cfe2f3",padding:3,marginTop:5,borderRadius:2},table:{display:"flex",width:"auto",borderStyle:"solid",marginBottom:5},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#000"},tableHeader:{backgroundColor:"#efefef",fontWeight:"bold"},tableColLeft:{width:"50%",padding:3},tableColRight:{width:"50%",padding:3},tableCell:{fontSize:9},tableCellRight:{fontSize:9,textAlign:"right"},summaryContainer:{marginTop:5},summaryRow:{flexDirection:"row",padding:3},summaryLabel:{width:"70%",fontSize:9,textAlign:"right",paddingRight:5},summaryValue:{width:"30%",fontSize:9,textAlign:"right"},footer:{marginTop:26,borderTopWidth:1,borderTopColor:"#000",paddingTop:5},footerText:{fontSize:8,marginBottom:2},footerCenter:{fontSize:8,marginTop:3},bulletPoint:{fontSize:9,marginBottom:2}}),C=l=>{var e,t,d,s,r,a,u,h,v,y,m,b,g,j,f,C,w,S,R,G,D,T,B,M,N,W,A,F;let{bill:L,beds:I,provisionalBill:P,diagnosticState:z,pageSize:k,headerHeight:Z,watermarkEnabled:V=!0}=l;console.log({headerHeight:Z});let E=(null!=k?k:"").includes("A5")?"A5":"A4";return(0,o.jsx)(i.BB,{children:(0,o.jsxs)(i.T3,{size:E,style:p.page,children:[V&&(0,o.jsx)(x.Z,{diagnosticState:z,pageSize:E}),(0,o.jsx)(i.G7,{style:{height:Z}}),(0,o.jsxs)(i.G7,{style:p.patientInfoContainer,children:[(0,o.jsxs)(i.G7,{style:p.leftColumn,children:[(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Name: ",null==L?void 0:null===(e=L.patient)||void 0===e?void 0:e.name]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Contact: ",null==L?void 0:null===(t=L.patient)||void 0===t?void 0:t.phone]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Gender: ",null==L?void 0:null===(d=L.patient)||void 0===d?void 0:d.gender]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Age: ",(null==L?void 0:null===(s=L.patient)||void 0===s?void 0:s.ageYear)?(null==L?void 0:null===(r=L.patient)||void 0===r?void 0:r.ageYear)+" Y":""," ",(null==L?void 0:null===(a=L.patient)||void 0===a?void 0:a.ageMonth)?(null==L?void 0:null===(u=L.patient)||void 0===u?void 0:u.ageMonth)+" M":""," ",(null==L?void 0:null===(h=L.patient)||void 0===h?void 0:h.ageDay)?(null==L?void 0:null===(v=L.patient)||void 0===v?void 0:v.ageDay)+" D":""]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Address: ",null==L?void 0:null===(y=L.patient)||void 0===y?void 0:y.address," ",(null==L?void 0:null===(m=L.patient)||void 0===m?void 0:m.thana)?(null==L?void 0:null===(b=L.patient)||void 0===b?void 0:b.thana)+", ":"",(null==L?void 0:null===(g=L.patient)||void 0===g?void 0:g.district)?null==L?void 0:null===(j=L.patient)||void 0===j?void 0:j.district:""]})}),(null==L?void 0:L.discountReferrer)&&(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Discount Reference: ",null==L?void 0:null===(f=L.discountReferrer)||void 0===f?void 0:f.name]})})]}),(0,o.jsxs)(i.G7,{style:p.rightColumn,children:[(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Patient Id: ",null==L?void 0:null===(C=L.patient)||void 0===C?void 0:C.patientId]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Bill Id: ",null==L?void 0:L.billId]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Admission Date:"," ",(null==L?void 0:L.createdAt)?(0,n.Z)(new Date(L.createdAt),"dd-MMM-yyyy hh:mm a"):""]})}),(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Released Date:"," ",(null==L?void 0:L.releasedDate)?(0,n.Z)(new Date(L.releasedDate),"dd-MMM-yyyy hh:mm a"):""]})}),I.length>0&&(0,o.jsx)(i.G7,{style:p.infoRow,children:(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Bed: ",I.map(l=>l.shortForm).join(", ")]})})]})]}),((null==L?void 0:L.doctor)||(null==L?void 0:L.referredDoctor))&&(0,o.jsxs)(i.G7,{style:{marginTop:5,marginBottom:5},children:[(0,o.jsx)(i.xv,{style:[p.bulletPoint,{fontWeight:"bold"}],children:"Consulting Doctors:"}),(null==L?void 0:L.doctor)&&(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Duty Doctor: ",null==L?void 0:null===(w=L.doctor)||void 0===w?void 0:w.name]}),(null==L?void 0:L.referredDoctor)&&(0,o.jsxs)(i.xv,{style:p.bulletPoint,children:["• Referred Doctor: ",null==L?void 0:null===(S=L.referredDoctor)||void 0===S?void 0:S.name,(null==L?void 0:null===(R=L.referredDoctor)||void 0===R?void 0:R.designation)&&" (".concat(null==L?void 0:null===(G=L.referredDoctor)||void 0===G?void 0:G.designation,")")]})]}),(0,o.jsx)(i.G7,{style:p.separator}),(0,o.jsx)(i.xv,{style:p.sectionTitle,children:"Bill Summary"}),(0,o.jsxs)(i.G7,{style:p.table,children:[(0,o.jsxs)(i.G7,{style:[p.tableRow,p.tableHeader],children:[(0,o.jsx)(i.G7,{style:p.tableColLeft,children:(0,o.jsx)(i.xv,{style:p.tableCell})}),(0,o.jsx)(i.G7,{style:p.tableColRight,children:(0,o.jsx)(i.xv,{style:p.tableCellRight,children:"Amount"})})]}),P.map((l,e)=>{var t;return(0,o.jsxs)(i.G7,{style:p.tableRow,children:[(0,o.jsx)(i.G7,{style:p.tableColLeft,children:(0,o.jsx)(i.xv,{style:p.tableCell,children:l.particulars})}),(0,o.jsx)(i.G7,{style:p.tableColRight,children:(0,o.jsx)(i.xv,{style:p.tableCellRight,children:(null!==(t=l.amount)&&void 0!==t?t:0).toLocaleString()})})]},e)})]}),(0,o.jsxs)(i.G7,{style:p.summaryContainer,children:[(0,o.jsxs)(i.G7,{style:p.summaryRow,children:[(0,o.jsx)(i.xv,{style:p.summaryLabel,children:"Total Amount:"}),(0,o.jsx)(i.xv,{style:p.summaryValue,children:(null!==(D=null==L?void 0:L.totalAmount)&&void 0!==D?D:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:p.summaryRow,children:[(0,o.jsx)(i.xv,{style:p.summaryLabel,children:"Discount:"}),(0,o.jsx)(i.xv,{style:p.summaryValue,children:((null!==(T=null==L?void 0:L.totalAmount)&&void 0!==T?T:0)-(null!==(B=null==L?void 0:L.totalAmountWithDiscount)&&void 0!==B?B:0)).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:p.summaryRow,children:[(0,o.jsx)(i.xv,{style:p.summaryLabel,children:"Total Payable:"}),(0,o.jsx)(i.xv,{style:p.summaryValue,children:(null!==(M=null==L?void 0:L.totalAmountWithDiscount)&&void 0!==M?M:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:p.summaryRow,children:[(0,o.jsx)(i.xv,{style:p.summaryLabel,children:"Amount Paid:"}),(0,o.jsx)(i.xv,{style:p.summaryValue,children:(null!==(N=null==L?void 0:L.paidAmount)&&void 0!==N?N:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:p.summaryRow,children:[(0,o.jsx)(i.xv,{style:p.summaryLabel,children:"Due:"}),(0,o.jsx)(i.xv,{style:p.summaryValue,children:((null!==(W=null==L?void 0:L.totalAmountWithDiscount)&&void 0!==W?W:0)-(null!==(A=null==L?void 0:L.paidAmount)&&void 0!==A?A:0)).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:[p.summaryRow,{borderBottomWidth:0}],children:[(0,o.jsx)(i.xv,{style:p.summaryLabel,children:"Paid Amount in word:"}),(0,o.jsxs)(i.xv,{style:[p.summaryValue,{textTransform:"capitalize"}],children:[(0,c.V)(null!==(F=null==L?void 0:L.paidAmount)&&void 0!==F?F:0)||"Zero"," Taka"]})]})]}),(0,o.jsxs)(i.G7,{style:p.footer,children:[(0,o.jsx)(i.xv,{style:p.footerText,children:"Print By: System"}),(0,o.jsx)(i.G7,{style:p.separator}),(0,o.jsxs)(i.xv,{style:p.footerCenter,children:["Printing time: ",(0,n.Z)(new Date,"dd/MM/yy, hh:mm a")]})]})]})})},w=l=>{let{onShortFormReceived:e,booking:t}=l,o=(0,a.p)(t.bedId),i=(0,d.useRef)(!1),{price:s,duration:r}=(()=>{var l,e,o,i,n;let d=(null==t?void 0:t.discountType)==="amount"?null!==(l=t.discount)&&void 0!==l?l:0:Math.floor((null!==(e=t.price)&&void 0!==e?e:0)*(null!==(o=t.discount)&&void 0!==o?o:0)/100),s=(null!==(i=null==t?void 0:t.price)&&void 0!==i?i:0)-d;return{price:s,duration:Math.ceil((null!==(n=t.totalCost)&&void 0!==n?n:0)/(null!=s?s:0))}})();return(0,d.useEffect)(()=>{if(o&&!i.current&&"Not Selected"!==o){var l,d;i.current=!0,e({bedId:t.bedId,shortForm:o,price:s,stays:r,startDate:(0,n.Z)(new Date(null!==(l=null==t?void 0:t.startDate)&&void 0!==l?l:""),"dd MMM yyyy hh:mm:ss aa"),endDate:(null==t?void 0:t.endDate)?(0,n.Z)(new Date(null!==(d=null==t?void 0:t.endDate)&&void 0!==d?d:""),"dd MMM yyyy hh:mm:ss aa"):"*"})}},[o,e,t]),null};i.Zx.register({family:"Roboto",fonts:[{src:"https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf",fontWeight:"normal"},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc9.ttf",fontWeight:"bold"}]}),i.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let S=i.mM.create({page:{padding:10,fontFamily:"Roboto",fontSize:10},header:{flexDirection:"row",marginBottom:10,borderBottomWidth:1,borderBottomColor:"#000000",paddingBottom:10},logo:{width:40,height:40,marginRight:10},hospitalInfo:{flexDirection:"column"},hospitalName:{fontSize:14,fontWeight:"bold"},hospitalDetails:{fontSize:9},patientInfo:{flexDirection:"row",borderTopWidth:1,borderTopColor:"#000000",paddingBottom:5,marginBottom:2,paddingTop:5,marginTop:5},leftColumn:{width:"50%"},rightColumn:{width:"50%"},sectionTitle:{fontSize:9,fontWeight:"bold",marginTop:3},normalText:{fontSize:9,marginBottom:2,fontWeight:"bold"},billTitle:{fontSize:12,fontWeight:"bold",textAlign:"center",marginVertical:5,paddingTop:5,borderTopWidth:1,borderTopColor:"#000000"},table:{display:"flex",width:"auto",borderStyle:"solid",borderWidth:1,borderColor:"#000",borderRightWidth:0,borderBottomWidth:0},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#000"},tableCol:{borderRightWidth:1,borderRightColor:"#000"},tableCell:{padding:3,fontSize:9},tableCellRight:{padding:3,fontSize:9,textAlign:"right"},totalRow:{flexDirection:"row",justifyContent:"flex-end",marginTop:5},totalLabel:{fontSize:9,fontWeight:"bold",marginRight:5},totalValue:{fontSize:9,fontWeight:"bold",width:80,textAlign:"right"},detailedBreakupTitle:{fontSize:12,fontWeight:"bold",textAlign:"center",marginVertical:10,paddingTop:5,marginTop:5,borderTopWidth:1,borderTopColor:"#000"},tableHeader:{backgroundColor:"#f0f0f0",fontWeight:"bold"},subtotalRow:{flexDirection:"row",justifyContent:"flex-end",paddingTop:3,paddingBottom:3,borderBottomWidth:1,borderBottomColor:"#000"},subtotalLabel:{fontSize:9,fontWeight:"bold",textAlign:"right",paddingRight:3},subtotalValue:{fontSize:9,fontWeight:"bold",textAlign:"right"},categoryHeader:{backgroundColor:"#f0f0f0",fontSize:9,fontWeight:"bold",padding:3,borderBottomWidth:1,borderBottomColor:"#000",borderRightWidth:1,borderRightColor:"#000"},footer:{position:"absolute",bottom:5,left:0,right:0,width:"100%",borderTopWidth:1,borderTopColor:"#e0e0e0",paddingTop:5},footerContent:{display:"flex",paddingHorizontal:5,flexDirection:"row",justifyContent:"space-between"},footerText:{fontSize:8,color:"#757575"}}),R=l=>{var e,t,d,s,r,a,u,h,y,m,b,g,j,f,p,C,w,R,G,D,T,B,M,N,W,A,F,L,I,P,z,k,Z,V,E,_,H,q,O,Y,K,U,X,J,Q,$,ll,le,lt,lo,li,ln,ld,ls,lr,la,lu,lc,lh,lv,lx,ly,lm,lb,lg;let{bill:lj,beds:lf,provisionalBill:lp,diagnosticState:lC,pageSize:lw,isSummaryBill:lS,watermarkEnabled:lR=!0,manualBedDayCount:lG}=l,lD=(null!=lw?lw:"").includes("A5")?"A5":"A4",lT=lG&&lG>0;return(0,o.jsx)(i.BB,{children:(0,o.jsxs)(i.T3,{size:lD,style:S.page,children:[lR&&(0,o.jsx)(x.Z,{diagnosticState:lC,pageSize:lD}),(0,o.jsx)(v.default,{diagnosticState:lC}),(0,o.jsxs)(i.G7,{style:S.patientInfo,children:[(0,o.jsxs)(i.G7,{style:S.leftColumn,children:[(0,o.jsxs)(i.xv,{style:S.normalText,children:["Patient ID: ",null==lj?void 0:null===(e=lj.patient)||void 0===e?void 0:e.patientId]}),(0,o.jsxs)(i.xv,{style:S.normalText,children:["Name: ",null==lj?void 0:null===(t=lj.patient)||void 0===t?void 0:t.name," (",null==lj?void 0:null===(d=lj.patient)||void 0===d?void 0:d.gender,")"]}),(0,o.jsxs)(i.xv,{style:S.normalText,children:["Age: ",(null==lj?void 0:null===(s=lj.patient)||void 0===s?void 0:s.ageYear)?(null==lj?void 0:null===(r=lj.patient)||void 0===r?void 0:r.ageYear)+" Y":""," ",(null==lj?void 0:null===(a=lj.patient)||void 0===a?void 0:a.ageMonth)?(null==lj?void 0:null===(u=lj.patient)||void 0===u?void 0:u.ageMonth)+" M":""," ",(null==lj?void 0:null===(h=lj.patient)||void 0===h?void 0:h.ageDay)?(null==lj?void 0:null===(y=lj.patient)||void 0===y?void 0:y.ageDay)+" D":""]}),(0,o.jsxs)(i.xv,{style:S.normalText,children:["Address: ",null==lj?void 0:null===(m=lj.patient)||void 0===m?void 0:m.address," ",null!==($=null==lj?void 0:null===(b=lj.patient)||void 0===b?void 0:b.thana)&&void 0!==$?$:" "+(null==lj?void 0:null===(g=lj.patient)||void 0===g?void 0:g.thana)," ",null!==(ll=null==lj?void 0:null===(j=lj.patient)||void 0===j?void 0:j.district)&&void 0!==ll?ll:" "+(null==lj?void 0:null===(f=lj.patient)||void 0===f?void 0:f.district),", Contact No:"," ",null==lj?void 0:null===(p=lj.patient)||void 0===p?void 0:p.phone]}),((null==lj?void 0:lj.contactName)||(null==lj?void 0:lj.contactNumber))&&(0,o.jsx)(i.xv,{style:S.sectionTitle,children:"Contact Person Details"}),(null==lj?void 0:lj.contactName)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["Name: ",null==lj?void 0:lj.contactName," (",(null==lj?void 0:lj.contactRelation)?(null==lj?void 0:lj.contactRelation)+" of the patient":"",")"]}),(null==lj?void 0:lj.contactNumber)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["Phone: ",null==lj?void 0:lj.contactNumber]}),(null==lj?void 0:lj.discountReferrer)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["Discount Reference: ",null==lj?void 0:lj.discountReferrer.name]})]}),(0,o.jsxs)(i.G7,{style:S.rightColumn,children:[(0,o.jsxs)(i.xv,{style:S.normalText,children:["Bill ID : ",null==lj?void 0:lj.billId]}),(0,o.jsxs)(i.xv,{style:S.normalText,children:["Print Date: ",(0,n.Z)(new Date,"dd MMM yyyy hh:mm a")]}),(0,o.jsxs)(i.xv,{style:S.normalText,children:["Admission Date:",(0,n.Z)(new Date(null!==(le=null==lj?void 0:lj.createdAt)&&void 0!==le?le:""),"dd-MMM-yyyy hh:mm a")]}),(null==lj?void 0:lj.releasedDate)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["Discharge Date:"," ",(null==lj?void 0:lj.releasedDate)?(0,n.Z)(new Date(null==lj?void 0:lj.releasedDate),"dd-MMM-yyyy hh:mm a"):"Not Yet"]}),lf.length>0&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["Bed No(s): ",lf.map(l=>l.shortForm).join(", ")]})]})]}),((null==lj?void 0:null===(R=lj.operations)||void 0===R?void 0:null===(w=R[0])||void 0===w?void 0:null===(C=w.surgeon)||void 0===C?void 0:C.name)||(null==lj?void 0:lj.doctor)||(null==lj?void 0:lj.referredDoctor))&&(0,o.jsx)(i.xv,{style:S.sectionTitle,children:"Consulting Doctors:"}),(null==lj?void 0:null===(T=lj.operations)||void 0===T?void 0:null===(D=T[0])||void 0===D?void 0:null===(G=D.surgeon)||void 0===G?void 0:G.name)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["-Surgeon : ",null==lj?void 0:null===(N=lj.operations)||void 0===N?void 0:null===(M=N[0])||void 0===M?void 0:null===(B=M.surgeon)||void 0===B?void 0:B.name,"(",(null==lj?void 0:null===(F=lj.operations)||void 0===F?void 0:null===(A=F[0])||void 0===A?void 0:null===(W=A.surgeon)||void 0===W?void 0:W.designation)?null==lj?void 0:null===(P=lj.operations)||void 0===P?void 0:null===(I=P[0])||void 0===I?void 0:null===(L=I.surgeon)||void 0===L?void 0:L.designation:"",")"]}),(null==lj?void 0:lj.doctor)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["-Duty Doctor: ",null==lj?void 0:null===(z=lj.doctor)||void 0===z?void 0:z.name," (",(null==lj?void 0:null===(k=lj.doctor)||void 0===k?void 0:k.designation)?null==lj?void 0:null===(Z=lj.doctor)||void 0===Z?void 0:Z.designation:"",")"]}),(null==lj?void 0:lj.referredDoctor)&&(0,o.jsxs)(i.xv,{style:S.normalText,children:["-Referred Doctor: ",null==lj?void 0:null===(V=lj.referredDoctor)||void 0===V?void 0:V.name," (",(null==lj?void 0:null===(E=lj.referredDoctor)||void 0===E?void 0:E.designation)?null==lj?void 0:null===(_=lj.referredDoctor)||void 0===_?void 0:_.designation:"",")"]}),(0,o.jsx)(i.xv,{style:S.billTitle,children:"BILL SUMMARY"}),(0,o.jsxs)(i.G7,{style:S.table,children:[(0,o.jsxs)(i.G7,{style:[S.tableRow,S.tableHeader],children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:"SL"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"60%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:"Particulars"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"30%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:"Amount"})})]}),lp.map((l,e)=>{var t;return(0,o.jsxs)(i.G7,{style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:(e+1).toString().padStart(4,"0")})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"60%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:l.particulars})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"30%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:(null!==(t=l.amount)&&void 0!==t?t:0).toLocaleString()})})]},e)})]}),(0,o.jsxs)(i.G7,{style:S.totalRow,children:[(0,o.jsx)(i.xv,{style:S.totalLabel,children:"Total Bill Amount:"}),(0,o.jsx)(i.xv,{style:S.totalValue,children:(null!==(lt=null==lj?void 0:lj.totalAmount)&&void 0!==lt?lt:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:S.totalRow,children:[(0,o.jsx)(i.xv,{style:S.totalLabel,children:"Amount Payable:"}),(0,o.jsx)(i.xv,{style:S.totalValue,children:(null!==(lo=null==lj?void 0:lj.totalAmountWithDiscount)&&void 0!==lo?lo:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:S.totalRow,children:[(0,o.jsx)(i.xv,{style:S.totalLabel,children:"Advance Fee:"}),(0,o.jsx)(i.xv,{style:S.totalValue,children:(null!==(li=null==lj?void 0:lj.advanceFee)&&void 0!==li?li:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:S.totalRow,children:[(0,o.jsx)(i.xv,{style:S.totalLabel,children:"Amount Paid:"}),(0,o.jsx)(i.xv,{style:S.totalValue,children:(null!==(ln=null==lj?void 0:lj.paidAmount)&&void 0!==ln?ln:0).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:S.totalRow,children:[(0,o.jsx)(i.xv,{style:S.totalLabel,children:"Due:"}),(0,o.jsx)(i.xv,{style:S.totalValue,children:((null!==(ld=null==lj?void 0:lj.totalAmountWithDiscount)&&void 0!==ld?ld:0)-(null!==(ls=null==lj?void 0:lj.paidAmount)&&void 0!==ls?ls:0)).toLocaleString()})]}),(0,o.jsxs)(i.G7,{style:[S.totalRow,{marginBottom:10}],children:[(0,o.jsx)(i.xv,{style:S.totalLabel,children:"Paid amount in words :"}),(0,o.jsxs)(i.xv,{style:[S.totalValue,{textTransform:"capitalize"}],children:[(0,c.V)(null!==(lr=null==lj?void 0:lj.paidAmount)&&void 0!==lr?lr:0)||"Zero"," Taka"]})]}),!1===lS&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.xv,{style:S.detailedBreakupTitle,children:"DETAILED BREAKDOWN"}),(0,o.jsxs)(i.G7,{style:S.table,children:[(0,o.jsxs)(i.G7,{wrap:!1,style:[S.tableRow,S.tableHeader],children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:"Date & Time"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:"Particulars"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:"Rate"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:"Units"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:"Amount"})})]}),(0,o.jsx)(i.G7,{wrap:!1,style:S.tableRow,children:(0,o.jsx)(i.G7,{style:[S.categoryHeader,{width:"100%"}],children:(0,o.jsx)(i.xv,{children:"Admission Fees"})})}),(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:(0,n.Z)(new Date(null!==(la=null==lj?void 0:lj.admissionFee)&&void 0!==la?la:""),"dd MMM yyyy hh:mm a")})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:"Admission Fee"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:[S.tableCellRight],children:null==lj?void 0:lj.admissionFee.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:1})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:null==lj?void 0:lj.admissionFee.toFixed(2)})})]}),(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:S.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:[S.subtotalValue,{textAlign:"right"}],children:null==lj?void 0:lj.admissionFee.toFixed(2)})})]}),(null!==(lu=null==lf?void 0:lf.length)&&void 0!==lu?lu:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:S.tableRow,children:(0,o.jsx)(i.G7,{style:[S.categoryHeader,{width:"100%"}],children:(0,o.jsxs)(i.xv,{children:["Room/Bed Charges ",lT?"(".concat(lG," Days)"):""]})})}),lf.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:"".concat(l.startDate," - ").concat(l.endDate)})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:l.shortForm})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:l.price.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsxs)(i.xv,{style:S.tableCellRight,children:[lT?lG:l.stays," days"]})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:lT?(l.price*lG).toFixed(2):(l.price*l.stays).toFixed(2)})})]},e)),(null!==(lc=null==lf?void 0:lf.length)&&void 0!==lc?lc:0)>0&&(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:S.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:S.subtotalValue,children:lT?(lf.reduce((l,e)=>l+e.price,0)*lG).toFixed(2):lf.reduce((l,e)=>l+e.price*e.stays,0).toFixed(2)})})]}),(null!==(lh=null==lj?void 0:null===(H=lj.services)||void 0===H?void 0:H.length)&&void 0!==lh?lh:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:S.tableRow,children:(0,o.jsx)(i.G7,{style:[S.categoryHeader,{width:"100%"}],children:(0,o.jsx)(i.xv,{children:"Service Charges"})})}),null==lj?void 0:lj.services.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:(0,n.Z)(new Date(l.createdAt),"dd MMM yyyy hh:mm a")})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:l.name})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:l.price.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:l.unit})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:(l.price*l.unit).toFixed(2)})})]},e)),(null!==(lv=null==lj?void 0:null===(q=lj.services)||void 0===q?void 0:q.length)&&void 0!==lv?lv:0)>0&&(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:S.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:S.subtotalValue,children:(null!==(lx=null==lj?void 0:null===(O=lj.services)||void 0===O?void 0:O.reduce((l,e)=>l+ +e.price*+e.unit-e.discount,0))&&void 0!==lx?lx:0).toFixed(2).toLocaleString()})})]}),(null!==(ly=null==lj?void 0:null===(Y=lj.inventoryItems)||void 0===Y?void 0:Y.length)&&void 0!==ly?ly:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:S.tableRow,children:(0,o.jsx)(i.G7,{style:[S.categoryHeader,{width:"100%"}],children:(0,o.jsx)(i.xv,{children:"Inventory Items"})})}),null==lj?void 0:null===(K=lj.inventoryItems)||void 0===K?void 0:K.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:l.createdAt?(0,n.Z)(new Date(l.createdAt),"dd MMM yyyy hh:mm a"):"-"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:l.name})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:(Number(l.unitCost)||0).toFixed(2)})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:Number(l.quantity)||0})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:((Number(l.unitCost)||0)*(Number(l.quantity)||0)).toFixed(2)})})]},e)),(null!==(lm=null==lj?void 0:null===(U=lj.inventoryItems)||void 0===U?void 0:U.length)&&void 0!==lm?lm:0)>0&&(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:S.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:S.subtotalValue,children:(null!==(lb=null==lj?void 0:null===(X=lj.inventoryItems)||void 0===X?void 0:X.reduce((l,e)=>l+(Number(e.unitCost)||0)*(Number(e.quantity)||0),0))&&void 0!==lb?lb:0).toFixed(2).toLocaleString()})})]}),(null!==(lg=null==lj?void 0:null===(J=lj.operations)||void 0===J?void 0:J.length)&&void 0!==lg?lg:0)>0&&(0,o.jsx)(i.G7,{wrap:!1,style:S.tableRow,children:(0,o.jsx)(i.G7,{style:[S.categoryHeader,{width:"100%",fontSize:10}],children:(0,o.jsx)(i.xv,{children:"Operation Charges"})})}),null==lj?void 0:null===(Q=lj.operations)||void 0===Q?void 0:Q.map((l,e)=>{var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.G7,{wrap:!1,style:S.tableRow,children:(0,o.jsx)(i.G7,{style:[S.categoryHeader,{width:"100%"}],children:(0,o.jsxs)(i.xv,{children:[e+1," . ",null==l?void 0:l.name]})})}),null==l?void 0:null===(t=l.breakdownFees)||void 0===t?void 0:t.map((l,e)=>(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"25%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:(0,n.Z)(new Date(l.createdAt),"dd MMM yyyy hh:mm a")})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"45%"}],children:(0,o.jsx)(i.xv,{style:S.tableCell,children:l.name})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:l.amount.toFixed(2)})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:1})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"10%"}],children:(0,o.jsx)(i.xv,{style:S.tableCellRight,children:l.amount.toFixed(2)})})]},e)),(0,o.jsxs)(i.G7,{wrap:!1,style:S.tableRow,children:[(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%",borderRightWidth:0}],children:(0,o.jsx)(i.xv,{style:S.subtotalLabel,children:"Subtotal:"})}),(0,o.jsx)(i.G7,{style:[S.tableCol,{width:"50%"}],children:(0,o.jsx)(i.xv,{style:S.subtotalValue,children:l.price.toFixed(2)})})]})]})})]})]}),(0,o.jsx)(i.G7,{fixed:!0,style:S.footer,children:(0,o.jsxs)(i.G7,{style:S.footerContent,children:[(0,o.jsx)(i.xv,{style:S.footerText,render:l=>{let{pageNumber:e,totalPages:t}=l;return"Page ".concat(e," of ").concat(t)}}),(0,o.jsx)(i.xv,{style:S.footerText,children:"Powered By Sasthotech"}),(0,o.jsx)(i.xv,{style:S.footerText,children:(0,n.Z)(new Date,"dd-MMM-yyyy hh:mm a")})]})})]})})},G=l=>{let{onShortFormReceived:e,booking:t}=l,o=(0,a.p)(t.bedId),i=(0,d.useRef)(!1),{price:s,duration:r}=(()=>{var l,e,o,i,n;let d=(null==t?void 0:t.discountType)==="amount"?null!==(l=t.discount)&&void 0!==l?l:0:Math.floor((null!==(e=t.price)&&void 0!==e?e:0)*(null!==(o=t.discount)&&void 0!==o?o:0)/100),s=(null!==(i=null==t?void 0:t.price)&&void 0!==i?i:0)-d;return{price:s,duration:Math.ceil((null!==(n=t.totalCost)&&void 0!==n?n:0)/(null!=s?s:0))}})();return(0,d.useEffect)(()=>{if(o&&!i.current&&"Not Selected"!==o){var l,d;i.current=!0,e({bedId:t.bedId,shortForm:o,price:s,stays:r,startDate:(0,n.Z)(new Date(null!==(l=null==t?void 0:t.startDate)&&void 0!==l?l:""),"dd MMM yyyy hh:mm:ss aa"),endDate:(null==t?void 0:t.endDate)?(0,n.Z)(new Date(null!==(d=null==t?void 0:t.endDate)&&void 0!==d?d:""),"dd MMM yyyy hh:mm:ss aa"):"*"})}},[o,e,t]),null},D="/images/billTemplates",T=[{id:1,name:"Template 1",Component:l=>{var e,t;let{bill:i,isSummaryBill:n}=l;console.log(i);let a=(0,u.C)(l=>l.auth.diagnostic),c=(0,r.q)(),[v,x]=(0,d.useState)({}),y=(0,h._)({key:"indoor-bill-print-page-size"}),[g,j]=(0,d.useState)(!1),f=(0,d.useCallback)((l,e)=>{x(t=>{var o;let n={...t,[l]:e};return(null==i?void 0:null===(o=i.bookings)||void 0===o?void 0:o.every(l=>n[l.bedId]))&&j(!0),n})},[null==i?void 0:i.bookings]),p=(0,d.useMemo)(()=>{var l;return(null==i?void 0:null===(l=i.bookings)||void 0===l?void 0:l.map(l=>v[l.bedId]).filter(Boolean))||[]},[null==i?void 0:i.bookings,v]),C=(0,d.useMemo)(()=>{var l,e,t,o,n,d;let s=null!==(o=null==i?void 0:null===(l=i.services)||void 0===l?void 0:l.reduce((l,e)=>l+ +e.price*+e.unit-e.discount,0))&&void 0!==o?o:0,r=null!==(n=null==i?void 0:null===(e=i.operations)||void 0===e?void 0:e.reduce((l,e)=>{var t;return l+(null!==(t=e.price)&&void 0!==t?t:0)},0))&&void 0!==n?n:0,a=null!==(d=null==i?void 0:null===(t=i.inventoryItems)||void 0===t?void 0:t.reduce((l,e)=>l+(Number(e.unitCost)||0)*(Number(e.quantity)||0),0))&&void 0!==d?d:0;return[...(null==p?void 0:p.length)>0?[{particulars:"Bed Charges",amount:(()=>{let l=null==i?void 0:i.manualBedDayCount;return l&&l>0?p.reduce((l,e)=>l+e.price,0)*l:p.reduce((l,e)=>l+e.price*e.stays,0)})()}]:[],{particulars:"Admission Fee",amount:null==i?void 0:i.admissionFee},...s>0?[{particulars:"Service Charges",amount:s}]:[],...a>0?[{particulars:"Inventory Items",amount:a}]:[],...r>0?[{particulars:"Operation Charges",amount:r}]:[]]},[null==i?void 0:i.admissionFee,null==i?void 0:i.operations,null==i?void 0:i.services,p,i]),w=(0,d.useCallback)(()=>(0,o.jsx)(m,{beds:p,bill:i,provisionalBill:C,diagnosticState:a,pageSize:y,isSummaryBill:n,watermarkEnabled:c,manualBedDayCount:null==i?void 0:i.manualBedDayCount}),[i,a,c,n,y,C,p]);return(0,o.jsxs)(o.Fragment,{children:[null==i?void 0:null===(e=i.bookings)||void 0===e?void 0:e.map(l=>(0,o.jsx)(b,{booking:l,onShortFormReceived:e=>f(l.bedId,e)},l.bedId)),(g||(null==i?void 0:null===(t=i.bookings)||void 0===t?void 0:t.length)===0)&&(0,o.jsx)(s.Z,{PDFTemplate:w})]})},description:"Bill Template 1",image:"".concat(D,"/bill-template-1.png")},{id:2,name:"Template 2",Component:l=>{var e,t;let{bill:i}=l,n=(0,u.C)(l=>l.auth.diagnostic),a=(0,r.q)(),[c,v]=(0,d.useState)({}),x=(0,h._)({key:"indoor-bill-print-page-size"}),[y,m]=(0,d.useState)(!1),b=(0,d.useCallback)((l,e)=>{v(t=>{var o;let n={...t,[l]:e};return(null==i?void 0:null===(o=i.bookings)||void 0===o?void 0:o.every(l=>n[l.bedId]))&&m(!0),n})},[null==i?void 0:i.bookings]),g=(0,d.useMemo)(()=>{var l;return(null==i?void 0:null===(l=i.bookings)||void 0===l?void 0:l.map(l=>c[l.bedId]).filter(Boolean))||[]},[null==i?void 0:i.bookings,c]),p=(0,d.useMemo)(()=>{var l,e,t,o;let n=null!==(t=null==i?void 0:null===(l=i.services)||void 0===l?void 0:l.reduce((l,e)=>l+ +e.price*+e.unit-e.discount,0))&&void 0!==t?t:0,d=null!==(o=null==i?void 0:null===(e=i.operations)||void 0===e?void 0:e.reduce((l,e)=>{var t;return l+(null!==(t=e.price)&&void 0!==t?t:0)},0))&&void 0!==o?o:0;return[{particulars:"Admission Fee",amount:null==i?void 0:i.admissionFee},...(null==g?void 0:g.length)>0?[{particulars:"Bed Charges",amount:(()=>{let l=null==i?void 0:i.manualBedDayCount;return l&&l>0?g.reduce((l,e)=>l+e.price,0)*l:g.reduce((l,e)=>l+e.price*e.stays,0)})()}]:[],...n>0?[{particulars:"Service Charges",amount:n}]:[],...d>0?[{particulars:"Operation Charges",amount:d}]:[]]},[null==i?void 0:i.admissionFee,null==i?void 0:i.operations,null==i?void 0:i.services,g]),C=(0,d.useCallback)(()=>(0,o.jsx)(j,{beds:g,bill:i,provisionalBill:p,diagnosticState:n,pageSize:x,watermarkEnabled:a}),[i,n,x,p,g,a]);return(0,o.jsxs)(o.Fragment,{children:[null==i?void 0:null===(e=i.bookings)||void 0===e?void 0:e.map(l=>(0,o.jsx)(f,{booking:l,onShortFormReceived:e=>b(l.bedId,e)},l.bedId)),(y||(null==i?void 0:null===(t=i.bookings)||void 0===t?void 0:t.length)===0)&&(0,o.jsx)(s.Z,{PDFTemplate:C})]})},description:"Bill Template 2",image:"".concat(D,"/bill-template-2.png")},{id:3,name:"Template 3",Component:l=>{var e,t;let{bill:i}=l,n=(0,u.C)(l=>l.auth.diagnostic),a=(0,r.q)(),[c,v]=(0,d.useState)({}),x=(0,h._)({key:"indoor-bill-print-page-size"}),y=(0,h._)({key:"indoor-bill-print-page-height",defaultValue:120}),[m,b]=(0,d.useState)(!1),g=(0,d.useCallback)((l,e)=>{v(t=>{var o;let n={...t,[l]:e};return(null==i?void 0:null===(o=i.bookings)||void 0===o?void 0:o.every(l=>n[l.bedId]))&&b(!0),n})},[null==i?void 0:i.bookings]),j=(0,d.useMemo)(()=>{var l;return(null==i?void 0:null===(l=i.bookings)||void 0===l?void 0:l.map(l=>c[l.bedId]).filter(Boolean))||[]},[null==i?void 0:i.bookings,c]),f=(0,d.useMemo)(()=>{var l,e,t,o;let n=null!==(t=null==i?void 0:null===(l=i.services)||void 0===l?void 0:l.reduce((l,e)=>l+ +e.price*+e.unit-e.discount,0))&&void 0!==t?t:0,d=null!==(o=null==i?void 0:null===(e=i.operations)||void 0===e?void 0:e.reduce((l,e)=>{var t;return l+(null!==(t=e.price)&&void 0!==t?t:0)},0))&&void 0!==o?o:0;return[{particulars:"Admission Fee",amount:null==i?void 0:i.admissionFee},...(null==j?void 0:j.length)>0?[{particulars:"Bed Charges",amount:(()=>{let l=null==i?void 0:i.manualBedDayCount;return l&&l>0?j.reduce((l,e)=>l+e.price,0)*l:j.reduce((l,e)=>l+e.price*e.stays,0)})()}]:[],...n>0?[{particulars:"Service Charges",amount:n}]:[],...d>0?[{particulars:"Operation Charges",amount:d}]:[]]},[null==i?void 0:i.admissionFee,null==i?void 0:i.operations,null==i?void 0:i.services,j]),p=(0,d.useCallback)(()=>(0,o.jsx)(C,{beds:j,bill:i,provisionalBill:f,diagnosticState:n,pageSize:x,headerHeight:y,watermarkEnabled:a}),[i,a,n,y,x,f,j]);return(0,o.jsxs)(o.Fragment,{children:[null==i?void 0:null===(e=i.bookings)||void 0===e?void 0:e.map(l=>(0,o.jsx)(w,{booking:l,onShortFormReceived:e=>g(l.bedId,e)},l.bedId)),(m||(null==i?void 0:null===(t=i.bookings)||void 0===t?void 0:t.length)===0)&&(0,o.jsx)(s.Z,{PDFTemplate:p})]})},description:"Bill Template 3",image:"".concat(D,"/bill-template-3.png")},{id:4,name:"Template 4",Component:l=>{var e,t;let{bill:i,isSummaryBill:n}=l;console.log(i);let a=(0,u.C)(l=>l.auth.diagnostic),c=(0,r.q)(),[v,x]=(0,d.useState)({}),y=(0,h._)({key:"indoor-bill-print-page-size"}),[m,b]=(0,d.useState)(!1),g=(0,d.useCallback)((l,e)=>{x(t=>{var o;let n={...t,[l]:e};return(null==i?void 0:null===(o=i.bookings)||void 0===o?void 0:o.every(l=>n[l.bedId]))&&b(!0),n})},[null==i?void 0:i.bookings]),j=(0,d.useMemo)(()=>{var l;return(null==i?void 0:null===(l=i.bookings)||void 0===l?void 0:l.map(l=>v[l.bedId]).filter(Boolean))||[]},[null==i?void 0:i.bookings,v]),f=(0,d.useMemo)(()=>{var l,e,t,o,n,d;let s=null!==(o=null==i?void 0:null===(l=i.operations)||void 0===l?void 0:l.reduce((l,e)=>{var t;return l+(null!==(t=e.price)&&void 0!==t?t:0)},0))&&void 0!==o?o:0,r=null!==(n=null==i?void 0:null===(e=i.inventoryItems)||void 0===e?void 0:e.reduce((l,e)=>l+(Number(e.unitCost)||0)*(Number(e.quantity)||0),0))&&void 0!==n?n:0,a=null!==(d=null==i?void 0:null===(t=i.services)||void 0===t?void 0:t.map(l=>({particulars:"".concat(l.name),amount:+l.price*+l.unit-l.discount})))&&void 0!==d?d:[];return[...(null==j?void 0:j.length)>0?[{particulars:"Bed Charges",amount:(()=>{let l=null==i?void 0:i.manualBedDayCount;return l&&l>0?j.reduce((l,e)=>l+e.price,0)*l:j.reduce((l,e)=>l+e.price*e.stays,0)})()}]:[],{particulars:"Admission Fee",amount:null==i?void 0:i.admissionFee},...a,...r>0?[{particulars:"Inventory Items",amount:r}]:[],...s>0?[{particulars:"Operation Charges",amount:s}]:[]]},[null==i?void 0:i.admissionFee,null==i?void 0:i.operations,null==i?void 0:i.services,j,i]),p=(0,d.useCallback)(()=>(0,o.jsx)(R,{beds:j,bill:i,provisionalBill:f,diagnosticState:a,pageSize:y,isSummaryBill:n,watermarkEnabled:c,manualBedDayCount:null==i?void 0:i.manualBedDayCount}),[i,a,c,n,y,f,j]);return(0,o.jsxs)(o.Fragment,{children:[null==i?void 0:null===(e=i.bookings)||void 0===e?void 0:e.map(l=>(0,o.jsx)(G,{booking:l,onShortFormReceived:e=>g(l.bedId,e)},l.bedId)),(m||(null==i?void 0:null===(t=i.bookings)||void 0===t?void 0:t.length)===0)&&(0,o.jsx)(s.Z,{PDFTemplate:p})]})},description:"Bill Template 4",image:"".concat(D,"/bill-template-4.png")}]}}]);