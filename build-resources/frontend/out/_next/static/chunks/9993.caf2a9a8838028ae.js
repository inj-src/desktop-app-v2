"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9993],{12764:function(e,t,n){function r(e,{fast:t=!1}={}){if(t)return e();"requestIdleCallback"in window?requestIdleCallback(e,{timeout:50}):setTimeout(e,1)}function o(){if(typeof navigator>"u")return!1;let e=navigator.userAgent||"",t=e.toLowerCase(),n=t.includes("safari")&&!t.includes("chrome")&&!t.includes("crios")&&!t.includes("fxios")&&!t.includes("android"),r=/applewebkit/i.test(e),o=/mobile/i.test(e),a=!/safari/i.test(e),i=/(micromessenger|wxwork|wecom|windowswechat|macwechat)/i.test(e),l=/(baiduboxapp|baidubrowser|baidusearch|baiduboxlite)/i.test(t),s=/ipad|iphone|ipod/.test(t)&&r;return n||r&&o&&a||i||l||s}n.d(t,{a:function(){return r},b:function(){return o}})},99993:function(e,t,n){n.d(t,{snapdom:function(){return ej}});var r={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,session:{styleMap:new Map,styleCache:new WeakMap,nodeMap:new Map}};function o(e){let t=e.match(/url\((['"]?)(.*?)(\1)\)/);if(!t)return null;let n=t[2].trim();return n.startsWith("#")?null:n}function a(e){if(/%[0-9A-Fa-f]{2}/.test(e))return e;try{return encodeURI(e)}catch{return e}}var i=function(e="[snapDOM]",{ttlMs:t=5*6e4,maxEntries:n=12}={}){let r=new Map,o=0;function a(a,i,l){if(o>=n)return;let s=Date.now();(r.get(i)||0)>s||(r.set(i,s+t),o++,"warn"===a&&console&&console.warn?console.warn(`${e} ${l}`):console&&console.error&&console.error(`${e} ${l}`))}return{warnOnce(e,t){a("warn",e,t)},errorOnce(e,t){a("error",e,t)},reset(){r.clear(),o=0}}}("[snapDOM]",{ttlMs:3*6e4,maxEntries:10}),l=new Map,s=new Map;function c(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(String(r.result||"")),r.onerror=()=>n(Error("read_failed")),r.readAsDataURL(e)})}async function u(e,t={}){var n;let r=t.as??"blob",o=t.timeout??3e3,u=t.useProxy||"",f=t.errorTTL??8e3,d=t.headers||{},m=!!t.silent;if(/^data:/i.test(e))try{if("text"===r)return{ok:!0,data:String(e),status:200,url:e,fromCache:!1};if("dataURL"===r)return{ok:!0,data:String(e),status:200,url:e,fromCache:!1,mime:String(e).slice(5).split(";")[0]||""};let[,t="",n=""]=String(e).match(/^data:([^,]*),(.*)$/)||[],o=/;base64/i.test(t)?atob(n):decodeURIComponent(n),a=new Uint8Array([...o].map(e=>e.charCodeAt(0))),i=new Blob([a],{type:(t||"").split(";")[0]||""});return{ok:!0,data:i,status:200,url:e,fromCache:!1,mime:i.type||""}}catch{return{ok:!1,data:null,status:0,url:e,fromCache:!1,reason:"special_url_error"}}if(/^blob:/i.test(e))try{let t=await fetch(e);if(!t.ok)return{ok:!1,data:null,status:t.status,url:e,fromCache:!1,reason:"http_error"};let n=await t.blob(),o=n.type||t.headers.get("content-type")||"";return"dataURL"===r?{ok:!0,data:await c(n),status:t.status,url:e,fromCache:!1,mime:o}:"text"===r?{ok:!0,data:await n.text(),status:t.status,url:e,fromCache:!1,mime:o}:{ok:!0,data:n,status:t.status,url:e,fromCache:!1,mime:o}}catch{return{ok:!1,data:null,status:0,url:e,fromCache:!1,reason:"network"}}if(/^about:blank$/i.test(e))return"dataURL"===r?{ok:!0,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",status:200,url:e,fromCache:!1,mime:"image/png"}:{ok:!0,data:"text"===r?"":new Blob([]),status:200,url:e,fromCache:!1};let h=[(n={as:r,timeout:o,useProxy:u,errorTTL:f}).as||"blob",n.timeout??3e3,n.useProxy||"",n.errorTTL??8e3,e].join("|"),p=s.get(h);if(p&&p.until>Date.now())return{...p.result,fromCache:!0};p&&s.delete(h);let g=l.get(h);if(g)return g;let y=!function(e,t){if(!t||/^data:|^blob:|^about:blank$/i.test(e)||function(e,t){try{let n="u">typeof location&&location.href?location.href:"http://localhost/",r=t.includes("{url}")?t.split("{url}")[0]:t,o=new URL(r||".",n),a=new URL(e,n);if(a.origin===o.origin)return!0;let i=a.searchParams;if(i&&(i.has("url")||i.has("target")))return!0}catch{}return!1}(e,t))return!1;try{let t="u">typeof location&&location.href?location.href:"http://localhost/",n=new URL(e,t);return!("u">typeof location)||n.origin!==location.origin}catch{return!!t}}(e,u)?e:function(e,t){if(!t)return e;if(t.includes("{url}"))return t.replace("{urlRaw}",a(e)).replace("{url}",encodeURIComponent(e));if(/[?&]url=?$/.test(t))return`${t}${encodeURIComponent(e)}`;if(t.endsWith("?"))return`${t}url=${encodeURIComponent(e)}`;if(t.endsWith("/"))return`${t}${a(e)}`;let n=t.includes("?")?"&":"?";return`${t}${n}url=${encodeURIComponent(e)}`}(e,u),w=t.credentials;if(!w)try{let t="u">typeof location&&location.href?location.href:"http://localhost/",n=new URL(e,t);w="u">typeof location&&n.origin===location.origin?"include":"omit"}catch{w="omit"}let b=new AbortController,x=setTimeout(()=>b.abort("timeout"),o),S=(async()=>{try{let n=await fetch(y,{signal:b.signal,credentials:w,headers:d});if(!n.ok){let o={ok:!1,data:null,status:n.status,url:y,fromCache:!1,reason:"http_error"};if(f>0&&s.set(h,{until:Date.now()+f,result:o}),!m){let t=`${n.status} ${n.statusText||""}`.trim();i.warnOnce(`http:${n.status}:${r}:${new URL(e,location?.href??"http://localhost/").origin}`,`HTTP error ${t} while fetching ${r} ${e}`)}return t.onError&&t.onError(o),o}if("text"===r)return{ok:!0,data:await n.text(),status:n.status,url:y,fromCache:!1};let o=await n.blob(),a=o.type||n.headers.get("content-type")||"";return"dataURL"===r?{ok:!0,data:await c(o),status:n.status,url:y,fromCache:!1,mime:a}:{ok:!0,data:o,status:n.status,url:y,fromCache:!1,mime:a}}catch(l){let n=l&&"object"==typeof l&&"name"in l&&"AbortError"===l.name?String(l.message||"").includes("timeout")?"timeout":"abort":"network",a={ok:!1,data:null,status:0,url:y,fromCache:!1,reason:n};if(!/^blob:/i.test(e)&&f>0&&s.set(h,{until:Date.now()+f,result:a}),!m){let t=`${n}:${r}:${new URL(e,location?.href??"http://localhost/").origin}`,a="timeout"===n?`Timeout after ${o}ms. Consider increasing timeout or using a proxy for ${e}`:"abort"===n?`Request aborted while fetching ${r} ${e}`:`Network/CORS issue while fetching ${r} ${e}. A proxy may be required`;i.errorOnce(t,a)}return t.onError&&t.onError(a),a}finally{clearTimeout(x),l.delete(h)}})();return l.set(h,S),S}async function f(e,t={}){if(/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(e)||"none"===e.trim())return e;let n=o(e);if(!n)return e;let i=a(n);if(r.background.has(i)){let e=r.background.get(i);return e?`url("${e}")`:"none"}try{let e=await u(i,{as:"dataURL",useProxy:t.useProxy});return e.ok?(r.background.set(i,e.data),`url("${e.data}")`):(r.background.set(i,null),"none")}catch{return r.background.set(i,null),"none"}}var d=new Set(["meta","script","noscript","title","link","template"]),m=new Set(["meta","link","style","title","noscript","script","template","g","defs","use","marker","mask","clipPath","pattern","path","polygon","polyline","line","circle","ellipse","rect","filter","lineargradient","radialgradient","stop"]),h=/(?:^|-)(animation|transition)(?:-|$)/i,p=/^(--|view-timeline|scroll-timeline|animation-trigger|offset-|position-try|app-region|interactivity|overlay|view-transition|-webkit-locale|-webkit-user-(?:drag|modify)|-webkit-tap-highlight-color|-webkit-text-security)$/i,g=new Set(["cursor","pointer-events","touch-action","user-select","print-color-adjust","speak","reading-flow","reading-order","anchor-name","anchor-scope","container-name","container-type","timeline-scope"]);function y(e){let t=String(e).toLowerCase();return!!(g.has(t)||p.test(t)||h.test(t))}function w(e,t){if(t=String(t||"").toLowerCase(),m.has(t))return"";let n=[],o=function(e){if(e=String(e).toLowerCase(),m.has(e)){let t={};return r.defaultStyle.set(e,t),t}if(r.defaultStyle.has(e))return r.defaultStyle.get(e);let t=document.getElementById("snapdom-sandbox");t||((t=document.createElement("div")).id="snapdom-sandbox",t.setAttribute("data-snapdom-sandbox","true"),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.width="0px",t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t));let n=document.createElement(e);n.style.all="initial",t.appendChild(n);let o=getComputedStyle(n),a={};for(let e of o){if(y(e))continue;let t=o.getPropertyValue(e);a[e]=t}return t.removeChild(n),r.defaultStyle.set(e,a),a}(t);for(let[t,r]of Object.entries(e)){if(y(t))continue;let e=o[t];r&&r!==e&&n.push(`${t}:${r}`)}return n.sort(),n.join(";")}function b(e,t=null){if(!(e instanceof Element))return window.getComputedStyle(e,t);let n=r.computedStyle.get(e);if(n||(n=new Map,r.computedStyle.set(e,n)),!n.has(t)){let r=window.getComputedStyle(e,t);n.set(t,r)}return n.get(t)}function x(e){let t={};for(let n of e)t[n]=e.getPropertyValue(n);return t}function S(e){let t=[],n=0,r=0;for(let o=0;o<e.length;o++){let a=e[o];"("===a&&n++,")"===a&&n--,","===a&&0===n&&(t.push(e.slice(r,o).trim()),r=o+1)}return t.push(e.slice(r).trim()),t}var C=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],M=Object.assign({materialIconsFilled:"https://fonts.gstatic.com/s/materialicons/v48/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2",materialIconsOutlined:"https://fonts.gstatic.com/s/materialiconsoutlined/v110/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2",materialIconsRound:"https://fonts.gstatic.com/s/materialiconsround/v109/LDItaoyNOAY6Uewc665JcIzCKsKc_M9flwmPq_HTTw.woff2",materialIconsSharp:"https://fonts.gstatic.com/s/materialiconssharp/v110/oPWQ_lt5nv4pWNJpghLP75WiFR4kLh3kvmvRImcycg.woff2"},"u">typeof window&&window.__SNAPDOM_ICON_FONTS__||{}),k=[];function v(e){let t="string"==typeof e?e:"";for(let e of[...C,...k])if(e instanceof RegExp&&e.test(t))return!0;return!!(/icon/i.test(t)||/glyph/i.test(t)||/symbols/i.test(t)||/feather/i.test(t)||/fontawesome/i.test(t))}var A=new Map;async function $(e,t,n){let r=String(e||""),o=r.toLowerCase(),a=String(t||"").toLowerCase();if(/\bmaterial\s*icons\b/.test(o)&&!/\bsymbols\b/.test(o)||!/\bmaterial\s*symbols\b/.test(o))return{familyForMeasure:r,familyForCanvas:r};let i=n&&(n.FILL??n.fill),l="outlined";/\brounded\b/.test(a)||/\bround\b/.test(a)?l="rounded":/\bsharp\b/.test(a)?l="sharp":/\boutlined\b/.test(a)&&(l="outlined");let s=null;if(1===i&&("outlined"===l&&M.materialIconsFilled?s={url:M.materialIconsFilled,alias:"snapdom-mi-filled"}:"rounded"===l&&M.materialIconsRound?s={url:M.materialIconsRound,alias:"snapdom-mi-round"}:"sharp"===l&&M.materialIconsSharp&&(s={url:M.materialIconsSharp,alias:"snapdom-mi-sharp"})),!s)return{familyForMeasure:r,familyForCanvas:r};if(!A.has(s.alias))try{let e=new FontFace(s.alias,`url(${s.url})`,{style:"normal",weight:"400"});document.fonts.add(e),await e.load(),A.set(s.alias,!0)}catch{return{familyForMeasure:r,familyForCanvas:r}}let c=`"${s.alias}"`;return{familyForMeasure:c,familyForCanvas:c}}async function E(e="Material Icons",t=24){try{await Promise.all([document.fonts.load(`400 ${t}px "${String(e).replace(/["']/g,"")}"`),document.fonts.ready])}catch{}}async function N(e,{family:t="Material Icons",weight:n="normal",fontSize:r=32,color:o="#000",variation:a="",className:i=""}={}){let l=String(t||"").replace(/^['"]+|['"]+$/g,""),s=window.devicePixelRatio||1,c=function(e=""){let t=Object.create(null),n=String(e||""),r=/['"]?\s*([A-Za-z]{3,4})\s*['"]?\s*([+-]?\d+(?:\.\d+)?)\s*/g,o;for(;o=r.exec(n);)t[o[1].toUpperCase()]=Number(o[2]);return t}(a),{familyForMeasure:u,familyForCanvas:f}=await $(l,i,c);await E(f.replace(/^["']+|["']+$/g,""),r);let d=document.createElement("span");d.textContent=e,d.style.position="absolute",d.style.visibility="hidden",d.style.left="-99999px",d.style.whiteSpace="nowrap",d.style.fontFamily=u,d.style.fontWeight=String(n||"normal"),d.style.fontSize=`${r}px`,d.style.lineHeight="1",d.style.margin="0",d.style.padding="0",d.style.fontFeatureSettings="'liga' 1",d.style.fontVariantLigatures="normal",d.style.color=o,document.body.appendChild(d);let m=d.getBoundingClientRect(),h=Math.max(1,Math.ceil(m.width)),p=Math.max(1,Math.ceil(m.height));document.body.removeChild(d);let g=document.createElement("canvas");g.width=h*s,g.height=p*s;let y=g.getContext("2d");y.scale(s,s),y.font=`${n?`${n} `:""}${r}px ${f}`,y.textAlign="left",y.textBaseline="top",y.fillStyle=o;try{y.fontKerning="normal"}catch{}return y.fillText(e,0,0),{dataUrl:g.toDataURL(),width:h,height:p}}async function F(e,t){if(!(e instanceof Element))return 0;let n='.material-icons, [class*="material-symbols"]',r=Array.from(e.querySelectorAll(n)).filter(e=>e&&e.textContent&&e.textContent.trim());if(0===r.length)return 0;let o=t instanceof Element?Array.from(t.querySelectorAll(n)).filter(e=>e&&e.textContent&&e.textContent.trim()):[],a=0;for(let e=0;e<r.length;e++){let t=r[e],n=o[e]||null;try{let e=getComputedStyle(n||t),r=e.fontFamily||"Material Icons";if(!function(e=""){let t=String(e).toLowerCase();return/\bmaterial\s*icons\b/.test(t)||/\bmaterial\s*symbols\b/.test(t)}(r))continue;let o=(n||t).textContent.trim();if(!o)continue;let i=parseInt(e.fontSize,10)||24,l=e.fontWeight&&"normal"!==e.fontWeight?e.fontWeight:"normal",s=function(e){let t=e.getPropertyValue("-webkit-text-fill-color")?.trim()||"",n=/^transparent$/i.test(t)||/rgba?\(\s*0\s*,\s*0\s*,\s*0\s*,\s*0\s*\)/i.test(t);if(t&&!n&&"currentcolor"!==t.toLowerCase())return t;let r=e.color?.trim();return r&&"inherit"!==r?r:"#000"}(e),c=e.fontVariationSettings&&"normal"!==e.fontVariationSettings?e.fontVariationSettings:"",u=(n||t).className||"",{dataUrl:f,width:d,height:m}=await N(o,{family:r,weight:l,fontSize:i,color:s,variation:c,className:u});t.textContent="";let h=t.ownerDocument.createElement("img");h.src=f,h.alt=o,h.style.height=`${i}px`,h.style.width=`${Math.max(1,Math.round(d/m*i))}px`,h.style.objectFit="contain",h.style.verticalAlign=getComputedStyle(t).verticalAlign||"baseline",t.appendChild(h),a++}catch{}}return a}async function L(e,t,n,r=32,o="#000"){t=t.replace(/^['"]+|['"]+$/g,"");let a=window.devicePixelRatio||1;try{await document.fonts.ready}catch{}let i=document.createElement("span");i.textContent=e,i.style.position="absolute",i.style.visibility="hidden",i.style.fontFamily=`"${t}"`,i.style.fontWeight=n||"normal",i.style.fontSize=`${r}px`,i.style.lineHeight="1",i.style.whiteSpace="nowrap",i.style.padding="0",i.style.margin="0",document.body.appendChild(i);let l=i.getBoundingClientRect(),s=Math.ceil(l.width),c=Math.ceil(l.height);document.body.removeChild(i);let u=document.createElement("canvas");u.width=Math.max(1,s*a),u.height=Math.max(1,c*a);let f=u.getContext("2d");return f.scale(a,a),f.font=n?`${n} ${r}px "${t}"`:`${r}px "${t}"`,f.textAlign="left",f.textBaseline="top",f.fillStyle=o,f.fillText(e,0,0),{dataUrl:u.toDataURL(),width:s,height:c}}var P=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function R(e){if(!e)return"";for(let t of e.split(",")){let e=t.trim().replace(/^['"]+|['"]+$/g,"");if(e&&!P.has(e.toLowerCase()))return e}return""}function T(e){let t=String(e??"400").trim().toLowerCase();if("normal"===t)return 400;if("bold"===t)return 700;let n=parseInt(t,10);return Number.isFinite(n)?Math.min(900,Math.max(100,n)):400}function I(e){let t=String(e??"normal").trim().toLowerCase();return t.startsWith("italic")?"italic":t.startsWith("oblique")?"oblique":"normal"}function W(e,t){return e&&e.replace(/url\(\s*(['"]?)([^)'"]+)\1\s*\)/g,(e,n,r)=>{let o=(r||"").trim();if(!o||/^data:|^blob:|^https?:|^file:|^about:/i.test(o))return e;let a=o;try{a=new URL(o,t||location.href).href}catch{}return`url("${a}")`})}var _=/@import\s+(?:url\(\s*(['"]?)([^)"']+)\1\s*\)|(['"])([^"']+)\3)([^;]*);/g;async function O(e,t,n){if(!e)return e;let r=new Set;async function o(e,t,a=0){if(a>4)return console.warn(`[snapDOM] @import depth exceeded (4) at ${t}`),e;let i="",l=0,s;for(;s=_.exec(e);){i+=e.slice(l,s.index),l=_.lastIndex;let c=function(e,t){try{return new URL(e,t||location.href).href}catch{return e}}((s[2]||s[4]||"").trim(),t);if(r.has(c)){console.warn(`[snapDOM] Skipping circular @import: ${c}`);continue}r.add(c);let f="";try{let e=await u(c,{as:"text",useProxy:n,silent:!0});e.ok&&"string"==typeof e.data&&(f=e.data)}catch{}f?(f=W(f,c),f=await o(f,c,a+1),i+=`
/* inlined: ${c} */
${f}
`):i+=s[0]}return i+e.slice(l)}let a=W(e,t||location.href);return await o(a,t||location.href,0)}var q=/url\((["']?)([^"')]+)\1\)/g,U=/@font-face[^{}]*\{[^}]*\}/g;function D(e){if(!e)return[];let t=[];for(let n of e.split(",").map(e=>e.trim()).filter(Boolean)){let e=n.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!e)continue;let r=e[1],o=e[2],a=e=>e.includes("?")?[parseInt(e.replace(/\?/g,"0"),16),parseInt(e.replace(/\?/g,"F"),16)]:parseInt(e,16);if(o){let e=a(r),n=a(o),i=Array.isArray(e)?e[0]:e,l=Array.isArray(n)?n[1]:n;t.push([Math.min(i,l),Math.max(i,l)])}else{let e=a(r);Array.isArray(e)?t.push([e[0],e[1]]):t.push([e,e])}}return t}function j(e,t){if(!t.length||!e||0===e.size)return!0;for(let n of e)for(let[e,r]of t)if(n>=e&&n<=r)return!0;return!1}function H(e,t){let n=[];if(!e)return n;for(let r of e.matchAll(q)){let e=(r[2]||"").trim();if(!(!e||e.startsWith("data:"))){if(!/^https?:/i.test(e))try{e=new URL(e,t||location.href).href}catch{}n.push(e)}}return n}async function z(e,t,n=""){let a=e;for(let i of e.matchAll(q)){let e=o(i[0]);if(!e)continue;let l=e;if(!l.startsWith("http")&&!l.startsWith("data:"))try{l=new URL(l,t||location.href).href}catch{}if(!v(l)){if(r.resource?.has(l)){r.font?.add(l),a=a.replace(i[0],`url(${r.resource.get(l)})`);continue}if(!r.font?.has(l))try{let e=await u(l,{as:"dataURL",useProxy:n,silent:!0});if(e.ok&&"string"==typeof e.data){let t=e.data;r.resource?.set(l,t),r.font?.add(l),a=a.replace(i[0],`url(${t})`)}}catch{console.warn("[snapDOM] Failed to fetch font resource:",l)}}}return a}function B(e={}){let t=new Set((e.families||[]).map(e=>String(e).toLowerCase())),n=new Set((e.domains||[]).map(e=>String(e).toLowerCase())),r=new Set((e.subsets||[]).map(e=>String(e).toLowerCase()));return(e,o)=>{if(t.size&&t.has(e.family.toLowerCase()))return!0;if(n.size)for(let t of e.srcUrls)try{if(n.has(new URL(t).host.toLowerCase()))return!0}catch{}if(r.size){let e=function(e){if(!e.length)return null;let t=(t,n)=>e.some(([e,r])=>!(r<t||e>n)),n=t(0,255)||t(305,305),r=t(256,591)||t(7680,7935),o=t(880,1023),a=t(1024,1279);return t(7840,7929)||t(258,259)||t(416,417)||t(431,432)?"vietnamese":a?"cyrillic":o?"greek":r?"latin-ext":n?"latin":null}(o);if(e&&r.has(e))return!0}return!1}}async function V(e,t,n,r){let o;try{o=e.cssRules||[]}catch{return}let a=(e,t)=>{try{return new URL(e,t||location.href).href}catch{return e}};for(let e of o){if(e.type===CSSRule.IMPORT_RULE&&e.styleSheet){let o=e.href?a(e.href,t):t;if(r.depth>=4){console.warn(`[snapDOM] CSSOM import depth exceeded (4) at ${o}`);continue}if(o&&r.visitedSheets.has(o)){console.warn(`[snapDOM] Skipping circular CSSOM import: ${o}`);continue}o&&r.visitedSheets.add(o);let i={...r,depth:(r.depth||0)+1};await V(e.styleSheet,o,n,i);continue}if(e.type===CSSRule.FONT_FACE_RULE){let o=R((e.style.getPropertyValue("font-family")||"").trim());if(!o||v(o))continue;let a=(e.style.getPropertyValue("font-weight")||"400").trim(),i=(e.style.getPropertyValue("font-style")||"normal").trim(),l=(e.style.getPropertyValue("font-stretch")||"100%").trim(),s=(e.style.getPropertyValue("src")||"").trim(),c=(e.style.getPropertyValue("unicode-range")||"").trim();if(!r.faceMatchesRequired(o,i,a,l))continue;let u=D(c);if(!j(r.usedCodepoints,u))continue;let f={family:o,weightSpec:a,styleSpec:i,stretchSpec:l,unicodeRange:c,srcRaw:s,srcUrls:H(s,t||location.href),href:t||location.href};if(r.simpleExcluder&&r.simpleExcluder(f,u))continue;if(/url\(/i.test(s)){let e=await z(s,t||location.href,r.useProxy);await n(`@font-face{font-family:${o};src:${e};font-style:${i};font-weight:${a};font-stretch:${l};${c?`unicode-range:${c};`:""}}`)}else await n(`@font-face{font-family:${o};src:${s};font-style:${i};font-weight:${a};font-stretch:${l};${c?`unicode-range:${c};`:""}}`)}}}async function X({required:e,usedCodepoints:t,exclude:n,localFonts:o=[],useProxy:a=""}={}){let i,l,s;e instanceof Set||(e=new Set),t instanceof Set||(t=new Set);let c=new Map;for(let t of e){let[e,n,r,o]=String(t).split("__");if(!e)continue;let a=c.get(e)||[];a.push({w:parseInt(n,10),s:r,st:parseInt(o,10)}),c.set(e,a)}function f(e,t,n,r){let o;if(!c.has(e))return!1;let a=c.get(e),i=function(e){let t=String(e||"400").trim(),n=t.match(/^(\d{2,3})\s+(\d{2,3})$/);if(n){let e=T(n[1]),t=T(n[2]);return{min:Math.min(e,t),max:Math.max(e,t)}}let r=T(t);return{min:r,max:r}}(n),l="italic"===(o=String(t||"normal").trim().toLowerCase())?{kind:"italic"}:o.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"},s=function(e){let t=String(e||"100%").trim(),n=t.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(n){let e=parseFloat(n[1]),t=parseFloat(n[2]);return{min:Math.min(e,t),max:Math.max(e,t)}}let r=t.match(/(\d+(?:\.\d+)?)\s*%/),o=r?parseFloat(r[1]):100;return{min:o,max:o}}(r),u=i.min!==i.max,f=i.min,d=e=>"normal"===l.kind&&"normal"===e||"normal"!==l.kind&&("italic"===e||"oblique"===e),m=!1;for(let e of a){let t=u?e.w>=i.min&&e.w<=i.max:e.w===f,n=d(I(e.s)),r=e.st>=s.min&&e.st<=s.max;if(t&&n&&r){m=!0;break}}if(m)return!0;if(!u)for(let e of a){let t=d(I(e.s)),n=e.st>=s.min&&e.st<=s.max;if(300>=Math.abs(f-e.w)&&t&&n)return!0}if(!u&&"normal"===l.kind&&a.some(e=>"normal"!==I(e.s)))for(let e of a){let t=300>=Math.abs(f-e.w),n=e.st>=s.min&&e.st<=s.max;if(t&&n)return!0}return!1}let d=B(n),m=(i=Array.from(e||[]).sort().join("|"),l=n?JSON.stringify({families:(n.families||[]).map(e=>String(e).toLowerCase()).sort(),domains:(n.domains||[]).map(e=>String(e).toLowerCase()).sort(),subsets:(n.subsets||[]).map(e=>String(e).toLowerCase()).sort()}):"",s=(o||[]).map(e=>`${(e.family||"").toLowerCase()}::${e.weight||"normal"}::${e.style||"normal"}::${e.src||""}`).sort().join("|"),`fonts-embed-css::req=${i}::ex=${l}::lf=${s}::px=${a||""}`);if(r.resource?.has(m))return r.resource.get(m);let h=function(e){let t=new Set;for(let n of e||[]){let e=String(n).split("__")[0]?.trim();e&&t.add(e)}return t}(e),p=[];for(let e of document.querySelectorAll("style"))for(let t of(e.textContent||"").matchAll(_)){let e=(t[2]||t[4]||"").trim();!(!e||v(e))&&(document.querySelector(`link[rel="stylesheet"][href="${e}"]`)||p.push(e))}p.length&&await Promise.all(p.map(e=>new Promise(t=>{if(document.querySelector(`link[rel="stylesheet"][href="${e}"]`))return t(null);let n=document.createElement("link");n.rel="stylesheet",n.href=e,n.setAttribute("data-snapdom","injected-import"),n.onload=()=>t(n),n.onerror=()=>t(null),document.head.appendChild(n)})));let g="",y=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(e=>!!e.href);for(let e of y)try{if(v(e.href))continue;let r="",o=!1;try{o=new URL(e.href,location.href).origin===location.origin}catch{}if(!o&&!function(e,t){if(!e)return!1;try{let n=new URL(e,location.href);if(n.origin===location.origin)return!0;let r=n.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(e=>r.endsWith(e)))return!0;let o=(n.pathname+n.search).toLowerCase();if(/\bfont(s)?\b/.test(o)||/\.woff2?(\b|$)/.test(o))return!0;for(let e of t){let t=e.toLowerCase().replace(/\s+/g,"+"),n=e.toLowerCase().replace(/\s+/g,"-");if(o.includes(t)||o.includes(n))return!0}return!1}catch{return!1}}(e.href,h))continue;if(o){let t=Array.from(document.styleSheets).find(t=>t.href===e.href);if(t)try{let e=t.cssRules||[];r=Array.from(e).map(e=>e.cssText).join("")}catch{}}if(!r&&(r=(await u(e.href,{as:"text",useProxy:a})).data,v(e.href)))continue;r=await O(r,e.href,a);let i="";for(let o of r.match(U)||[]){let r=(o.match(/font-family:\s*([^;]+);/i)?.[1]||"").trim(),l=R(r);if(!l||v(l))continue;let s=(o.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),c=(o.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),u=(o.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),m=(o.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),h=(o.match(/src\s*:\s*([^;}]+)[;}]/i)?.[1]||"").trim(),p=H(h,e.href);if(!f(l,c,s,u))continue;let g=D(m);if(!j(t,g))continue;let y={family:l,weightSpec:s,styleSpec:c,stretchSpec:u,unicodeRange:m,srcRaw:h,srcUrls:p,href:e.href};if(n&&d(y,g))continue;let w=/url\(/i.test(h)?await z(o,e.href,a):o;i+=w}i.trim()&&(g+=i)}catch{console.warn("[snapDOM] Failed to process stylesheet:",e.href)}let w={requiredIndex:c,usedCodepoints:t,faceMatchesRequired:f,simpleExcluder:n?B(n):null,useProxy:a,visitedSheets:new Set,depth:0};for(let e of document.styleSheets)if(!(e.href&&y.some(t=>t.href===e.href)))try{let t=e.href||location.href;t&&w.visitedSheets.add(t),await V(e,t,async e=>{g+=e},w)}catch{}try{for(let e of document.fonts||[]){if(!e||!e.family||"loaded"!==e.status||!e._snapdomSrc)continue;let t=String(e.family).replace(/^['"]+|['"]+$/g,"");if(v(t)||!c.has(t)||n?.families&&n.families.some(e=>String(e).toLowerCase()===t.toLowerCase()))continue;let o=e._snapdomSrc;if(!String(o).startsWith("data:")){if(r.resource?.has(e._snapdomSrc))o=r.resource.get(e._snapdomSrc),r.font?.add(e._snapdomSrc);else if(!r.font?.has(e._snapdomSrc))try{let t=await u(e._snapdomSrc,{as:"dataURL",useProxy:a,silent:!0});if(!t.ok||"string"!=typeof t.data)continue;o=t.data,r.resource?.set(e._snapdomSrc,o),r.font?.add(e._snapdomSrc)}catch{console.warn("[snapDOM] Failed to fetch dynamic font src:",e._snapdomSrc);continue}}g+=`@font-face{font-family:'${t}';src:url(${o});font-style:${e.style||"normal"};font-weight:${e.weight||"normal"};}`}}catch{}for(let e of o){if(!e||"object"!=typeof e)continue;let t=String(e.family||"").replace(/^['"]+|['"]+$/g,"");if(!t||v(t)||!c.has(t)||n?.families&&n.families.some(e=>String(e).toLowerCase()===t.toLowerCase()))continue;let o=null!=e.weight?String(e.weight):"normal",i=null!=e.style?String(e.style):"normal",l=null!=e.stretchPct?`${e.stretchPct}%`:"100%",s=String(e.src||""),f=s;if(!f.startsWith("data:")){if(r.resource?.has(s))f=r.resource.get(s),r.font?.add(s);else if(!r.font?.has(s))try{let e=await u(s,{as:"dataURL",useProxy:a,silent:!0});if(!e.ok||"string"!=typeof e.data)continue;f=e.data,r.resource?.set(s,f),r.font?.add(s)}catch{console.warn("[snapDOM] Failed to fetch localFonts src:",s);continue}}g+=`@font-face{font-family:'${t}';src:url(${f});font-style:${i};font-weight:${o};font-stretch:${l};}`}return g&&(g=function(e){if(!e)return e;let t=/@font-face[^{}]*\{[^}]*\}/gi,n=new Set,r=[];for(let o of e.match(t)||[]){let e=R(o.match(/font-family:\s*([^;]+);/i)?.[1]||""),t=(o.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),a=(o.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),i=(o.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),l=(o.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),s=(o.match(/src\s*:\s*([^;}]+)[;}]/i)?.[1]||"").trim(),c=H(s,location.href),u=c.length?c.map(e=>String(e).toLowerCase()).sort().join("|"):s.toLowerCase(),f=[String(e||"").toLowerCase(),t,a,i,l.toLowerCase(),u].join("|");n.has(f)||(n.add(f),r.push(o))}if(0===r.length)return e;let o=0;return e.replace(t,()=>r[o++]||"")}(g),r.resource?.set(m,g)),g}async function Y(e,t=2){try{await document.fonts.ready}catch{}let n=Array.from(e||[]).filter(Boolean);if(0===n.length)return;let r=()=>{let e=document.createElement("div");for(let t of(e.style.cssText="position:absolute!important;left:-9999px!important;top:0!important;opacity:0!important;pointer-events:none!important;contain:layout size style;",n)){let n=document.createElement("span");n.textContent="AaBbGg1234\xc1\xc9\xcd\xd3\xda\xe7\xf1—∞",n.style.fontFamily=`"${t}"`,n.style.fontWeight="700",n.style.fontStyle="italic",n.style.fontSize="32px",n.style.lineHeight="1",n.style.whiteSpace="nowrap",n.style.margin="0",n.style.padding="0",e.appendChild(n)}document.body.appendChild(e),e.offsetWidth,document.body.removeChild(e)};for(let e=0;e<Math.max(1,t);e++)r(),await new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(e)))}async function G(e,t,n,r={}){let o=[[e,t]],a=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],i=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],l=["background-position","background-position-x","background-position-y","background-size","background-repeat","background-origin","background-clip","background-attachment","background-blend-mode"],s=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;o.length;){let[e,t]=o.shift(),c=n.get(e)||b(e);n.has(e)||n.set(e,c);let u=(()=>{let e=c.getPropertyValue("border-image"),t=c.getPropertyValue("border-image-source");return e&&"none"!==e||t&&"none"!==t})();for(let e of l){let n=c.getPropertyValue(e);n&&t.style.setProperty(e,n)}for(let e of a){let n=c.getPropertyValue(e);if(!n||"none"===n)continue;let o=S(n),a=await Promise.all(o.map(e=>f(e,r)));a.some(e=>e&&"none"!==e&&!/^url\(undefined/.test(e))&&t.style.setProperty(e,a.join(", "))}for(let e of i){let n=c.getPropertyValue(e);n&&"initial"!==n&&t.style.setProperty(e,n)}if(u)for(let e of s){let n=c.getPropertyValue(e);n&&"initial"!==n&&t.style.setProperty(e,n)}let d=Array.from(e.children),m=Array.from(t.children).filter(e=>!(e.dataset&&e.dataset.snapdomPseudo));for(let e=0;e<Math.min(d.length,m.length);e++)o.push([d[e],m[e]])}}var J=[];function K(e){if(!e)return null;if(Array.isArray(e)){let[t,n]=e;return"function"==typeof t?t(n):t}if("object"==typeof e&&"plugin"in e){let{plugin:t,options:n}=e;return"function"==typeof t?t(n):t}return"function"==typeof e?e():e}function Q(e){return(e&&Array.isArray(e.plugins)?e.plugins:J)||J}async function Z(e,t,n){let r=n;for(let n of Q(t)){let o=n&&"function"==typeof n[e]?n[e]:null;if(!o)continue;let a=await o(t,r);"u">typeof a&&(r=a)}return r}async function ee(e,t,n){let r=[];for(let o of Q(t)){let a=o&&"function"==typeof o[e]?o[e]:null;if(!a)continue;let i=await a(t,n);"u">typeof i&&r.push(i)}return r}var et=n(12764),en=new WeakMap,er=new Map,eo=0;function ea(){eo++}var ei=!1,el=new WeakMap;async function es(e,t,n,o){let a;if("STYLE"===e.tagName)return;let i=n&&n.session&&n.persist?n:n&&(n.styleMap||n.styleCache||n.nodeMap)?{session:n,persist:{snapshotKeyCache:er,defaultStyle:r.defaultStyle,baseStyle:r.baseStyle,image:r.image,resource:r.resource,background:r.background,font:r.font},options:o||{}}:{session:r.session,persist:{snapshotKeyCache:er,defaultStyle:r.defaultStyle,baseStyle:r.baseStyle,image:r.image,resource:r.resource,background:r.background,font:r.font},options:n||o||{}},l=i.options&&i.options.cache||"auto";if("disabled"!==l&&function(e=document.documentElement){if(!ei){ei=!0;try{new MutationObserver(()=>ea()).observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{new MutationObserver(()=>ea()).observe(document.head,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{let e=document.fonts;e&&(e.addEventListener?.("loadingdone",ea),e.ready?.then(()=>ea()).catch(()=>{}))}catch{}}}(document.documentElement),"disabled"!==l||i.session.__bumpedForDisabled||(ea(),er.clear(),i.session.__bumpedForDisabled=!0),m.has(e.tagName?.toLowerCase())){let n=e.getAttribute?.("style");n&&t.setAttribute("style",n)}let{session:s,persist:c}=i;s.styleCache.has(e)||s.styleCache.set(e,getComputedStyle(e));let u=s.styleCache.get(e),f=function(e,t=null,n={}){let r=en.get(e);if(r&&r.epoch===eo)return r.snapshot;let o=t||getComputedStyle(e),a=function(e,t={}){let n={},r=e.getPropertyValue("visibility");for(let t=0;t<e.length;t++){let r=e[t],o=e.getPropertyValue(r);("background-image"===r||"content"===r)&&o.includes("url(")&&!o.includes("data:")&&(o="none"),n[r]=o}for(let t of["text-decoration-line","text-decoration-color","text-decoration-style","text-decoration-thickness","text-underline-offset","text-decoration-skip-ink"])if(!n[t])try{let r=e.getPropertyValue(t);r&&(n[t]=r)}catch{}if(t.embedFonts){for(let t of["font-feature-settings","font-variation-settings","font-kerning","font-variant","font-variant-ligatures","font-optical-sizing"])if(!n[t])try{let r=e.getPropertyValue(t);r&&(n[t]=r)}catch{}}return"hidden"===r&&(n.opacity="0"),n}(o,n);return function(e,t,n){var r,o;if(e instanceof HTMLElement&&e.style&&e.style.height)return;let a=e.tagName&&e.tagName.toLowerCase();if(!a||"div"!==a&&"section"!==a&&"article"!==a&&"main"!==a&&"aside"!==a&&"header"!==a&&"footer"!==a&&"nav"!==a&&"ol"!==a&&"ul"!==a&&"li"!==a)return;let i=t.display||"";if(i.includes("flex")||i.includes("grid")||(r=e)instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof HTMLIFrameElement||r instanceof SVGElement||r instanceof HTMLObjectElement||r instanceof HTMLEmbedElement)return;let l=t.position;if("absolute"===l||"fixed"===l||"sticky"===l||"none"!==t.transform||(o=t).backgroundImage&&"none"!==o.backgroundImage||o.backgroundColor&&"rgba(0, 0, 0, 0)"!==o.backgroundColor&&"transparent"!==o.backgroundColor||(parseFloat(o.borderTopWidth)||0)>0||(parseFloat(o.borderBottomWidth)||0)>0||(parseFloat(o.paddingTop)||0)>0||(parseFloat(o.paddingBottom)||0)>0||"visible"!==(o.overflowBlock||o.overflowY||"visible")||function(e){let t=e.parentElement;if(!t)return!1;let n=getComputedStyle(t).display||"";return n.includes("flex")||n.includes("grid")}(e))return;let s=t.overflowX||t.overflow||"visible",c=t.overflowY||t.overflow||"visible";if("visible"!==s||"visible"!==c)return;let u=t.clip;u&&"auto"!==u&&"rect(auto, auto, auto, auto)"!==u||"hidden"===t.visibility||"0"===t.opacity||function(e,t){if(e.textContent&&/\S/.test(e.textContent))return!0;let n=e.firstElementChild,r=e.lastElementChild;if(n&&"BR"===n.tagName||r&&"BR"===r.tagName)return!0;let o=e.scrollHeight;return 0!==o&&o>(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0)}(e,t)&&(delete n.height,delete n["block-size"])}(e,o,a),en.set(e,{epoch:eo,snapshot:a}),a}(e,u,i.options),d=(a=el.get(f))||(a=Object.entries(f).sort((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0).map(([e,t])=>`${e}:${t}`).join(";"),el.set(f,a),a),h=c.snapshotKeyCache.get(d);h||(h=w(f,e.tagName?.toLowerCase()||"div"),c.snapshotKeyCache.set(d,h)),s.styleMap.set(t,h)}var ec=["fill","stroke","color","background-color","stop-color"],eu=new Map;function ef(e,t,n){return Promise.all(e.map(e=>new Promise(r=>{!function o(){(0,et.a)(n=>{!n||"function"!=typeof n.timeRemaining||n.timeRemaining()>0?t(e,r):o()},{fast:n})}()})))}async function ed(e,t=3){let n=()=>{try{return e.contentDocument||e.contentWindow?.document||null}catch{return null}},r=n(),o=0;for(;o<t&&(!r||!r.body&&!r.documentElement);)await new Promise(e=>setTimeout(e,0)),r=n(),o++;return r&&(r.body||r.documentElement)?r:null}async function em(e,t,n){let r,o=await ed(e,3);if(!o)throw Error("iframe document not accessible/ready");let{contentWidth:a,contentHeight:i,rect:l}=function(e){let t=e.getBoundingClientRect(),n=0,r=0,o=0,a=0;try{let t=getComputedStyle(e);n=parseFloat(t.borderLeftWidth)||0,r=parseFloat(t.borderRightWidth)||0,o=parseFloat(t.borderTopWidth)||0,a=parseFloat(t.borderBottomWidth)||0}catch{}return{contentWidth:Math.max(0,Math.round(t.width-(n+r))),contentHeight:Math.max(0,Math.round(t.height-(o+a))),rect:t}}(e),s=n?.snap;if(!s||"function"!=typeof s.toPng)throw Error("snapdom.toPng not available in iframe or window");let c={...n,scale:1},u=((r=o.createElement("style")).setAttribute("data-sd-iframe-pin",""),r.textContent=`html, body {margin: 0 !important;padding: 0 !important;width: ${a}px !important;height: ${i}px !important;min-width: ${a}px !important;min-height: ${i}px !important;box-sizing: border-box !important;overflow: hidden !important;background-clip: border-box !important;}`,(o.head||o.documentElement).appendChild(r),()=>{try{r.remove()}catch{}}),f;try{f=await s.toPng(o.documentElement,c)}finally{u()}f.style.display="block",f.style.width=`${a}px`,f.style.height=`${i}px`;let d=document.createElement("div");return t.nodeMap.set(d,e),es(e,d,t,n),d.style.overflow="hidden",d.style.display="block",d.style.width||(d.style.width=`${Math.round(l.width)}px`),d.style.height||(d.style.height=`${Math.round(l.height)}px`),d.appendChild(f),d}var eh=new Map;async function ep(e){if(r.resource?.has(e))return r.resource.get(e);if(eh.has(e))return eh.get(e);let t=(async()=>{let t=await u(e,{as:"dataURL",silent:!0});if(!t.ok||"string"!=typeof t.data)throw Error(`[snapDOM] Failed to read blob URL: ${e}`);return r.resource?.set(e,t.data),t.data})();eh.set(e,t);try{let n=await t;return eh.set(e,n),n}catch(t){throw eh.delete(e),t}}var eg=/\bblob:[^)"'\s]+/g;async function ey(e){if(!e||-1===e.indexOf("blob:"))return e;let t=Array.from(new Set(e.match(eg)||[]));if(0===t.length)return e;let n=e;for(let e of t)try{let t=await ep(e);n=n.split(e).join(t)}catch{}return n}function ew(e){return"string"==typeof e&&e.startsWith("blob:")}async function eb(e){if(e){for(let t of e.querySelectorAll?e.querySelectorAll("img"):[])try{let e=t.getAttribute("src")||t.currentSrc||"";if(ew(e)){let n=await ep(e);t.setAttribute("src",n)}let n=t.getAttribute("srcset");if(n&&n.includes("blob:")){let e=(n||"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>{let t=e.match(/^(\S+)(\s+.+)?$/);return t?{url:t[1],desc:t[2]||""}:null}).filter(Boolean),r=!1;for(let t of e)if(ew(t.url))try{t.url=await ep(t.url),r=!0}catch{}r&&t.setAttribute("srcset",e.map(e=>e.desc?`${e.url} ${e.desc.trim()}`:e.url).join(", "))}}catch{}for(let t of e.querySelectorAll?e.querySelectorAll("image"):[])try{let e="http://www.w3.org/1999/xlink",n=t.getAttribute("href")||t.getAttributeNS?.(e,"href");if(ew(n)){let r=await ep(n);t.setAttribute("href",r),t.removeAttributeNS?.(e,"href")}}catch{}for(let t of e.querySelectorAll?e.querySelectorAll("[style*='blob:']"):[])try{let e=t.getAttribute("style");if(e&&e.includes("blob:")){let n=await ey(e);t.setAttribute("style",n)}}catch{}for(let t of e.querySelectorAll?e.querySelectorAll("style"):[])try{let e=t.textContent||"";e.includes("blob:")&&(t.textContent=await ey(e))}catch{}for(let t of["poster"])for(let n of e.querySelectorAll?e.querySelectorAll(`[${t}^='blob:']`):[])try{let e=n.getAttribute(t);ew(e)&&n.setAttribute(t,await ep(e))}catch{}}}async function ex(e,t,n){let r;if(!e)throw Error("Invalid node");let o=new Set,a=null,i=null;if(e.nodeType===Node.ELEMENT_NODE){let t=(e.localName||e.tagName||"").toLowerCase();if("snapdom-sandbox"===e.id||e.hasAttribute("data-snapdom-sandbox")||d.has(t))return null}if(e.nodeType===Node.TEXT_NODE||e.nodeType!==Node.ELEMENT_NODE)return e.cloneNode(!0);if("exclude"===e.getAttribute("data-capture")){if("hide"===n.excludeMode){let t=document.createElement("div"),n=e.getBoundingClientRect();return t.style.cssText=`display:inline-block;width:${n.width}px;height:${n.height}px;visibility:hidden;`,t}if("remove"===n.excludeMode)return null}if(n.exclude&&Array.isArray(n.exclude))for(let t of n.exclude)try{if(e.matches?.(t)){if("hide"===n.excludeMode){let t=document.createElement("div"),n=e.getBoundingClientRect();return t.style.cssText=`display:inline-block;width:${n.width}px;height:${n.height}px;visibility:hidden;`,t}if("remove"===n.excludeMode)return null}}catch(e){console.warn(`Invalid selector in exclude option: ${t}`,e)}if("function"==typeof n.filter)try{if(!n.filter(e)){if("hide"===n.filterMode){let t=document.createElement("div"),n=e.getBoundingClientRect();return t.style.cssText=`display:inline-block;width:${n.width}px;height:${n.height}px;visibility:hidden;`,t}if("remove"===n.filterMode)return null}}catch(e){console.warn("Error in filter function:",e)}if("IFRAME"===e.tagName){let r=!1;try{r=!!(e.contentDocument||e.contentWindow?.document)}catch{r=!1}if(r)try{return await em(e,t,n)}catch(e){console.warn("[SnapDOM] iframe rasterization failed, fallback:",e)}if(n.placeholders){let r=document.createElement("div");return r.style.cssText=`width:${e.offsetWidth}px;height:${e.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,es(e,r,t,n),r}{let r=e.getBoundingClientRect(),o=document.createElement("div");return o.style.cssText=`display:inline-block;width:${r.width}px;height:${r.height}px;visibility:hidden;`,es(e,o,t,n),o}}if("placeholder"===e.getAttribute("data-capture")){let r=e.cloneNode(!1);t.nodeMap.set(r,e),es(e,r,t,n);let o=document.createElement("div");return o.textContent=e.getAttribute("data-placeholder-text")||"",o.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",r.appendChild(o),r}if("CANVAS"===e.tagName){let r="";try{let t=e.getContext("2d",{willReadFrequently:!0});try{t&&t.getImageData(0,0,1,1)}catch{}if(await new Promise(e=>requestAnimationFrame(e)),!(r=e.toDataURL("image/png"))||"data:,"===r){try{t&&t.getImageData(0,0,1,1)}catch{}if(await new Promise(e=>requestAnimationFrame(e)),!(r=e.toDataURL("image/png"))||"data:,"===r){let t=document.createElement("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n&&(n.drawImage(e,0,0),r=t.toDataURL("image/png"))}}}catch{}let o=document.createElement("img");try{o.decoding="sync",o.loading="eager"}catch{}r&&(o.src=r),o.width=e.width,o.height=e.height;try{let t=getComputedStyle(e);t.width&&(o.style.width=t.width),t.height&&(o.style.height=t.height)}catch{}return t.nodeMap.set(o,e),es(e,o,t,n),o}try{if(r=e.cloneNode(!1),function(e,t){if(!(e instanceof Element)||!(t instanceof Element))return;let n=e.getAttribute?.("style"),r=!!(n&&n.includes("var("));if(!r&&e.attributes?.length){let t=e.attributes;for(let e=0;e<t.length;e++){let n=t[e];if(n&&"string"==typeof n.value&&n.value.includes("var(")){r=!0;break}}}let o=null;if(r)try{o=getComputedStyle(e)}catch{}if(r){let n=e.style;if(n&&n.length)for(let e=0;e<n.length;e++){let r=n[e],a=n.getPropertyValue(r);if(!a||!a.includes("var("))continue;let i=o&&o.getPropertyValue(r);if(i)try{t.style.setProperty(r,i.trim(),n.getPropertyPriority(r))}catch{}}}if(r&&e.attributes?.length){let n=e.attributes;for(let e=0;e<n.length;e++){let r=n[e];if(!r||"string"!=typeof r.value||!r.value.includes("var("))continue;let a=r.name,i=o&&o.getPropertyValue(a);if(i)try{t.style.setProperty(a,i.trim())}catch{}}}if(!r){if(!o)try{o=getComputedStyle(e)}catch{o=null}if(!o)return;let n=e.namespaceURI||"html",r=function(e,t){let n=t+"::"+e.toLowerCase(),r=eu.get(n);if(r)return r;let o=document,a="http://www.w3.org/2000/svg"===t?o.createElementNS(t,e):o.createElement(e),i=o.createElement("div");i.style.cssText="position:absolute;left:-99999px;top:-99999px;contain:strict;display:block;",i.appendChild(a),o.documentElement.appendChild(i);let l=getComputedStyle(a),s={};for(let e of ec)s[e]=l.getPropertyValue(e)||"";return i.remove(),eu.set(n,s),s}(e.tagName,n);for(let e of ec){let n=o.getPropertyValue(e)||"",a=r[e]||"";if(n&&n!==a)try{t.style.setProperty(e,n.trim())}catch{}}}}(e,r),t.nodeMap.set(r,e),"IMG"===e.tagName){!function(e,t){try{let n=e.currentSrc||e.src||"";if(!n)return;t.setAttribute("src",n),t.removeAttribute("srcset"),t.removeAttribute("sizes"),t.loading="eager",t.decoding="sync"}catch{}}(e,r);try{let t=e.getBoundingClientRect(),n=Math.round(t.width||0),o=Math.round(t.height||0);if(!n||!o){let t=window.getComputedStyle(e),r=parseFloat(t.width)||0,a=parseFloat(t.height)||0,i=parseInt(e.getAttribute("width")||"",10)||0,l=parseInt(e.getAttribute("height")||"",10)||0,s=e.width||e.naturalWidth||0,c=e.height||e.naturalHeight||0;n=Math.round(n||r||i||s||0),o=Math.round(o||a||l||c||0)}n&&(r.dataset.snapdomWidth=String(n)),o&&(r.dataset.snapdomHeight=String(o))}catch{}try{let t=e.getAttribute("style")||"",n=window.getComputedStyle(e),o=e=>{let r=t.match(RegExp(`${e}\\s*:\\s*([^;]+)`,"i")),o=r?r[1].trim():n.getPropertyValue(e);return/%|auto/i.test(String(o||""))},a=parseInt(r.dataset.snapdomWidth||"0",10),i=parseInt(r.dataset.snapdomHeight||"0",10),l=o("width")||!a,s=o("height")||!i;l&&a&&(r.style.width=`${a}px`),s&&i&&(r.style.height=`${i}px`),a&&(r.style.minWidth=`${a}px`),i&&(r.style.minHeight=`${i}px`)}catch{}}}catch(t){throw console.error("[Snapdom] Failed to clone node:",e,t),t}if(e instanceof HTMLTextAreaElement){let t=e.getBoundingClientRect();r.style.width=`${t.width}px`,r.style.height=`${t.height}px`}if(e instanceof HTMLInputElement&&(r.value=e.value,r.setAttribute("value",e.value),void 0!==e.checked&&(r.checked=e.checked,e.checked&&r.setAttribute("checked",""),e.indeterminate&&(r.indeterminate=e.indeterminate))),e instanceof HTMLSelectElement&&(a=e.value),e instanceof HTMLTextAreaElement&&(i=e.value),es(e,r,t,n),e.shadowRoot){var l;try{for(let t of e.shadowRoot.querySelectorAll("slot")){let e=[];try{e=t.assignedNodes?.({flatten:!0})||t.assignedNodes?.()||[]}catch{e=t.assignedNodes?.()||[]}for(let t of e)o.add(t)}}catch{}let a=(t.shadowScopeSeq=(t.shadowScopeSeq||0)+1,`s${t.shadowScopeSeq}`),i=`[data-sd="${a}"]`;try{r.setAttribute("data-sd",a)}catch{}let s=function(e){let t="";try{for(let n of(e.querySelectorAll("style").forEach(e=>{t+=(e.textContent||"")+`
`}),e.adoptedStyleSheets||[]))try{if(n&&n.cssRules)for(let e of n.cssRules)t+=e.cssText+`
`}catch{}}catch{}return t}(e.shadowRoot),c=(l=s)?l=(l=(l=(l=(l=l.replace(/:host\(([^)]+)\)/g,(e,t)=>`:where(${i}:is(${t.trim()}))`)).replace(/:host\b/g,`:where(${i})`)).replace(/:host-context\(([^)]+)\)/g,(e,t)=>`:where(:where(${t.trim()}) ${i})`)).replace(/::slotted\(([^)]+)\)/g,(e,t)=>`:where(${i} ${t.trim()})`)).replace(/(^|})(\s*)([^@}{]+){/g,(e,t,n,r)=>{let o=function(e,t,n=!0){return e.split(",").map(e=>e.trim()).filter(Boolean).map(e=>{var r;if(e.startsWith(":where(")||e.startsWith("@"))return e;let o=n?!(r=(r=e).trim())||/:not\(\s*\[data-sd-slotted\]\s*\)\s*$/.test(r)?r:`${r}:not([data-sd-slotted])`:e;return`:where(${t} ${o})`}).join(", ")}(r,i,!0);return`${t}${n}${o}{`}):"";!function(e,t,n){if(!t)return;let r=document.createElement("style");r.setAttribute("data-sd",n),r.textContent=t,e.insertBefore(r,e.firstChild||null)}(r,function(e,t,n){let r=[];for(let n of t){let t=function(e,t){try{let n=getComputedStyle(e).getPropertyValue(t).trim();if(n)return n}catch{}try{let e=getComputedStyle(document.documentElement).getPropertyValue(t).trim();if(e)return e}catch{}return""}(e,n);t&&r.push(`${n}: ${t};`)}return r.length?`${n}{${r.join("")}}
`:""}(e,function(e){let t=new Set;if(!e)return t;let n=/var\(\s*(--[A-Za-z0-9_-]+)\b/g,r;for(;r=n.exec(e);)t.add(r[1]);return t}(s),i)+c,a);let u=document.createDocumentFragment(),f=await ef(Array.from(e.shadowRoot.childNodes),function(e,r){if(e.nodeType===Node.ELEMENT_NODE&&"STYLE"===e.tagName)return r(null);ex(e,t,n).then(e=>{r(e||null)}).catch(()=>{r(null)})},n.fast);u.append(...f.filter(e=>!!e)),r.appendChild(u)}if("SLOT"===e.tagName){let r=e.assignedNodes?.({flatten:!0})||[],o=r.length>0?r:Array.from(e.childNodes),a=document.createDocumentFragment(),i=await ef(Array.from(o),function(e,r){ex(e,t,n).then(e=>{e&&e&&(e.nodeType===Node.ELEMENT_NODE&&e.setAttribute("data-sd-slotted",""),e.querySelectorAll&&e.querySelectorAll("*").forEach(e=>e.setAttribute("data-sd-slotted",""))),r(e||null)}).catch(()=>{r(null)})},n.fast);return a.append(...i.filter(e=>!!e)),a}let s=await ef(Array.from(e.childNodes),function(e,r){if(o.has(e))return r(null);ex(e,t,n).then(e=>{r(e||null)}).catch(()=>{r(null)})},n.fast);if(r.append(...s.filter(e=>!!e)),null!==a&&r instanceof HTMLSelectElement)for(let e of(r.value=a,r.options))e.value===a?e.setAttribute("selected",""):e.removeAttribute("selected");return null!==i&&r instanceof HTMLTextAreaElement&&(r.textContent=i),r}function eS(e,t=!1){let n="",r=Math.max(1,e);for(;r>0;)n=String.fromCharCode(97+--r%26)+n,r=Math.floor(r/26);return t?n.toUpperCase():n}function eC(e,t=!0){let n=Math.max(1,Math.min(3999,e)),r="";for(let[e,t]of[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]])for(;n>=e;)r+=t,n-=e;return t?r:r.toLowerCase()}function eM(e,t){switch((t||"decimal").toLowerCase()){case"decimal":default:return String(Math.max(0,e));case"decimal-leading-zero":return(e<10?"0":"")+String(Math.max(0,e));case"lower-alpha":return eS(e,!1);case"upper-alpha":return eS(e,!0);case"lower-roman":return eC(e,!1);case"upper-roman":return eC(e,!0)}}var ek=new WeakMap;function ev(e){try{return e&&e.cssRules?e.cssRules:null}catch{return null}}function eA(e){let t=e.querySelectorAll('style,link[rel~="stylesheet"]'),n=`n:${t.length}|`,r=0;for(let e=0;e<t.length;e++){let o=t[e];if("STYLE"===o.tagName){let e=o.textContent?o.textContent.length:0;n+=`S${e}|`;let t=o.sheet,a=t?ev(t):null;a&&(r+=a.length)}else{let e=o.getAttribute("href")||"",t=o.getAttribute("media")||"all";n+=`L${e}|m:${t}|`;let a=o.sheet,i=a?ev(a):null;i&&(r+=i.length)}}let o=e.adoptedStyleSheets;return n+`ass:${Array.isArray(o)?o.length:0}|tr:${r}`}function e$(e,t,n){let r=ev(e);if(!r)return!1;for(let e=0;e<r.length&&!(n.budget<=0);e++){let o=r[e],a=o&&o.cssText?o.cssText:"";for(let e of(n.budget--,t))if(a.includes(e))return!0;if(o&&o.cssRules&&o.cssRules.length)for(let e=0;e<o.cssRules.length&&n.budget>0;e++){let r=o.cssRules[e],a=r&&r.cssText?r.cssText:"";for(let e of(n.budget--,t))if(a.includes(e))return!0}if(n.budget<=0)break}return!1}function eE(e=document){let t=eA(e),n=ek.get(e);if(n&&n.fingerprint===t)return n.result;let r=["::before","::after","::first-letter",":before",":after",":first-letter","counter(","counters(","counter-increment","counter-reset"],o=e.querySelectorAll("style");for(let n=0;n<o.length;n++){let a=o[n].textContent||"";for(let n of r)if(a.includes(n))return ek.set(e,{fingerprint:t,result:!0}),!0}let a=e.adoptedStyleSheets;if(Array.isArray(a)&&a.length){let n={budget:300};try{for(let o of a)if(e$(o,r,n))return ek.set(e,{fingerprint:t,result:!0}),!0}catch{}}{let n=e.querySelectorAll('style,link[rel~="stylesheet"]'),o={budget:300};for(let a=0;a<n.length&&o.budget>0;a++){let i=n[a],l=null;if(i.tagName,(l=i.sheet||null)&&e$(l,r,o))return ek.set(e,{fingerprint:t,result:!0}),!0}}return e.querySelector('[style*="counter("], [style*="counters("]')?(ek.set(e,{fingerprint:t,result:!0}),!0):(ek.set(e,{fingerprint:t,result:!1}),!1)}var eN=new WeakMap,eF=-1;function eL(e,t){let n=e.parentElement,r=n?eN.get(n):null;return r?{get(e,n){let o=t.get(e,n),a=r.get(n);return"number"==typeof a?Math.max(o,a):o},getStack(e,n){let o=t.getStack(e,n);if(!o.length)return o;let a=r.get(n);if("number"==typeof a){let e=o.slice();return e[e.length-1]=Math.max(e[e.length-1],a),e}return o}}:t}function eP(e,t,n){let r=new Map;function o(e){let t=[];if(!e||"none"===e)return t;for(let n of String(e).split(",")){let e=n.trim().split(/\s+/),r=e[0],o=Number.isFinite(Number(e[1]))?Number(e[1]):void 0;r&&t.push({name:r,num:o})}return t}let a=o(t?.counterReset),i=o(t?.counterIncrement);function l(t){if(r.has(t))return r.get(t).slice();let o=n.getStack(e,t);o=o.length?o.slice():[];let l=a.find(e=>e.name===t);if(l){let e=Number.isFinite(l.num)?l.num:0;o=o.length?[...o,e]:[e]}let s=i.find(e=>e.name===t);if(s){let e=Number.isFinite(s.num)?s.num:1;0===o.length&&(o=[0]),o[o.length-1]+=e}return r.set(t,o.slice()),o}return{get(e,t){let n=l(t);return n.length?n[n.length-1]:0},getStack:(e,t)=>l(t),__incs:i}}async function eR(e,t,n,i){var l;let s;if(!(e instanceof Element)||!(t instanceof Element)||(s=eA(l=e.ownerDocument||document),n?(n.__pseudoPreflightFp!==s&&(n.__pseudoPreflight=eE(l),n.__pseudoPreflightFp=s),!n.__pseudoPreflight):!eE(l)))return;let c=r?.session?.__counterEpoch??0;if(eF!==c&&(eN=new WeakMap,n&&(n.__counterCtx=null),eF=c),!n.__counterCtx)try{n.__counterCtx=function(e){let t=()=>r?.session?.__counterEpoch??0,n=t(),o=new WeakMap,a=e instanceof Document?e.documentElement:e,i=e=>e&&"LI"===e.tagName,l=e=>{let t=0,n=e?.parentElement;if(!n)return 0;for(let r of n.children){if(r===e)break;"LI"===r.tagName&&t++}return t},s=e=>{let t=new Map;for(let[n,r]of e)t.set(n,r.slice());return t},c=(e,t,n)=>{let r,o=s(e),a;try{a=n.style?.counterReset||getComputedStyle(n).counterReset}catch{}if(a&&"none"!==a)for(let e of a.split(",")){let n=e.trim().split(/\s+/),r=n[0],a=Number.isFinite(Number(n[1]))?Number(n[1]):0;if(!r)continue;let i=t.get(r);if(i&&i.length){let e=i.slice();e.push(a),o.set(r,e)}else o.set(r,[a])}try{r=n.style?.counterIncrement||getComputedStyle(n).counterIncrement}catch{}if(r&&"none"!==r)for(let e of r.split(",")){let t=e.trim().split(/\s+/),n=t[0],r=Number.isFinite(Number(t[1]))?Number(t[1]):1;if(!n)continue;let a=o.get(n)||[];0===a.length&&a.push(0),a[a.length-1]+=r,o.set(n,a)}try{if("list-item"===getComputedStyle(n).display&&i(n)){let e=n.parentElement,t=1;if(e&&"OL"===e.tagName){let r=e.getAttribute("start"),o=Number.isFinite(Number(r))?Number(r):1,a=l(n),i=n.getAttribute("value");t=Number.isFinite(Number(i))?Number(i):o+a}else t=1+l(n);let r=o.get("list-item")||[];0===r.length&&r.push(0),r[r.length-1]=t,o.set("list-item",r)}}catch{}return o},u=(e,t,n)=>{let r=c(n,t,e);o.set(e,r);let a=r;for(let t of e.children)a=u(t,r,a);return r},f=new Map;function d(){let e=t();if(e!==n){n=e;let t=new Map;u(a,t,t)}}return u(a,f,f),{get(e,t){d();let n=o.get(e)?.get(t);return n&&n.length?n[n.length-1]:0},getStack(e,t){d();let n=o.get(e)?.get(t);return n?n.slice():[]}}}(e.ownerDocument||document)}catch{}let d=n.__counterCtx;for(let r of["::before","::after","::first-letter"])try{let l=b(e,r);if(!l||"none"===l.content&&"none"===l.backgroundImage&&"transparent"===l.backgroundColor&&("none"===l.borderStyle||0===parseFloat(l.borderWidth))&&(!l.transform||"none"===l.transform)&&"inline"===l.display)continue;if("::first-letter"===r){let r=getComputedStyle(e);if(!(l.color!==r.color||l.fontSize!==r.fontSize||l.fontWeight!==r.fontWeight))continue;let o=Array.from(t.childNodes).find(e=>e.nodeType===Node.TEXT_NODE&&e.textContent?.trim().length>0);if(!o)continue;let a=o.textContent,i=a.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['’])?)/u)?.[0],s=a.slice(i?.length||0);if(!i||/[\uD800-\uDFFF]/.test(i))continue;let c=document.createElement("span");c.textContent=i,c.dataset.snapdomPseudo="::first-letter";let u=x(l),f=w(u,"span");n.styleMap.set(c,f);let d=document.createTextNode(s);t.replaceChild(d,o),t.insertBefore(c,d);continue}let s=l.content??"",c=""===s||"none"===s||"normal"===s,{text:m,incs:h}=function(e,t,n){let r;try{r=getComputedStyle(e,t)}catch{}let o=r?.content;if(!o||"none"===o||"normal"===o)return{text:"",incs:[]};let a=eL(e,n),i=eP(e,r,a);return{text:function(e){if(!e)return"";let t=[],n=/"([^"]*)"/g,r;for(;r=n.exec(e);)t.push(r[1]);return t.length?t.join(""):(e||"").replace(/"([^"]*)"/g,"$1")}(/\bcounter\s*\(|\bcounters\s*\(/.test(o||"")?function(e,t,n){if(!e||"none"===e)return e;try{return(e.replace(/\b(counter|counters)\s*\(([^)]+)\)/g,(e,r,o)=>{let a=String(o).split(",").map(e=>e.trim());if("counter"===r){let e=a[0]?.replace(/^["']|["']$/g,""),r=(a[1]||"decimal").toLowerCase(),o=n.get(t,e);return eM(o,r)}{let e=a[0]?.replace(/^["']|["']$/g,""),r=a[1]?.replace(/^["']|["']$/g,"")??"",o=(a[2]||"decimal").toLowerCase(),i=n.getStack(t,e);return i.length?i.map(e=>eM(e,o)).join(r):""}})||"").replace(/"([^"]*)"/g,"$1")}catch{return"- "}}(o,e,i):o),incs:i.__incs||[]}}(e,r,d),p=l.backgroundImage,g=l.backgroundColor,y=l.fontFamily,C=parseInt(l.fontSize)||32,M=parseInt(l.fontWeight)||!1,k=l.color||"#000",A=l.borderStyle,$=parseFloat(l.borderWidth),E=l.transform,N=v(y),F=!c&&""!==m,P=p&&"none"!==p,R=g&&"transparent"!==g&&"rgba(0, 0, 0, 0)"!==g,T=A&&"none"!==A&&$>0,I=E&&"none"!==E;if(!(F||P||R||T||I)){if(h&&h.length&&e.parentElement){let t=eN.get(e.parentElement)||new Map;for(let{name:n}of h){if(!n)continue;let o=eL(e,d),a=eP(e,getComputedStyle(e,r),o).get(e,n);t.set(n,a)}eN.set(e.parentElement,t)}continue}let W=document.createElement("span");W.dataset.snapdomPseudo=r,W.style.pointerEvents="none";let _=x(l),O=w(_,"span");if(n.styleMap.set(W,O),N&&m&&1===m.length){let{dataUrl:e,width:n,height:r}=await L(m,y,M,C,k),o=document.createElement("img");o.src=e,o.style=`height:${C}px;width:${n/r*C}px;object-fit:contain;`,W.appendChild(o),t.dataset.snapdomHasIcon="true"}else if(m&&m.startsWith("url(")){let t=o(m);if(t?.trim())try{let e=document.createElement("img"),n=await u(a(t),{as:"dataURL",useProxy:i.useProxy});e.src=n.data,e.style=`width:${C}px;height:auto;object-fit:contain;`,W.appendChild(e)}catch(t){console.error(`[snapdom] Error in pseudo ${r} for`,e,t)}}else!N&&F&&(W.textContent=m);W.style.backgroundImage="none","maskImage"in W.style&&(W.style.maskImage="none"),"webkitMaskImage"in W.style&&(W.style.webkitMaskImage="none");try{W.style.backgroundRepeat=l.backgroundRepeat,W.style.backgroundSize=l.backgroundSize,l.backgroundPositionX&&l.backgroundPositionY?(W.style.backgroundPositionX=l.backgroundPositionX,W.style.backgroundPositionY=l.backgroundPositionY):W.style.backgroundPosition=l.backgroundPosition,W.style.backgroundOrigin=l.backgroundOrigin,W.style.backgroundClip=l.backgroundClip,W.style.backgroundAttachment=l.backgroundAttachment,W.style.backgroundBlendMode=l.backgroundBlendMode}catch{}if(P)try{let e=S(p),t=await Promise.all(e.map(f));W.style.backgroundImage=t.join(", ")}catch(e){console.warn(`[snapdom] Failed to inline background-image for ${r}`,e)}R&&(W.style.backgroundColor=g);let q=W.childNodes.length>0||W.textContent?.trim()!==""||P||R||T||I;if(h&&h.length&&e.parentElement){let t=eN.get(e.parentElement)||new Map,n=eL(e,d),o=eP(e,getComputedStyle(e,r),n);for(let{name:n}of h){if(!n)continue;let r=o.get(e,n);t.set(n,r)}eN.set(e.parentElement,t)}if(!q)continue;"::before"===r?t.insertBefore(W,t.firstChild):t.appendChild(W)}catch(t){console.warn(`[snapdom] Failed to capture ${r} for`,e,t)}let m=Array.from(e.children),h=Array.from(t.children).filter(e=>!e.dataset.snapdomPseudo);for(let e=0;e<Math.min(m.length,h.length);e++)await eR(m[e],h[e],n,i)}function eT(e){if(!e||"auto"===e)return null;let t=Number.parseFloat(e);return Number.isFinite(t)?t:null}async function eI(e,t={}){let n,o,a,i,l,s,c,u={styleMap:r.session.styleMap,styleCache:r.session.styleCache,nodeMap:r.session.nodeMap},f,d="",m="";o=(n=getComputedStyle(e)).outlineStyle,a=n.outlineWidth,i=n.borderStyle,l=n.borderWidth,s="none"!==o&&parseFloat(a)>0,c="none"===i||0===parseFloat(l),s&&c&&(e.style.border=`${a} solid transparent`);try{!function(e,t){if(!e||!(e instanceof Element))return;let n=e.ownerDocument||document,r=e instanceof SVGSVGElement?[e]:Array.from(e.querySelectorAll("svg"));if(0===r.length)return;let o=/url\(\s*#([^)]+)\)/g,a=["fill","stroke","filter","clip-path","mask","marker","marker-start","marker-mid","marker-end"],i=e=>window.CSS&&CSS.escape?CSS.escape(e):e.replace(/[^a-zA-Z0-9_-]/g,"\\$&"),l=e=>{if(!e||!e.getAttribute)return null;let t=e.getAttribute("href")||e.getAttribute("xlink:href")||("function"==typeof e.getAttributeNS?e.getAttributeNS("http://www.w3.org/1999/xlink","href"):null);if(t)return t;let n=e.attributes;if(!n)return null;for(let e=0;e<n.length;e++){let t=n[e];if(!t||!t.name)continue;if("href"===t.name)return t.value;let r=t.name.indexOf(":");if(-1!==r&&"href"===t.name.slice(r+1))return t.value}return null},s=new Set(Array.from(e.querySelectorAll("[id]")).map(e=>e.id)),c=new Set,u=!1,f=(e,t=null)=>{let n;if(e)for(o.lastIndex=0;n=o.exec(e);){u=!0;let e=(n[1]||"").trim();e&&(s.has(e)||(c.add(e),t&&!t.has(e)&&t.add(e)))}},d=e=>{for(let t of e.querySelectorAll("use")){let e=l(t);if(!e||!e.startsWith("#"))continue;u=!0;let n=e.slice(1).trim();n&&!s.has(n)&&c.add(n)}for(let t of e.querySelectorAll('*[style*="url("],*[fill^="url("], *[stroke^="url("],*[filter^="url("],*[clip-path^="url("],*[mask^="url("],*[marker^="url("],*[marker-start^="url("],*[marker-mid^="url("],*[marker-end^="url("]'))for(let e of(f(t.getAttribute("style")||""),a))f(t.getAttribute(e))};for(let e of r)d(e);if(!u)return;let m=e.querySelector("svg.inline-defs-container");m||((m=n.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("inline-defs-container"),m.setAttribute("aria-hidden","true"),m.setAttribute("style","position:absolute;width:0;height:0;overflow:hidden"),e.insertBefore(m,e.firstChild||null));let h=m.querySelector("defs")||null,p=t=>{if(!t||s.has(t))return null;let r=i(t),o=t=>{let r=n.querySelector(t);return r&&!e.contains(r)?r:null};return o(`svg defs > *#${r}`)||o(`svg > symbol#${r}`)||o(`*#${r}`)};if(!c.size)return;let g=new Set(c),y=new Set;for(;g.size;){let e=g.values().next().value;if(g.delete(e),!e||s.has(e)||y.has(e))continue;let t=p(e);if(!t){y.add(e);continue}h||(h=n.createElementNS("http://www.w3.org/2000/svg","defs"),m.appendChild(h));let r=t.cloneNode(!0);for(let t of(r.id||r.setAttribute("id",e),h.appendChild(r),y.add(e),s.add(e),[r,...r.querySelectorAll("*")])){let e=l(t);if(e&&e.startsWith("#")){let t=e.slice(1).trim();!t||s.has(t)||y.has(t)||g.add(t)}let n=t.getAttribute?.("style")||"";for(let e of(n&&f(n,g),a)){let n=t.getAttribute?.(e);n&&f(n,g)}}}}(e)}catch(e){console.warn("inlineExternal defs or symbol failed:",e)}try{f=await ex(e,u,t,e)}catch(e){throw console.warn("deepClone failed:",e),e}try{await eR(e,f,u,t)}catch(e){console.warn("inlinePseudoElements failed:",e)}await eb(f);try{for(let e of f.querySelectorAll("style[data-sd]"))m+=e.textContent||"",e.remove()}catch{}let h=function(e){let t=Array.from(new Set(e.values())).filter(Boolean).sort(),n=new Map,r=1;for(let e of t)n.set(e,`c${r++}`);return n}(u.styleMap);for(let[e,t]of(d=m+(d=Array.from(h.entries()).map(([e,t])=>`.${t}{${e}}`).join("")),u.styleMap.entries())){if("STYLE"===e.tagName)continue;if(e.getRootNode&&e.getRootNode() instanceof ShadowRoot){e.setAttribute("style",t.replace(/;/g,"; "));continue}let n=h.get(t);n&&e.classList.add(n);let r=e.style?.backgroundImage,o=e.dataset?.snapdomHasIcon;r&&"none"!==r&&(e.style.backgroundImage=r),o&&(e.style.verticalAlign="middle",e.style.display="inline")}for(let[e,t]of u.nodeMap.entries()){let n=t.scrollLeft,r=t.scrollTop;if((n||r)&&e instanceof HTMLElement){e.style.overflow="hidden",e.style.scrollbarWidth="none",e.style.msOverflowStyle="none";let t=document.createElement("div");for(t.style.transform=`translate(${-n}px, ${-r}px)`,t.style.willChange="transform",t.style.display="inline-block",t.style.width="100%";e.firstChild;)t.appendChild(e.firstChild);e.appendChild(t)}}if(function(e,t){if(!e||!t)return;let n=e.scrollTop||0;if(!n)return;"static"===getComputedStyle(t).position&&(t.style.position="relative");let r=e.getBoundingClientRect(),o=e.clientHeight,a="data-snap-ph",i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;i.nextNode();){let l=i.currentNode,s=getComputedStyle(l),c=s.position;if("sticky"!==c&&"-webkit-sticky"!==c)continue;let u=eT(s.top),f=eT(s.bottom);if(null==u&&null==f)continue;let d=function(e,t,n){let r=e;for(let e=0;e<t.length;e++)if(!(r=function(e,t){let n=[],r=e.children;for(let e=0;e<r.length;e++){let o=r[e];o.hasAttribute(t)||n.push(o)}return n}(r,n)[t[e]]))return null;return r instanceof HTMLElement?r:null}(t,function(e,t){let n=[];for(let r=e;r&&r!==t;){let e=r.parentElement;if(!e)break;n.push(Array.prototype.indexOf.call(e.children,r)),r=e}return n.reverse()}(l,e),a);if(!d)continue;let m=l.getBoundingClientRect(),h=m.width,p=m.height,g=m.left-r.left;if(!(h>0&&p>0)||!Number.isFinite(g))continue;let y=null!=u?u+n:n+(o-p-f);if(!Number.isFinite(y))continue;let w=Number.parseInt(s.zIndex,10),b=Number.isFinite(w),x=b?Math.max(w,1)+1:2,S=b?w-1:0,C=d.cloneNode(!1);C.setAttribute(a,"1"),C.style.position="sticky",C.style.left=`${g}px`,C.style.top=`${y}px`,C.style.width=`${h}px`,C.style.height=`${p}px`,C.style.visibility="hidden",C.style.zIndex=String(S),C.style.overflow="hidden",C.style.background="transparent",C.style.boxShadow="none",C.style.filter="none",d.parentElement?.insertBefore(C,d),d.style.position="absolute",d.style.left=`${g}px`,d.style.top=`${y}px`,d.style.bottom="auto",d.style.zIndex=String(x),d.style.pointerEvents="none"}}(e,f instanceof HTMLElement&&f.firstElementChild instanceof HTMLElement?f.firstElementChild:f),e===u.nodeMap.get(f)){let t=u.styleCache.get(e)||window.getComputedStyle(e);u.styleCache.set(e,t);let n=function(e){if(!e||"none"===e)return"";let t=e.replace(/translate[XY]?\([^)]*\)/g,"");return(t=(t=t.replace(/matrix\(([^)]+)\)/g,(e,t)=>{let n=t.split(",").map(e=>e.trim());return 6!==n.length?`matrix(${t})`:(n[4]="0",n[5]="0",`matrix(${n.join(", ")})`)})).replace(/matrix3d\(([^)]+)\)/g,(e,t)=>{let n=t.split(",").map(e=>e.trim());return 16!==n.length?`matrix3d(${t})`:(n[12]="0",n[13]="0",`matrix3d(${n.join(", ")})`)})).trim().replace(/\s{2,}/g," ")}(t.transform);f.style.margin="0",f.style.top="auto",f.style.left="auto",f.style.right="auto",f.style.bottom="auto",f.style.animation="none",f.style.transition="none",f.style.willChange="auto",f.style.float="none",f.style.clear="none",f.style.transform=n||""}for(let[e,t]of u.nodeMap.entries())"PRE"===t.tagName&&(e.style.marginTop="0",e.style.marginBlockStart="0");return{clone:f,classCSS:d,styleCache:u.styleCache}}async function eW(e,t={}){let n=Array.from(e.querySelectorAll("img")),r=async e=>{let n,r,o,a,i,l;if(!e.getAttribute("src")){let t=e.currentSrc||e.src||"";t&&e.setAttribute("src",t)}e.removeAttribute("srcset"),e.removeAttribute("sizes");let s=e.src||"";if(!s)return;let c=await u(s,{as:"dataURL",useProxy:t.useProxy});if(c.ok&&"string"==typeof c.data&&c.data.startsWith("data:")){e.src=c.data,e.width||(e.width=e.naturalWidth||100),e.height||(e.height=e.naturalHeight||100);return}let{width:f,height:d}=(n=parseInt(e.dataset?.snapdomWidth||"",10)||0,r=parseInt(e.dataset?.snapdomHeight||"",10)||0,o=parseInt(e.getAttribute("width")||"",10)||0,a=parseInt(e.getAttribute("height")||"",10)||0,i=parseFloat(e.style?.width||"")||0,l=parseFloat(e.style?.height||"")||0,{width:n||i||o||e.width||e.naturalWidth||100,height:r||l||a||e.height||e.naturalHeight||100}),{fallbackURL:m}=t||{};if(m)try{let n="function"==typeof m?await m({width:f,height:d,src:s,element:e}):m;if(n){let r=await u(n,{as:"dataURL",useProxy:t.useProxy});e.src=r.data,e.width||(e.width=f),e.height||(e.height=d);return}}catch{}if(!1!==t.placeholders){let t=document.createElement("div");t.style.cssText=`width:${f}px;height:${d}px;background:#ccc;display:inline-block;text-align:center;line-height:${d}px;color:#666;font-size:12px;overflow:hidden`,t.textContent="img",e.replaceWith(t)}else{let t=document.createElement("div");t.style.cssText=`display:inline-block;width:${f}px;height:${d}px;visibility:hidden;`,e.replaceWith(t)}};for(let e=0;e<n.length;e+=4){let t=n.slice(e,e+4).map(r);await Promise.allSettled(t)}}var e_=(e,t=3)=>Number.isFinite(e)?Math.round(e*10**t)/10**t:e;function eO(e,t,n,r,o){let a=n.a,i=n.b,l=n.c,s=n.d,c=n.e||0,u=n.f||0;function f(e,t){let n=e-r,f=t-o,d=a*n+l*f,m=i*n+s*f;return[d+=r+c,m+=o+u]}let d=[f(0,0),f(e,0),f(0,t),f(e,t)],m=1/0,h=1/0,p=-1/0,g=-1/0;for(let[e,t]of d)e<m&&(m=e),t<h&&(h=t),e>p&&(p=e),t>g&&(g=t);return{minX:m,minY:h,maxX:p,maxY:g,width:p-m,height:g-h}}var eq=null;function eU(e){let t=getComputedStyle(e).transform;if(!t||"none"===t)return new DOMMatrix;try{return new DOMMatrix(t)}catch{return new WebKitCSSMatrix(t)}}async function eD(e,t){var n;let o;if(!e)throw Error("Element cannot be null or undefined");!function(e="soft"){switch(r.session.__counterEpoch=(r.session.__counterEpoch||0)+1,e){case"auto":r.session.styleMap=new Map,r.session.nodeMap=new Map;return;case"soft":default:r.session.styleMap=new Map,r.session.nodeMap=new Map,r.session.styleCache=new WeakMap;return;case"full":return;case"disabled":r.session.styleMap=new Map,r.session.nodeMap=new Map,r.session.styleCache=new WeakMap,r.computedStyle=new WeakMap,r.baseStyle=new Map,r.defaultStyle=new Map,r.image=new Map,r.background=new Map,r.resource=new Map,r.font=new Set;return}}(t.cache);let a=t.fast,i=!1!==t.outerTransforms,l=!!t.outerShadows,s={element:e,options:t,plugins:t.plugins},c,u,f,d="",m="",h,p,g=null;await Z("beforeSnap",s),await Z("beforeClone",s);let y=function(e){let t,n,r,o,a;if(!e)return()=>{};let i=Number.isFinite(r=parseInt(((t=getComputedStyle(e)).getPropertyValue("-webkit-line-clamp")||t.getPropertyValue("line-clamp")||"").trim(),10))&&r>0?r:0;if(i<=0||!(!(e.childElementCount>0)&&Array.from(e.childNodes).some(e=>e.nodeType===Node.TEXT_NODE)))return()=>{};let l=getComputedStyle(e),s=Math.round((o=(l.lineHeight||"").trim(),a=parseFloat(l.fontSize)||16,(o&&"normal"!==o?o.endsWith("px")?parseFloat(o):/^\d+(\.\d+)?$/.test(o)?Math.round(parseFloat(o)*a):o.endsWith("%")?Math.round(parseFloat(o)/100*a):Math.round(1.2*a):Math.round(1.2*a))*i+((parseFloat(l.paddingTop)||0)+(parseFloat(l.paddingBottom)||0)))),c=e.textContent??"";if(e.scrollHeight<=s+.5)return()=>{};let u=0,f=c.length,d=-1;for(;u<=f;){let t=u+f>>1;e.textContent=c.slice(0,t)+"…",e.scrollHeight<=s+.5?(d=t,u=t+1):f=t-1}return e.textContent=(d>=0?c.slice(0,d):"")+"…",()=>{e.textContent=c}}(s.element);try{({clone:c,classCSS:u,styleCache:f}=await eI(s.element,s.options)),!i&&c&&(g=function(e,t){if(!e||!t||!t.style)return null;let n=getComputedStyle(e);try{t.style.transformOrigin="0 0"}catch{}try{"translate"in t.style&&(t.style.translate="none"),"rotate"in t.style&&(t.style.rotate="none")}catch{}let r=n.transform||"none";if(!r||"none"===r)try{let n=eU(e);if(1===n.a&&0===n.b&&0===n.c&&1===n.d)return t.style.transform="none",{a:1,b:0,c:0,d:1}}catch{}let o=r.match(/^matrix\(\s*([^)]+)\)$/i);if(o){let e=o[1].split(",").map(e=>parseFloat(e.trim()));if(6===e.length&&e.every(Number.isFinite)){let[n,r,o,a]=e,i=Math.sqrt(n*n+r*r)||0,l=0,s=0,c=0,u=0,f=0,d=0;i>0&&(c=(l=n/i)*o+(s=r/i)*a,(d=Math.sqrt((u=o-l*c)*u+(f=a-s*c)*f)||0)>0?c/=d:c=0);let m=c*d,h=d;try{t.style.transform=`matrix(${i}, 0, ${m}, ${h}, 0, 0)`}catch{}return{a:i,b:0,c:m,d:h}}}try{let e=String(r).trim();return t.style.transform=e+" translate(0px, 0px) rotate(0deg)",null}catch{return null}}(s.element,c)),!l&&c&&function(e,t){if(!e||!t||!t.style)return;let n=getComputedStyle(e);try{t.style.boxShadow="none"}catch{}try{t.style.textShadow="none"}catch{}try{t.style.outline="none"}catch{}let r=(n.filter||"").replace(/\bblur\([^()]*\)\s*/gi,"").replace(/\bdrop-shadow\([^()]*\)\s*/gi,"").trim().replace(/\s+/g," ");try{t.style.filter=r.length?r:"none"}catch{}}(s.element,c)}finally{y()}if(s={clone:c,classCSS:u,styleCache:f,...s},await Z("afterClone",s),function(e,t={}){e&&(function(e,t={}){let{stripFrameworkDirectives:n=!0}=t,r=new Set(["xml","xlink"]),o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;o.nextNode();){let e=o.currentNode;for(let t of Array.from(e.attributes)){let o=t.name;if(o.includes("@")){e.removeAttribute(o);continue}if(o.includes(":")){let t=o.split(":",1)[0];if(!r.has(t)){e.removeAttribute(o);continue}}if(n&&(o.startsWith("x-")||o.startsWith("v-")||o.startsWith(":")||o.startsWith("on:")||o.startsWith("bind:")||o.startsWith("let:")||o.startsWith("class:"))){e.removeAttribute(o);continue}}}}(e,t),function(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT),n=[];for(;t.nextNode();)n.push(t.currentNode);for(let e of n)e.remove()}(e))}(s.clone),s.options?.excludeMode==="remove")try{!function(e,t,n=new Map){!function e(t,r){if(!(t instanceof Element)||!(r instanceof Element))return;let o=t.childElementCount>r.childElementCount,a=n.get(t)||getComputedStyle(t);if(n.has(t)||n.set(t,a),o&&function(e,t){var n;if(!(e instanceof Element)||function(e){try{let t=e.getAttribute?.("style")||"";return/\b(height|width|block-size|inline-size)\s*:/.test(t)}catch{return!1}}(e)||(n=e)instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof HTMLIFrameElement||n instanceof SVGElement||n instanceof HTMLObjectElement||n instanceof HTMLEmbedElement)return!1;let r=t.position;if("absolute"===r||"fixed"===r||"sticky"===r)return!1;let o=t.display||"";return!(o.includes("flex")||o.includes("grid")||o.startsWith("table")||t.transform&&"none"!==t.transform)}(t,a)){r.style.height||(r.style.height="auto"),r.style.width||(r.style.width="auto"),r.style.removeProperty("block-size"),r.style.removeProperty("inline-size"),r.style.minHeight||(r.style.minHeight="0"),r.style.minWidth||(r.style.minWidth="0"),r.style.maxHeight||(r.style.maxHeight="none"),r.style.maxWidth||(r.style.maxWidth="none");let e=a.overflowY||a.overflowBlock||"visible",t=a.overflowX||a.overflowInline||"visible";("visible"!==e||"visible"!==t)&&(r.style.overflow="visible")}let i=Array.from(t.children),l=Array.from(r.children);for(let t=0;t<Math.min(i.length,l.length);t++)e(i[t],l[t])}(e,t)}(s.element,s.clone,s.styleCache)}catch(e){console.warn("[snapdom] shrink pass failed:",e)}try{await F(s.clone,s.element)}catch{}await new Promise(e=>{(0,et.a)(async()=>{await eW(s.clone,s.options),e()},{fast:a})}),await new Promise(e=>{(0,et.a)(async()=>{await G(s.element,s.clone,s.styleCache,s.options),e()},{fast:a})}),t.embedFonts&&await new Promise(e=>{(0,et.a)(async()=>{let t=function(e){let t=new Set;if(!e)return t;let n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null),r=e=>{let n=R(e.fontFamily);if(n){var r,o,a;let i;t.add((r=e.fontWeight,o=e.fontStyle,a=e.fontStretch,`${n}__${T(r)}__${I(o)}__${(i=String(a??"100%").match(/(\d+(?:\.\d+)?)\s*%/))?Math.max(50,Math.min(200,parseFloat(i[1]))):100}`))}};r(getComputedStyle(e));let o=getComputedStyle(e,"::before");o&&o.content&&"none"!==o.content&&r(o);let a=getComputedStyle(e,"::after");for(a&&a.content&&"none"!==a.content&&r(a);n.nextNode();){let e=n.currentNode;r(getComputedStyle(e));let t=getComputedStyle(e,"::before");t&&t.content&&"none"!==t.content&&r(t);let o=getComputedStyle(e,"::after");o&&o.content&&"none"!==o.content&&r(o)}return t}(s.element),n=function(e){let t=new Set,n=e=>{if(e)for(let n of e)t.add(n.codePointAt(0))},r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;r.nextNode();){let e=r.currentNode;if(e.nodeType===Node.TEXT_NODE)n(e.nodeValue||"");else if(e.nodeType===Node.ELEMENT_NODE)for(let r of["::before","::after"]){let o=getComputedStyle(e,r)?.getPropertyValue("content");if(!(!o||"none"===o)){if(/^"/.test(o)||/^'/.test(o))n(o.slice(1,-1));else{let e=o.match(/\\[0-9A-Fa-f]{1,6}/g);if(e)for(let n of e)try{t.add(parseInt(n.slice(1),16))}catch{}}}}}return t}(s.element);if((0,et.b)()){let e=new Set(Array.from(t).map(e=>String(e).split("__")[0]).filter(Boolean));await Y(e,1)}d=await X({required:t,usedCodepoints:n,preCached:!1,exclude:s.options.excludeFonts,useProxy:s.options.useProxy}),e()},{fast:a})});let w=(n=s.clone,o=new Set,n.nodeType!==Node.ELEMENT_NODE&&n.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(n.tagName&&o.add(n.tagName.toLowerCase()),"function"==typeof n.querySelectorAll&&n.querySelectorAll("*").forEach(e=>o.add(e.tagName.toLowerCase())),Array.from(o))).sort(),b=w.join(",");r.baseStyle.has(b)?m=r.baseStyle.get(b):await new Promise(e=>{(0,et.a)(()=>{m=function(e){let t=new Map;for(let n of e){let e=r.defaultStyle.get(n);if(!e)continue;let o=Object.entries(e).map(([e,t])=>`${e}:${t};`).sort().join("");o&&(t.has(o)||t.set(o,[]),t.get(o).push(n))}let n="";for(let[e,r]of t.entries())n+=`${r.join(",")} { ${e} }
`;return n}(w),r.baseStyle.set(b,m),e()},{fast:a})}),s={fontsCSS:d,baseCSS:m,...s},await Z("beforeRender",s),await new Promise(e=>{(0,et.a)(()=>{let n,r,o=getComputedStyle(s.element),a=s.element.getBoundingClientRect(),c=Math.max(1,e_(s.element.offsetWidth||parseFloat(o.width)||a.width||1)),u=Math.max(1,e_(s.element.offsetHeight||parseFloat(o.height)||a.height||1));if(s.options?.excludeMode==="remove"){let e=function(e,t){let n=getComputedStyle(e),r=e.getBoundingClientRect(),o=1/0,a=-1/0,i=!1;for(let n of Array.from(e.children)){if(function(e,t){if(!(e instanceof Element))return!1;if("exclude"===e.getAttribute("data-capture")&&t?.excludeMode==="remove")return!0;if(Array.isArray(t?.exclude))for(let n of t.exclude)try{if(e.matches(n))return"remove"===t.excludeMode}catch{}return!1}(n,t)||!function(e){let t=getComputedStyle(e);return!("none"===t.display||"absolute"===t.position||"fixed"===t.position||"sticky"===t.position||"none"!==(t.cssFloat||t.float||"none")||t.transform&&"none"!==t.transform)}(n))continue;let e=n.getBoundingClientRect(),l=e.top-r.top,s=e.bottom-r.top;s<=l||(l<o&&(o=l),s>a&&(a=s),i=!0)}let l=i?Math.max(0,a-o):0;return(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)+(parseFloat(n.paddingTop)||0)+(parseFloat(n.paddingBottom)||0)+l}(s.element,s.options);Number.isFinite(e)&&e>0&&(u=Math.max(1,Math.min(u,e_(e+1))))}let f=(e,t=NaN)=>{let n="string"==typeof e?parseFloat(e):e;return Number.isFinite(n)?n:t},d=f(s.options.width),m=f(s.options.height),y=c,w=u,b=Number.isFinite(d),x=Number.isFinite(m),S=u>0?c/u:1;b&&x?(y=Math.max(1,e_(d)),w=Math.max(1,e_(m))):b?(y=Math.max(1,e_(d)),w=Math.max(1,e_(y/(S||1)))):x?(w=Math.max(1,e_(m)),y=Math.max(1,e_(w*(S||1)))):(y=c,w=u);let C=0,M=0,k=c,v=u;if(!i&&g&&Number.isFinite(g.a)){let e=eO(c,u,{a:g.a,b:g.b||0,c:g.c||0,d:g.d||1,e:0,f:0},0,0);C=e_(e.minX),M=e_(e.minY),k=e_(e.maxX),v=e_(e.maxY)}else if(i&&function(e){let t=getComputedStyle(e),n=t.transform||"none";if("none"!==n&&!/^matrix\(\s*1\s*,\s*0\s*,\s*0\s*,\s*1\s*,\s*0\s*,\s*0\s*\)$/i.test(n))return!0;let r=t.rotate&&"none"!==t.rotate&&"0deg"!==t.rotate,o=t.scale&&"none"!==t.scale&&"1"!==t.scale,a=t.translate&&"none"!==t.translate&&"0px 0px"!==t.translate;return!!(r||o||a)}(s.element)){var A;let e,t,n;let r=o.transform&&"none"!==o.transform?o.transform:"",a=function(e){let t={rotate:"0deg",scale:null,translate:null},n="function"==typeof e.computedStyleMap?e.computedStyleMap():null;if(n){let r=e=>{try{return("function"!=typeof n.has||n.has(e))&&"function"==typeof n.get?n.get(e):null}catch{return null}},o=r("rotate");if(o){if(o.angle){let e=o.angle;t.rotate="rad"===e.unit?180*e.value/Math.PI+"deg":e.value+e.unit}else o.unit?t.rotate="rad"===o.unit?180*o.value/Math.PI+"deg":o.value+o.unit:t.rotate=String(o)}else{let n=getComputedStyle(e);t.rotate=n.rotate&&"none"!==n.rotate?n.rotate:"0deg"}let a=r("scale");if(a){let e="x"in a&&a.x?.value!=null?a.x.value:Array.isArray(a)?a[0]?.value:Number(a)||1,n="y"in a&&a.y?.value!=null?a.y.value:Array.isArray(a)?a[1]?.value:e;t.scale=`${e} ${n}`}else{let n=getComputedStyle(e);t.scale=n.scale&&"none"!==n.scale?n.scale:null}let i=r("translate");if(i){let e="x"in i&&"value"in i.x?i.x.value:Array.isArray(i)?i[0]?.value:0,n="y"in i&&"value"in i.y?i.y.value:Array.isArray(i)?i[1]?.value:0,r="x"in i&&i.x?.unit?i.x.unit:"px",o="y"in i&&i.y?.unit?i.y.unit:"px";t.translate=`${e}${r} ${n}${o}`}else{let n=getComputedStyle(e);t.translate=n.translate&&"none"!==n.translate?n.translate:null}return t}let r=getComputedStyle(e);return t.rotate=r.rotate&&"none"!==r.rotate?r.rotate:"0deg",t.scale=r.scale&&"none"!==r.scale?r.scale:null,t.translate=r.translate&&"none"!==r.translate?r.translate:null,t}(s.element),i=(A={baseTransform:r,rotate:a.rotate||"0deg",scale:a.scale,translate:a.translate},e=function(){if(eq)return eq;let e=document.createElement("div");return e.id="snapdom-measure-slot",e.setAttribute("aria-hidden","true"),Object.assign(e.style,{position:"absolute",left:"-99999px",top:"0px",width:"0px",height:"0px",overflow:"hidden",opacity:"0",pointerEvents:"none",contain:"size layout style"}),document.documentElement.appendChild(e),eq=e,e}(),(t=document.createElement("div")).style.transformOrigin="0 0",A.baseTransform&&(t.style.transform=A.baseTransform),A.rotate&&(t.style.rotate=A.rotate),A.scale&&(t.style.scale=A.scale),A.translate&&(t.style.translate=A.translate),e.appendChild(t),n=eU(t),e.removeChild(t),n),{ox:l,oy:f}=function(e,t,n){let r=(e.transformOrigin||"0 0").trim().split(/\s+/),[o,a]=[r[0]||"0",r[1]||"0"],i=(e,t)=>{let n=e.toLowerCase();return"left"===n||"top"===n?0:"center"===n?t/2:"right"===n||"bottom"===n?t:n.endsWith("px")?parseFloat(n)||0:n.endsWith("%")?(parseFloat(n)||0)*t/100:/^-?\d+(\.\d+)?$/.test(n)&&parseFloat(n)||0};return{ox:i(o,t),oy:i(a,n)}}(o,c,u),d=eO(c,u,i.is2D?i:new DOMMatrix(i.toString()),l,f);C=e_(d.minX),M=e_(d.minY),k=e_(d.maxX),v=e_(d.maxY)}let $=function(e){let t=e.boxShadow||"";if(!t||"none"===t)return{top:0,right:0,bottom:0,left:0};let n=t.split(/\),(?=(?:[^()]*\([^()]*\))*[^()]*$)/).map(e=>e.trim()),r=0,o=0,a=0,i=0;for(let e of n){let t=e.match(/-?\d+(\.\d+)?px/g)?.map(e=>parseFloat(e))||[];if(t.length<2)continue;let[n,l,s=0,c=0]=t,u=Math.abs(n)+s+c,f=Math.abs(l)+s+c;o=Math.max(o,u+Math.max(n,0)),i=Math.max(i,u+Math.max(-n,0)),a=Math.max(a,f+Math.max(l,0)),r=Math.max(r,f+Math.max(-l,0))}return{top:Math.ceil(r),right:Math.ceil(o),bottom:Math.ceil(a),left:Math.ceil(i)}}(o),E={top:r=(n=(o.filter||"").match(/blur\(\s*([0-9.]+)px\s*\)/))?Math.ceil(parseFloat(n[1])||0):0,right:r,bottom:r,left:r},N=function(e){if("none"===(e.outlineStyle||"none"))return{top:0,right:0,bottom:0,left:0};let t=Math.ceil(parseFloat(e.outlineWidth||"0")||0);return{top:t,right:t,bottom:t,left:t}}(o),F=function(e){let t=`${e.filter||""} ${e.webkitFilter||""}`.trim();if(!t||"none"===t)return{bleed:{top:0,right:0,bottom:0,left:0},has:!1};let n=t.match(/drop-shadow\((?:[^()]|\([^()]*\))*\)/gi)||[],r=0,o=0,a=0,i=0,l=!1;for(let e of n){l=!0;let[t=0,n=0,s=0]=e.match(/-?\d+(?:\.\d+)?px/gi)?.map(e=>parseFloat(e))||[],c=Math.abs(t)+s,u=Math.abs(n)+s;o=Math.max(o,c+Math.max(t,0)),i=Math.max(i,c+Math.max(-t,0)),a=Math.max(a,u+Math.max(n,0)),r=Math.max(r,u+Math.max(-n,0))}return{bleed:{top:e_(r),right:e_(o),bottom:e_(a),left:e_(i)},has:l}}(o),L=l?{top:e_($.top+E.top+N.top+F.bleed.top),right:e_($.right+E.right+N.right+F.bleed.right),bottom:e_($.bottom+E.bottom+N.bottom+F.bleed.bottom),left:e_($.left+E.left+N.left+F.bleed.left)}:{top:0,right:0,bottom:0,left:0};C=e_(C-L.left),M=e_(M-L.top),k=e_(k+L.right),v=e_(v+L.bottom);let P=Math.max(1,e_(k-C)),R=Math.max(1,e_(v-M)),T=b||x?e_(y/c):1,I=x||b?e_(w/u):1,W=Math.max(1,e_(P*T)),_=Math.max(1,e_(R*I)),O="http://www.w3.org/2000/svg",q=e_(((0,et.b)()?1:0)+(i?0:1)),U=document.createElementNS(O,"foreignObject"),D=e_(C),j=e_(M);U.setAttribute("x",String(e_(-(D-q)))),U.setAttribute("y",String(e_(-(j-q)))),U.setAttribute("width",String(e_(c+2*q))),U.setAttribute("height",String(e_(u+2*q))),U.style.overflow="visible";let H=document.createElement("style");H.textContent=s.baseCSS+s.fontsCSS+"svg{overflow:visible;} foreignObject{overflow:visible;}"+s.classCSS,U.appendChild(H);let z=document.createElement("div");z.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),z.style.width=`${e_(c)}px`,z.style.height=`${e_(u)}px`,z.style.overflow="visible",z.appendChild(s.clone),U.appendChild(z);let B=new XMLSerializer().serializeToString(U),V=e_(P+2*q),X=e_(R+2*q),Y=b||x;t.meta={w0:c,h0:u,vbW:V,vbH:X,targetW:y,targetH:w};let G=(0,et.b)()&&Y?V:e_(W+2*q),J=(0,et.b)()&&Y?X:e_(_+2*q);p=`<svg xmlns="${O}" width="${G}" height="${J}" viewBox="0 0 ${V} ${X}">`+B+"</svg>",h=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(p)}`,s={svgString:p,dataURL:h,...s},e()},{fast:a})}),await Z("afterRender",s);let x=document.getElementById("snapdom-sandbox");return x&&"absolute"===x.style.position&&x.remove(),s.dataURL}var ej=Object.assign(eV,{plugins:function(...e){return function(...e){for(let t of e.flat()){let e=K(t);e&&(J.some(t=>t&&t.name&&e.name&&t.name===e.name)||J.push(e))}}(...e),ej}}),eH=Symbol("snapdom.internal"),ez=Symbol("snapdom.internal.silent"),eB=!1;async function eV(e,t){if(!e)throw Error("Element cannot be null or undefined");let n=function(e={}){let t=e.format??"png";"jpg"===t&&(t="jpeg");let n=function(e){if("string"==typeof e){let t=e.toLowerCase().trim();if("disabled"===t||"full"===t||"auto"===t||"soft"===t)return t}return"soft"}(e.cache);return{debug:e.debug??!1,fast:e.fast??!0,scale:e.scale??1,exclude:e.exclude??[],excludeMode:e.excludeMode??"hide",filter:e.filter??null,filterMode:e.filterMode??"hide",placeholders:!1!==e.placeholders,embedFonts:e.embedFonts??!1,iconFonts:Array.isArray(e.iconFonts)?e.iconFonts:e.iconFonts?[e.iconFonts]:[],localFonts:Array.isArray(e.localFonts)?e.localFonts:[],excludeFonts:e.excludeFonts??void 0,fallbackURL:e.fallbackURL??void 0,cache:n,useProxy:"string"==typeof e.useProxy?e.useProxy:"",width:e.width??null,height:e.height??null,format:t,type:e.type??"svg",quality:e.quality??.92,dpr:e.dpr??(window.devicePixelRatio||1),backgroundColor:e.backgroundColor??(["jpeg","webp"].includes(t)?"#ffffff":null),filename:e.filename??"snapDOM",outerTransforms:e.outerTransforms??!0,outerShadows:e.outerShadows??!1}}(t);if(function(e,t,n=!1){e&&(!e.plugins||n)&&(e.plugins=function(e){let t=[];if(Array.isArray(e))for(let n of e){let e=K(n);if(!e||!e.name)continue;let r=t.findIndex(t=>t&&t.name===e.name);r>=0&&t.splice(r,1),t.push(e)}for(let e of J)e&&e.name&&!t.some(t=>t.name===e.name)&&t.push(e);return Object.freeze(t)}(t))}(n,t&&t.plugins),(0,et.b)()&&(!0===n.embedFonts||function(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;t.nextNode();){let e=t.currentNode,n=getComputedStyle(e),r=n.backgroundImage&&"none"!==n.backgroundImage,o=n.maskImage&&"none"!==n.maskImage||n.webkitMaskImage&&"none"!==n.webkitMaskImage;if(r||o||"CANVAS"===e.tagName)return!0}return!1}(e)))for(let n=0;n<3;n++)try{await eX(e,t),eB=!1}catch{}return n.iconFonts&&n.iconFonts.length>0&&function(e){for(let t of Array.isArray(e)?e:[e])t instanceof RegExp?k.push(t):"string"==typeof t?k.push(RegExp(t,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",t)}(n.iconFonts),n.snap||(n.snap={toPng:(e,t)=>ej.toPng(e,t),toSvg:(e,t)=>ej.toSvg(e,t)}),ej.capture(e,n,eH)}async function eX(e,t){if(eB)return;let n={...t,fast:!0,embedFonts:!0,scale:.2},r;try{r=await eD(e,n)}catch{}await new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(e))),r&&await new Promise(e=>{let t=new Image;try{t.decoding="sync",t.loading="eager"}catch{}t.style.cssText="position:fixed;left:0px;top:0px;width:10px;height:10px;opacity:0.01;pointer-events:none;",t.src=r,document.body.appendChild(t),(async()=>{try{"function"==typeof t.decode&&await t.decode()}catch{}let n=performance.now();for(;!(t.complete&&t.naturalWidth>0)&&performance.now()-n<900;)await new Promise(e=>setTimeout(e,200));await new Promise(e=>requestAnimationFrame(e));try{t.remove()}catch{}e()})()}),e.querySelectorAll("canvas").forEach(e=>{try{let t=e.getContext("2d",{willReadFrequently:!0});t&&t.getImageData(0,0,1,1)}catch{}}),eB=!0}ej.capture=async(e,t,r)=>{if(r!==eH)throw Error("[snapdom.capture] is internal. Use snapdom(...) instead.");let o=await eD(e,t),a={...t,export:{url:o},exports:{svg:async e=>{let{toSvg:r}=await n.e(1861).then(n.bind(n,91861));return r(o,{...t,...e||{},[ez]:!0})},canvas:async e=>{let{toCanvas:r}=await n.e(1294).then(n.bind(n,91294));return r(o,{...t,...e||{},[ez]:!0})},png:async e=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...t,...e||{},format:"png",[ez]:!0})},jpeg:async e=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...t,...e||{},format:"jpeg",[ez]:!0})},jpg:async e=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...t,...e||{},format:"jpeg",[ez]:!0})},webp:async e=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...t,...e||{},format:"webp",[ez]:!0})},blob:async e=>{let{toBlob:r}=await n.e(5943).then(n.bind(n,65943));return r(o,{...t,...e||{},[ez]:!0})},img:async e=>{let{toImg:r}=await n.e(1861).then(n.bind(n,91861));return r(o,{...t,...e||{},[ez]:!0})}}},i={img:async(e,t)=>{let{toImg:r}=await n.e(1861).then(n.bind(n,91861));return r(o,{...e,...t||{}})},svg:async(e,t)=>{let{toSvg:r}=await n.e(1861).then(n.bind(n,91861));return r(o,{...e,...t||{}})},canvas:async(e,t)=>{let{toCanvas:r}=await n.e(1294).then(n.bind(n,91294));return r(o,{...e,...t||{}})},blob:async(e,t)=>{let{toBlob:r}=await n.e(5943).then(n.bind(n,65943));return r(o,{...e,...t||{}})},png:async(e,t)=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...e,...t||{},format:"png"})},jpeg:async(e,t)=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...e,...t||{},format:"jpeg"})},webp:async(e,t)=>{let{rasterize:r}=await n.e(3124).then(n.bind(n,83124));return r(o,{...e,...t||{},format:"webp"})},download:async(e,t)=>{let{download:r}=await n.e(9835).then(n.bind(n,69835));return r(o,{...e,...t||{}})},...Object.assign({},...(await ee("defineExports",a)).filter(e=>e&&"object"==typeof e))};i.jpeg&&!i.jpg&&(i.jpg=(e,t)=>i.jpeg(e,t));let l=!1,s=Promise.resolve();async function c(e,n){let r=async()=>{let r,a=i[e];if(!a)throw Error(`[snapdom] Unknown export type: ${e}`);let s=(r={...t,...n||{}},("jpeg"===e||"jpg"===e)&&(null==r.backgroundColor||"transparent"===r.backgroundColor)&&(r.backgroundColor="#ffffff"),r),c={...t,export:{type:e,options:s,url:o}};await Z("beforeExport",c);let u=await a(c,s);return await Z("afterExport",c,u),l||(l=!0,await Z("afterSnap",t)),u};return s=s.then(r)}let u={url:o,toRaw:()=>o,to:(e,t)=>c(e,t),toImg:e=>c("img",e),toSvg:e=>c("svg",e),toCanvas:e=>c("canvas",e),toBlob:e=>c("blob",e),toPng:e=>c("png",e),toJpg:e=>c("jpg",e),toWebp:e=>c("webp",e),download:e=>c("download",e)};for(let e of Object.keys(i)){let t="to"+e.charAt(0).toUpperCase()+e.slice(1);u[t]||(u[t]=t=>c(e,t))}return u},ej.toRaw=(e,t)=>ej(e,t).then(e=>e.toRaw()),ej.toImg=(e,t)=>ej(e,t).then(e=>e.toImg()),ej.toSvg=(e,t)=>ej(e,t).then(e=>e.toSvg()),ej.toCanvas=(e,t)=>ej(e,t).then(e=>e.toCanvas()),ej.toBlob=(e,t)=>ej(e,t).then(e=>e.toBlob()),ej.toPng=(e,t)=>ej(e,{...t,format:"png"}).then(e=>e.toPng()),ej.toJpg=(e,t)=>ej(e,{...t,format:"jpeg"}).then(e=>e.toJpg()),ej.toWebp=(e,t)=>ej(e,{...t,format:"webp"}).then(e=>e.toWebp()),ej.download=(e,t)=>ej(e,t).then(e=>e.download())}}]);