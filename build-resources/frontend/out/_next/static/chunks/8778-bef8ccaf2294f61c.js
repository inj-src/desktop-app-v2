"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8778],{68778:function(e,a,l){l.d(a,{Z:function(){return j}});var s=l(68328),t=l(72940),i=l(6780),n=l(67732);let o=async e=>{let{id:a}=e;try{let e=await i.default.get("".concat("http://sasthotech.local:5000/api/v1","/followup/").concat(a),t.FD);return{success:!0,data:e.data.data}}catch(e){if(e instanceof n.d7){var l;return{success:!1,data:null===(l=e.response)||void 0===l?void 0:l.data.message}}return{success:!1,data:"An error occurred"}}};var r=l(4505),d=l(23583),c=l(14193);let u=async e=>{let{id:a,updatedData:l}=e;console.log(a);try{let e=await i.default.patch("".concat("http://sasthotech.local:5000/api/v1","/followup/").concat(a),l,t.FD);return{success:!0,data:e.data}}catch(e){if(e instanceof n.d7){var s;return{success:!1,data:null===(s=e.response)||void 0===s?void 0:s.data.message}}return{success:!1,data:"An error occurred"}}};var m=l(90660),p=l.n(m),h=l(1860),v=l.n(h),f=l(53502),x=l(17190);let N=c.Ry().shape({status:c.Z_().oneOf(["PENDING","COMPLETED","CANCELLED"]).required("Required")});var j=e=>{let{id:a,close:l}=e,[t,i]=(0,r.useState)({}),n=(0,f.I0)();(0,r.useEffect)(()=>{(async()=>{let{success:e,data:l}=await o({id:a});e&&i(l)})()},[a]);let c=async e=>{var s;let i=null==t?void 0:null===(s=t.patient)||void 0===s?void 0:s.patientId;e!==t.status?!0===(await u({updatedData:{status:e,patientId:i},id:a})).success?(p().fire({title:"Impressive!",text:"Patient Follow up update successfully!",icon:"success"}),n((0,x.zH)(a)),l()):p().fire({icon:"error",title:"Oops...",text:"Something went wrong! Try again letter"}):p().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})};return(0,s.jsx)(d.J9,{enableReinitialize:!0,initialValues:{status:t.status||"PENDING"},validationSchema:N,onSubmit:async e=>{await c(e.status)},children:e=>{var a,l,i,n,o,r,c;let{errors:u,touched:m}=e;return(0,s.jsx)(d.l0,{children:(0,s.jsxs)("div",{className:"container mt-4",children:[(0,s.jsxs)("div",{className:"row g-4",children:[(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsxs)("div",{className:"card shadow-lg rounded-4 p-3",children:[(0,s.jsx)("h5",{className:"text-primary",children:"Patient Information"}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:null===(a=t.patient)||void 0===a?void 0:a.name)||"",readOnly:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Phone"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:null===(l=t.patient)||void 0===l?void 0:l.phone)||"",readOnly:!0})]})]})}),(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsxs)("div",{className:"card shadow-lg rounded-4 p-3",children:[(0,s.jsx)("h5",{className:"text-danger",children:"Hospital Bill"}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Admission Date"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:null===(i=t.hospitalBill)||void 0===i?void 0:i.admissionDate)?v()(null==t?void 0:null===(n=t.hospitalBill)||void 0===n?void 0:n.admissionDate).format("DD-MM-YYYY"):"N/A",readOnly:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Released Date"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:null===(o=t.hospitalBill)||void 0===o?void 0:o.releasedDate)?v()(null==t?void 0:null===(r=t.hospitalBill)||void 0===r?void 0:r.releasedDate).format("DD-MM-YYYY"):"N/A",readOnly:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Paid Amount"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:null===(c=t.hospitalBill)||void 0===c?void 0:c.paidAmount)||"N/A",readOnly:!0})]})]})}),(0,s.jsx)("div",{className:"col-md-12",children:(0,s.jsxs)("div",{className:"card shadow-lg rounded-4 p-3",children:[(0,s.jsx)("h5",{className:"text-success",children:"Follow-Up Status"}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Status"}),(0,s.jsxs)(d.gN,{style:{cursor:"pointer"},as:"select",name:"status",className:"form-select",children:[(0,s.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,s.jsx)("option",{value:"COMPLETED",children:"COMPLETED"}),(0,s.jsx)("option",{value:"CANCELLED",children:"CANCELLED"})]}),u.status&&m.status?(0,s.jsx)("div",{className:"text-danger",children:String(u.status)}):null]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Follow-Up Message"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:t.followUpMsg)||"No message provided"})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Follow-Up Date"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:(null==t?void 0:t.followUpDate)?v()(t.followUpDate).format("DD-MMM-YYYY"):"N/A"})]})]})]})})]}),(0,s.jsx)("div",{className:"text-center mt-4",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-primary px-4 py-2 shadow ".concat("COMPLETED"===t.status?"d-none":""),children:"Update Status"})})]})})}})}},72940:function(e,a,l){l.d(a,{FD:function(){return t},Hn:function(){return s},y4:function(){return i}});let s={headers:{"Content-Type":"application/json"}},t={withCredentials:!0},i={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},17190:function(e,a,l){l.d(a,{f1:function(){return o},v2:function(){return t},xD:function(){return n},zH:function(){return i}});let s=(0,l(79258).createSlice)({name:"marketer",initialState:{items:[]},reducers:{setFollowUpPatients:(e,a)=>{Array.isArray(a.payload)?e.items=a.payload:e.items=[...e.items,a.payload]},setFollowUpPregnancyPatients:(e,a)=>{Array.isArray(a.payload)?e.items=a.payload:e.items=[...e.items,a.payload]},followUpPregnancyPatients:(e,a)=>{e.items=e.items.filter(e=>e.id!==a.payload)},followUpPatients:(e,a)=>{e.items=e.items.filter(e=>e.id!==a.payload)}}}),{setFollowUpPatients:t,followUpPatients:i,setFollowUpPregnancyPatients:n,followUpPregnancyPatients:o}=s.actions;a.ZP=s.reducer}}]);