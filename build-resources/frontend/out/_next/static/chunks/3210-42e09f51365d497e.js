"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3210],{97044:function(e,t,a){var o=a(68328),n=a(36760),i=a(22975),r=a(55911),d=a(29259),u=a(87967),s=a(31204),l=a(12450),p=a(90660),g=a.n(p);t.Z=e=>{let{opened:t,close:a,form:p}=e,c=(0,l.useSearchParams)(),m=(0,l.useRouter)(),[y]=(0,n.z2)(),[h]=(0,n.tq)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.u,{opened:t,onClose:a,title:"Update",children:(0,o.jsxs)("form",{onSubmit:p.onSubmit(async(e,t)=>{try{var o;null==t||t.preventDefault(),null==t||t.stopPropagation();let n=c.get("editId")&&"null"!==c.get("editId")?await h({id:null!==(o=c.get("editId"))&&void 0!==o?o:"",...e}):await y(e);if("error"in n)throw Error("Error");a(),p.reset(),m.push("?operationId=".concat(c.get("operationId")))}catch(e){g().fire("Error","Something Went Wrong","error")}}),children:[(0,o.jsx)(r.TextInput,{styles:{input:{backgroundColor:"white"}},label:"Operation Name ",...p.getInputProps("name")}),(0,o.jsx)(r.TextInput,{styles:{input:{backgroundColor:"white"}},label:"Description ",...p.getInputProps("description")}),(0,o.jsx)(d.Y,{styles:{input:{backgroundColor:"white"}},label:"Price",min:0,description:" ",...p.getInputProps("price")}),(0,o.jsx)(d.Y,{styles:{input:{backgroundColor:"white"}},label:"Discount",min:0,description:" ",...p.getInputProps("discount")}),(0,o.jsx)(u.P,{styles:{input:{backgroundColor:"white"}},label:"Discount Type",data:[{value:"amount",label:"Discount"},{value:"percentage",label:"Percentage"}],...p.getInputProps("discountType")}),(0,o.jsx)(s.Button,{my:10,type:"submit",children:"Submit"})]})})})}},94909:function(e,t,a){a.d(t,{f:function(){return v}});var o=a(68328),n=a(61222),i=a(36760),r=a(55911),d=a(21288),u=a(87967),s=a(22614),l=a(29259),p=a(3741),g=a(31204),c=a(12697),m=a(12450),y=a(4505),h=a(90660),f=a.n(h);function v(e){let{form:t,surgeon:a,refetch:h,close:v}=e,[S]=(0,n.ls)(),[b]=(0,n.Ag)(),C=(0,m.useRouter)(),w=(0,m.useSearchParams)(),{data:I}=(0,i.VR)({}),[D,x]=(0,y.useState)([]),A=(0,y.useMemo)(()=>(null==D?void 0:D.map(e=>e.id))||[],[D]),F=(0,y.useMemo)(()=>{if(null==I?void 0:I.data){var e,t;return null==I?void 0:null===(t=I.data)||void 0===t?void 0:null===(e=t.operations)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name,disabled:A.includes(e.id)}))}},[null==I?void 0:I.data,A]),E=(e,t)=>{if(e){if(t){let t=null==D?void 0:D.filter(t=>t.id!==e);t&&x([...t])}else{let t=null==F?void 0:F.find(t=>t.id===e);t&&x([...D,{...t,price:0}])}}},O=(e,t)=>{let a=[...D];a[e].price=t,x(a)};return(0,y.useEffect)(()=>{if(a){var e;console.log(a),x(null==a?void 0:null===(e=a.anesthesiologistOperationFee)||void 0===e?void 0:e.map(e=>({...e.operation,price:e.anesthesiologistFeeAmount,anesthesiologistId:e.id})))}},[a]),(0,o.jsxs)("form",{onSubmit:t.onSubmit(async(e,a)=>{try{var o;null==a||a.preventDefault(),null==a||a.stopPropagation(),console.log(e,D);let n=w.get("editId")&&"null"!==w.get("editId")?await b({id:null!==(o=w.get("editId"))&&void 0!==o?o:"",...e,operations:D}):await S({...e,operations:D});if("error"in n)throw Error("Error");v(),h(),t.reset(),C.push("?surgeonId=".concat(w.get("surgeonId"))),f().fire("Success","Added","success")}catch(e){f().fire("Error","Something went wrong","error")}}),children:[(0,o.jsx)(r.TextInput,{styles:{input:{backgroundColor:"white"}},label:"Surgeon Name",...t.getInputProps("name")}),(0,o.jsx)(r.TextInput,{styles:{input:{backgroundColor:"white"}},label:"Designation",...t.getInputProps("designation")}),(0,o.jsx)(d.S,{label:"Upload File",placeholder:"Choose file",...t.getInputProps("image")}),(0,o.jsx)(u.P,{label:"Operations",placeholder:"Select operations",data:null!=F?F:[],onChange:e=>E(e),searchable:!0,clearable:!0}),null==D?void 0:D.map((e,t)=>(0,o.jsxs)(s.Group,{align:"end",gap:"sm",mt:"sm",children:[(0,o.jsx)(r.TextInput,{label:"Operation Name",value:e.name,readOnly:!0}),(0,o.jsx)(l.Y,{label:"Fee",placeholder:"Enter Fee",value:e.price,min:0,onChange:e=>O(t,"string"==typeof e?parseInt(e):e)}),(0,o.jsx)(p.A,{onClick:()=>E(e.id,!0),bg:"red",children:(0,o.jsx)(c.Z,{})})]},e.id))," ",(0,o.jsx)(g.Button,{my:10,type:"submit",children:"Submit"})]})}},77594:function(e,t,a){a.d(t,{Q:function(){return v}});var o=a(68328),n=a(36760),i=a(77606),r=a(55911),d=a(21288),u=a(87967),s=a(22614),l=a(29259),p=a(3741),g=a(31204),c=a(12697),m=a(12450),y=a(4505),h=a(90660),f=a.n(h);function v(e){let{form:t,surgeon:a,refetch:h,close:v}=e,[S]=(0,i.jj)(),[b]=(0,i.dF)(),C=(0,m.useRouter)(),w=(0,m.useSearchParams)(),{data:I}=(0,n.VR)({}),[D,x]=(0,y.useState)([]),A=(0,y.useMemo)(()=>(null==D?void 0:D.map(e=>e.id))||[],[D]),F=(0,y.useMemo)(()=>{if(null==I?void 0:I.data){var e,t;return null==I?void 0:null===(t=I.data)||void 0===t?void 0:null===(e=t.operations)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name,disabled:A.includes(e.id)}))}},[null==I?void 0:I.data,A]),E=(e,t)=>{if(e){if(t){let t=null==D?void 0:D.filter(t=>t.id!==e);t&&x([...t])}else{let t=null==F?void 0:F.find(t=>t.id===e);t&&x([...D,{...t,price:0}])}}},O=(e,t)=>{let a=[...D];a[e].price=t,x(a)};return(0,y.useEffect)(()=>{if(a){var e;console.log(a),x(null==a?void 0:null===(e=a.surgeonOperationFee)||void 0===e?void 0:e.map(e=>({...e.operation,price:e.surgeonFeeAmount,surgeonFeeId:e.id})))}},[a]),(0,o.jsxs)("form",{onSubmit:t.onSubmit(async(e,a)=>{try{var o;null==a||a.preventDefault(),null==a||a.stopPropagation(),console.log(e,D);let n=w.get("editId")&&"null"!==w.get("editId")?await b({id:null!==(o=w.get("editId"))&&void 0!==o?o:"",...e,operations:D}):await S({...e,operations:D});if("error"in n)throw Error("Error");v(),h(),t.reset(),C.push("?surgeonId=".concat(w.get("surgeonId"))),f().fire("Success","Surgeon Added","success")}catch(e){f().fire("Error","Something went wrong","error")}}),children:[(0,o.jsx)(r.TextInput,{styles:{input:{backgroundColor:"white"}},label:"Surgeon Name",...t.getInputProps("name")}),(0,o.jsx)(r.TextInput,{styles:{input:{backgroundColor:"white"}},label:"Designation",...t.getInputProps("designation")}),(0,o.jsx)(d.S,{label:"Upload File",placeholder:"Choose file",...t.getInputProps("image")}),(0,o.jsx)(u.P,{label:"Operations",placeholder:"Select operations",data:null!=F?F:[],onChange:e=>E(e),searchable:!0,clearable:!0}),null==D?void 0:D.map((e,t)=>(0,o.jsxs)(s.Group,{align:"end",gap:"sm",mt:"sm",children:[(0,o.jsx)(r.TextInput,{label:"Operation Name",value:e.name,readOnly:!0}),(0,o.jsx)(l.Y,{label:"Fee",placeholder:"Enter Fee",value:e.price,min:0,onChange:e=>O(t,"string"==typeof e?parseInt(e):e)}),(0,o.jsx)(p.A,{onClick:()=>E(e.id,!0),bg:"red",children:(0,o.jsx)(c.Z,{})})]},e.id))," ",(0,o.jsx)(g.Button,{my:10,type:"submit",children:"Submit"})]})}},61222:function(e,t,a){a.d(t,{Ag:function(){return i},Ju:function(){return s},OS:function(){return l},P8:function(){return r},cW:function(){return u},ls:function(){return n}});let o=a(78101).g.injectEndpoints({endpoints:e=>({getAnesthesiologists:e.query({query:e=>{let{page:t,limit:a}=e,o=new URLSearchParams;return t&&o.append("page",t.toString()),a&&o.append("limit",a.toString()),{url:"/anesthesiologist?".concat(o.toString())}},keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createAnesthesiologist:e.mutation({query:e=>{let t=new FormData;return console.log(e),t.append("name",e.name),e.designation&&t.append("designation",e.designation),e.image&&t.append("image",e.image,e.image.name),e.operations&&e.operations.forEach((e,a)=>{t.append("anesthesiologistFee[".concat(a,"][anesthesiologistFeeAmount]"),e.price.toString()),t.append("anesthesiologistFee[".concat(a,"][operationId]"),e.id)}),{url:"/anesthesiologist",method:"POST",body:t}},async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:o}=t;Date.now().toString(36);try{let{data:e}=await o}catch(e){}}}),updateAnesthesiologist:e.mutation({query:e=>{let{id:t,name:a,designation:o,image:n,operations:i}=e;console.log(i);let r=new FormData;return r.append("name",a),o&&r.append("designation",o),n&&r.append("image",n,n.name),i&&i.length>0&&i.forEach((e,t)=>{r.append("anesthesiologistFee[".concat(t,"][anesthesiologistFeeAmount]"),e.price.toString()),e.anesthesiologistFeeId&&r.append("anesthesiologistFee[".concat(t,"][id]"),e.anesthesiologistFeeId),r.append("anesthesiologistFee[".concat(t,"][operationId]"),e.id)}),{url:"/anesthesiologist/".concat(t),method:"PATCH",body:r}}}),updateAnesthesiologistFee:e.mutation({query:e=>{let{anesthesiologistId:t,...a}=e;return{url:"/anesthesiologist/fee/".concat(t),method:"PATCH",body:a}}}),deleteAnesthesiologistFee:e.mutation({query:e=>{let{id:t}=e;return{url:"/anesthesiologist/fee/".concat(t),method:"DELETE"}}}),deleteAnesthesiologist:e.mutation({query:e=>({url:"/anesthesiologist/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,i=a(o.util.updateQueryData("getAnesthesiologists",{page:void 0,limit:void 0},t=>{t.data.anesthesiologists.find(t=>t.id===e)&&(t.data.loading=!0)}));try{await n,a(o.util.updateQueryData("getAnesthesiologists",{page:void 0,limit:void 0},t=>{let a=t.data.anesthesiologists.findIndex(t=>t.id===e);a>=0&&t.data.anesthesiologists.splice(a,1)}))}catch(e){i.undo()}}}),getSingleAnesthesiologist:e.query({query:e=>({url:"/anesthesiologist/".concat(e)})})})}),{useCreateAnesthesiologistMutation:n,useUpdateAnesthesiologistMutation:i,useDeleteAnesthesiologistMutation:r,useGetSingleAnesthesiologistQuery:d,useGetAnesthesiologistsQuery:u,useDeleteAnesthesiologistFeeMutation:s,useUpdateAnesthesiologistFeeMutation:l}=o},87276:function(e,t,a){a.d(t,{Hl:function(){return n},Je:function(){return u},Kl:function(){return d},fP:function(){return s},iQ:function(){return i}});let o=a(78101).g.injectEndpoints({endpoints:e=>({getOperationCategories:e.query({query:e=>{let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[a,o]=e;void 0!==o&&t.append(a,o.toString())}),{url:"/operationCategory?".concat(t.toString())}},keepUnusedDataFor:86400,transformResponse(e){var t;return Array.isArray(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.operationCategories)&&e.data.operationCategories.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),e}}),createOperationCategory:e.mutation({query:e=>({url:"/operationCategory",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,i=Date.now().toString(36),r=a(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},t=>{t.data.operationCategories.unshift({...e,id:i,loading:!0})}));try{let{data:e}=await n;a(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},t=>{let a=t.data.operationCategories.findIndex(e=>e.id===i);a>=0&&(t.data.operationCategories[a]=e.data)}))}catch(e){r.undo()}}}),createOperationCategoriesBulk:e.mutation({query:e=>({url:"/operationCategory/many",method:"POST",body:e}),async onQueryStarted(e,t){let{operationCategories:a}=e,{dispatch:n,queryFulfilled:i}=t,r=a.map(e=>({...e,id:"temp-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),loading:!0})),d=n(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},e=>{e.data.operationCategories.unshift(...r)}));try{let{data:e}=await i;n(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},t=>{t.data.operationCategories=t.data.operationCategories.filter(e=>!e.id.toString().startsWith("temp-")),t.data.operationCategories.unshift(...e.data),t.data.operationCategories.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}))}catch(e){d.undo()}}}),updateOperationCategory:e.mutation({query:e=>{let{id:t,...a}=e;return{url:"/operationCategory/".concat(t),method:"PATCH",body:a}},async onQueryStarted(e,t){let{id:a,...n}=e,{dispatch:i,queryFulfilled:r}=t,d=i(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},e=>{let t=e.data.operationCategories.findIndex(e=>e.id===a);t>=0&&(e.data.operationCategories[t]={...e.data.operationCategories[t],...n})}));try{let{data:e}=await r;i(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},t=>{let o=t.data.operationCategories.findIndex(e=>e.id===a);o>=0&&(t.data.operationCategories[o]=e.data)}))}catch(e){d.undo()}}}),deleteOperationCategory:e.mutation({query:e=>({url:"/operationCategory/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,i=a(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},t=>{let a=t.data.operationCategories.findIndex(t=>t.id===e);a>=0&&(t.data.operationCategories[a]={...t.data.operationCategories[a]})}));try{await n,a(o.util.updateQueryData("getOperationCategories",{page:void 0,limit:void 0},t=>{let a=t.data.operationCategories.findIndex(t=>t.id===e);a>=0&&t.data.operationCategories.splice(a,1)}))}catch(e){i.undo()}}}),getSingleOperationCategory:e.query({query:e=>{let{id:t,...a}=e,o=new URLSearchParams;Object.entries(a).forEach(e=>{let[t,a]=e;void 0!==a&&o.append(t,a.toString())});let n=o.toString()?"?".concat(o.toString()):"";return{url:"/operationCategory/".concat(t).concat(n)}}})})}),{useGetOperationCategoriesQuery:n,useCreateOperationCategoryMutation:i,useCreateOperationCategoriesBulkMutation:r,useUpdateOperationCategoryMutation:d,useDeleteOperationCategoryMutation:u,useGetSingleOperationCategoryQuery:s}=o},36760:function(e,t,a){a.d(t,{SI:function(){return r},VR:function(){return u},tq:function(){return i},z2:function(){return n}});let o=a(78101).g.injectEndpoints({endpoints:e=>({getOperations:e.query({query:e=>{let{page:t,limit:a}=e,o=new URLSearchParams;return t&&o.append("page",t.toString()),a&&o.append("limit",a.toString()),{url:"/operation?".concat(o.toString())}},keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createOperation:e.mutation({query:e=>({url:"/operation",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,i=Date.now().toString(36),r=a(o.util.updateQueryData("getOperations",{page:void 0,limit:void 0},t=>{t.data.operations.push({...e,id:i,loading:!0})}));try{let{data:e}=await n;a(o.util.updateQueryData("getOperations",{page:void 0,limit:void 0},t=>{let a=t.data.operations.findIndex(e=>e.id===i);a>=0&&(t.data.operations[a]=e.data)}))}catch(e){r.undo()}}}),updateOperation:e.mutation({query:e=>{let{id:t,...a}=e;return{url:"/operation/".concat(t),method:"PATCH",body:a}},async onQueryStarted(e,t){let{id:a,...n}=e,{dispatch:i,queryFulfilled:r}=t,d=i(o.util.updateQueryData("getOperations",{page:void 0,limit:void 0},e=>{let t=e.data.operations.findIndex(e=>e.id===a);t>=0&&(e.data.operations[t]={...e.data.operations[t],...n})}));try{let{data:e}=await r;i(o.util.updateQueryData("getOperations",{page:void 0,limit:void 0},t=>{let o=t.data.operations.findIndex(e=>e.id===a);o>=0&&(t.data.operations[o]=e.data)}))}catch(e){d.undo()}}}),deleteOperation:e.mutation({query:e=>({url:"/operation/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,i=a(o.util.updateQueryData("getOperations",{page:void 0,limit:void 0},t=>{t.data.operations.find(t=>t.id===e)&&(t.data.loading=!0)}));try{await n,a(o.util.updateQueryData("getOperations",{page:void 0,limit:void 0},t=>{let a=t.data.operations.findIndex(t=>t.id===e);a>=0&&t.data.operations.splice(a,1)}))}catch(e){i.undo()}}}),getSingleOperation:e.query({query:e=>({url:"/bed/bedCategory/".concat(e)})})})}),{useCreateOperationMutation:n,useUpdateOperationMutation:i,useDeleteOperationMutation:r,useGetSingleOperationQuery:d,useGetOperationsQuery:u}=o},77606:function(e,t,a){a.d(t,{$T:function(){return u},Bu:function(){return r},Y0:function(){return s},dF:function(){return i},jj:function(){return n},qO:function(){return l}});let o=a(78101).g.injectEndpoints({endpoints:e=>({getSurgeons:e.query({query:e=>{let{page:t,limit:a}=e,o=new URLSearchParams;return t&&o.append("page",t.toString()),a&&o.append("to",a.toString()),{url:"/surgeon?".concat(o.toString())}},keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createSurgeon:e.mutation({query:e=>{let t=new FormData;return console.log(e),t.append("name",e.name),e.designation&&t.append("designation",e.designation),e.image&&t.append("image",e.image,e.image.name),e.operations&&e.operations.forEach((e,a)=>{t.append("surgeonFee[".concat(a,"][surgeonFeeAmount]"),e.price.toString()),t.append("surgeonFee[".concat(a,"][operationId]"),e.id)}),{url:"/surgeon",method:"POST",body:t}},async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:o}=t;Date.now().toString(36);try{let{data:e}=await o;console.log(e)}catch(e){}}}),updateSurgeon:e.mutation({query:e=>{let{id:t,name:a,designation:o,image:n,operations:i}=e;console.log(i);let r=new FormData;return r.append("name",a),o&&r.append("designation",o),n&&r.append("image",n,n.name),i&&i.length>0&&i.forEach((e,t)=>{r.append("surgeonFee[".concat(t,"][surgeonFeeAmount]"),e.price.toString()),e.surgeonFeeId&&r.append("surgeonFee[".concat(t,"][id]"),e.surgeonFeeId),r.append("surgeonFee[".concat(t,"][operationId]"),e.id)}),{url:"/surgeon/".concat(t),method:"PATCH",body:r}}}),updateSurgeonFee:e.mutation({query:e=>{let{surgeonId:t,...a}=e;return{url:"/surgeon/fee/".concat(t),method:"PATCH",body:a}}}),deleteSurgeonFee:e.mutation({query:e=>{let{id:t}=e;return{url:"/surgeon/fee/".concat(t),method:"DELETE"}}}),deleteSurgeon:e.mutation({query:e=>({url:"/surgeon/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,i=a(o.util.updateQueryData("getSurgeons",{page:void 0,limit:void 0},t=>{t.data.surgeons.find(t=>t.id===e)&&(t.data.loading=!0)}));try{await n,a(o.util.updateQueryData("getSurgeons",{page:void 0,limit:void 0},t=>{let a=t.data.surgeons.findIndex(t=>t.id===e);a>=0&&t.data.surgeons.splice(a,1)}))}catch(e){i.undo()}}}),getSingleSurgeon:e.query({query:e=>({url:"/surgeon/".concat(e)})})})}),{useCreateSurgeonMutation:n,useUpdateSurgeonMutation:i,useDeleteSurgeonMutation:r,useGetSingleSurgeonQuery:d,useGetSurgeonsQuery:u,useDeleteSurgeonFeeMutation:s,useUpdateSurgeonFeeMutation:l}=o}}]);