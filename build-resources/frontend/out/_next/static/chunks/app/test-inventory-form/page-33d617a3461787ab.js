(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7065],{628:function(e,t,n){Promise.resolve().then(n.bind(n,57918))},57918:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(68328),i=n(34473),a=n(68242),o=n(89043),s=n(31204),d=n(55332),u=n(23583),l=n(14193),c=n(36646),m=n(4505);let y=l.Ry({inventoryItems:l.IX().of(c.CX).default([])});function v(){let[e,t]=(0,m.useState)(null);return(0,r.jsxs)(i.Container,{size:"lg",py:"xl",children:[(0,r.jsx)(a.Title,{order:1,mb:"lg",children:"Test AddInventoryItemForm"}),(0,r.jsx)(u.J9,{initialValues:{inventoryItems:[]},validationSchema:y,onSubmit:e=>{t(e)},children:t=>{let{values:n,errors:i,touched:l,isSubmitting:m}=t;return(0,r.jsxs)(u.l0,{children:[(0,r.jsxs)(o.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mb:"lg",children:[(0,r.jsx)(a.Title,{order:2,size:"h4",mb:"md",children:"Add Inventory Items"}),(0,r.jsx)(c.t2,{})]}),(0,r.jsxs)(o.X,{bg:"white",p:"lg",radius:"md",shadow:"md",children:[(0,r.jsx)(s.Button,{type:"submit",mb:"md",children:"Submit Form"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Title,{order:3,size:"h5",mb:"md",children:"Current Form Values:"}),(0,r.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"6px",overflow:"auto",fontSize:"12px"},children:JSON.stringify(n,null,2)})]}),e&&(0,r.jsx)(d.P,{title:"Form Submitted",color:"green",mt:"md",children:(0,r.jsx)("pre",{style:{fontSize:"12px",margin:0},children:JSON.stringify(e,null,2)})}),Object.keys(i).length>0&&(0,r.jsx)(d.P,{title:"Validation Errors",color:"red",mt:"md",children:(0,r.jsx)("pre",{style:{fontSize:"12px",margin:0},children:JSON.stringify(i,null,2)})})]})]})}})]})}},36646:function(e,t,n){"use strict";n.d(t,{CX:function(){return T},t2:function(){return p}});var r=n(68328),i=n(4505),a=n(23583),o=n(14193),s=n(46373),d=n(22041),u=n(22614),l=n(14587),c=n(87967),m=n(54632),y=n(29259),v=n(3741),h=n(13916),g=n(12697),f=n(52387);let T=o.Ry({name:o.Z_().required().label("Item Name"),unitCost:o.Rx().required().label("Unit Price"),quantity:o.Rx().required().label("Unit"),itemId:o.Z_().required()}),p=()=>(0,r.jsx)(x,{useFieldResult:(0,a.U$)("inventoryItems")}),x=(0,i.memo)(function(e){var t,n,i,o;let{useFieldResult:T}=e,[{value:p=[]},,{setValue:x}]=T,{data:q,isLoading:I}=(0,f.gZ)("INDOOR"),{data:j,isLoading:b}=(0,f.WK)({limit:1e4},{refetchOnMountOrArgChange:!1}),E=null!==(o=null==j?void 0:j.data)&&void 0!==o?o:[],S=(null==q?void 0:null===(i=q.data)||void 0===i?void 0:null===(n=i.groupedByBillType)||void 0===n?void 0:null===(t=n.INDOOR)||void 0===t?void 0:t.map(e=>e.storeId))||[],P=S.length>0?E.filter(e=>e.storeId&&S.includes(e.storeId)):E,k=P.filter(e=>-1===p.findIndex(t=>t.itemId===e.id)).map(e=>{var t,n;return{value:e.id,label:"".concat(e.name," (").concat((null===(t=e.store)||void 0===t?void 0:t.name)?"".concat(e.store.name):"").concat((null===(n=e.store)||void 0===n?void 0:n.tag)?" - ".concat(e.store.tag.tag.name):"",")")}});return(0,r.jsxs)(r.Fragment,{children:[S.length>0&&(0,r.jsx)(s.b,{icon:(0,r.jsx)(h.Z,{size:16}),color:"blue",variant:"light",mb:"sm",children:(0,r.jsxs)(d.Text,{size:"xs",children:["Showing items from ",S.length," configured default store(s)"]})}),I&&(0,r.jsxs)(u.Group,{gap:"xs",mb:"sm",children:[(0,r.jsx)(l.Loader,{size:"xs"}),(0,r.jsx)(d.Text,{size:"xs",c:"dimmed",children:"Loading default stores..."})]}),(0,r.jsx)(a.J9,{onSubmit:()=>{},initialValues:{itemId:""},children:e=>{let{resetForm:t,values:n}=e;return(0,r.jsx)(u.Group,{align:"end",gap:"sm",children:(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(c.P,{label:"Inventory Item",placeholder:"Search item",searchable:!0,clearable:!0,data:k,value:n.itemId,onChange:e=>{if(!e)return;let n=P.find(t=>t.id===e);n&&(x([...p,{name:n.name,unitCost:n.sellingPrice||0,quantity:1,itemId:n.id}],!1),t())},nothingFoundMessage:b||I?"Loading...":k.length?void 0:S.length>0?"No items found in default stores":"No items found",disabled:I})})})}}),!!p.length&&(0,r.jsx)(m.i.ScrollContainer,{mt:"md",minWidth:767,children:(0,r.jsxs)(m.i,{children:[(0,r.jsx)(m.i.Thead,{children:(0,r.jsx)(m.i.Tr,{children:["SL","Item Name","Unit Price","Unit","Total",""].map(e=>(0,r.jsx)(m.i.Th,{children:e},e))})}),(0,r.jsx)(m.i.Tbody,{children:p.map((e,t)=>(0,r.jsxs)(m.i.Tr,{children:[(0,r.jsx)(m.i.Td,{children:t+1}),(0,r.jsx)(m.i.Td,{children:(0,r.jsx)(d.Text,{size:"sm",children:e.name})}),(0,r.jsx)(m.i.Td,{children:(0,r.jsx)(a.gN,{name:"inventoryItems.".concat(t,".unitCost"),children:e=>{var t;let{field:n,form:i}=e;return(0,r.jsx)(y.Y,{hideControls:!0,min:0,value:null!==(t=n.value)&&void 0!==t?t:0,onChange:e=>i.setFieldValue(n.name,Number(e)||0),styles:{input:{maxWidth:"8rem"}}})}})}),(0,r.jsx)(m.i.Td,{children:(0,r.jsx)(a.gN,{name:"inventoryItems.".concat(t,".quantity"),children:e=>{var t;let{field:n,form:i}=e;return(0,r.jsx)(y.Y,{hideControls:!0,min:1,value:null!==(t=n.value)&&void 0!==t?t:1,onChange:e=>i.setFieldValue(n.name,Math.max(1,Number(e)||1)),styles:{input:{maxWidth:"4rem"}}})}})}),(0,r.jsx)(m.i.Td,{children:(+e.unitCost||0)*(+e.quantity||0)}),(0,r.jsx)(m.i.Td,{children:(0,r.jsx)(v.A,{variant:"transparent","aria-label":"Delete",onClick:()=>{x(p.toSpliced(t,1),!0)},children:(0,r.jsx)(g.Z,{style:{width:"70%",height:"70%"},stroke:1.5})})})]},e.itemId))})]})})]})})},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return i},Hn:function(){return r},y4:function(){return a}});let r={headers:{"Content-Type":"application/json"}},i={withCredentials:!0},a={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},52387:function(e,t,n){"use strict";n.d(t,{Cf:function(){return A},DD:function(){return G},OB:function(){return k},OE:function(){return s},WK:function(){return m},WY:function(){return r},Xz:function(){return g},Yd:function(){return D},_r:function(){return _},a:function(){return C},aB:function(){return P},aS:function(){return R},ap:function(){return F},bM:function(){return y},bg:function(){return l},fF:function(){return f},fp:function(){return T},fv:function(){return h},gZ:function(){return L},j6:function(){return a},lg:function(){return w},mS:function(){return v},sv:function(){return U},vR:function(){return O},zQ:function(){return N}});let{useGetAllStoresQuery:r,useGetStoreQuery:i,useCreateStoreMutation:a,useUpdateStoreMutation:o,useDeleteStoreMutation:s,useGetAllStoreTagsQuery:d,useGetStoreTagQuery:u,useCreateStoreTagMutation:l,useDeleteStoreTagMutation:c,useGetAllInventoryItemsQuery:m,useGetInventoryItemQuery:y,useCreateInventoryItemMutation:v,useUpdateInventoryItemMutation:h,useDeleteInventoryItemMutation:g,useDeductStockMutation:f,useAddStockMutation:T,useGetAllInventoryPackagesQuery:p,useGetInventoryPackageQuery:x,useCreateInventoryPackageMutation:q,useUpdateInventoryPackageMutation:I,useDeleteInventoryPackageMutation:j,useAddItemToPackageMutation:b,useUpdatePackageItemMutation:E,useRemoveItemFromPackageMutation:S,useGetDeductionPoliciesQuery:P,useCreateDeductionPolicyMutation:k,useUpdateDeductionPolicyMutation:R,useDeleteDeductionPolicyMutation:C,useGetDashboardSummaryQuery:O,useGetStockTrendsQuery:D,useGetCriticalAlertsQuery:w,useGetTransactionLogsQuery:G,useGetBatchesQuery:A,useGetUsersQuery:N,useGetGroupedTransactionsQuery:U,useGetDefaultStoresQuery:L,useAddDefaultStoreMutation:F,useSetDefaultStoresMutation:z,useDeleteDefaultStoreMutation:_}=n(78101).g.injectEndpoints({endpoints:e=>({getAllStores:e.query({query:()=>({url:"/store",method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStore:e.query({query:e=>({url:"/store/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createStore:e.mutation({query:e=>({url:"/store",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateStore:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/store/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteStore:e.mutation({query:e=>({url:"/store/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),getAllStoreTags:e.query({query:()=>({url:"/storeTag",method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStoreTag:e.query({query:e=>({url:"/storeTag/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createStoreTag:e.mutation({query:e=>({url:"/storeTag",method:"POST",body:e}),invalidatesTags:["inventory"]}),deleteStoreTag:e.mutation({query:e=>({url:"/storeTag/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),getAllInventoryItems:e.query({query:e=>({url:"/inventoryItem",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data,pagination:e.pagination})}),getInventoryItem:e.query({query:e=>({url:"/inventoryItem/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createInventoryItem:e.mutation({query:e=>({url:"/inventoryItem",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateInventoryItem:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/inventoryItem/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteInventoryItem:e.mutation({query:e=>({url:"/inventoryItem/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),deductStock:e.mutation({query:e=>({url:"/inventoryItem/deduct-stock",method:"POST",body:e}),invalidatesTags:["inventory"]}),addStock:e.mutation({query:e=>({url:"/inventoryItem/add-stock",method:"POST",body:e}),invalidatesTags:["inventory"]}),getAllInventoryPackages:e.query({query:e=>({url:"/inventoryPackage",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data,pagination:e.pagination})}),getInventoryPackage:e.query({query:e=>({url:"/inventoryPackage/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createInventoryPackage:e.mutation({query:e=>({url:"/inventoryPackage",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateInventoryPackage:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/inventoryPackage/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteInventoryPackage:e.mutation({query:e=>({url:"/inventoryPackage/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),addItemToPackage:e.mutation({query:e=>{let{packageId:t,...n}=e;return{url:"/inventoryPackage/".concat(t,"/items"),method:"POST",body:n}},invalidatesTags:["inventory"]}),updatePackageItem:e.mutation({query:e=>{let{packageId:t,itemId:n,...r}=e;return{url:"/inventoryPackage/".concat(t,"/items/").concat(n),method:"PUT",body:r}},invalidatesTags:["inventory"]}),removeItemFromPackage:e.mutation({query:e=>{let{packageId:t,itemId:n}=e;return{url:"/inventoryPackage/".concat(t,"/items/").concat(n),method:"DELETE"}},invalidatesTags:["inventory"]}),getDeductionPolicies:e.query({query:e=>({url:"/inventoryItem/".concat(e,"/deduction-policy"),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createDeductionPolicy:e.mutation({query:e=>{let{itemId:t,...n}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy"),method:"POST",body:n}},invalidatesTags:["inventory"]}),updateDeductionPolicy:e.mutation({query:e=>{let{itemId:t,policyId:n,...r}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy/").concat(n),method:"PATCH",body:r}},invalidatesTags:["inventory"]}),deleteDeductionPolicy:e.mutation({query:e=>{let{itemId:t,policyId:n}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy/").concat(n),method:"DELETE"}},invalidatesTags:["inventory"]}),getDashboardSummary:e.query({query:e=>({url:"/inventory/dashboard/summary",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStockTrends:e.query({query:e=>({url:"/inventory/dashboard/trends",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getCriticalAlerts:e.query({query:e=>({url:"/inventory/dashboard/critical-alerts",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getTransactionLogs:e.query({query:e=>({url:"/inventory/transactions",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getBatches:e.query({query:e=>({url:"/inventory/batches",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getUsers:e.query({query:()=>({url:"/admin/user",method:"GET"}),transformResponse:e=>({data:e.data})}),getGroupedTransactions:e.query({query:e=>({url:"/inventory/transactions/grouped",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getDefaultStores:e.query({query:e=>({url:"/inventory/default-stores",method:"GET",params:e?{billType:e}:void 0}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),addDefaultStore:e.mutation({query:e=>({url:"/inventory/default-stores",method:"POST",body:e}),invalidatesTags:["inventory"]}),setDefaultStores:e.mutation({query:e=>({url:"/inventory/default-stores",method:"PUT",body:e}),invalidatesTags:["inventory"]}),deleteDefaultStore:e.mutation({query:e=>({url:"/inventory/default-stores",method:"DELETE",body:e}),invalidatesTags:["inventory"]})})})},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var r=n(49854),i=n(68240),a=n(94183),o=n(28317);let s=(0,i.LC)({baseQuery:(0,a.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let i="string"==typeof e?e:e.url;return i.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,o.t8)(i,await n.clone().json().catch(()=>null),(0,r.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(n,(0,r.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,t,n){"use strict";let r;n.d(t,{d:function(){return u},x:function(){return d}});var i=n(72940),a=n(6780),o=n(67732),s=n(28317);function d(){return r||(r=(0,s.MT)("cached-responses-store","cached-responses")),r}async function u(e,t){try{let n=await a.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...i.FD});return await (0,s.t8)(e,n.data,d()),n.data}catch(t){if(t instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(t.code)){let t=await (0,s.U2)(e,d());if(t)return t}throw t instanceof o.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[1601,3069,6945,3852,1656,9722,4670,9258,9533,966,1166,7967,6306,3583,4193,7206,9175,7402,1744],function(){return e(e.s=628)}),_N_E=e.O()}]);