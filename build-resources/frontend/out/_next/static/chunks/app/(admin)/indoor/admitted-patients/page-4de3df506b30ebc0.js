(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{22097:function(e,t,i){Promise.resolve().then(i.bind(i,52522))},52522:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return S}});var l=i(68328),a=i(73031),s=i(69667),n=i(35689),r=i(43355),d=i(15139),o=i(65971),u=i(74559),c=i(13603),b=i(25499),m=i(84944),h=i(32451),p=i(22614),v=i(68242),x=i(31204),f=i(48604),g=i(22041),j=i(41224),y=i(54632),k=i(58185),T=i(12450),C=i(4505),w=i(88412);function S(){var e,t,i;let S=(0,b.C)(u.nC),I=(0,b.C)(c.uA),z=(0,T.useSearchParams)(),{columnSettings:P,getVisibleColumns:Z,columnAccessors:N}=(0,m.yV)(),[A,M]=(0,C.useState)(null),D=(0,C.useRef)(null),B=(0,w.useReactToPrint)({content:()=>D.current}),F=(0,C.useMemo)(()=>Z(["billId","patientName","bed","dateTime","user","status","paidToday","totalPaid","diagnosis"]),[P,Z]);return(0,C.useEffect)(()=>{(async()=>{var e,t;let{success:i,data:l}=await (0,o.q)({from:I[0],to:I[1],isOwn:"receptionist"===S?!z.get("overall"):void 0,limit:Number.parseInt(null!==(e=z.get("limit"))&&void 0!==e?e:"")||25,page:Number.parseInt(null!==(t=z.get("page"))&&void 0!==t?t:"")||1,status:"Admitted"});i?M(l):console.error(l)})()},[z,I,S]),(0,l.jsxs)(h.Box,{className:"p-3 bg-light p-md-5 printable",ref:D,children:[(0,l.jsx)(r.F,{className:"print-only"}),(0,l.jsxs)(p.Group,{children:[(0,l.jsx)(d.P,{fz:36,p:6,className:"bg-dark text-white rounded-circle hide__print"}),(0,l.jsx)(v.Title,{mr:"auto",children:"Admitted Patients"}),(0,l.jsxs)(p.Group,{gap:"xs",className:"hide__print",children:[(0,l.jsx)(n.i,{}),(0,l.jsx)(x.Button,{size:"md",radius:"md",leftSection:(0,l.jsx)(k.Z,{}),onClick:B,children:"Print"})]})]}),z.get("total")&&(0,l.jsxs)(f.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,mt:"lg",bg:"blue.0",children:[(0,l.jsx)(p.Group,{justify:"space-between",align:"flex-start",mb:"md",children:(0,l.jsx)(g.Text,{size:"sm",fw:600,c:"blue.6",children:"Total Admission"})}),(0,l.jsx)(g.Text,{size:"44px",fw:700,c:"blue.6",lh:1.2,mb:"xs",children:null!==(t=null==A?void 0:A.totalItems)&&void 0!==t?t:0}),(0,l.jsx)(g.Text,{size:"sm",c:"blue.6",children:"Admitted patients"})]}),(0,l.jsx)(s.W,{mt:"lg"}),(0,l.jsx)(f.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,mt:"md",children:(0,l.jsxs)(j.Stack,{gap:"md",children:[(0,l.jsx)(y.i.ScrollContainer,{minWidth:767,children:(0,l.jsxs)(y.i,{children:[(0,l.jsx)(y.i.Thead,{children:(0,l.jsx)(y.i.Tr,{children:F.map(e=>(0,l.jsx)(y.i.Th,{children:e.label},e.id))})}),(0,l.jsx)(y.i.Tbody,{children:null==A?void 0:null===(e=A.items.hospitalPatients)||void 0===e?void 0:e.map((e,t)=>(0,l.jsx)(y.i.Tr,{children:F.map(t=>(0,l.jsx)(y.i.Td,{children:N[t.id](e)},"".concat(e.billId,"-").concat(t.id)))},t))})]})}),(0,l.jsx)(a.Z,{totalPages:null!==(i=null==A?void 0:A.totalPage)&&void 0!==i?i:1})]})})]})}},35689:function(e,t,i){"use strict";i.d(t,{i:function(){return T}});var l=i(68328),a=i(84944),s=i(76029),n=i(3741),r=i(22975),d=i(68242),o=i(41224),u=i(22041),c=i(48604),b=i(22614),m=i(72375),h=i(55911),p=i(31204),v=i(46557),x=i(38156),f=i(45437),g=i(6660),j=i(52013),y=i(50430),k=i(4505);let T=()=>{let[e,{open:t,close:i}]=(0,v.q)(!1),{columnSettings:T,updateColumnLabel:C,toggleColumnVisibility:w,reorderColumns:S,resetToDefaults:I}=(0,a.yV)(),[z,P]=(0,k.useState)(null),[Z,N]=(0,k.useState)(""),A=(0,k.useMemo)(()=>Object.values(T).sort((e,t)=>e.order-t.order),[T]),M=(e,t)=>{P(e),N(t)},D=e=>{Z.trim()&&C(e,Z),P(null),N("")},B=(e,t)=>{if(0===t)return;let i=A.map(i=>i.id===e?i.id:i.order===t-1?e:i.id),l=A[t-1],a=[...i];a[t]=l.id,a[t-1]=e,S(a)},F=(e,t)=>{if(t===A.length-1)return;let i=A.map(e=>e.id),l=A[t+1];i[t]=l.id,i[t+1]=e,S(i)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.u,{label:"Column Settings",children:(0,l.jsx)(n.A,{size:"lg",variant:"light",onClick:t,"aria-label":"Column Settings",children:(0,l.jsx)(x.Z,{size:20})})}),(0,l.jsx)(r.u,{opened:e,onClose:i,title:(0,l.jsx)(d.Title,{order:3,children:"Indoor Patient Column Settings"}),size:"lg",children:(0,l.jsxs)(o.Stack,{gap:"md",children:[(0,l.jsx)(u.Text,{size:"sm",c:"dimmed",children:"Customize column names, visibility, and order for all indoor patient tables."}),(0,l.jsx)(o.Stack,{gap:"xs",children:A.map((e,t)=>(0,l.jsx)(c.Z,{padding:"sm",withBorder:!0,children:(0,l.jsxs)(b.Group,{justify:"space-between",wrap:"nowrap",children:[(0,l.jsxs)(b.Group,{gap:"xs",style:{flex:1},children:[(0,l.jsx)(m.X,{checked:e.visible,onChange:t=>{t.stopPropagation(),w(e.id)},"aria-label":"Toggle ".concat(e.label," visibility")}),z===e.id?(0,l.jsx)(h.TextInput,{value:Z,onChange:e=>N(e.target.value),onKeyDown:t=>{"Enter"===t.key&&D(e.id),"Escape"===t.key&&(P(null),N(""))},size:"xs",style:{flex:1},autoFocus:!0}):(0,l.jsx)(u.Text,{size:"sm",fw:500,style:{textDecoration:e.visible?"none":"line-through",opacity:e.visible?1:.5},children:e.label}),e.label!==e.defaultLabel&&(0,l.jsxs)(u.Text,{size:"xs",c:"dimmed",children:["(Default: ",e.defaultLabel,")"]})]}),(0,l.jsxs)(b.Group,{gap:"xs",children:[z===e.id?(0,l.jsx)(p.Button,{size:"xs",onClick:()=>D(e.id),children:"Save"}):(0,l.jsx)(s.u,{label:"Edit label",children:(0,l.jsx)(n.A,{size:"sm",variant:"subtle",onClick:()=>M(e.id,e.label),children:(0,l.jsx)(f.Z,{size:16})})}),(0,l.jsx)(s.u,{label:"Move up",children:(0,l.jsx)(n.A,{size:"sm",variant:"subtle",onClick:()=>B(e.id,t),disabled:0===t,children:(0,l.jsx)(g.Z,{size:16})})}),(0,l.jsx)(s.u,{label:"Move down",children:(0,l.jsx)(n.A,{size:"sm",variant:"subtle",onClick:()=>F(e.id,t),disabled:t===A.length-1,children:(0,l.jsx)(j.Z,{size:16})})})]})]})},e.id))}),(0,l.jsxs)(b.Group,{justify:"flex-end",mt:"md",children:[(0,l.jsx)(p.Button,{variant:"light",leftSection:(0,l.jsx)(y.Z,{size:16}),onClick:I,children:"Reset to Defaults"}),(0,l.jsx)(p.Button,{onClick:i,children:"Close"})]})]})})]})}},84944:function(e,t,i){"use strict";i.d(t,{yV:function(){return b}});var l=i(68328),a=i(62471),s=i(22041),n=i(98641),r=i(78284),d=i(4505);let o=e=>{let{bedId:t}=e,i=(0,r.p)(null!=t?t:"");return(0,l.jsx)(s.Text,{children:i||"-"})},u={billId:{id:"billId",label:"Bill ID",defaultLabel:"Bill ID",visible:!0,order:0},patientName:{id:"patientName",label:"Patient Name(P.ID)",defaultLabel:"Patient Name(P.ID)",visible:!0,order:1},bed:{id:"bed",label:"Bed",defaultLabel:"Bed",visible:!0,order:2},dateTime:{id:"dateTime",label:"Bill Date & Time",defaultLabel:"Bill Date & Time",visible:!0,order:3},user:{id:"user",label:"User",defaultLabel:"User",visible:!0,order:4},status:{id:"status",label:"Status",defaultLabel:"Status",visible:!0,order:5},paidToday:{id:"paidToday",label:"Paid Today",defaultLabel:"Paid Today",visible:!0,order:6},totalPaid:{id:"totalPaid",label:"Total Paid",defaultLabel:"Total Paid",visible:!0,order:7},diagnosis:{id:"diagnosis",label:"Diagnosis",defaultLabel:"Diagnosis",visible:!0,order:8},admissionFee:{id:"admissionFee",label:"Add. Fee",defaultLabel:"Add. Fee",visible:!0,order:9},advanceFee:{id:"advanceFee",label:"Advance",defaultLabel:"Advance",visible:!0,order:10}},c={billId:e=>(0,n.OU)(e),patientName:e=>{var t,i,l;return(null!==(l=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==l?l:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")"},bed:e=>{var t,i;return(0,l.jsx)(o,{bedId:null===(i=e.bookings)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.bedId},"bed-".concat(e.billId))},dateTime:e=>(0,n.t2)(e),user:e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.name},status:e=>e.status,paidToday:e=>e.paidInAmountTotal,totalPaid:e=>e.paidAmount,diagnosis:e=>e.diagnosis,admissionFee:e=>e.admissionFee,advanceFee:e=>e.advanceFee},b=()=>{let[e,t]=(0,a.I)({key:"indoor-patient-columns-settings",defaultValue:u,serialize:e=>JSON.stringify(e),deserialize:e=>e?JSON.parse(e):u}),[i,l]=(0,d.useTransition)(),s=(0,d.useRef)(null),n=(0,d.useCallback)(t=>{let i=Object.values(e).filter(e=>e.visible).sort((e,t)=>e.order-t.order);return t&&t.length>0?i.filter(e=>t.includes(e.id)):i},[e]),r=(0,d.useCallback)((e,i)=>{l(()=>{t(t=>{let l={...t};return l[e]={...l[e],label:i},l})})},[l]);return{columnSettings:e,getVisibleColumns:n,updateColumnLabel:r,toggleColumnVisibility:(0,d.useCallback)(e=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{l(()=>{t(t=>{let i=t[e];if(!i)return console.error("Column not found:",e),t;let l=!i.visible,a={...t};return a[e]={...i,visible:l},a})}),s.current=null},0)},[l]),reorderColumns:(0,d.useCallback)(e=>{l(()=>{t(t=>{let i={...t};return e.forEach((e,t)=>{i[e]&&(i[e]={...i[e],order:t})}),i})})},[l]),resetToDefaults:(0,d.useCallback)(()=>{l(()=>{t(u)})},[l]),columnAccessors:c,isPending:i}}},65971:function(e,t,i){"use strict";i.d(t,{q:function(){return n}});var l=i(72940),a=i(6780),s=i(67732);let n=async e=>{let{from:t,to:i,isPaid:n,isOwn:r,phone:d,patientId:o,limit:u,page:c,status:b,userId:m,serviceId:h,doctorId:p,pCId:v,nurseId:x,referredDoctorId:f,isCommissionPaid:g,isAdmissionFeePaid:j}=e;try{t&&(t=new Date(t)).setHours(0,0,0,0),i&&(i=new Date(i)).setHours(23,59,59,999);let e=await a.default.get("hospitalBill",{baseURL:"http://sasthotech.local:5000/api/v1",params:{from:t,to:i,isPaid:n,isOwn:r,phone:d,patientId:o,limit:u,page:c,status:b,userId:m,serviceId:h,doctorId:p,pCId:v,nurseId:x,referredDoctorId:f,isCommissionPaid:g,isAdmissionFeePaid:j},...l.FD});return{success:!0,data:e.data.data}}catch(e){if(e instanceof s.d7){var y;return{success:!1,data:null===(y=e.response)||void 0===y?void 0:y.data.message}}return{success:!1,data:"An error occurred"}}}},48604:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var l=i(68328),a=i(4505),s=i(63773),n=i(55622),r=i(65786),d=i(28266),o=i(4687),u=i(89043);let[c,b]=(0,i(98296).R)("Card component was not found in tree");var m=i(32451),h={root:"m_e615b15f",section:"m_599a2148"};let p={},v=(0,o.b)((e,t)=>{let{classNames:i,className:a,style:s,styles:n,vars:d,withBorder:o,inheritPadding:u,mod:c,...h}=(0,r.w)("CardSection",p,e),v=b();return(0,l.jsx)(m.Box,{ref:t,mod:[{"with-border":o,"inherit-padding":u},c],...v.getStyles("section",{className:a,style:s,styles:n,classNames:i}),...h})});v.classes=h,v.displayName="@mantine/core/CardSection";let x={},f=(0,n.Z)((e,t)=>{let{padding:i}=t;return{root:{"--card-padding":(0,s.bG)(i)}}}),g=(0,o.b)((e,t)=>{let i=(0,r.w)("Card",x,e),{classNames:s,className:n,style:o,styles:b,unstyled:m,vars:p,children:g,padding:j,...y}=i,k=(0,d.y)({name:"Card",props:i,classes:h,className:n,style:o,classNames:s,styles:b,unstyled:m,vars:p,varsResolver:f}),T=a.Children.toArray(g),C=T.map((e,t)=>"object"==typeof e&&e&&"type"in e&&e.type===v?(0,a.cloneElement)(e,{"data-first-section":0===t||void 0,"data-last-section":t===T.length-1||void 0}):e);return(0,l.jsx)(c,{value:{getStyles:k},children:(0,l.jsx)(u.X,{ref:t,unstyled:m,...k("root"),...y,children:C})})});g.classes=h,g.displayName="@mantine/core/Card",g.Section=v},55911:function(e,t,i){"use strict";i.r(t),i.d(t,{TextInput:function(){return d}});var l=i(68328);i(4505);var a=i(65786),s=i(36246),n=i(80745);let r={},d=(0,s.d5)((e,t)=>{let i=(0,a.w)("TextInput",r,e);return(0,l.jsx)(n.M,{component:"input",ref:t,...i,__staticSelector:"TextInput"})});d.classes=n.M.classes,d.displayName="@mantine/core/TextInput"},46557:function(e,t,i){"use strict";i.d(t,{q:function(){return a}});var l=i(4505);function a(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,{onOpen:i,onClose:a}=t||{},[s,n]=(0,l.useState)(e),r=(0,l.useCallback)(()=>{n(e=>e||(null==i||i(),!0))},[i]),d=(0,l.useCallback)(()=>{n(e=>e?(null==a||a(),!1):e)},[a]),o=(0,l.useCallback)(()=>{s?d():r()},[d,r,s]);return[s,{open:r,close:d,toggle:o}]}},52013:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(52165).Z)("outline","arrow-down","ArrowDown",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]])},6660:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(52165).Z)("outline","arrow-up","ArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]])},45437:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(52165).Z)("outline","edit","Edit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]])},50430:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(52165).Z)("outline","refresh","Refresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]])},38156:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(52165).Z)("outline","settings","Settings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]])}},function(e){e.O(0,[1601,2975,748,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,154,6306,7698,4927,7140,1291,817,3275,9679,9175,7402,1744],function(){return e(e.s=22097)}),_N_E=e.O()}]);