(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3489],{55841:function(e,n,i){Promise.resolve().then(i.bind(i,46327))},46327:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return eg}});var s=i(68328),r=i(7203),o=i(61222),t=i(22614),l=i(68242),a=i(22041),d=i(87967),c=i(31204),u=i(29663),h=i(97428),x=i(48604),p=i(3741),j=i(22975),g=i(47720),m=i(46557),v=i(45437),f=i(12697),T=i(12450),b=i(4505),C=i(90660),w=i.n(C),y=i(94909),k=i(16938),G=i(29259),I=i(59406),F=i(37947);function A(e){return"function"==typeof e&&"updateOperationFee"===e.name}var S=function(e){var n,i,r,o;let{operationFee:t,anesthesiologistFee:l,onSave:a}=e;console.log(t,"operation fee");let[d,c]=(0,b.useState)(!1),[h,x]=(0,b.useState)(t?null===(n=t.operation)||void 0===n?void 0:n.name:l?null===(i=l.operation)||void 0===i?void 0:i.name:""),[j,g]=(0,b.useState)(t?t.surgeonFeeAmount:l?l.anesthesiologistFeeAmount:0),m=async()=>{console.log(A(a),a),a&&t?await (null==a?void 0:a({id:t.id,surgeonId:t.surgeonId,operationId:t.operationId,surgeonFeeAmount:j})):l&&!A(a)&&await (null==a?void 0:a({id:l.id,anesthesiologistId:l.anesthesiologistId,operationId:l.operationId,anesthesiologistFeeAmount:j})),c(!1)};return(0,s.jsxs)(u.Grid,{style:{backgroundColor:(t||l||{index:1}).index%2==0?"#E5E5E5":"#ffffff",padding:"10px 10px"},children:[(0,s.jsxs)(u.Grid.Col,{span:6,children:[(0,s.jsx)(k.T,{children:(null!==(o=null!==(r=null==t?void 0:t.index)&&void 0!==r?r:null==l?void 0:l.index)&&void 0!==o?o:0)+1})," ",h]}),(0,s.jsx)(u.Grid.Col,{span:3,children:d?(0,s.jsx)(G.Y,{styles:{input:{backgroundColor:"white"}},value:j,onChange:e=>g("string"==typeof e?parseInt(e):e),min:0}):j}),(0,s.jsx)(u.Grid.Col,{span:3,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{variant:"default",onClick:m,children:(0,s.jsx)(I.Z,{})}),(0,s.jsx)(p.A,{variant:"default",onClick:()=>c(!1),children:(0,s.jsx)(F.Z,{})})]}):(0,s.jsx)(p.A,{variant:"default",onClick:()=>c(!0),children:(0,s.jsx)(v.Z,{})})})]})},P=function(){var e,n,i,C;let{data:k,isLoading:G,refetch:I}=(0,o.cW)({}),[F]=(0,o.P8)(),A=(0,T.useRouter)(),P=(0,T.useSearchParams)(),[B,{open:N,close:z}]=(0,m.q)(!1),[Z,O]=(0,b.useState)(null),[D]=(0,o.OS)(),[E]=(0,o.Ju)(),_=(0,b.useMemo)(()=>{if(null==k?void 0:k.data){var e,n;return null==k?void 0:null===(n=k.data)||void 0===n?void 0:null===(e=n.anesthesiologists)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name}))}},[null==k?void 0:k.data]),L=(0,g.c)({initialValues:{name:"",designation:"",image:null}});return G?(0,s.jsx)(r.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.Group,{align:"start",justify:"space-between",children:[(0,s.jsxs)(t.Group,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Title,{order:3,children:"Anesthesiologist"}),(0,s.jsxs)(a.Text,{children:[null==k?void 0:null===(n=k.data)||void 0===n?void 0:null===(e=n.anesthesiologists)||void 0===e?void 0:e.length," anesthesiologist"]})]}),(0,s.jsx)(d.P,{my:10,placeholder:"Search Anesthesiologist",data:null!=_?_:[],searchable:!0,variant:"default",clearable:!0,size:"lg",value:P.get("anesthesiologistId"),onChange:e=>A.push("?anesthesiologistId=".concat(e))})]}),(0,s.jsx)(c.Button,{mt:10,onClick:()=>{N(),L.reset()},style:{border:"1px solid black"},c:"black",variant:"outline",children:"Add New"})]}),(0,s.jsxs)(u.Grid,{children:[(0,s.jsx)(u.Grid.Col,{span:12,style:{backgroundColor:"#F2F2F2"},children:(0,s.jsxs)(u.Grid,{children:[(0,s.jsx)(u.Grid.Col,{style:{textAlign:"center"},span:2,children:"Name"}),(0,s.jsx)(u.Grid.Col,{span:4,children:"Designation"}),(0,s.jsx)(u.Grid.Col,{span:2,children:"Operation"}),(0,s.jsx)(u.Grid.Col,{span:1,children:"Fee"}),(0,s.jsx)(u.Grid.Col,{span:1}),(0,s.jsx)(u.Grid.Col,{span:2,children:"Actions"})]})}),null==k?void 0:null===(C=k.data)||void 0===C?void 0:null===(i=C.anesthesiologists)||void 0===i?void 0:i.filter(e=>!P.get("surgeonId")||"null"===P.get("surgeonId")||e.id===P.get("surgeonId")).map(e=>{var n;return(0,s.jsx)(u.Grid.Col,{span:12,children:(0,s.jsxs)(u.Grid,{children:[(0,s.jsx)(u.Grid.Col,{span:2,children:(0,s.jsxs)(t.Group,{style:{textAlign:"center"},children:[(0,s.jsx)(h.q,{src:null==e?void 0:e.image}),e.name]})}),(0,s.jsx)(u.Grid.Col,{span:4,children:e.designation}),(0,s.jsx)(u.Grid.Col,{span:4,children:(0,s.jsx)(x.Z,{p:0,shadow:"lg",radius:"lg",children:e.anesthesiologistOperationFee&&(null===(n=e.anesthesiologistOperationFee)||void 0===n?void 0:n.length)>0?e.anesthesiologistOperationFee.map((e,n)=>(0,s.jsx)(S,{anesthesiologistFee:{...e,index:n},onSave:D},e.id)):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Grid.Col,{style:{textAlign:"center"},span:12,children:"No operations"})})})}),(0,s.jsx)(u.Grid.Col,{span:2,children:(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(p.A,{onClick:()=>{O(e),N(),L.setValues({name:e.name,designation:e.designation}),A.push("?surgeonId=".concat(P.get("surgeonId"),"&editId=").concat(e.id))},children:(0,s.jsx)(v.Z,{})})," ",(0,s.jsx)(p.A,{onClick:async()=>{if((await w().fire({html:"Are you sure you want to delete? <br /> This process is irreversible!",title:"Warning",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Delete",focusCancel:!0})).isConfirmed)try{await F(e.id)}catch(e){w().fire("Error","Something went wrong","error")}},children:(0,s.jsx)(f.Z,{})})," "]})})]})},e.id)})]}),(0,s.jsx)(j.u,{size:"lg",opened:B,onClose:()=>{z(),O(null),A.push("?surgeonId=null&editId=null")},title:"Update Surgeon",children:(0,s.jsx)(y.f,{close:z,refetch:I,surgeon:Z,form:L})})]})},B=i(77606),N=i(77594),z=function(){var e,n,i,o;let{data:C,isLoading:y,refetch:k}=(0,B.$T)({}),[G]=(0,B.Bu)(),I=(0,T.useRouter)(),F=(0,T.useSearchParams)(),[A,{open:P,close:z}]=(0,m.q)(!1),[Z,O]=(0,b.useState)(null),[D]=(0,B.qO)(),[E]=(0,B.Y0)(),_=(0,b.useMemo)(()=>{if(null==C?void 0:C.data){var e,n;return null==C?void 0:null===(n=C.data)||void 0===n?void 0:null===(e=n.surgeons)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name}))}},[null==C?void 0:C.data]),L=(0,g.c)({initialValues:{name:"",designation:"",image:null}});return y?(0,s.jsx)(r.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.Group,{align:"start",justify:"space-between",children:[(0,s.jsxs)(t.Group,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Title,{order:3,children:"Surgeons"}),(0,s.jsxs)(a.Text,{children:[null==C?void 0:null===(n=C.data)||void 0===n?void 0:null===(e=n.surgeons)||void 0===e?void 0:e.length," surgeons"]})]}),(0,s.jsx)(d.P,{my:10,placeholder:"Search Surgeon",data:null!=_?_:[],searchable:!0,variant:"default",clearable:!0,size:"lg",value:F.get("surgeonId"),onChange:e=>I.push("?surgeonId=".concat(e))})]}),(0,s.jsx)(c.Button,{mt:10,onClick:()=>{P(),L.reset()},style:{border:"1px solid black"},c:"black",variant:"outline",children:"Add New"})]}),(0,s.jsxs)(u.Grid,{children:[(0,s.jsx)(u.Grid.Col,{span:12,style:{backgroundColor:"#F2F2F2"},children:(0,s.jsxs)(u.Grid,{children:[(0,s.jsx)(u.Grid.Col,{style:{textAlign:"center"},span:2,children:"Name"}),(0,s.jsx)(u.Grid.Col,{span:4,children:"Designation"}),(0,s.jsx)(u.Grid.Col,{span:2,children:"Operation"}),(0,s.jsx)(u.Grid.Col,{span:1,children:"Fee"}),(0,s.jsx)(u.Grid.Col,{span:1}),(0,s.jsx)(u.Grid.Col,{span:2,children:"Actions"})]})}),null==C?void 0:null===(o=C.data)||void 0===o?void 0:null===(i=o.surgeons)||void 0===i?void 0:i.filter(e=>!F.get("surgeonId")||"null"===F.get("surgeonId")||e.id===F.get("surgeonId")).map(e=>{var n;return(0,s.jsx)(u.Grid.Col,{span:12,children:(0,s.jsxs)(u.Grid,{children:[(0,s.jsx)(u.Grid.Col,{span:2,children:(0,s.jsxs)(t.Group,{style:{textAlign:"center"},children:[(0,s.jsx)(h.q,{src:null==e?void 0:e.image}),e.name]})}),(0,s.jsx)(u.Grid.Col,{span:4,children:e.designation}),(0,s.jsx)(u.Grid.Col,{span:4,children:(0,s.jsx)(x.Z,{p:0,shadow:"lg",radius:"lg",children:e.surgeonOperationFee&&(null===(n=e.surgeonOperationFee)||void 0===n?void 0:n.length)>0?e.surgeonOperationFee.map((e,n)=>(0,s.jsx)(S,{operationFee:{...e,index:n},onSave:D},e.id)):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Grid.Col,{style:{textAlign:"center"},span:12,children:"No operations"})})})}),(0,s.jsx)(u.Grid.Col,{span:2,children:(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(p.A,{onClick:()=>{O(e),P(),L.setValues({name:e.name,designation:e.designation}),I.push("?surgeonId=".concat(F.get("surgeonId"),"&editId=").concat(e.id))},children:(0,s.jsx)(v.Z,{})})," ",(0,s.jsx)(p.A,{onClick:async()=>{if((await w().fire({html:"Are you sure you want to delete? <br /> This process is irreversible!",title:"Warning",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Delete",focusCancel:!0})).isConfirmed)try{await G(e.id)}catch(e){w().fire("Error","Something went wrong","error")}},children:(0,s.jsx)(f.Z,{})})," "]})})]})},e.id)})]}),(0,s.jsx)(j.u,{size:"lg",opened:A,onClose:()=>{z(),O(null)},title:"Update Surgeon",children:(0,s.jsx)(N.Q,{close:z,refetch:k,surgeon:Z,form:L})})]})},Z=i(36760),O=i(13342),D=i(54632),E=i(97044),_=i(58851),L=i.n(_),V=i(87276),q=i(11114),R=i(32451),M=i(14587),U=i(34473),H=i(89043),W=i(55911),Y=i(89822),X=i(76029),Q=i(9654),J=i(86083),K=i(41224),$=i(57956),ee=i(85033),en=i(77303),ei=i(31525),es=i(22115);let er={name:"",description:"",price:0,discount:0,discountType:"amount",operationIds:[],breakdownFees:[{name:"Consultation Fee",description:"Initial consultation fee",amount:0},{name:"Service Fee",description:"Basic service charges",amount:0}]};var eo=e=>{var n,i;let{opened:r,onClose:o,onSuccess:u,initialData:h}=e,x=!!h,[m,{isLoading:v}]=(0,V.iQ)(),[T,{isLoading:C}]=(0,V.Kl)(),{data:w,isLoading:y}=(0,Z.VR)({});console.log("OperationCategoryModal",w);let k=(null==w?void 0:null===(i=w.data)||void 0===i?void 0:null===(n=i.operations)||void 0===n?void 0:n.map(e=>({value:e.id,label:e.name})))||[],I=(0,g.c)({initialValues:er,validate:{name:(0,ei.U)("Name is required")}});(0,b.useEffect)(()=>{if(h){var e,n;let i=(null===(e=h.operations)||void 0===e?void 0:e.map(e=>e.id))||[],s=(null===(n=h.operationCategoryBreakdownFeeTemplate)||void 0===n?void 0:n.map(e=>({id:e.id,name:e.name,description:e.description||"",amount:e.amount})))||er.breakdownFees;I.setValues({name:h.name,description:h.description||"",price:h.price,discount:h.discount,discountType:h.discountType,operationIds:i,breakdownFees:s})}else I.reset(),I.setValues(er)},[h,r]);let F=async e=>{try{let n={...e,breakdownFees:e.breakdownFees.map(e=>({...e,amount:e.amount}))};x&&h?(await T({id:h.id,...n}).unwrap(),es.N9.show({title:"Success",message:"Operation category updated successfully",color:"green"})):(await m(n).unwrap(),es.N9.show({title:"Success",message:"Operation category created successfully",color:"green"})),I.reset(),o()}catch(e){var n;console.error("Error:",e),es.N9.show({title:"Error",message:(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to ".concat(x?"update":"create"," operation category"),color:"red"})}},A=e=>{I.removeListItem("breakdownFees",e)};return(0,s.jsx)(j.u,{opened:r,onClose:o,title:(0,s.jsxs)(l.Title,{order:3,children:[x?"Edit":"Create"," Operation Category"]}),size:"lg",padding:"md",children:(0,s.jsx)("form",{onSubmit:I.onSubmit(F),children:(0,s.jsxs)(K.Stack,{gap:"md",children:[(0,s.jsx)(W.TextInput,{required:!0,label:"Name",placeholder:"Enter category name",...I.getInputProps("name")}),(0,s.jsx)($.g,{label:"Description",placeholder:"Enter description (optional)",...I.getInputProps("description")}),(0,s.jsxs)(t.Group,{grow:!0,children:[(0,s.jsx)(G.Y,{label:"Price",placeholder:"0.00",min:0,...I.getInputProps("price")}),(0,s.jsx)(G.Y,{label:"Discount",placeholder:"0.00",min:0,...I.getInputProps("discount")}),(0,s.jsx)(d.P,{label:"Discount Type",data:[{value:"amount",label:"Amount ($)"},{value:"percentage",label:"Percentage (%)"}],...I.getInputProps("discountType")})]}),(0,s.jsx)(ee.N,{label:"Select Operations",data:k,placeholder:"Select operations to include",searchable:!0,...I.getInputProps("operationIds")}),(0,s.jsxs)(R.Box,{mt:"md",children:[(0,s.jsxs)(t.Group,{mb:"xs",children:[(0,s.jsx)(a.Text,{fw:500,children:"Breakdown Fees"}),(0,s.jsx)(c.Button,{leftSection:(0,s.jsx)(Q.Z,{size:16}),variant:"subtle",onClick:()=>{I.insertListItem("breakdownFees",{name:"",description:"",amount:0})},children:"Add Fee"})]}),(0,s.jsx)(en.Divider,{mb:"sm"}),I.values.breakdownFees.map((e,n)=>(0,s.jsxs)(H.X,{withBorder:!0,p:"xs",mb:"sm",children:[(0,s.jsx)(t.Group,{mb:"xs",children:(0,s.jsx)(p.A,{color:"red",onClick:()=>A(n),disabled:I.values.breakdownFees.length<=1,children:(0,s.jsx)(f.Z,{size:16})})}),(0,s.jsx)(W.TextInput,{required:!0,label:"Fee Name",placeholder:"E.g., Consultation Fee",mb:"xs",...I.getInputProps("breakdownFees.".concat(n,".name"))}),(0,s.jsx)($.g,{label:"Description",placeholder:"Describe this fee",mb:"xs",...I.getInputProps("breakdownFees.".concat(n,".description"))}),(0,s.jsx)(G.Y,{label:"Amount",placeholder:"0.00",min:0,...I.getInputProps("breakdownFees.".concat(n,".amount"))})]},n))]}),(0,s.jsxs)(t.Group,{mt:"xl",children:[(0,s.jsx)(c.Button,{variant:"outline",onClick:o,children:"Cancel"}),(0,s.jsxs)(c.Button,{type:"submit",loading:v||C,children:[x?"Update":"Create"," Category"]})]})]})})})},et=i(58812),el=i(42484),ea=i(58211),ed=i(83458),ec=i(56651),eu=i(60711);let eh=e=>{var n,i,r,o,d;let{opened:c,onClose:u,category:h}=e;if(!h)return null;let x=e=>e.toLocaleString();return(0,s.jsx)(j.u,{opened:c,onClose:u,title:(0,s.jsx)(l.Title,{order:3,children:h.name}),size:"lg",padding:"md",children:(0,s.jsxs)(K.Stack,{gap:"md",children:[(0,s.jsx)(H.X,{p:"md",withBorder:!0,children:(0,s.jsxs)(K.Stack,{gap:"sm",children:[(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(et.k,{color:"blue",variant:"light",size:"lg",children:(0,s.jsx)(el.Z,{size:20})}),(0,s.jsx)(l.Title,{order:4,children:"Basic Information"})]}),(0,s.jsx)(en.Divider,{}),(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(a.Text,{fw:500,size:"sm",w:150,children:"Description:"}),(0,s.jsx)(a.Text,{children:h.description||"No description provided"})]}),(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(a.Text,{fw:500,size:"sm",w:150,children:"Price:"}),(0,s.jsxs)(t.Group,{gap:"xs",children:[(0,s.jsx)(ea.Z,{size:16}),(0,s.jsx)(a.Text,{children:x(h.price)})]})]}),(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(a.Text,{fw:500,size:"sm",w:150,children:"Discount:"}),(0,s.jsxs)(t.Group,{gap:"xs",children:["amount"===h.discountType?(0,s.jsx)(ea.Z,{size:16}):(0,s.jsx)(ed.Z,{size:16}),(0,s.jsx)(a.Text,{children:(o=h.discount,d=h.discountType,0===o?"None":"amount"===d?"".concat(x(o)," à§³"):"".concat(o,"%"))})]})]}),(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(a.Text,{fw:500,size:"sm",w:150,children:"Discount Type:"}),(0,s.jsx)(q.C,{color:"amount"===h.discountType?"blue":"green",children:"amount"===h.discountType?"Fixed Amount":"Percentage"})]}),(0,s.jsxs)(t.Group,{children:[(0,s.jsx)(a.Text,{fw:500,size:"sm",w:150,children:"Total Operations:"}),(0,s.jsx)(a.Text,{children:(null===(n=h.operations)||void 0===n?void 0:n.length)||0})]})]})}),(0,s.jsxs)(O.m,{defaultValue:"breakdown",children:[(0,s.jsxs)(O.m.List,{children:[(0,s.jsx)(O.m.Tab,{value:"breakdown",leftSection:(0,s.jsx)(ec.Z,{size:16}),children:"Breakdown Fees"}),(0,s.jsx)(O.m.Tab,{value:"operations",leftSection:(0,s.jsx)(el.Z,{size:16}),children:"Operations"})]}),(0,s.jsx)(O.m.Panel,{value:"breakdown",pt:"xs",children:(0,s.jsx)(H.X,{p:"md",mt:"md",withBorder:!0,children:(null===(i=h.operationCategoryBreakdownFeeTemplate)||void 0===i?void 0:i.length)?(0,s.jsxs)(D.i,{striped:!0,highlightOnHover:!0,children:[(0,s.jsx)(D.i.Thead,{children:(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsx)(D.i.Th,{children:"Name"}),(0,s.jsx)(D.i.Th,{children:"Description"}),(0,s.jsx)(D.i.Th,{children:"Amount"})]})}),(0,s.jsx)(D.i.Tbody,{children:h.operationCategoryBreakdownFeeTemplate.map((e,n)=>(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsx)(D.i.Td,{children:e.name}),(0,s.jsx)(D.i.Td,{children:e.description||"-"}),(0,s.jsx)(D.i.Td,{children:(0,s.jsxs)(t.Group,{gap:"xs",wrap:"nowrap",children:[(0,s.jsx)(ea.Z,{size:16}),x(e.amount)]})})]},n))})]}):(0,s.jsx)(a.Text,{ta:"center",color:"dimmed",children:"No breakdown fees found"})})}),(0,s.jsx)(O.m.Panel,{value:"operations",pt:"xs",children:(0,s.jsx)(H.X,{p:"md",mt:"md",withBorder:!0,children:(null===(r=h.operations)||void 0===r?void 0:r.length)?(0,s.jsxs)(D.i,{striped:!0,highlightOnHover:!0,children:[(0,s.jsx)(D.i.Thead,{children:(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsx)(D.i.Th,{children:"Name"}),(0,s.jsx)(D.i.Th,{children:"Price"})]})}),(0,s.jsx)(D.i.Tbody,{children:h.operations.map((e,n)=>(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsx)(D.i.Td,{children:e.name}),(0,s.jsxs)(D.i.Td,{children:[" ",(0,s.jsx)(ea.Z,{size:16}),e.price.toLocaleString()||"-"]})]},e.id))})]}):(0,s.jsx)(a.Text,{ta:"center",color:"dimmed",children:"No operations found"})})})]})]})})},ex=e=>{let{categoryId:n}=e,[i,{open:r,close:o}]=(0,m.q)(!1),{data:l,isLoading:a,error:d,refetch:c}=(0,V.fP)({id:n},{skip:!i});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X.u,{label:"View Details",children:(0,s.jsx)(p.A,{variant:"subtle",color:"green",onClick:()=>{r(),i&&c()},children:(0,s.jsx)(eu.Z,{size:16})})}),i&&(a?(0,s.jsx)(j.u,{opened:i,onClose:o,title:"Loading...",children:(0,s.jsx)(t.Group,{p:"xl",children:(0,s.jsx)(M.Loader,{size:"lg"})})}):(0,s.jsx)(eh,{opened:i,onClose:o,category:(null==l?void 0:l.data)||null}))]})};var ep=()=>{var e;let{data:n,isLoading:i,error:r}=(0,V.Hl)({}),[o]=(0,V.Je)(),[d,u]=(0,b.useState)(""),[h,{open:x,close:j}]=(0,m.q)(!1),[g,v]=(0,b.useState)(null),T=((null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.operationCategories)||[]).filter(e=>e.name.toLowerCase().includes(d.toLowerCase())),C=(e,n)=>{if(0===e)return(0,s.jsx)(q.C,{color:"gray",children:"None"});let i="amount"===n?"$".concat((e/100).toFixed(2)):"".concat(e,"%");return(0,s.jsx)(q.C,{color:"amount"===n?"blue":"green",children:i})};return i?(0,s.jsx)(R.Box,{className:"flex justify-center items-center h-64",children:(0,s.jsx)(M.Loader,{size:"lg"})}):r?(0,s.jsx)(U.Container,{className:"text-center p-4",children:(0,s.jsx)(a.Text,{color:"red",size:"lg",children:"Error loading operation categories. Please try again later."})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(H.X,{shadow:"xs",p:"md",withBorder:!0,children:[(0,s.jsxs)(t.Group,{mb:"md",children:[(0,s.jsx)(l.Title,{order:2,children:"Operation Categories"}),(0,s.jsx)(c.Button,{onClick:()=>{x()},leftSection:(0,s.jsx)(Q.Z,{size:16}),color:"blue",children:"Add New"})]}),(0,s.jsx)(W.TextInput,{placeholder:"Search packages...",mb:"md",leftSection:(0,s.jsx)(J.Z,{size:14}),value:d,onChange:e=>u(e.target.value)}),(0,s.jsx)(Y.x,{children:(0,s.jsxs)(D.i,{striped:!0,highlightOnHover:!0,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsx)(D.i.Th,{children:"Name"}),(0,s.jsx)(D.i.Th,{children:"Price"}),(0,s.jsx)(D.i.Th,{children:"Discount"}),(0,s.jsx)(D.i.Th,{children:"Operations"}),(0,s.jsx)(D.i.Th,{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:T.length>0?T.map(e=>{var n;return(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsxs)(D.i.Td,{children:[(0,s.jsx)(a.Text,{fw:500,children:e.name}),e.description&&(0,s.jsx)(a.Text,{size:"xs",color:"dimmed",children:e.description})]}),(0,s.jsx)(D.i.Td,{children:e.price.toLocaleString()}),(0,s.jsx)(D.i.Td,{children:C(e.discount,e.discountType)}),(0,s.jsx)(D.i.Td,{children:(null==e?void 0:null===(n=e._count)||void 0===n?void 0:n.operations)||0}),(0,s.jsx)(D.i.Td,{children:(0,s.jsxs)(t.Group,{gap:"xs",wrap:"nowrap",children:[(0,s.jsx)(ex,{categoryId:null==e?void 0:e.id}),(0,s.jsx)(ej,{categoryId:null==e?void 0:e.id}),(0,s.jsx)(X.u,{label:"Delete",children:(0,s.jsx)(p.A,{onClick:async()=>{try{if((await w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed){let n=await o(e.id);"error"in n?w().fire("Error","An error occurred while deleting the record","error"):w().fire("Deleted!","The record has been deleted.","success")}}catch(e){w().fire("Error","An error occurred","error")}},variant:"subtle",color:"red",children:(0,s.jsx)(f.Z,{size:16})})})]})})]},e.id)}):(0,s.jsx)(D.i.Tr,{children:(0,s.jsx)(D.i.Td,{colSpan:5,children:(0,s.jsx)(a.Text,{ta:"center",color:"dimmed",children:"No packages found"})})})})]})})]}),(0,s.jsx)(eo,{opened:h,onClose:j,initialData:g})]})};let ej=e=>{var n;let{categoryId:i}=e,[r,{open:o,close:t}]=(0,m.q)(!1),{refetch:l}=(0,V.Hl)({}),{data:a,isLoading:d,error:c,refetch:u}=(0,V.fP)({id:i},{skip:!r});return d?(0,s.jsx)(M.Loader,{size:"lg"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X.u,{label:"Edit",children:(0,s.jsx)(p.A,{onClick:()=>{o(),r&&u()},variant:"subtle",color:"blue",children:(0,s.jsx)(v.Z,{size:16})})}),(0,s.jsx)(eo,{opened:r,onClose:()=>{t(),l()},initialData:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:null})]})};var eg=()=>{let[e,n]=(0,b.useState)("surgeons");return(0,s.jsxs)("div",{className:L().container,children:[(0,s.jsxs)("div",{className:L().bg,children:[(0,s.jsx)(l.Title,{children:"Indoor Staff Management"}),(0,s.jsx)(O.m,{classNames:L(),mt:20,defaultValue:"surgeons",value:e,onChange:n,styles:{tab:{padding:"15px 20px",fontSize:18}},children:(0,s.jsxs)(O.m.List,{children:[(0,s.jsx)(O.m.Tab,{value:"operations",children:"Operations"}),(0,s.jsx)(O.m.Tab,{value:"operations-cat",children:"Operation Category"}),(0,s.jsx)(O.m.Tab,{value:"breakdown-fees",children:"Breakdown Fees"}),(0,s.jsx)(O.m.Tab,{value:"surgeons",children:"Surgeons"}),(0,s.jsx)(O.m.Tab,{value:"anesthesiologists",children:"Anesthesiologists"})]})})]}),(0,s.jsx)(x.Z,{radius:"md",className:L().bg2,children:(0,s.jsxs)(O.m,{value:e,children:[(0,s.jsx)(O.m.Panel,{value:"surgeons",children:(0,s.jsx)(z,{})}),(0,s.jsx)(O.m.Panel,{value:"anesthesiologists",children:(0,s.jsx)(P,{})}),(0,s.jsx)(O.m.Panel,{value:"operations-cat",children:(0,s.jsx)(ep,{})}),(0,s.jsx)(O.m.Panel,{value:"pc",children:"Pc List"}),(0,s.jsx)(O.m.Panel,{value:"operations",children:(0,s.jsx)(em,{})})]})})]})};function em(){var e,n,i,o;let{data:u,isLoading:h,refetch:x}=(0,Z.VR)({}),[j]=(0,Z.SI)(),[C]=(0,Z.z2)(),[y]=(0,Z.tq)(),k=(0,T.useRouter)(),G=(0,T.useSearchParams)(),[I,{open:F,close:A}]=(0,m.q)(!1),S=(0,b.useMemo)(()=>{if(null==u?void 0:u.data){var e,n;return null==u?void 0:null===(n=u.data)||void 0===n?void 0:null===(e=n.operations)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name}))}},[null==u?void 0:u.data]),P=(0,g.c)({initialValues:{name:"",description:"",price:0,discount:0,discountType:"amount"}});return h?(0,s.jsx)(r.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.Group,{align:"start",justify:"space-between",children:[(0,s.jsxs)(t.Group,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Title,{order:3,children:"Operations"}),(0,s.jsxs)(a.Text,{children:[null==u?void 0:null===(n=u.data)||void 0===n?void 0:null===(e=n.operations)||void 0===e?void 0:e.length," operations"]})]}),(0,s.jsx)(d.P,{my:10,placeholder:"Search  Operation",data:null!=S?S:[],searchable:!0,variant:"default",clearable:!0,size:"lg",value:G.get("operationId"),onChange:e=>k.push("?operationId=".concat(e))})]}),(0,s.jsx)(c.Button,{mt:10,onClick:()=>{F(),P.setValues({name:"",description:"",price:0,discount:0,discountType:"amount"})},style:{border:"1px solid black"},c:"black",variant:"outline",children:"Add New"})]}),(0,s.jsxs)(D.i,{children:[(0,s.jsx)(D.i.Th,{children:"Name"}),(0,s.jsx)(D.i.Th,{children:"Price"}),(0,s.jsx)(D.i.Th,{children:"Description"}),(0,s.jsx)(D.i.Th,{children:"Discount"}),(0,s.jsx)(D.i.Th,{children:"DiscountType"}),(0,s.jsx)(D.i.Th,{children:"Actions"}),(0,s.jsx)(D.i.Tbody,{children:null==u?void 0:null===(o=u.data)||void 0===o?void 0:null===(i=o.operations)||void 0===i?void 0:i.filter(e=>!G.get("operationId")||"null"===G.get("operationId")||e.id===G.get("operationId")).map(e=>(0,s.jsxs)(D.i.Tr,{children:[(0,s.jsx)(D.i.Td,{children:e.name}),(0,s.jsx)(D.i.Td,{children:e.price}),(0,s.jsx)(D.i.Td,{children:e.description}),(0,s.jsx)(D.i.Td,{children:null==e?void 0:e.discount}),(0,s.jsx)(D.i.Td,{children:null==e?void 0:e.discountType}),(0,s.jsxs)(D.i.Td,{children:[(0,s.jsx)(p.A,{children:(0,s.jsx)(v.Z,{onClick:()=>{P.setValues({name:e.name,description:e.description,price:e.price,discount:e.discount,discountType:e.discountType}),k.push("?operationId=".concat(G.get("operationId"),"&editId=").concat(e.id)),setTimeout(()=>F(),1e3)}})})," ",(0,s.jsx)(p.A,{onClick:async()=>{if((await w().fire({html:"\n                            Are you Sure to Delete? <br /> Process is\n                            irreversible!\n                          ",title:"Warning",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Delete",focusCancel:!0})).isConfirmed)try{await j(e.id)}catch(e){w().fire("Error","Something Went Wrong","error")}},children:(0,s.jsx)(f.Z,{})})," "]})]},e.id))})]}),(0,s.jsx)(E.Z,{form:P,opened:I,close:A})]})}},7203:function(e,n,i){"use strict";var s=i(68328),r=i(14587);i(4505),n.Z=()=>(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:600},children:(0,s.jsx)(r.Loader,{color:"teal",variant:"dots"})})},72940:function(e,n,i){"use strict";i.d(n,{FD:function(){return r},Hn:function(){return s},y4:function(){return o}});let s={headers:{"Content-Type":"application/json"}},r={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78101:function(e,n,i){"use strict";i.d(n,{g:function(){return l}});var s=i(49854),r=i(68240),o=i(94183),t=i(28317);let l=(0,r.LC)({baseQuery:(0,o.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,n)=>fetch(e,n).then(async i=>{let r="string"==typeof e?e:e.url;return r.includes("?")||(null==n?void 0:n.body)||"string"!=typeof e&&e.body||await (0,t.t8)(r,await i.clone().json().catch(()=>null),(0,s.x)()),i}).catch(async i=>{if(i instanceof TypeError){let i="string"==typeof e?e:e.url;if(!i.includes("?")&&!(null==n?void 0:n.body)&&!("string"!=typeof e&&e.body)){let e=await (0,t.U2)(i,(0,s.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw i})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,n,i){"use strict";let s;i.d(n,{d:function(){return d},x:function(){return a}});var r=i(72940),o=i(6780),t=i(67732),l=i(28317);function a(){return s||(s=(0,l.MT)("cached-responses-store","cached-responses")),s}async function d(e,n){try{let i=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:n,...r.FD});return await (0,l.t8)(e,i.data,a()),i.data}catch(n){if(n instanceof t.d7&&[t.d7.ERR_NETWORK,t.d7.ETIMEDOUT].includes(n.code)){let n=await (0,l.U2)(e,a());if(n)return n}throw n instanceof t.d7&&n.response&&401===n.response.status||console.error(n),n}}},58851:function(e){e.exports={container:"styles_container__IPQEa",bg2:"styles_bg2__bhaRF",bg1:"styles_bg1__TcuJa",bg:"styles_bg__rGmeN",tab:"styles_tab__6GK9i"}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,6306,1493,9645,4347,1522,8225,3210,9175,7402,1744],function(){return e(e.s=55841)}),_N_E=e.O()}]);