(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7951,1054],{91054:function(){},21821:function(e,t,i){Promise.resolve().then(i.bind(i,33372))},33372:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return W}});var n=i(68328),l=i(71256),s=i(4505),o=i(65850),r=i(25499),a=i(62549),d=i(26809),c=i(84153);o.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"}]});let u={billId:"10%",patient:"16%",phone:"14%",doctor:"14%",test:"22%",rate:"8%",less:"8%",net:"8%"},h=o.mM.create({page:{padding:10,fontFamily:"NotoSans",fontSize:9},table:{width:"100%",borderWidth:1,borderColor:"#000"},row:{flexDirection:"row"},headerRow:{backgroundColor:"#f2f2f2",borderTopWidth:1,borderTopColor:"#000"},cell:{borderRightWidth:1,borderBottomWidth:1,borderColor:"#000",paddingVertical:4,paddingHorizontal:3,justifyContent:"center"},headerText:{fontWeight:"bold",textAlign:"center"},center:{textAlign:"center"},left:{textAlign:"left"},right:{textAlign:"right"},tableBody:{marginTop:24}});var x=e=>{let{bills:t,totalAmount:i,totalDiscountAmount:l,totalExtraBills:s,testStatementData:x}=e,m=(0,r.C)(e=>e.auth.user),v=(0,r.C)(e=>e.auth.diagnostic),g=(0,r.C)(e=>e.dates);console.log(t,"bills in test statement pdf");let p={name:(null==v?void 0:v.name)||"",address:(null==v?void 0:v.address)||"",phone1:(null==v?void 0:v.phone1)||"",phone2:(null==v?void 0:v.phone2)||"",division:(null==v?void 0:v.division)||"",logo:(null==v?void 0:v.logo)||"",id:(null==v?void 0:v.id)||"",city:(null==v?void 0:v.city)||"",paymentDate:(null==v?void 0:v.paymentDate)||"",admin:(null==v?void 0:v.admin)||""},f=()=>{var e;return(0,n.jsx)(o.BB,{children:(0,n.jsxs)(o.T3,{size:"A4",style:h.page,children:[(0,n.jsx)(a.default,{diagnosticState:p}),(0,n.jsx)(d.Z,{small:!1,dates:g,userName:null!==(e=null==m?void 0:m.name)&&void 0!==e?e:""}),(0,n.jsxs)(o.xv,{style:[{marginVertical:6},{fontSize:12,fontWeight:"bold",textAlign:"left"}],children:["Total Test Found: ",s||0]}),(0,n.jsxs)(o.G7,{style:h.table,children:[(0,n.jsxs)(o.G7,{style:[h.row,h.headerRow],fixed:!0,wrap:!1,children:[(0,n.jsx)(o.G7,{style:[h.cell,{width:u.billId}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Bill ID"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.patient}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Patient"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.phone}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Phone"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.doctor}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Doctor"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.test}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Test"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.rate}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Rate"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.less}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Less"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.net,borderRightWidth:0}],children:(0,n.jsx)(o.xv,{style:h.headerText,children:"Net"})})]}),null==t?void 0:t.map((e,t)=>{var i,l,s,r;let a=null==e?void 0:null===(i=e.tests)||void 0===i?void 0:i[0];if(!a)return null;let d="amount"===a.discountType?a.discount:a.price*a.discount/100,c=a.price-d;return(0,n.jsxs)(o.G7,{style:h.row,wrap:!1,children:[(0,n.jsx)(o.G7,{style:[h.cell,{width:u.billId}],children:(0,n.jsx)(o.xv,{style:h.center,children:e.billId})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.patient}],children:(0,n.jsx)(o.xv,{style:h.left,wrap:!1,children:null===(l=e.patient)||void 0===l?void 0:l.name})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.phone}],children:(0,n.jsx)(o.xv,{style:h.center,children:null===(s=e.patient)||void 0===s?void 0:s.phone})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.doctor}],children:(0,n.jsx)(o.xv,{style:h.left,wrap:!1,children:null===(r=e.doctor)||void 0===r?void 0:r.name})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.test}],children:(0,n.jsxs)(o.xv,{style:h.left,wrap:!1,children:[a.name," \xd7 ",e.tests.length]})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.rate}],children:(0,n.jsx)(o.xv,{style:h.right,children:a.price})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.less}],children:(0,n.jsx)(o.xv,{style:h.right,children:d})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.net,borderRightWidth:0}],children:(0,n.jsx)(o.xv,{style:h.right,children:c})})]},t)}),(0,n.jsxs)(o.G7,{style:h.row,wrap:!1,children:[(0,n.jsx)(o.G7,{style:[h.cell,{width:"76%"}],children:(0,n.jsx)(o.xv,{style:[h.right,{fontWeight:"bold"}],children:"Total"})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.rate}],children:(0,n.jsx)(o.xv,{style:h.right,children:i})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.less}],children:(0,n.jsx)(o.xv,{style:[h.right,{fontWeight:"bold"}],children:l})}),(0,n.jsx)(o.G7,{style:[h.cell,{width:u.net,borderRightWidth:0}],children:(0,n.jsx)(o.xv,{style:[h.right,{fontWeight:"bold"}],children:i-l})})]})]})]})})};return(0,n.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,n.jsx)(c.Z,{PDFTemplate:()=>(0,n.jsx)(f,{})})})},m=i(83501),v=i(72940),g=i(6780),p=i(67732);let f=async e=>{let{from:t,to:i,testId:n}=e;try{t.setHours(0,0,0,0),i.setHours(23,59,59,999);let e="".concat("http://sasthotech.local:5000/api/v1","/statement/test/").concat(n,"?from=").concat(new Date(t).toISOString(),"&to=").concat(new Date(i).toISOString()),l=await g.default.get(e,v.FD);return{success:!0,data:l.data}}catch(e){if(e instanceof p.d7){var l;return{success:!1,data:null===(l=e.response)||void 0===l?void 0:l.data.message}}return{success:!1,data:"An error occurred"}}};var y=i(25626),w=i(32451),j=i(68242),T=i(89043),b=i(22614),C=i(87967),S=i(31204),D=i(22041),G=i(54632),k=i(22975),P=i(77052),z=i(46557),A=i(58185),I=i(78259),F=i(76607),R=i(97698),N=i(12450),B=i(88412),M=i(22096),Z=i.n(M),W=()=>{let[e,t]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),[a,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(0),[h,v]=(0,s.useState)(0),[g,p]=(0,s.useState)(0),M=(0,r.C)(e=>e.tests),W=(0,r.C)(e=>e.auth.diagnostic),E=(0,r.T)(),_=(0,N.useRouter)(),L=(0,N.useSearchParams)(),Y=(0,s.useRef)(null),[q,H]=(0,s.useState)((0,I.Z)(new Date)),[O,V]=(0,s.useState)((0,F.Z)(new Date)),[U,{open:X,close:J}]=(0,z.q)(!1);(0,s.useEffect)(()=>{let e=async()=>{let{success:e,data:t}=await (0,m.Y)();if(e){let e=t.map(e=>null==e?void 0:e.tests.map(e=>e)).flat();E((0,y._W)(e))}else console.error(t)};(null==M?void 0:M.adminTests)||e()},[null==M?void 0:M.adminTests]),(0,s.useEffect)(()=>{let t=async()=>{try{var t,i,n,l,s;let r=await f({testId:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",from:null!=q?q:(0,I.Z)(new Date),to:null!=O?O:(0,F.Z)(new Date)});if(r.success){o(r.data),d(null===(i=r.data)||void 0===i?void 0:i.bills),console.log(null===(n=r.data)||void 0===n?void 0:n.bills);let e=0,t=0,a=0,c=0;null===(s=r.data)||void 0===s||null===(l=s.bills)||void 0===l||l.forEach(i=>{let n=i.tests;n&&(null==n?void 0:n.length)&&(c+=null==n?void 0:n.length),null==n||n.forEach(i=>{let n="amount"===i.discountType?i.discount:i.price*i.discount/100;e+=i.price||0,t+=n||0,a+=i.price-n||0})}),v(e),u(t),p(c)}}catch(e){}};e?t():d(null)},[q,L,e,O]),(0,B.useReactToPrint)({content:()=>Y.current,documentTitle:" Test Wise Statement - ".concat(e?null==e?void 0:e.name:"")});let K=(0,s.useMemo)(()=>{var e;return(null==M?void 0:null===(e=M.adminTests)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name})))||[]},[null==M?void 0:M.adminTests]);return(0,n.jsxs)(w.Box,{className:"bg-light p-3 p-md-5",children:[(0,n.jsx)(j.Title,{children:"Test Wise Statement"})," ",(0,n.jsxs)(T.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mt:"md",children:[(0,n.jsxs)(b.Group,{justify:"space-between",children:[(0,n.jsx)(C.P,{my:10,placeholder:"Search Test",data:K,searchable:!0,label:"Test",clearable:!0,onClear:()=>{t(null),_.push("/dashboard/test-wise-statement")},size:"lg",value:L.get("testId"),onChange:e=>{var i;_.push("?testId=".concat(e));let n=null==M?void 0:null===(i=M.adminTests)||void 0===i?void 0:i.find(t=>t.id===e);n&&t(n)}}),(0,n.jsx)(P.DatePickerInput,{label:"From Date",description:"",placeholder:"Select From Date",valueFormat:"DD MMM, YYYY",variant:"filled",size:"md",w:"14.5rem",clearable:!1,maxDate:new Date,value:q,onChange:H}),(0,n.jsx)(P.DatePickerInput,{label:"To Date",description:"",placeholder:"Select To Date",valueFormat:"DD MMM, YYYY",variant:"filled",size:"md",w:"14.5rem",clearable:!1,maxDate:new Date,value:O,onChange:V})]}),(0,n.jsx)(b.Group,{my:10,justify:"center",children:(0,n.jsx)(S.Button,{onClick:X,rightSection:(0,n.jsx)(A.Z,{}),children:"Print"})}),(0,n.jsxs)("div",{className:Z().printContainer,ref:Y,children:[(0,n.jsxs)("div",{className:"hidden-print",children:[(0,n.jsx)(l.Z,{diagnostic:W}),(0,n.jsxs)(D.Text,{my:10,fw:600,children:["Time Period : ",(0,R.Z)(null!=q?q:(0,I.Z)(new Date),"dd-MMM-yyyy")," to"," ",(0,R.Z)(null!=O?O:(0,I.Z)(new Date),"dd-MMM-yyyy")]})]}),(0,n.jsxs)(D.Text,{my:10,fw:600,children:["Total Test Found :",0+g||0]}),a?(0,n.jsxs)(G.i,{className:Z().table,children:[(0,n.jsxs)(G.i.Thead,{children:[(0,n.jsx)(G.i.Th,{children:"Bill ID"}),(0,n.jsx)(G.i.Th,{children:"Patient Name"}),(0,n.jsx)(G.i.Th,{children:"Phone"}),(0,n.jsx)(G.i.Th,{children:"Doctor"}),(0,n.jsx)(G.i.Th,{children:"Test Name"}),(0,n.jsx)(G.i.Th,{children:"Rate"}),(0,n.jsx)(G.i.Th,{children:"Less"}),(0,n.jsx)(G.i.Th,{children:"Net"})]}),null==a?void 0:a.map(t=>{let i=null==t?void 0:t.tests;if(!i)return(0,n.jsx)(n.Fragment,{});{var l,s,o,r,a,d,c,u;let h=(null==i?void 0:null===(l=i[0])||void 0===l?void 0:l.discountType)==="amount"?null==i?void 0:i[0].discount:(null==i?void 0:null===(s=i[0])||void 0===s?void 0:s.price)*(null==i?void 0:null===(o=i[0])||void 0===o?void 0:o.discount)/100;return(0,n.jsxs)(G.i.Tr,{children:[(0,n.jsx)(G.i.Td,{children:null==t?void 0:t.billId}),(0,n.jsx)(G.i.Td,{children:null==t?void 0:null===(r=t.patient)||void 0===r?void 0:r.name}),(0,n.jsx)(G.i.Td,{children:null==t?void 0:null===(a=t.patient)||void 0===a?void 0:a.phone}),(0,n.jsx)(G.i.Td,{style:{wordBreak:"break-word"},children:null==t?void 0:null===(d=t.doctor)||void 0===d?void 0:d.name}),(0,n.jsxs)(G.i.Td,{style:{wordBreak:"break-word"},children:[null==e?void 0:e.name," X ",null==i?void 0:i.length]}),(0,n.jsx)(G.i.Td,{children:null==i?void 0:null===(c=i[0])||void 0===c?void 0:c.price}),(0,n.jsx)(G.i.Td,{children:h}),(0,n.jsx)(G.i.Td,{children:(null==i?void 0:null===(u=i[0])||void 0===u?void 0:u.price)-h})]},t.billId)}}),(0,n.jsxs)(G.i.Tr,{children:[(0,n.jsx)(G.i.Td,{colSpan:4,children:"Total"}),(0,n.jsx)(G.i.Td,{style:{wordBreak:"break-word"},children:null==i?void 0:i.totalTestCount.toLocaleString()}),(0,n.jsx)(G.i.Td,{style:{wordBreak:"break-word"},children:h.toLocaleString()}),(0,n.jsx)(G.i.Td,{style:{wordBreak:"break-word"},children:c.toLocaleString()}),(0,n.jsx)(G.i.Td,{style:{wordBreak:"break-word"},children:(h-c).toLocaleString()})]})]}):(0,n.jsx)(n.Fragment,{})]})]}),(0,n.jsx)(k.u,{opened:U,onClose:J,size:"80%",radius:0,transitionProps:{transition:"fade",duration:200},children:(0,n.jsx)(x,{bills:a,totalAmount:h,totalDiscountAmount:c,testStatementData:i,totalExtraBills:g})})]})}},71256:function(e,t,i){"use strict";var n=i(68328),l=i(22614),s=i(22041),o=i(77303),r=i(62471);t.Z=e=>{let{diagnostic:t,email:i,children:a,color:d,patientId:c,small:u,large:h,isBigLogo:x,idLabel:m,idBorder:v,labId:g}=e,p=(0,r._)({key:"print-show-division-name",defaultValue:"true"});return(0,n.jsxs)("div",{className:"diagnostic-info1",children:[(0,n.jsx)(l.Group,{children:x&&(0,n.jsx)("img",{style:{aspectRatio:"auto",width:"100%",height:"100px"},src:"/images/heathcare.png",alt:"Diagnotic Image"})}),(0,n.jsxs)(l.Group,{wrap:"nowrap",justify:x?"center":"space-between",children:[(0,n.jsxs)(l.Group,{wrap:"nowrap",bg:"white",py:1,mb:1,align:"center",children:[null!=x?x:(0,n.jsx)("img",{width:u?50:100,height:u?50:100,style:{objectFit:"cover"},src:"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")?null==t?void 0:t.offlineLogo:null==t?void 0:t.logo,alt:"Diagnotic Image"}),(0,n.jsx)(l.Group,{wrap:"nowrap",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Text,{styles:{root:{fontSize:"".concat(h?32:u?14:24)}},size:"xl",style:{fontSize:h?16:void 0},fw:700,children:null==t?void 0:t.name}),(0,n.jsxs)(s.Text,{fw:500,my:1,styles:{root:{wordBreak:"break-word",fontSize:h?12:void 0}},children:["Address: ",null==t?void 0:t.address,"true"===p&&(null==t?void 0:t.division)?";".concat(null==t?void 0:t.division):""]}),(0,n.jsxs)(l.Group,{children:[(0,n.jsxs)(s.Text,{my:1,fw:500,styles:{root:{wordBreak:"break-word",fontSize:h?12:void 0}},children:["Phone: ",null==t?void 0:t.phone1," , ",null==t?void 0:t.phone2]}),i?(0,n.jsxs)(s.Text,{my:1,fw:500,styles:{root:{wordBreak:"break-word",fontSize:h?16:void 0}},children:["; Email : ",i]}):(0,n.jsx)(n.Fragment,{})]})]})})]}),g&&(0,n.jsxs)(s.Text,{fw:700,mt:"auto",mb:9,style:{border:v?"2px solid #555":"none",padding:v?"4px":"0px",borderRadius:v?"2px":"0px"},styles:{root:{fontSize:"calc(var(--mantine-scale) * ".concat(h?16:u?12:14,")")}},children:["Lab\xa0ID:\xa0",g]}),c&&(0,n.jsxs)(s.Text,{fw:700,mt:"auto",mb:9,style:{border:v?"2px solid #555":"none",padding:v?"4px":"0px",borderRadius:v?"2px":"0px"},styles:{root:{fontSize:"calc(var(--mantine-scale) * ".concat(h?16:u?12:14,")")}},children:["Patient\xa0ID:\xa0",c]}),a]}),(0,n.jsx)(o.Divider,{size:"sm",color:d||"black",style:{marginBottom:"2px"}})]})}},62549:function(e,t,i){"use strict";i.r(t),i.d(t,{LoadDiagnosticImageUrl:function(){return d}});var n=i(68328),l=i(4505),s=i(65850),o=i(62471),r=i(6780),a=i(25499);function d(){var e;let t=(0,a.C)(e=>e.auth.diagnostic),i="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")||window.location.hostname.includes("198")?null==t?void 0:t.offlineLogo:null!==(e=null==t?void 0:t.logo)&&void 0!==e?e:null,n="/images/demo-fallback-logo.png";return(0,l.useEffect)(()=>{if(!i||""===i.trim()){sessionStorage.setItem("diagnostic-logo",n);return}r.default.get(i,{headers:{"Cache-Control":"no-cache"},timeout:3e3,responseType:"blob"}).then(e=>{if(!e||!e.data)throw Error("Image not found or invalid response");let t=e.data;return new Promise((e,i)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=i,n.readAsDataURL(t)})}).then(e=>{sessionStorage.setItem("diagnostic-logo",e)}).catch(e=>{console.warn("Error loading primary image, using fallback:",e),sessionStorage.setItem("diagnostic-logo",n)})},[i,n,3e3]),null}let c=s.mM.create({container:{width:"100%",alignItems:"center",display:"flex",flexDirection:"row",gap:10},logoContainer:{width:100,height:80,marginBottom:10,position:"relative"},image:{width:"100%",height:"100%",objectFit:"contain",borderRadius:100},headerContainer:{width:"100%"},hospitalName:{fontSize:20,fontWeight:"bold",fontFamily:"NotoSans",marginBottom:4,textAlign:"left"},address:{fontSize:12,fontFamily:"NotoSans",marginBottom:2,textAlign:"left"},phone:{fontSize:12,fontFamily:"NotoSans",textAlign:"left"}});t.default=e=>{let{diagnosticState:t,fallbackImageUrl:i="/images/demo-fallback-logo.png",timeoutDuration:l=3e3}=e,r=(0,o._)({key:"print-show-division-name",defaultValue:"true"}),a=sessionStorage.getItem("diagnostic-logo")||i;return(0,n.jsxs)(s.G7,{style:c.container,children:[(0,n.jsx)(s.G7,{style:c.logoContainer,children:a&&(0,n.jsx)(s.Ee,{src:a,style:c.image})}),(0,n.jsxs)(s.G7,{style:c.headerContainer,children:[(0,n.jsx)(s.xv,{style:c.hospitalName,children:null==t?void 0:t.name}),(0,n.jsxs)(s.xv,{style:c.address,children:[null==t?void 0:t.address,"true"===r&&(null==t?void 0:t.division)?", ".concat(null==t?void 0:t.division):""]}),(0,n.jsxs)(s.xv,{style:c.phone,children:["Phone: ",null==t?void 0:t.phone1,(null==t?void 0:t.phone2)?", ".concat(null==t?void 0:t.phone2):""]})]})]})}},26809:function(e,t,i){"use strict";var n=i(68328);i(4505);var l=i(65850),s=i(97698);let o=l.mM.create({container:{paddingVertical:5,fontSize:12},group:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},text:{fontSize:12,fontWeight:700},circle:{width:6,height:6,borderRadius:3,backgroundColor:"black",marginHorizontal:2},divider:{borderTop:"1px solid #787878",marginVertical:3}});t.Z=e=>{var t,i,r,a;let{small:d,dates:c,userName:u}=e,h=e=>(0,s.Z)(e?new Date(e):new Date,"dd-MMM-yyyy");return(0,n.jsxs)(l.G7,{style:o.container,children:[(0,n.jsx)(l.G7,{style:o.divider}),(0,n.jsxs)(l.G7,{style:o.group,children:[(0,n.jsxs)(l.G7,{style:{flexDirection:"row",alignItems:"center"},children:[(0,n.jsx)(l.xv,{style:[o.text,{fontSize:10}],children:"Period : "}),(0,n.jsx)(l.xv,{style:[o.text,{fontSize:10}],children:h(null!==(a=null==c?void 0:null===(t=c.dates)||void 0===t?void 0:t[0])&&void 0!==a?a:new Date)}),(0,n.jsxs)(l.xv,{style:[o.text,{fontSize:10}],children:[" "," To "," "]}),(0,n.jsx)(l.xv,{style:[o.text,{fontSize:10}],children:h((null==c?void 0:null===(i=c.dates)||void 0===i?void 0:i[1])||(null==c?void 0:null===(r=c.dates)||void 0===r?void 0:r[0])||new Date)})]}),(0,n.jsx)(l.G7,{style:o.circle}),(0,n.jsxs)(l.xv,{style:[o.text,{fontSize:10}],children:["Printed By : ",u||"Unknown"]}),(0,n.jsx)(l.G7,{style:o.circle}),(0,n.jsxs)(l.xv,{style:[o.text,{fontSize:10,marginTop:"15px"}],children:["Print Time : ",(0,s.Z)(new Date,"MM/dd/yyyy : hh:mm a")]})]}),!d&&(0,n.jsx)(l.G7,{style:o.divider})]})}},84153:function(e,t,i){"use strict";var n=i(68328),l=i(89043),s=i(22041),o=i(41224),r=i(31204),a=i(9323),d=i(65850),c=i(42870),u=i(42116),h=i(4505);let x=(0,h.memo)(e=>{let{PDFTemplate:t}=e,[i,o]=(0,d.Eb)({document:(0,n.jsx)(t,{})});return((0,h.useEffect)(()=>{let e,l=0;return i.error&&(console.log("PDF ERROR: ",i.error),i.error&&l<3&&(e=setTimeout(()=>{console.log("Retrying PDF generation attempt ".concat(l+1,"/").concat(3)),o((0,n.jsx)(t,{})),l++},2e3))),()=>{e&&clearTimeout(e)}},[t,i.error,o]),i.loading)?(0,n.jsx)(l.X,{shadow:"xs",p:"xl",withBorder:!0,children:(0,n.jsx)(s.Text,{size:"lg",ta:"center",children:"Loading PDF..."})}):i.error?(0,n.jsx)(l.X,{shadow:"xs",p:"xl",withBorder:!0,bg:"red.1",children:(0,n.jsxs)(s.Text,{c:"red",size:"lg",ta:"center",children:["Error loading PDF. Attempting to reload...",JSON.stringify(i.error)]})}):(0,n.jsx)(m,{instance:i})});x.displayName="RenderReactPdfWithRetry";let m=(0,h.memo)(e=>{let{instance:t}=e,i=(0,a.a)("(max-width: 768px)");return t.url?i?(0,n.jsxs)(o.Stack,{align:"center",justify:"center",gap:"lg",p:"xl",h:"100%",children:[(0,n.jsx)(s.Text,{size:"lg",fw:500,ta:"center",c:"dimmed",children:"PDF preview is not available on mobile devices"}),(0,n.jsx)(r.Button,{component:"a",href:t.url,download:"document.pdf",leftSection:(0,n.jsx)(c.Z,{size:24}),children:"Download PDF"}),(0,n.jsx)(s.Text,{size:"sm",c:"dimmed",ta:"center",children:"Tap the button above to download and view the PDF"})]}):(0,n.jsx)("iframe",{src:t.url,width:"100%",height:"1000px",style:{border:"none"}}):null});m.displayName="PDFPreview",t.Z=(0,u.default)(()=>Promise.resolve(x),{ssr:!1})},72940:function(e,t,i){"use strict";i.d(t,{FD:function(){return l},Hn:function(){return n},y4:function(){return s}});let n={headers:{"Content-Type":"application/json"}},l={withCredentials:!0},s={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},83501:function(e,t,i){"use strict";i.d(t,{Y:function(){return s}});var n=i(49854),l=i(67732);let s=async()=>{try{let e=await (0,n.d)("testCategory/admin");return{success:!0,data:e.data}}catch(t){if(t instanceof l.d7){var e;return{success:!1,data:null===(e=t.response)||void 0===e?void 0:e.data.message}}return{success:!1,data:"An error occurred"}}}},25499:function(e,t,i){"use strict";i.d(t,{C:function(){return s},T:function(){return l}});var n=i(53502);let l=()=>(0,n.I0)(),s=n.v9},25626:function(e,t,i){"use strict";let n;i.d(t,{H3:function(){return c},Z2:function(){return h},Zw:function(){return f},_W:function(){return d},gu:function(){return m},lF:function(){return v},mC:function(){return p},s9:function(){return x},se:function(){return g}});var l=i(79258),s=i(69192),o=i(28317);function r(){return n||(n=(0,o.MT)("test-frequency-store","test-frequency")),n}let a=new Intl.Collator,d=(0,l.createAsyncThunk)("tests/setAdminTests",async e=>{let t=await (0,o.qh)().catch(()=>[]);return t.length?(await (0,o.vw)(t,r()),(0,o.ZH)()):t=await (0,o.qh)(r()).catch(()=>[]),[e,t]}),c=(0,l.createAsyncThunk)("tests/increaseTestFrequencies",async e=>(await Promise.all(e.map(e=>(0,o.Vx)(e.id,e=>(e||0)+1),r())).catch(),await (0,o.qh)(r()).catch(()=>[]))),u=(0,l.createSlice)({name:"tests",initialState:{adminCategories:[],adminTests:null,superAdminCategories:[]},reducers:{setAdminCategories:(e,t)=>{e.adminCategories=t.payload},removeAdminCategories:(e,t)=>{var i;e.adminCategories=null===(i=e.adminCategories)||void 0===i?void 0:i.filter(e=>e.id!==t.payload.id)},updateTestsInAdminCategories:(e,t)=>{var i;let n=t.payload;console.log(n),e.adminCategories=null===(i=e.adminCategories)||void 0===i?void 0:i.map(e=>({...e,tests:e.tests.map(e=>n.find(t=>t.id===e.id)||e)}))},removeTestFromAdminCategories:(e,t)=>{var i;e.adminCategories=null===(i=e.adminCategories)||void 0===i?void 0:i.map(e=>({...e,tests:e.tests.filter(e=>e.id!==t.payload.id)}))},removeTestFromSuperAdminCategories:(e,t)=>{var i;e.superAdminCategories=null===(i=e.superAdminCategories)||void 0===i?void 0:i.map(e=>({...e,tests:e.tests.filter(e=>e.id!==t.payload.id)}))},setSuperAdminCategories:(e,t)=>{e.superAdminCategories=t.payload},removeSuperAdminCategories:(e,t)=>{var i;e.superAdminCategories=null===(i=e.superAdminCategories)||void 0===i?void 0:i.filter(e=>e.id!==t.payload.id)}},extraReducers:e=>{e.addCase(d.fulfilled,(e,t)=>{let i=t.payload[0],n=new Map(t.payload[1]);if(Array.isArray(i))e.adminTests=[...i];else{if(e.adminTests){let t=e.adminTests.findIndex(e=>e.id===i.id);t>=0?e.adminTests[t]=i:e.adminTests.push(i)}else e.adminTests=[i];if(e.adminCategories){for(let t=0;t<e.adminCategories.length;t++)for(let n=0;n<e.adminCategories[t].tests.length;n++)if(i.id===e.adminCategories[t].tests[n].id){e.adminCategories[t].tests[n]=i;break}}}e.adminTests.sort((e,t)=>{var i,l;return(null!==(i=n.get(t.id))&&void 0!==i?i:0)-(null!==(l=n.get(e.id))&&void 0!==l?l:0)||a.compare(e.name,t.name)})}),e.addCase(c.fulfilled,(e,t)=>{var i;let n=new Map(t.payload);null===(i=e.adminTests)||void 0===i||i.sort((e,t)=>{var i,l;return(null!==(i=n.get(t.id))&&void 0!==i?i:0)-(null!==(l=n.get(e.id))&&void 0!==l?l:0)||a.compare(e.name,t.name)})})}});(0,s.createSelector)([e=>e.tests.adminCategories],e=>new Map(null==e?void 0:e.map(e=>[+e.id,e])));let{setAdminCategories:h,removeAdminCategories:x,setSuperAdminCategories:m,removeSuperAdminCategories:v,removeTestFromAdminCategories:g,removeTestFromSuperAdminCategories:p,updateTestsInAdminCategories:f}=u.actions;t.ZP=u.reducer},49854:function(e,t,i){"use strict";let n;i.d(t,{d:function(){return d},x:function(){return a}});var l=i(72940),s=i(6780),o=i(67732),r=i(28317);function a(){return n||(n=(0,r.MT)("cached-responses-store","cached-responses")),n}async function d(e,t){try{let i=await s.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...l.FD});return await (0,r.t8)(e,i.data,a()),i.data}catch(t){if(t instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(t.code)){let t=await (0,r.U2)(e,a());if(t)return t}throw t instanceof o.d7&&t.response&&401===t.response.status||console.error(t),t}}},22096:function(e){e.exports={table:"styles_table__YTqky",printContainer:"styles_printContainer__HquYP"}}},function(e){e.O(0,[1601,3313,9826,4404,3439,7281,3069,6945,3852,1656,9722,4670,9258,9533,12,7538,1166,7967,7698,7186,4890,9669,1291,4454,9175,7402,1744],function(){return e(e.s=21821)}),_N_E=e.O()}]);