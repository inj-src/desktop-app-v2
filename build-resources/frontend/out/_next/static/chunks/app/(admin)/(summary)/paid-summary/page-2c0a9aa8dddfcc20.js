(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7878],{24764:function(t,e,a){Promise.resolve().then(a.bind(a,9538))},9538:function(t,e,a){"use strict";a.r(e);var o=a(68328),l=a(11114),n=a(22041),i=a(41224),u=a(76029),s=a(34473),d=a(32451),r=a(68242),c=a(53729),m=a(4505),g=a(12450),h=a(25499),p=a(74559),v=a(13603),A=a(13720),P=a(65971),C=a(50549),y=a(41671),b=a(62904),f=a(2422);e.default=()=>{var t,e,a,x;let[w,k]=(0,m.useState)(1),[S,D]=(0,m.useState)(1),[j,T]=(0,m.useState)(1),[V,N]=(0,m.useState)(1),[L,z]=(0,m.useState)({bills:[],totalCount:0,paidAmount:0}),[M,O]=(0,m.useState)({patients:[],totalCount:0,paidAmount:0}),[I,Z]=(0,m.useState)({patients:[],totalCount:0,paidAmount:0}),[E,W]=(0,m.useState)({dueCollections:[],totalPaidAmount:0}),[R,U]=(0,m.useState)(!0),[_,B]=(0,m.useState)(!0),[H,q]=(0,m.useState)(!0),[F,G]=(0,m.useState)(!0),Q=(0,h.C)(p.nC),J=(0,h.C)(v.uA),K=(0,h.C)(t=>t.diagnosticSettings.viewId),X=(0,g.useSearchParams)(),Y="receptionist"===Q?!X.get("overall"):void 0,$="admin"===Q&&K?K:void 0,{data:tt}=(0,f.h)({from:J[0].toISOString(),to:J[1].toISOString()}),te=(null==tt?void 0:null===(t=tt.data)||void 0===t?void 0:t.outdoorPaidAmount)||0,ta=(null==tt?void 0:null===(e=tt.data)||void 0===e?void 0:e.indoorPaidAmount)||0,to=(null==tt?void 0:null===(a=tt.data)||void 0===a?void 0:a.opdAmount)||0,tl=(null==tt?void 0:null===(x=tt.data)||void 0===x?void 0:x.dueCollection)||0;(0,m.useEffect)(()=>{U(!0),(0,A.Q)({from:J[0],to:J[1],page:w,limit:5,isOwn:Y||!1,userId:$}).then(t=>{let{success:e,data:a}=t;e&&"string"!=typeof a&&z({bills:a.items.bills||[],totalCount:a.items.totalCount||0,paidAmount:a.items.paidAmount||0}),U(!1)})},[J,w,Y,$]),(0,m.useEffect)(()=>{B(!0),(0,P.q)({from:J[0],to:J[1],page:S,limit:5,isOwn:Y,userId:$,status:"Day Patient"}).then(t=>{let{success:e,data:a}=t;e&&"string"!=typeof a&&O({patients:a.items.hospitalPatients||[],totalCount:a.items.totalCount||0,paidAmount:a.items.paidAmount||0}),B(!1)})},[J,S,Y,$]),(0,m.useEffect)(()=>{q(!0),(0,P.q)({from:J[0],to:J[1],page:j,limit:5,isOwn:Y,userId:$}).then(t=>{let{success:e,data:a}=t;e&&"string"!=typeof a&&Z({patients:(a.items.hospitalPatients||[]).filter(t=>"Day Patient"!==t.status),totalCount:a.items.totalCount||0,paidAmount:a.items.paidAmount||0}),q(!1)})},[J,j,Y,$]),(0,m.useEffect)(()=>{G(!0),(0,C.V)({from:J[0],to:J[1],page:V,limit:5,isOwn:Y||!1,userId:$}).then(t=>{let{success:e,data:a}=t;e&&"string"!=typeof a&&W({dueCollections:a.dueCollections||[],totalPaidAmount:a.totalPaidAmount||0}),G(!1)})},[J,V,Y,$]);let tn=(0,m.useCallback)(t=>{k(t)},[]),ti=(0,m.useCallback)(t=>{D(t)},[]),tu=(0,m.useCallback)(t=>{T(t)},[]),ts=(0,m.useCallback)(t=>{N(t)},[]),td=(0,m.useMemo)(()=>[{key:"name",label:"Patient Name",width:180,getValue:t=>(null==t?void 0:t.name)||"N/A"},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"discount",label:"Discount",width:100,getValue:t=>"৳".concat((null==t?void 0:t.hospitalDiscount)||0)},{key:"status",label:"Status",width:100,render:t=>(0,o.jsx)(l.C,{color:(null==t?void 0:t.isPaid)?"green":"red",size:"sm",children:(null==t?void 0:t.isPaid)?"Paid":"Due"})},{key:"label",label:"Updated History",width:140,render:t=>{let e=null==t?void 0:t.updateInfo,a=null==t?void 0:t.hasAnyInRangeUpdate;if(!e||e.length<=1)return(0,o.jsx)(n.Text,{size:"sm",c:"dimmed",children:"No updates"});let s=(0,o.jsxs)(i.Stack,{gap:4,children:[(0,o.jsx)(n.Text,{size:"xs",fw:600,children:"Updates Within Range:"}),e.map((t,e)=>(0,o.jsxs)(n.Text,{size:"xs",children:[new Date(t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(t.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]},e))]});return(0,o.jsx)(u.u,{label:s,multiline:!0,children:(0,o.jsxs)(l.C,{color:a?"blue":"gray",size:"sm",variant:"light",children:[e.length," Updates"]})})}}],[]),tr=(0,m.useMemo)(()=>[{key:"name",label:"Patient Name",width:150,getValue:t=>{var e;return(null==t?void 0:null===(e=t.patient)||void 0===e?void 0:e.name)||"N/A"}},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"discount",label:"Discount",width:100,getValue:t=>{let e=(null==t?void 0:t.totalAmountWithDiscount)||0,a=(null==t?void 0:t.paidAmount)||0;return"৳".concat(Math.max(0,e-a))}},{key:"totalPaid",label:"Total Paid",width:100,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"paidToday",label:"Paid Today",width:100,getValue:t=>"৳".concat((null==t?void 0:t.paidInAmount)||0),textProps:{fw:600,c:"blue"}},{key:"status",label:"Status",width:100,render:t=>(0,o.jsx)(l.C,{color:(null==t?void 0:t.status)==="Released"?"green":"yellow",size:"sm",children:(null==t?void 0:t.status)||"N/A"})}],[]),tc=(0,m.useMemo)(()=>[{key:"name",label:"Patient Name",width:150,getValue:t=>{var e;return(null==t?void 0:null===(e=t.patient)||void 0===e?void 0:e.name)||"N/A"}},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"discount",label:"Discount",width:100,getValue:t=>{let e=(null==t?void 0:t.totalAmountWithDiscount)||0,a=(null==t?void 0:t.paidAmount)||0;return"৳".concat(Math.max(0,e-a))}},{key:"totalPaid",label:"Total Paid",width:100,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"paidToday",label:"Paid Today",width:100,getValue:t=>"৳".concat((null==t?void 0:t.paidInAmount)||0),textProps:{fw:600,c:"blue"}},{key:"status",label:"Status",width:100,render:t=>(0,o.jsx)(l.C,{color:(null==t?void 0:t.status)==="Released"?"green":"blue",size:"sm",children:(null==t?void 0:t.status)||"Day Patient"})}],[]),tm=(0,m.useMemo)(()=>[{key:"name",label:"Patient Name",width:180,getValue:t=>(null==t?void 0:t.name)||"N/A"},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"discount",label:"Discount",width:100,getValue:t=>"৳".concat((null==t?void 0:t.hospitalDiscount)||0)},{key:"paidAmount",label:"Paid Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"status",label:"Status",width:100,render:t=>(0,o.jsx)(l.C,{color:(null==t?void 0:t.isPaid)?"green":"orange",size:"sm",children:(null==t?void 0:t.isPaid)?"Paid":"Due"})}],[]);return(0,o.jsxs)(s.Container,{size:"xl",px:"md",children:[(0,o.jsx)(i.Stack,{gap:"lg",children:(0,o.jsxs)(d.Box,{p:"lg",children:[(0,o.jsx)(r.Title,{order:2,mb:(0,c.h)(4),children:"Paid Summary"}),(0,o.jsx)(n.Text,{size:"sm",c:"dimmed",children:"Summary of all paid transactions"})]})}),(0,o.jsxs)(d.Box,{p:"md",children:[(0,o.jsx)(y.Z,{title:"Outdoor Collection",data:L.bills,columns:td,totalAmount:te,totalAmountLabel:"Total Paid",totalCount:L.totalCount,isLoading:R,currentPage:w,onPageChange:tn,itemsPerPage:5,emptyMessage:"No outdoor bills found",renderCard:(t,e)=>(0,o.jsx)(b.Z,{item:t,type:"outdoor"},t.id||e)}),(0,o.jsx)(y.Z,{title:"OPD Collection",data:M.patients,columns:tc,totalAmount:to,totalAmountLabel:"Total Paid",totalCount:M.totalCount,isLoading:_,currentPage:S,onPageChange:ti,itemsPerPage:5,emptyMessage:"No OPD bills found",renderCard:(t,e)=>(0,o.jsx)(b.Z,{item:t,type:"opd"},t.id||e)}),(0,o.jsx)(y.Z,{title:"Indoor Collection",data:I.patients,columns:tr,totalAmount:ta,totalAmountLabel:"Total Paid",totalCount:I.totalCount,isLoading:H,currentPage:j,onPageChange:tu,itemsPerPage:5,emptyMessage:"No indoor bills found",renderCard:(t,e)=>(0,o.jsx)(b.Z,{item:t,type:"indoor"},t.id||e)}),(0,o.jsx)(y.Z,{title:"Due Collection",data:E.dueCollections,columns:tm,totalAmount:tl,totalAmountLabel:"Total Collected",totalCount:E.dueCollections.length,isLoading:F,currentPage:V,onPageChange:ts,itemsPerPage:5,emptyMessage:"No due collections found",renderCard:(t,e)=>(0,o.jsx)(b.Z,{item:t,type:"due"},t.id||e)})]})]})}},50549:function(t,e,a){"use strict";a.d(e,{V:function(){return i}});var o=a(72940),l=a(6780),n=a(67732);let i=async t=>{let{from:e,to:a,limit:i,page:u,isOwn:s=!1,filterData:d,phone:r,patientId:c,userId:m}=t;try{e&&(e=new Date(e)).setHours(0,0,0,0),a&&(a=new Date(a)).setHours(23,59,59,999);let t=await l.default.get("bill/dueCollection",{baseURL:"http://sasthotech.local:5000/api/v1",params:{from:e,to:a,limit:i,page:u,isOwn:s,...d,phone:r,patientId:c,userId:m},...o.FD});return console.log("Due Collection Response:",t.data),{success:!0,data:t.data.data}}catch(t){if(t instanceof n.d7){var g;return{success:!1,data:null===(g=t.response)||void 0===g?void 0:g.data.message}}return{success:!1,data:"An error occurred"}}}}},function(t){t.O(0,[1601,3069,6945,3852,4670,9258,966,6029,7140,2389,6258,8278,9175,7402,1744],function(){return t(t.s=24764)}),_N_E=t.O()}]);