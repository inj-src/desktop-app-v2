(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7161,1054],{91054:function(){},25729:function(e,t,n){Promise.resolve().then(n.bind(n,39085))},39085:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(68328),i=n(84153),o=n(65850),a=n(62549),l=n(33908),s=n.n(l),d=n(25985);o.Zx.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"}),o.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let c=o.mM.create({page:{padding:30,fontSize:10,fontFamily:"NotoSans",backgroundColor:"#ffffff"},header:{marginBottom:10},divider:{borderBottomWidth:2,borderBottomColor:"#2563eb",marginVertical:10},titleSection:{alignItems:"center",marginBottom:15},title:{fontSize:18,fontWeight:"bold",color:"#1e40af",marginBottom:5},subtitle:{fontSize:12,color:"#64748b",fontWeight:"bold"},dateRange:{fontSize:10,color:"#64748b",marginTop:3},section:{marginBottom:12},sectionTitle:{fontSize:11,fontWeight:"bold",color:"#1e293b",marginBottom:6,paddingBottom:3,borderBottomWidth:1,borderBottomColor:"#cbd5e1"},infoGrid:{flexDirection:"row",gap:15},infoColumn:{flex:1},infoRow:{flexDirection:"row",marginBottom:4},infoLabel:{fontSize:8,color:"#64748b",width:"35%",fontWeight:"bold"},infoValue:{fontSize:8,color:"#1e293b",width:"65%"},summarySection:{flexDirection:"row",gap:8,marginBottom:12,justifyContent:"space-between"},summaryCard:{flex:1,padding:8,backgroundColor:"#f1f5f9",borderRadius:4,alignItems:"center"},summaryCardHighlight:{backgroundColor:"#dbeafe",borderWidth:1,borderColor:"#2563eb"},summaryLabel:{fontSize:7,color:"#64748b",marginBottom:3},summaryValue:{fontSize:12,fontWeight:"bold",color:"#1e293b"},summaryValueHighlight:{color:"#2563eb"},tableHeader:{flexDirection:"row",backgroundColor:"#1e40af",padding:6,borderTopLeftRadius:4,borderTopRightRadius:4},tableHeaderText:{color:"#ffffff",fontWeight:"bold",fontSize:7},tableRow:{flexDirection:"row",padding:5,borderBottomWidth:1,borderBottomColor:"#e2e8f0"},tableRowEven:{backgroundColor:"#ffffff"},tableRowOdd:{backgroundColor:"#f8fafc"},tableCell:{fontSize:6,paddingHorizontal:2},tableCellText:{color:"#1e293b",fontSize:6},tableCellSubtext:{fontSize:5.5,color:"#64748b"},tableCellHighlight:{color:"#2563eb",fontWeight:"bold"},tableFooter:{flexDirection:"row",backgroundColor:"#f1f5f9",padding:6,borderBottomLeftRadius:4,borderBottomRightRadius:4,borderTopWidth:2,borderTopColor:"#2563eb"},tableFooterText:{fontWeight:"bold",fontSize:7,color:"#1e293b"},tableFooterHighlight:{color:"#2563eb",fontSize:8},footer:{marginTop:"auto",paddingTop:10},footerDivider:{borderTopWidth:1,borderTopColor:"#cbd5e1",marginBottom:6},footerText:{fontSize:7,color:"#64748b",textAlign:"center",marginTop:2},itemsGrid:{flexDirection:"row",flexWrap:"wrap",gap:6,marginTop:6},itemCard:{width:"23%",padding:8,borderRadius:4,borderWidth:1,borderColor:"#e2e8f0",flexDirection:"column",justifyContent:"space-between",minHeight:50},itemCardEven:{backgroundColor:"#ffffff"},itemCardOdd:{backgroundColor:"#f8fafc"},itemName:{fontSize:7,color:"#1e293b",fontWeight:"bold",marginBottom:6,lineHeight:1.3},itemQuantityBadge:{backgroundColor:"#dbeafe",paddingHorizontal:6,paddingVertical:3,borderRadius:3,flexDirection:"row",alignItems:"center",justifyContent:"center",gap:3},itemQuantity:{fontSize:9,color:"#2563eb",fontWeight:"bold"},itemQuantityLabel:{fontSize:6,color:"#64748b"},noItemsContainer:{padding:20,alignItems:"center",justifyContent:"center",backgroundColor:"#f8fafc",borderRadius:4,marginTop:8},noItemsText:{fontSize:9,color:"#64748b",fontStyle:"italic"},itemRow:{flexDirection:"row",justifyContent:"space-between",padding:6,borderBottomWidth:1,borderBottomColor:"#e2e8f0"}});var u=e=>{let{groups:t,diagnosticState:n,referenceTypeLabel:i,totalCost:l,totalItems:u,totalQuantity:m,showDetailed:h=!1,dateRange:x,itemsWithQuantity:f,watermarkEnabled:g=!0}=e;return t&&0!==t.length?(0,r.jsxs)(o.BB,{children:[(0,r.jsxs)(o.T3,{size:"A4",style:c.page,children:[g&&(0,r.jsx)(d.Z,{diagnosticState:n}),n&&(0,r.jsx)(o.G7,{style:c.header,children:(0,r.jsx)(a.default,{diagnosticState:n})}),(0,r.jsx)(o.G7,{style:c.divider}),(0,r.jsxs)(o.G7,{style:c.titleSection,children:[(0,r.jsx)(o.xv,{style:c.title,children:"INVENTORY TRANSACTION REPORT"}),(0,r.jsx)(o.xv,{style:c.subtitle,children:i}),x&&(0,r.jsxs)(o.xv,{style:c.dateRange,children:[s()(x.from).format("MMM DD, YYYY")," -"," ",s()(x.to).format("MMM DD, YYYY")]})]}),(0,r.jsxs)(o.G7,{style:c.summarySection,children:[(0,r.jsxs)(o.G7,{style:c.summaryCard,children:[(0,r.jsx)(o.xv,{style:c.summaryLabel,children:"Total Records"}),(0,r.jsx)(o.xv,{style:c.summaryValue,children:t.length})]}),(0,r.jsxs)(o.G7,{style:c.summaryCard,children:[(0,r.jsx)(o.xv,{style:c.summaryLabel,children:"Total Items"}),(0,r.jsx)(o.xv,{style:c.summaryValue,children:u})]}),(0,r.jsxs)(o.G7,{style:c.summaryCard,children:[(0,r.jsx)(o.xv,{style:c.summaryLabel,children:"Total Quantity"}),(0,r.jsx)(o.xv,{style:c.summaryValue,children:m})]}),(0,r.jsxs)(o.G7,{style:[c.summaryCard,c.summaryCardHighlight],children:[(0,r.jsx)(o.xv,{style:c.summaryLabel,children:"Total Cost"}),(0,r.jsx)(o.xv,{style:[c.summaryValue,c.summaryValueHighlight],children:l.toFixed(2)})]})]}),(0,r.jsxs)(o.G7,{style:c.section,children:[(0,r.jsxs)(o.xv,{style:c.sectionTitle,children:["All Items Used (",f.length,")"]}),f.length>0?(0,r.jsx)(o.G7,{style:c.itemsGrid,children:f.map((e,t)=>(0,r.jsxs)(o.G7,{style:[c.itemCard,t%2==0?c.itemCardEven:c.itemCardOdd],children:[(0,r.jsx)(o.xv,{style:c.itemName,children:e.name}),(0,r.jsxs)(o.G7,{style:c.itemQuantityBadge,children:[(0,r.jsx)(o.xv,{style:c.itemQuantity,children:e.quantity}),(0,r.jsx)(o.xv,{style:c.itemQuantityLabel,children:"units"})]})]},"".concat(e.name,"-").concat(t)))}):(0,r.jsx)(o.G7,{style:c.noItemsContainer,children:(0,r.jsx)(o.xv,{style:c.noItemsText,children:"No items found"})})]}),(0,r.jsxs)(o.G7,{style:c.section,children:[(0,r.jsx)(o.xv,{style:c.sectionTitle,children:"Summary by Reference"}),(0,r.jsxs)(o.G7,{style:c.tableHeader,children:[(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"35%"}],children:"Reference"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"25%"}],children:"Patient/Name"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"15%"}],children:"Items"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"25%"}],children:"Total Cost"})]}),t.map((e,t)=>{var n,i;return(0,r.jsxs)(o.G7,{style:[c.tableRow,t%2==0?c.tableRowEven:c.tableRowOdd],children:[(0,r.jsxs)(o.G7,{style:[c.tableCell,{width:"35%"}],children:[(0,r.jsx)(o.xv,{style:c.tableCellText,children:e.referenceLabel}),(0,r.jsx)(o.xv,{style:c.tableCellText,children:"TEST_COMPLETION"===e.referenceType?null==e?void 0:e.referenceDetails.testName:(null==e?void 0:e.referenceType)==="OPERATION"?null==e?void 0:e.referenceDetails.operationName:null==e?void 0:null===(n=e.referenceDetails)||void 0===n?void 0:n.billId}),(0,r.jsx)(o.xv,{style:c.tableCellSubtext,children:s()(e.transactionDate).format("MMM DD, YYYY")})]}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"25%"}],children:(null===(i=e.referenceDetails.patient)||void 0===i?void 0:i.name)||e.referenceDetails.operationName||e.referenceDetails.testName||"N/A"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"15%"}],children:e.items.map(e=>(0,r.jsxs)(o.xv,{style:c.tableCellText,children:[e.itemName," (",e.quantityDeducted," ",e.unit,") ,"]},e.itemId))}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,c.tableCellHighlight,{width:"25%"}],children:e.summary.totalCost.toFixed(2)})]},e.referenceId)}),(0,r.jsxs)(o.G7,{style:c.tableFooter,children:[(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableFooterText,{width:"60%"}],children:"GRAND TOTAL"}),(0,r.jsxs)(o.xv,{style:[c.tableCell,c.tableFooterText,{width:"15%"}],children:[t.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.quantityDeducted,0),0)," "]}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableFooterText,c.tableFooterHighlight,{width:"25%"}],children:l.toFixed(2)})]})]}),(0,r.jsxs)(o.G7,{style:c.footer,children:[(0,r.jsx)(o.G7,{style:c.footerDivider}),(0,r.jsxs)(o.xv,{style:c.footerText,children:["Generated on: ",s()().format("MMM DD, YYYY hh:mm A")]}),(0,r.jsxs)(o.xv,{style:c.footerText,children:["Page 1 of ",h?t.length+1:1]}),(0,r.jsx)(o.xv,{style:c.footerText,children:"Powered by Sasthotech HMS"})]})]}),h&&t.map((e,i)=>(0,r.jsxs)(o.T3,{size:"A4",style:c.page,children:[g&&(0,r.jsx)(d.Z,{diagnosticState:n}),n&&(0,r.jsx)(o.G7,{style:c.header,children:(0,r.jsx)(a.default,{diagnosticState:n})}),(0,r.jsx)(o.G7,{style:c.divider}),(0,r.jsx)(o.G7,{style:c.titleSection,children:(0,r.jsxs)(o.xv,{style:c.subtitle,children:[e.referenceLabel," - Detailed Statement"]})}),(0,r.jsxs)(o.G7,{style:c.section,children:[(0,r.jsx)(o.xv,{style:c.sectionTitle,children:"Reference Information"}),(0,r.jsxs)(o.G7,{style:c.infoGrid,children:[(0,r.jsxs)(o.G7,{style:c.infoColumn,children:[e.referenceDetails.patient&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Patient:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.patient.name})]}),(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Phone:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.patient.phone})]})]}),e.referenceDetails.operationName&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Operation:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.operationName})]}),e.referenceDetails.testName&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Test:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.testName})]}),e.referenceDetails.diagnosis&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Diagnosis:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.diagnosis})]}),e.referenceDetails.description&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Description:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.description})]})]}),(0,r.jsxs)(o.G7,{style:c.infoColumn,children:[e.referenceDetails.doctor&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Doctor:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.doctor.name})]}),e.referenceDetails.doctor.designation&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Designation:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.doctor.designation})]})]}),void 0!==e.referenceDetails.totalAmount&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Bill Amount:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.totalAmount.toLocaleString()})]}),void 0!==e.referenceDetails.paidAmount&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Paid Amount:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:e.referenceDetails.paidAmount.toLocaleString()})]}),e.referenceDetails.admissionDate&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Admission:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:s()(e.referenceDetails.admissionDate).format("MMM DD, YYYY")})]}),e.referenceDetails.releasedDate&&(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Released:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:s()(e.referenceDetails.releasedDate).format("MMM DD, YYYY")})]}),(0,r.jsxs)(o.G7,{style:c.infoRow,children:[(0,r.jsx)(o.xv,{style:c.infoLabel,children:"Transaction Date:"}),(0,r.jsx)(o.xv,{style:c.infoValue,children:s()(e.transactionDate).format("MMM DD, YYYY hh:mm A")})]})]})]})]}),(0,r.jsxs)(o.G7,{style:c.section,children:[(0,r.jsxs)(o.xv,{style:c.sectionTitle,children:["Items Used (",e.items.length,")"]}),(0,r.jsxs)(o.G7,{style:c.tableHeader,children:[(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"18%"}],children:"Item Name"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"8%"}],children:"Code"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"12%"}],children:"Category"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"10%"}],children:"Quantity"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"10%"}],children:"Unit Cost"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"12%"}],children:"Total Cost"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"12%"}],children:"Store"}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableHeaderText,{width:"18%"}],children:"Reason"})]}),e.items.map((e,t)=>(0,r.jsxs)(o.G7,{style:[c.tableRow,t%2==0?c.tableRowEven:c.tableRowOdd],children:[(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"18%"}],children:e.itemName}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"8%"}],children:e.itemCode}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"12%"}],children:e.category}),(0,r.jsxs)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"10%"}],children:[e.quantityDeducted," ",e.unit]}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"10%"}],children:e.unitCost.toFixed(2)}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,c.tableCellHighlight,{width:"12%"}],children:e.totalCost.toFixed(2)}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellText,{width:"12%"}],children:e.store.name}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableCellSubtext,{width:"18%"}],children:e.reason||"-"})]},e.transactionId)),(0,r.jsxs)(o.G7,{style:c.tableFooter,children:[(0,r.jsxs)(o.xv,{style:[c.tableCell,c.tableFooterText,{width:"60%"}],children:["SUBTOTAL (",e.summary.totalItemsDeducted," items,"," ",e.summary.totalQuantityDeducted," units)"]}),(0,r.jsx)(o.xv,{style:[c.tableCell,c.tableFooterText,c.tableFooterHighlight,{width:"40%"}],children:e.summary.totalCost.toFixed(2)})]})]}),(0,r.jsxs)(o.G7,{style:c.footer,children:[(0,r.jsx)(o.G7,{style:c.footerDivider}),(0,r.jsxs)(o.xv,{style:c.footerText,children:["Page ",i+2," of ",t.length+1]}),(0,r.jsx)(o.xv,{style:c.footerText,children:"Powered by Sasthotech HMS"})]})]},e.referenceId))]}):(0,r.jsx)(o.BB,{children:(0,r.jsx)(o.T3,{size:"A4",style:c.page,children:(0,r.jsx)(o.G7,{style:c.titleSection,children:(0,r.jsx)(o.xv,{style:c.title,children:"No Data Available"})})})})},m=n(89123),h=n(52387),x=n(25499),f=n(71149),g=n(36409),y=n(14587),v=n(46373),p=n(41224),j=n(22614),b=n(32451),T=n(68242),w=n(22041),S=n(31204),C=n(72375),D=n(58812),I=n(77303),R=n(89043),z=n(87967),P=n(49905),G=n(48604),k=n(48709),E=n(11114),N=n(54632),A=n(22975),B=n(77052),q=n(16438),L=n(91024),F=n(8720),O=n(62811),M=n(9326),W=n(58185),Y=n(71140),H=n(67781),U=n(54481),V=n(82641),_=n(58211),Z=n(4505);let Q=[{value:"INDOOR_BILL",label:"Indoor Bills",icon:q.Z,color:"blue"},{value:"OUTDOOR_BILL",label:"Outdoor Bills",icon:L.Z,color:"green"},{value:"OPERATION",label:"Operations",icon:F.Z,color:"red"},{value:"TEST_COMPLETION",label:"Test Completions",icon:O.Z,color:"violet"}];function X(){var e,t;let{getParam:n,updateUrlParams:o}=(0,m.G)(),a=(0,x.C)(e=>e.auth.diagnostic),l=(0,f.q)(),[d,c]=(0,Z.useState)(!1),[q,F]=(0,Z.useState)(!1),[O,X]=(0,Z.useState)(()=>{let e=n("trans_dateFrom"),t=n("trans_dateTo");return{referenceType:n("trans_refType")||"INDOOR_BILL",storeId:n("trans_storeId")||void 0,dateFrom:e?new Date(e):new Date,dateTo:t?new Date(t):new Date,page:parseInt(n("trans_page")||"1"),limit:20}}),K=e=>{var t,n;X(e),o({trans_refType:e.referenceType,trans_storeId:e.storeId||null,trans_dateFrom:(null===(t=e.dateFrom)||void 0===t?void 0:t.toISOString())||null,trans_dateTo:(null===(n=e.dateTo)||void 0===n?void 0:n.toISOString())||null,trans_page:e.page.toString()})},[J,$]=(0,Z.useState)([O.dateFrom||new Date,O.dateTo||new Date]),{data:ee}=(0,h.WY)({}),{data:et,isLoading:en,error:er}=(0,h.sv)({referenceType:O.referenceType,storeId:O.storeId,dateFrom:null===(e=O.dateFrom)||void 0===e?void 0:e.toISOString(),dateTo:null===(t=O.dateTo)||void 0===t?void 0:t.toISOString(),page:O.page,limit:O.limit}),ei=(null==ee?void 0:ee.data)||[],eo=null==et?void 0:et.data;if(en)return(0,r.jsx)(g.M,{h:400,children:(0,r.jsx)(y.Loader,{size:"lg"})});if(er)return(0,r.jsx)(v.b,{icon:(0,r.jsx)(M.Z,{size:16}),title:"Error",color:"red",children:"Failed to load transaction data"});if(!eo)return null;let ea=[{value:"",label:"All Stores"},...ei.map(e=>({value:e.id,label:e.name}))],el=Q.find(e=>e.value===O.referenceType),es=eo.groups.reduce((e,t)=>e+t.summary.totalCost,0),ed=()=>{let e=new Map;return eo.groups.forEach(t=>{t.items.forEach(t=>{if(e.has(t.itemId)){let n=e.get(t.itemId);n.quantity+=t.quantityDeducted,e.set(t.itemId,n)}else e.set(t.itemId,{name:t.itemName,quantity:t.quantityDeducted})})}),Array.from(e.values())},ec=(()=>{let e=new Set;return eo.groups.forEach(t=>{t.items.forEach(t=>{e.add(t.itemId)})}),e})().size,eu=eo.groups.reduce((e,t)=>e+t.summary.totalQuantityDeducted,0);return(0,r.jsxs)(p.Stack,{gap:"lg",p:"lg",children:[(0,r.jsxs)(j.Group,{justify:"space-between",align:"flex-start",children:[(0,r.jsxs)(b.Box,{children:[(0,r.jsx)(T.Title,{order:2,children:"Inventory Transaction Statements"}),(0,r.jsx)(w.Text,{size:"sm",c:"dimmed",mt:4,children:"View and print detailed inventory usage reports by reference type"})]}),(0,r.jsxs)(j.Group,{gap:"md",align:"flex-start",children:[(0,r.jsxs)(p.Stack,{gap:"xs",align:"flex-end",children:[(0,r.jsx)(S.Button,{size:"md",leftSection:(0,r.jsx)(W.Z,{size:20}),color:"blue",variant:"filled",onClick:()=>{c(!0)},disabled:!eo||0===eo.groups.length,children:"Print All Transactions"}),(0,r.jsx)(C.X,{label:"Include detailed pages",checked:q,onChange:e=>F(e.currentTarget.checked),size:"sm"})]}),(0,r.jsx)(D.k,{size:"xl",variant:"light",color:(null==el?void 0:el.color)||"blue",children:el&&(0,r.jsx)(el.icon,{size:28})})]})]}),(0,r.jsx)(I.Divider,{mb:"sm"}),(0,r.jsx)(R.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:(0,r.jsxs)(j.Group,{gap:"md",align:"flex-end",wrap:"wrap",children:[(0,r.jsx)(b.Box,{style:{flex:1,minWidth:200,maxWidth:300},children:(0,r.jsx)(z.P,{label:"Reference Type",placeholder:"Select type",data:Q.map(e=>({value:e.value,label:e.label})),value:O.referenceType,onChange:e=>K({...O,referenceType:e,page:1}),leftSection:el&&(0,r.jsx)(el.icon,{size:16,color:"var(--mantine-color-".concat(el.color,"-6)")})})}),(0,r.jsx)(b.Box,{style:{flex:1,minWidth:200,maxWidth:300},children:(0,r.jsx)(z.P,{label:"Store",placeholder:"All Stores",data:ea,value:O.storeId||"",onChange:e=>K({...O,storeId:e||void 0,page:1}),clearable:!0,leftSection:(0,r.jsx)(Y.Z,{size:16})})}),(0,r.jsx)(b.Box,{style:{flex:1,minWidth:250,maxWidth:350},children:(0,r.jsx)(B.DatePickerInput,{type:"range",allowSingleDateInRange:!0,label:"Date Range",placeholder:"Select date range",value:J,onChange:e=>{$(e),K({...O,dateFrom:e[0]||new Date,dateTo:e[1]||new Date,page:1})},leftSection:(0,r.jsx)(H.Z,{size:16}),clearable:!0,valueFormat:"MMM DD, YYYY",maxDate:new Date,highlightToday:!0})})]})}),(0,r.jsxs)(P.M,{cols:{base:1,sm:2,lg:4},spacing:"md",children:[(0,r.jsxs)(G.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,bg:"blue.0",children:[(0,r.jsxs)(j.Group,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(w.Text,{size:"sm",c:"blue.9",fw:500,children:"Total Records"}),(0,r.jsx)(D.k,{color:"blue",variant:"light",size:"lg",radius:"md",children:(0,r.jsx)(L.Z,{size:20})})]}),(0,r.jsx)(T.Title,{order:2,c:"blue.9",children:eo.pagination.totalCount}),(0,r.jsxs)(w.Text,{size:"xs",c:"blue.7",mt:"xs",children:[eo.referenceTypeLabel," records"]})]}),(0,r.jsxs)(G.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,bg:"green.0",children:[(0,r.jsxs)(j.Group,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(w.Text,{size:"sm",c:"green.9",fw:500,children:"Total Items Used"}),(0,r.jsx)(D.k,{color:"green",variant:"light",size:"lg",radius:"md",children:(0,r.jsx)(U.Z,{size:20})})]}),(0,r.jsx)(T.Title,{order:2,c:"green.9",children:ec}),(0,r.jsx)(w.Text,{size:"xs",c:"green.7",mt:"xs",children:"Unique items deducted"})]}),(0,r.jsxs)(G.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,bg:"violet.0",children:[(0,r.jsxs)(j.Group,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(w.Text,{size:"sm",c:"violet.9",fw:500,children:"Total Quantity"}),(0,r.jsx)(D.k,{color:"violet",variant:"light",size:"lg",radius:"md",children:(0,r.jsx)(V.Z,{size:20})})]}),(0,r.jsx)(T.Title,{order:2,c:"violet.9",children:eu.toLocaleString()}),(0,r.jsx)(w.Text,{size:"xs",c:"violet.7",mt:"xs",children:"Total units deducted"})]}),(0,r.jsxs)(G.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,bg:"orange.0",children:[(0,r.jsxs)(j.Group,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(w.Text,{size:"sm",c:"orange.9",fw:500,children:"Total Cost"}),(0,r.jsx)(D.k,{color:"orange",variant:"light",size:"lg",radius:"md",children:(0,r.jsx)(_.Z,{size:20})})]}),(0,r.jsxs)(T.Title,{order:2,c:"orange.9",children:["৳",es.toLocaleString()]}),(0,r.jsx)(w.Text,{size:"xs",c:"orange.7",mt:"xs",children:"Total inventory value used"})]})]}),(0,r.jsxs)(G.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,r.jsx)(j.Group,{justify:"space-between",mb:"md",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(T.Title,{order:4,children:"Transaction Details"}),(0,r.jsxs)(w.Text,{size:"sm",c:"dimmed",mt:4,children:["Page ",eo.pagination.currentPage," of"," ",eo.pagination.totalPages]})]})}),0===eo.groups.length?(0,r.jsx)(g.M,{py:"xl",children:(0,r.jsxs)(p.Stack,{align:"center",gap:"md",children:[(0,r.jsx)(D.k,{size:60,variant:"light",color:"gray",radius:"xl",children:(0,r.jsx)(L.Z,{size:30})}),(0,r.jsx)(w.Text,{c:"dimmed",children:"No transactions found for the selected filters"})]})}):(0,r.jsx)(k.U,{variant:"separated",radius:"md",children:eo.groups.map(e=>{var t;return(0,r.jsxs)(k.U.Item,{value:e.referenceId,children:[(0,r.jsx)(k.U.Control,{children:(0,r.jsxs)(b.Box,{style:{flex:1},children:[(0,r.jsxs)(j.Group,{gap:"xs",mb:4,children:[(0,r.jsx)(E.C,{color:null==el?void 0:el.color,variant:"light",children:e.referenceLabel}),(0,r.jsx)(w.Text,{size:"sm",fw:500,children:(null===(t=e.referenceDetails.patient)||void 0===t?void 0:t.name)||e.referenceDetails.operationName||e.referenceDetails.testName})]}),(0,r.jsxs)(w.Text,{size:"xs",c:"dimmed",children:[s()(e.transactionDate).format("MMM DD, YYYY hh:mm A")," •"," ",e.summary.totalItemsDeducted," items • ৳",e.summary.totalCost.toLocaleString()]})]})}),(0,r.jsx)(k.U.Panel,{children:(0,r.jsxs)(p.Stack,{gap:"md",children:[(0,r.jsxs)(R.X,{p:"md",withBorder:!0,children:[(0,r.jsx)(T.Title,{order:6,mb:"sm",children:"Reference Information"}),(0,r.jsxs)(P.M,{cols:{base:1,sm:2},spacing:"xs",children:[e.referenceDetails.patient&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(w.Text,{size:"sm",children:[(0,r.jsx)("strong",{children:"Patient:"})," ",e.referenceDetails.patient.name]}),(0,r.jsxs)(w.Text,{size:"sm",children:[(0,r.jsx)("strong",{children:"Phone:"})," ",e.referenceDetails.patient.phone]})]}),e.referenceDetails.doctor&&(0,r.jsxs)(w.Text,{size:"sm",children:[(0,r.jsx)("strong",{children:"Doctor:"})," ",e.referenceDetails.doctor.name]}),e.referenceDetails.diagnosis&&(0,r.jsxs)(w.Text,{size:"sm",children:[(0,r.jsx)("strong",{children:"Diagnosis:"})," ",e.referenceDetails.diagnosis]}),void 0!==e.referenceDetails.totalAmount&&(0,r.jsxs)(w.Text,{size:"sm",children:[(0,r.jsx)("strong",{children:"Bill Amount:"})," ৳",e.referenceDetails.totalAmount.toLocaleString()]}),(0,r.jsxs)(w.Text,{size:"sm",children:[(0,r.jsx)("strong",{children:"Created By:"})," ",e.createdBy.name]})]})]}),(0,r.jsxs)(b.Box,{children:[(0,r.jsxs)(T.Title,{order:6,mb:"sm",children:["Items Used (",e.items.length,")"]}),(0,r.jsx)(N.i.ScrollContainer,{minWidth:800,children:(0,r.jsxs)(N.i,{striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[(0,r.jsx)(N.i.Thead,{children:(0,r.jsxs)(N.i.Tr,{children:[(0,r.jsx)(N.i.Th,{children:"Item Name"}),(0,r.jsx)(N.i.Th,{children:"Code"}),(0,r.jsx)(N.i.Th,{children:"Category"}),(0,r.jsx)(N.i.Th,{children:"Quantity"}),(0,r.jsx)(N.i.Th,{children:"Unit Cost"}),(0,r.jsx)(N.i.Th,{children:"Total Cost"}),(0,r.jsx)(N.i.Th,{children:"Store"})]})}),(0,r.jsx)(N.i.Tbody,{children:e.items.map(e=>(0,r.jsxs)(N.i.Tr,{children:[(0,r.jsxs)(N.i.Td,{children:[(0,r.jsx)(w.Text,{size:"sm",fw:500,children:e.itemName}),e.reason&&(0,r.jsx)(w.Text,{size:"xs",c:"dimmed",children:e.reason})]}),(0,r.jsx)(N.i.Td,{children:(0,r.jsx)(w.Text,{size:"sm",children:e.itemCode})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsx)(E.C,{size:"sm",variant:"light",children:e.category})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsxs)(w.Text,{size:"sm",fw:500,children:[e.quantityDeducted," ",e.unit]})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsxs)(w.Text,{size:"sm",children:["৳",e.unitCost.toFixed(2)]})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsxs)(w.Text,{size:"sm",fw:600,c:"blue",children:["৳",e.totalCost.toFixed(2)]})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsx)(w.Text,{size:"sm",children:e.store.name})})]},e.transactionId))}),(0,r.jsx)(N.i.Tfoot,{children:(0,r.jsxs)(N.i.Tr,{children:[(0,r.jsx)(N.i.Td,{colSpan:5,style:{textAlign:"right"},children:(0,r.jsx)(w.Text,{fw:600,children:"Total:"})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsxs)(w.Text,{fw:700,c:"blue",children:["৳",e.summary.totalCost.toFixed(2)]})}),(0,r.jsx)(N.i.Td,{children:(0,r.jsxs)(w.Text,{size:"xs",c:"dimmed",children:[e.summary.totalQuantityDeducted," units"]})})]})})]})})]})]})})]},e.referenceId)})}),eo.pagination.totalPages>1&&(0,r.jsxs)(j.Group,{justify:"center",mt:"xl",gap:"xs",children:[(0,r.jsx)(S.Button,{variant:"light",disabled:!eo.pagination.hasPreviousPage,onClick:()=>K({...O,page:O.page-1}),children:"Previous"}),(0,r.jsxs)(w.Text,{size:"sm",children:["Page ",eo.pagination.currentPage," of"," ",eo.pagination.totalPages]}),(0,r.jsx)(S.Button,{variant:"light",disabled:!eo.pagination.hasNextPage,onClick:()=>K({...O,page:O.page+1}),children:"Next"})]})]}),eo&&(0,r.jsx)(A.u,{opened:d,onClose:()=>c(!1),size:"90%",radius:"md",transitionProps:{transition:"fade",duration:200},title:(0,r.jsxs)(w.Text,{fw:600,children:["All Transactions Report - ",eo.referenceTypeLabel]}),children:(0,r.jsx)(A.u.Body,{p:0,children:(0,r.jsx)(i.Z,{PDFTemplate:()=>(0,r.jsx)(u,{groups:eo.groups,diagnosticState:a,referenceTypeLabel:eo.referenceTypeLabel,totalCost:es,totalItems:ec,itemsWithQuantity:ed(),totalQuantity:eu,showDetailed:q,watermarkEnabled:l,dateRange:O.dateFrom&&O.dateTo?{from:O.dateFrom.toISOString(),to:O.dateTo.toISOString()}:void 0})})})})]})}},71149:function(e,t,n){"use strict";n.d(t,{AN:function(){return c},HG:function(){return l},J7:function(){return o},UA:function(){return d},dB:function(){return m},ev:function(){return a},q:function(){return u},tK:function(){return s}});var r=n(62471),i=n(4505);let o=["A4 portrait","A5 portrait","A4 landscape"],a=[["outdoor-bill","A5 portrait",60],["indoor-bill","A4 portrait",60,void 0,120],["indoor-admission-form","A4 portrait",90,"isHospitalManagement",120],["outdoor-summary","A4 portrait",90],["indoor-summary","A4 portrait",90,"isHospitalManagement"],["receptionist-summary","A4 portrait",90],["pc-payment","A5 portrait",60]];function l(e){let t=(0,i.useMemo)(()=>a.find(t=>t[0]===e),[e]),[n]=(0,r.I)({key:"".concat(e,"-print-page-size"),defaultValue:null==t?void 0:t[1]}),[o]=(0,r.I)({key:"".concat(e,"-print-page-scale"),defaultValue:null==t?void 0:t[2]});return"\n    @page { size: ".concat(n,";margin:10px 0px; }\n    :root { --mantine-scale: ").concat(+o/100,"; }\n    .fs-1{font-size:calc(var(--mantine-scale) * calc(1.375rem + 1.5vw))!important}\n    .fs-2{font-size:calc(var(--mantine-scale) * calc(1.325rem + .9vw))!important}\n    .fs-3{font-size:calc(var(--mantine-scale) * calc(1.3rem + .6vw))!important}\n    .fs-4{font-size:calc(var(--mantine-scale) * calc(1.275rem + .3vw))!important}\n    .fs-5{font-size:calc(var(--mantine-scale) * 1.25rem)!important}\n    .fs-6{font-size:calc(var(--mantine-scale) * 1rem)!important}")}function s(e){var t,n,o;let l=(0,i.useMemo)(()=>a.find(t=>t[0]===e),[e]),[s]=(0,r.I)({key:"".concat(e,"-print-page-height"),defaultValue:null!==(n=null==l?void 0:null===(t=l[4])||void 0===t?void 0:t.toString())&&void 0!==n?n:""});return s?+s:null!==(o=null==l?void 0:l[4])&&void 0!==o?o:100}function d(){let[e]=(0,r.I)({key:"selected-admission-template-id",defaultValue:"1"});return e?+e:1}function c(){let[e]=(0,r.I)({key:"selected-bill-template-id",defaultValue:"1"});return e?+e:1}function u(){let[e]=(0,r.I)({key:"print-watermark-enabled",defaultValue:"true"});return"true"===e}function m(){let[e]=(0,r.I)({key:"selected-appointment-token-template-id",defaultValue:"2"});return e?+e:2}},62549:function(e,t,n){"use strict";n.r(t),n.d(t,{LoadDiagnosticImageUrl:function(){return d}});var r=n(68328),i=n(4505),o=n(65850),a=n(62471),l=n(6780),s=n(25499);function d(){var e;let t=(0,s.C)(e=>e.auth.diagnostic),n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")||window.location.hostname.includes("198")?null==t?void 0:t.offlineLogo:null!==(e=null==t?void 0:t.logo)&&void 0!==e?e:null,r="/images/demo-fallback-logo.png";return(0,i.useEffect)(()=>{if(!n||""===n.trim()){sessionStorage.setItem("diagnostic-logo",r);return}l.default.get(n,{headers:{"Cache-Control":"no-cache"},timeout:3e3,responseType:"blob"}).then(e=>{if(!e||!e.data)throw Error("Image not found or invalid response");let t=e.data;return new Promise((e,n)=>{let r=new FileReader;r.onload=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)})}).then(e=>{sessionStorage.setItem("diagnostic-logo",e)}).catch(e=>{console.warn("Error loading primary image, using fallback:",e),sessionStorage.setItem("diagnostic-logo",r)})},[n,r,3e3]),null}let c=o.mM.create({container:{width:"100%",alignItems:"center",display:"flex",flexDirection:"row",gap:10},logoContainer:{width:100,height:80,marginBottom:10,position:"relative"},image:{width:"100%",height:"100%",objectFit:"contain",borderRadius:100},headerContainer:{width:"100%"},hospitalName:{fontSize:20,fontWeight:"bold",fontFamily:"NotoSans",marginBottom:4,textAlign:"left"},address:{fontSize:12,fontFamily:"NotoSans",marginBottom:2,textAlign:"left"},phone:{fontSize:12,fontFamily:"NotoSans",textAlign:"left"}});t.default=e=>{let{diagnosticState:t,fallbackImageUrl:n="/images/demo-fallback-logo.png",timeoutDuration:i=3e3}=e,l=(0,a._)({key:"print-show-division-name",defaultValue:"true"}),s=sessionStorage.getItem("diagnostic-logo")||n;return(0,r.jsxs)(o.G7,{style:c.container,children:[(0,r.jsx)(o.G7,{style:c.logoContainer,children:s&&(0,r.jsx)(o.Ee,{src:s,style:c.image})}),(0,r.jsxs)(o.G7,{style:c.headerContainer,children:[(0,r.jsx)(o.xv,{style:c.hospitalName,children:null==t?void 0:t.name}),(0,r.jsxs)(o.xv,{style:c.address,children:[null==t?void 0:t.address,"true"===l&&(null==t?void 0:t.division)?", ".concat(null==t?void 0:t.division):""]}),(0,r.jsxs)(o.xv,{style:c.phone,children:["Phone: ",null==t?void 0:t.phone1,(null==t?void 0:t.phone2)?", ".concat(null==t?void 0:t.phone2):""]})]})]})}},84153:function(e,t,n){"use strict";var r=n(68328),i=n(89043),o=n(22041),a=n(41224),l=n(31204),s=n(9323),d=n(65850),c=n(42870),u=n(42116),m=n(4505);let h=(0,m.memo)(e=>{let{PDFTemplate:t}=e,[n,a]=(0,d.Eb)({document:(0,r.jsx)(t,{})});return((0,m.useEffect)(()=>{let e,i=0;return n.error&&(console.log("PDF ERROR: ",n.error),n.error&&i<3&&(e=setTimeout(()=>{console.log("Retrying PDF generation attempt ".concat(i+1,"/").concat(3)),a((0,r.jsx)(t,{})),i++},2e3))),()=>{e&&clearTimeout(e)}},[t,n.error,a]),n.loading)?(0,r.jsx)(i.X,{shadow:"xs",p:"xl",withBorder:!0,children:(0,r.jsx)(o.Text,{size:"lg",ta:"center",children:"Loading PDF..."})}):n.error?(0,r.jsx)(i.X,{shadow:"xs",p:"xl",withBorder:!0,bg:"red.1",children:(0,r.jsxs)(o.Text,{c:"red",size:"lg",ta:"center",children:["Error loading PDF. Attempting to reload...",JSON.stringify(n.error)]})}):(0,r.jsx)(x,{instance:n})});h.displayName="RenderReactPdfWithRetry";let x=(0,m.memo)(e=>{let{instance:t}=e,n=(0,s.a)("(max-width: 768px)");return t.url?n?(0,r.jsxs)(a.Stack,{align:"center",justify:"center",gap:"lg",p:"xl",h:"100%",children:[(0,r.jsx)(o.Text,{size:"lg",fw:500,ta:"center",c:"dimmed",children:"PDF preview is not available on mobile devices"}),(0,r.jsx)(l.Button,{component:"a",href:t.url,download:"document.pdf",leftSection:(0,r.jsx)(c.Z,{size:24}),children:"Download PDF"}),(0,r.jsx)(o.Text,{size:"sm",c:"dimmed",ta:"center",children:"Tap the button above to download and view the PDF"})]}):(0,r.jsx)("iframe",{src:t.url,width:"100%",height:"1000px",style:{border:"none"}}):null});x.displayName="PDFPreview",t.Z=(0,u.default)(()=>Promise.resolve(h),{ssr:!1})},25985:function(e,t,n){"use strict";var r=n(68328),i=n(65850),o=n(6780),a=n(4505);let l=i.mM.create({wrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",zIndex:-1},watermark:{opacity:.08}});t.Z=e=>{let{diagnosticState:t,fallbackImageUrl:n="/images/demo-fallback-logo.png",timeoutDuration:s=5e3,pageSize:d="A4"}=e,[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[x,f]=(0,a.useState)(!1),g=(null==t?void 0:t.logo)||(null==t?void 0:t.offlineLogo)||null;if((0,a.useEffect)(()=>{if(!g){f(!0),h(!1);return}h(!0),(async()=>{try{let e=await o.default.get(g,{timeout:s,responseType:"blob"}),t=await new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e.data)});u(t),f(!1)}catch(e){f(!0)}finally{h(!1)}})()},[g,s]),m)return null;let y=x?n:c;if(!y)return null;let v=d.includes("A5");return(0,r.jsx)(i.G7,{fixed:!0,style:l.wrapper,children:(0,r.jsx)(i.Ee,{src:y,style:[l.watermark,{width:v?250:450,height:v?250:450}]})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return i},Hn:function(){return r},y4:function(){return o}});let r={headers:{"Content-Type":"application/json"}},i={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},89123:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(12450),i=n(4505);function o(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),n=(0,i.useCallback)(e=>null==e||""===e?null:e instanceof Date?e.toISOString():String(e),[]),o=(0,i.useCallback)(e=>t.get(e),[t]),a=(0,i.useCallback)((e,n)=>{let r=t.get(e);if(null===r)return n;if(n instanceof Date){let e=new Date(r);return isNaN(e.getTime())?n:e}if("boolean"==typeof n)return"true"===r;if("number"==typeof n){let e=Number(r);return isNaN(e)?n:e}return r},[t]),l=(0,i.useCallback)(()=>{let e={};return t.forEach((t,n)=>{e[n]=t}),e},[t]),s=(0,i.useCallback)((r,i)=>{let o=new URLSearchParams(Array.from(t.entries())),a=n(i);null!==a?o.set(r,a):o.delete(r);let l=o.toString();e.replace("".concat(window.location.pathname).concat(l?"?".concat(l):""),{scroll:!1})},[e,t,n]),d=(0,i.useCallback)(r=>{let i=new URLSearchParams(Array.from(t.entries()));Object.entries(r).forEach(e=>{let[t,r]=e,o=n(r);null!==o?i.set(t,o):i.delete(t)});let o=i.toString();e.replace("".concat(window.location.pathname).concat(o?"?".concat(o):""),{scroll:!1})},[e,t,n]);return{getParam:o,getTypedParam:a,getAllParams:l,updateUrlParam:s,updateUrlParams:d,removeUrlParam:(0,i.useCallback)(n=>{let r=new URLSearchParams(Array.from(t.entries()));r.delete(n);let i=r.toString();e.replace("".concat(window.location.pathname).concat(i?"?".concat(i):""),{scroll:!1})},[e,t]),removeUrlParams:(0,i.useCallback)(n=>{let r=new URLSearchParams(Array.from(t.entries()));n.forEach(e=>r.delete(e));let i=r.toString();e.replace("".concat(window.location.pathname).concat(i?"?".concat(i):""),{scroll:!1})},[e,t]),clearAllParams:(0,i.useCallback)(()=>{e.replace(window.location.pathname,{scroll:!1})},[e])}}},52387:function(e,t,n){"use strict";n.d(t,{Cf:function(){return A},DD:function(){return N},OB:function(){return R},OE:function(){return l},WK:function(){return m},WY:function(){return r},Xz:function(){return g},Yd:function(){return k},_r:function(){return M},a:function(){return P},aB:function(){return I},aS:function(){return z},ap:function(){return F},bM:function(){return h},bg:function(){return c},fF:function(){return y},fp:function(){return v},fv:function(){return f},gZ:function(){return L},j6:function(){return o},lg:function(){return E},mS:function(){return x},sv:function(){return q},vR:function(){return G},zQ:function(){return B}});let{useGetAllStoresQuery:r,useGetStoreQuery:i,useCreateStoreMutation:o,useUpdateStoreMutation:a,useDeleteStoreMutation:l,useGetAllStoreTagsQuery:s,useGetStoreTagQuery:d,useCreateStoreTagMutation:c,useDeleteStoreTagMutation:u,useGetAllInventoryItemsQuery:m,useGetInventoryItemQuery:h,useCreateInventoryItemMutation:x,useUpdateInventoryItemMutation:f,useDeleteInventoryItemMutation:g,useDeductStockMutation:y,useAddStockMutation:v,useGetAllInventoryPackagesQuery:p,useGetInventoryPackageQuery:j,useCreateInventoryPackageMutation:b,useUpdateInventoryPackageMutation:T,useDeleteInventoryPackageMutation:w,useAddItemToPackageMutation:S,useUpdatePackageItemMutation:C,useRemoveItemFromPackageMutation:D,useGetDeductionPoliciesQuery:I,useCreateDeductionPolicyMutation:R,useUpdateDeductionPolicyMutation:z,useDeleteDeductionPolicyMutation:P,useGetDashboardSummaryQuery:G,useGetStockTrendsQuery:k,useGetCriticalAlertsQuery:E,useGetTransactionLogsQuery:N,useGetBatchesQuery:A,useGetUsersQuery:B,useGetGroupedTransactionsQuery:q,useGetDefaultStoresQuery:L,useAddDefaultStoreMutation:F,useSetDefaultStoresMutation:O,useDeleteDefaultStoreMutation:M}=n(78101).g.injectEndpoints({endpoints:e=>({getAllStores:e.query({query:()=>({url:"/store",method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStore:e.query({query:e=>({url:"/store/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createStore:e.mutation({query:e=>({url:"/store",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateStore:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/store/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteStore:e.mutation({query:e=>({url:"/store/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),getAllStoreTags:e.query({query:()=>({url:"/storeTag",method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStoreTag:e.query({query:e=>({url:"/storeTag/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createStoreTag:e.mutation({query:e=>({url:"/storeTag",method:"POST",body:e}),invalidatesTags:["inventory"]}),deleteStoreTag:e.mutation({query:e=>({url:"/storeTag/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),getAllInventoryItems:e.query({query:e=>({url:"/inventoryItem",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data,pagination:e.pagination})}),getInventoryItem:e.query({query:e=>({url:"/inventoryItem/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createInventoryItem:e.mutation({query:e=>({url:"/inventoryItem",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateInventoryItem:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/inventoryItem/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteInventoryItem:e.mutation({query:e=>({url:"/inventoryItem/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),deductStock:e.mutation({query:e=>({url:"/inventoryItem/deduct-stock",method:"POST",body:e}),invalidatesTags:["inventory"]}),addStock:e.mutation({query:e=>({url:"/inventoryItem/add-stock",method:"POST",body:e}),invalidatesTags:["inventory"]}),getAllInventoryPackages:e.query({query:e=>({url:"/inventoryPackage",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data,pagination:e.pagination})}),getInventoryPackage:e.query({query:e=>({url:"/inventoryPackage/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createInventoryPackage:e.mutation({query:e=>({url:"/inventoryPackage",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateInventoryPackage:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/inventoryPackage/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteInventoryPackage:e.mutation({query:e=>({url:"/inventoryPackage/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),addItemToPackage:e.mutation({query:e=>{let{packageId:t,...n}=e;return{url:"/inventoryPackage/".concat(t,"/items"),method:"POST",body:n}},invalidatesTags:["inventory"]}),updatePackageItem:e.mutation({query:e=>{let{packageId:t,itemId:n,...r}=e;return{url:"/inventoryPackage/".concat(t,"/items/").concat(n),method:"PUT",body:r}},invalidatesTags:["inventory"]}),removeItemFromPackage:e.mutation({query:e=>{let{packageId:t,itemId:n}=e;return{url:"/inventoryPackage/".concat(t,"/items/").concat(n),method:"DELETE"}},invalidatesTags:["inventory"]}),getDeductionPolicies:e.query({query:e=>({url:"/inventoryItem/".concat(e,"/deduction-policy"),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createDeductionPolicy:e.mutation({query:e=>{let{itemId:t,...n}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy"),method:"POST",body:n}},invalidatesTags:["inventory"]}),updateDeductionPolicy:e.mutation({query:e=>{let{itemId:t,policyId:n,...r}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy/").concat(n),method:"PATCH",body:r}},invalidatesTags:["inventory"]}),deleteDeductionPolicy:e.mutation({query:e=>{let{itemId:t,policyId:n}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy/").concat(n),method:"DELETE"}},invalidatesTags:["inventory"]}),getDashboardSummary:e.query({query:e=>({url:"/inventory/dashboard/summary",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStockTrends:e.query({query:e=>({url:"/inventory/dashboard/trends",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getCriticalAlerts:e.query({query:e=>({url:"/inventory/dashboard/critical-alerts",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getTransactionLogs:e.query({query:e=>({url:"/inventory/transactions",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getBatches:e.query({query:e=>({url:"/inventory/batches",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getUsers:e.query({query:()=>({url:"/admin/user",method:"GET"}),transformResponse:e=>({data:e.data})}),getGroupedTransactions:e.query({query:e=>({url:"/inventory/transactions/grouped",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getDefaultStores:e.query({query:e=>({url:"/inventory/default-stores",method:"GET",params:e?{billType:e}:void 0}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),addDefaultStore:e.mutation({query:e=>({url:"/inventory/default-stores",method:"POST",body:e}),invalidatesTags:["inventory"]}),setDefaultStores:e.mutation({query:e=>({url:"/inventory/default-stores",method:"PUT",body:e}),invalidatesTags:["inventory"]}),deleteDefaultStore:e.mutation({query:e=>({url:"/inventory/default-stores",method:"DELETE",body:e}),invalidatesTags:["inventory"]})})})},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(49854),i=n(68240),o=n(94183),a=n(28317);let l=(0,i.LC)({baseQuery:(0,o.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let i="string"==typeof e?e:e.url;return i.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,a.t8)(i,await n.clone().json().catch(()=>null),(0,r.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,a.U2)(n,(0,r.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},25499:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return i}});var r=n(53502);let i=()=>(0,r.I0)(),o=r.v9},49854:function(e,t,n){"use strict";let r;n.d(t,{d:function(){return d},x:function(){return s}});var i=n(72940),o=n(6780),a=n(67732),l=n(28317);function s(){return r||(r=(0,l.MT)("cached-responses-store","cached-responses")),r}async function d(e,t){try{let n=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...i.FD});return await (0,l.t8)(e,n.data,s()),n.data}catch(t){if(t instanceof a.d7&&[a.d7.ERR_NETWORK,a.d7.ETIMEDOUT].includes(t.code)){let t=await (0,l.U2)(e,s());if(t)return t}throw t instanceof a.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[1601,3313,9826,4404,3439,7281,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,7186,4927,4890,9669,8709,7193,9175,7402,1744],function(){return e(e.s=25729)}),_N_E=e.O()}]);