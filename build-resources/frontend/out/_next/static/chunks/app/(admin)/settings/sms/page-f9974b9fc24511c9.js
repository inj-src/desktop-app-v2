(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5188],{2598:function(e,s,i){Promise.resolve().then(i.bind(i,14995))},14995:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return eH}});var l=i(68328),t=i(32451),r=i(48604),n=i(22614),d=i(68242),a=i(3741),o=i(13342),c=i(89822),x=i(41224),h=i(46373),u=i(89043),m=i(11114),j=i(81209),p=i(22041),g=i(77303),v=i(29663),S=i(55911),b=i(87967),T=i(57956),y=i(31204),w=i(34473),z=i(47720),f=i(22115),M=i(4505),C=i(31129);let P=i(78101).g.injectEndpoints({endpoints:e=>({getSMSTemplates:e.query({query:()=>({url:"/sms/template"}),keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,s)=>new Date(e.createdAt).getTime()-new Date(s.createdAt).getTime()),e)}),createSMSTemplate:e.mutation({query:e=>({url:"/sms/template",method:"POST",body:e}),async onQueryStarted(e,s){let{dispatch:i,queryFulfilled:l}=s,t=Date.now().toString(36),r=i(P.util.updateQueryData("getSMSTemplates",void 0,s=>{s.data.push({...e,id:t,loading:!0})}));try{let{data:e}=await l;i(P.util.updateQueryData("getSMSTemplates",void 0,s=>{let i=s.data.findIndex(e=>e.id===t);i>=0&&(s.data[i]=e.data)}))}catch(e){r.undo()}}}),updateSMSTemplate:e.mutation({query:e=>{let{id:s,...i}=e;return{url:"/sms/template/".concat(s),method:"PATCH",body:i}},async onQueryStarted(e,s){let{id:i,...l}=e,{dispatch:t,queryFulfilled:r}=s,n=t(P.util.updateQueryData("getSMSTemplates",void 0,e=>{let s=e.data.findIndex(e=>e.id===i);s>=0&&(e.data[s]={...e.data[s],...l})}));try{let{data:e}=await r;t(P.util.updateQueryData("getSMSTemplates",void 0,s=>{let l=s.data.findIndex(e=>e.id===i);l>=0&&(s.data[l]=e.data)}))}catch(e){n.undo()}}}),deleteSMSTemplate:e.mutation({query:e=>({url:"/sms/template/".concat(e),method:"DELETE"}),async onQueryStarted(e,s){let{dispatch:i,queryFulfilled:l}=s,t=i(P.util.updateQueryData("getSMSTemplates",void 0,s=>{let i=s.data.find(s=>s.id===e);i&&(i.loading=!0)}));try{await l,i(P.util.updateQueryData("getSMSTemplates",void 0,s=>{let i=s.data.findIndex(s=>s.id===e);i>=0&&s.data.splice(i,1)}))}catch(e){t.undo()}}}),getSingleSMSTemplate:e.query({query:e=>({url:"/sms/template/".concat(e)})})})}),{useGetSMSTemplatesQuery:B,useCreateSMSTemplateMutation:A,useUpdateSMSTemplateMutation:Z,useDeleteSMSTemplateMutation:k,useGetSingleSMSTemplateQuery:E}=P;var G=i(59406),F=i(9326),D=i(42407),I=i(74556),N=i(73395),L=i(4708),R=i(91247),X=i(9654),_=i(38156),O=i(45437),q=i(12697),U=i(49851),H=i(77379),Q=i(75689),V=i(76029),W=i(48709),$=i(63889),Y=i(70748),J=i(25190),K=()=>{let[e,s]=(0,M.useState)("english"),i=Object.entries(C._6);return(0,l.jsxs)(r.Z,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,l.jsx)(r.Z.Section,{bg:"teal.7",p:"md",mb:"md",children:(0,l.jsxs)(n.Group,{justify:"space-between",children:[(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(d.Title,{order:4,c:"white",children:"Default SMS Templates"}),(0,l.jsx)(R.Z,{color:"white",size:20})]}),(0,l.jsx)(H.s,{size:"xs",value:e,onChange:e=>s(e),data:[{label:"English",value:"english"},{label:"Bengali",value:"bengali"}]})]})}),(0,l.jsx)(p.Text,{size:"sm",c:"dimmed",mb:"md",children:"These are the default templates used when no custom template is set. Click the copy button to copy a template message."}),(0,l.jsxs)(u.X,{p:"sm",withBorder:!0,mb:"md",bg:"gray.0",children:[(0,l.jsxs)(n.Group,{gap:"xs",mb:"xs",children:[(0,l.jsx)(Y.Z,{size:16}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:"Available Variables"})]}),(0,l.jsx)(n.Group,{gap:"xs",children:C.pi.map(e=>(0,l.jsx)(Q.q,{value:e.variable,children:s=>{let{copied:i,copy:t}=s;return(0,l.jsx)(V.u,{label:i?"Copied!":"".concat(e.description," - Click to copy"),children:(0,l.jsx)(m.C,{variant:"light",color:i?"teal":"blue",style:{cursor:"pointer"},onClick:t,children:e.variable})})}},e.variable))})]}),(0,l.jsx)(W.U,{variant:"separated",children:i.map(s=>{let[i,r]=s,d="english"===e?r.englishMessage:r.bengaliMessage;return(0,l.jsxs)(W.U.Item,{value:i,children:[(0,l.jsx)(W.U.Control,{children:(0,l.jsxs)(n.Group,{justify:"space-between",pr:"md",children:[(0,l.jsxs)(t.Box,{children:[(0,l.jsx)(p.Text,{fw:500,children:r.name}),(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:r.description})]}),(0,l.jsx)(m.C,{variant:"light",color:"gray",size:"sm",children:i})]})}),(0,l.jsx)(W.U.Panel,{children:(0,l.jsxs)(x.Stack,{gap:"sm",children:[(0,l.jsxs)(u.X,{p:"sm",withBorder:!0,bg:"gray.0",children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:"xs",children:[(0,l.jsxs)(n.Group,{gap:"xs",children:[(0,l.jsx)(U.Z,{size:14}),(0,l.jsxs)(p.Text,{size:"xs",c:"dimmed",children:["english"===e?"English":"Bengali"," Template"]})]}),(0,l.jsx)(Q.q,{value:d,children:e=>{let{copied:s,copy:i}=e;return(0,l.jsx)(V.u,{label:s?"Copied!":"Copy to clipboard",children:(0,l.jsx)(a.A,{color:s?"teal":"gray",variant:"subtle",onClick:i,children:s?(0,l.jsx)(G.Z,{size:16}):(0,l.jsx)(J.Z,{size:16})})})}})]}),(0,l.jsx)($.E,{block:!0,style:{whiteSpace:"pre-wrap"},children:d})]}),(0,l.jsxs)(n.Group,{gap:"xs",children:[(0,l.jsx)(Q.q,{value:r.englishMessage,children:e=>{let{copied:s,copy:i}=e;return(0,l.jsx)(V.u,{label:s?"Copied!":"Copy English",children:(0,l.jsx)(m.C,{variant:"light",color:s?"teal":"blue",style:{cursor:"pointer"},onClick:i,leftSection:s?(0,l.jsx)(G.Z,{size:12}):(0,l.jsx)(J.Z,{size:12}),children:"Copy English"})})}}),(0,l.jsx)(Q.q,{value:r.bengaliMessage,children:e=>{let{copied:s,copy:i}=e;return(0,l.jsx)(V.u,{label:s?"Copied!":"Copy Bengali",children:(0,l.jsx)(m.C,{variant:"light",color:s?"teal":"green",style:{cursor:"pointer"},onClick:i,leftSection:s?(0,l.jsx)(G.Z,{size:12}):(0,l.jsx)(J.Z,{size:12}),children:"Copy Bengali"})})}})]})]})})]},i)})})]})},ee=i(19290),es=i(14587),ei=i(49905),el=i(58812),et=i(68823),er=i(34022),en=i(79629),ed=i(44314),ea=i(78664),eo=i(40573),ec=i(80108),ex=i(54481),eh=i(58895),eu=i(92671),em=i(62134),ej=()=>{var e,s,i,t,a,o,c,h,j,g,S,b,T,y,w,z,f,P,B,A,Z,k,E,G,F,D,I,N;let[R,X]=(0,M.useState)("30"),{data:_,isLoading:O,error:q}=(0,ee.u7)({days:parseInt(R)});if(O)return(0,l.jsx)(r.Z,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,children:(0,l.jsxs)(n.Group,{justify:"center",py:"xl",children:[(0,l.jsx)(es.Loader,{size:"lg"}),(0,l.jsx)(p.Text,{children:"Loading analytics..."})]})});if(q||!_)return(0,l.jsx)(r.Z,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,children:(0,l.jsxs)(n.Group,{justify:"center",py:"xl",children:[(0,l.jsx)(en.Z,{size:24,color:"red"}),(0,l.jsx)(p.Text,{c:"red",children:"Failed to load analytics"})]})});let{monthlyComparison:U,eventTypeDistribution:Q,hourlyDistribution:V,packageUsage:W}=_,$=null==V?void 0:V.reduce((e,s)=>s.count>e.count?s:e,{hour:0,count:0});return(0,l.jsx)(x.Stack,{gap:"md",children:(0,l.jsxs)(r.Z,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,l.jsx)(r.Z.Section,{bg:"grape.7",p:"md",mb:"md",children:(0,l.jsxs)(n.Group,{justify:"space-between",children:[(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(d.Title,{order:4,c:"white",children:"SMS Analytics"}),(0,l.jsx)(L.Z,{color:"white",size:20})]}),(0,l.jsx)(H.s,{size:"xs",value:R,onChange:X,data:[{label:"30 Days",value:"30"},{label:"60 Days",value:"60"},{label:"90 Days",value:"90"}]})]})}),(0,l.jsxs)(v.Grid,{mb:"lg",children:[(0,l.jsx)(v.Grid.Col,{span:{base:12,md:6},children:(0,l.jsxs)(u.X,{p:"lg",withBorder:!0,radius:"md",h:"100%",children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:"md",children:[(0,l.jsx)(d.Title,{order:5,children:"Monthly Comparison"}),(0,l.jsxs)(m.C,{color:(null==U?void 0:U.trend)==="up"?"green":"red",leftSection:(null==U?void 0:U.trend)==="up"?(0,l.jsx)(ed.Z,{size:14}):(0,l.jsx)(ea.Z,{size:14}),size:"lg",children:[null!==(w=null==U?void 0:null===(e=U.growthRate)||void 0===e?void 0:e.toFixed(1))&&void 0!==w?w:0,"%"]})]}),(0,l.jsxs)(ei.M,{cols:2,children:[(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"blue.0",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",mb:"xs",children:"Current Month"}),(0,l.jsx)(p.Text,{size:"xl",fw:700,c:"blue",children:null!==(z=null==U?void 0:null===(i=U.currentMonth)||void 0===i?void 0:null===(s=i.count)||void 0===s?void 0:s.toLocaleString())&&void 0!==z?z:0}),(0,l.jsxs)(p.Text,{size:"xs",c:"dimmed",children:[null!==(f=null==U?void 0:null===(a=U.currentMonth)||void 0===a?void 0:null===(t=a.totalChars)||void 0===t?void 0:t.toLocaleString())&&void 0!==f?f:0," chars"]})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"gray.0",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",mb:"xs",children:"Previous Month"}),(0,l.jsx)(p.Text,{size:"xl",fw:700,children:null!==(P=null==U?void 0:null===(c=U.previousMonth)||void 0===c?void 0:null===(o=c.count)||void 0===o?void 0:o.toLocaleString())&&void 0!==P?P:0}),(0,l.jsxs)(p.Text,{size:"xs",c:"dimmed",children:[null!==(B=null==U?void 0:null===(j=U.previousMonth)||void 0===j?void 0:null===(h=j.totalChars)||void 0===h?void 0:h.toLocaleString())&&void 0!==B?B:0," chars"]})]})]}),(0,l.jsxs)(n.Group,{mt:"md",justify:"center",children:[(0,l.jsx)(el.k,{size:"xl",radius:"xl",color:(null==U?void 0:U.trend)==="up"?"green":"red",variant:"light",children:(null==U?void 0:U.trend)==="up"?(0,l.jsx)(eo.Z,{size:24}):(0,l.jsx)(ec.Z,{size:24})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(p.Text,{size:"sm",fw:500,children:[(null==U?void 0:U.trend)==="up"?"Growth":"Decline"," of"," ",Math.abs(null!==(A=null==U?void 0:U.growthRate)&&void 0!==A?A:0).toFixed(1),"%"]}),(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"compared to previous month"})]})]})]})}),(0,l.jsx)(v.Grid.Col,{span:{base:12,md:6},children:(0,l.jsxs)(u.X,{p:"lg",withBorder:!0,radius:"md",h:"100%",children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:"md",children:[(0,l.jsx)(d.Title,{order:5,children:"Package Usage"}),(0,l.jsx)(el.k,{size:"lg",radius:"md",color:"orange",variant:"light",children:(0,l.jsx)(ex.Z,{size:20})})]}),(0,l.jsx)(n.Group,{justify:"center",mb:"md",children:(0,l.jsx)(et.T,{size:140,thickness:14,roundCaps:!0,sections:[{value:null!==(Z=null==W?void 0:W.usagePercentage)&&void 0!==Z?Z:0,color:(null!==(k=null==W?void 0:W.usagePercentage)&&void 0!==k?k:0)>80?"red":(null!==(E=null==W?void 0:W.usagePercentage)&&void 0!==E?E:0)>50?"yellow":"green"}],label:(0,l.jsxs)(p.Text,{ta:"center",size:"lg",fw:700,children:[null!==(G=null==W?void 0:null===(g=W.usagePercentage)||void 0===g?void 0:g.toFixed(0))&&void 0!==G?G:0,"%"]})})}),(0,l.jsxs)(ei.M,{cols:2,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Total Purchased"}),(0,l.jsxs)(p.Text,{size:"sm",fw:600,children:[null!==(F=null==W?void 0:null===(S=W.totalPurchasedSMS)||void 0===S?void 0:S.toLocaleString())&&void 0!==F?F:0," SMS"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Total Used"}),(0,l.jsxs)(p.Text,{size:"sm",fw:600,children:[null!==(D=null==W?void 0:null===(b=W.totalUsedSMS)||void 0===b?void 0:b.toLocaleString())&&void 0!==D?D:0," SMS"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Remaining"}),(0,l.jsxs)(p.Text,{size:"sm",fw:600,c:"green",children:[null!==(I=null==W?void 0:null===(T=W.totalRemainingSMS)||void 0===T?void 0:T.toLocaleString())&&void 0!==I?I:0," SMS"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Total Spent"}),(0,l.jsxs)(p.Text,{size:"sm",fw:600,children:["৳",null!==(N=null==W?void 0:null===(y=W.totalSpent)||void 0===y?void 0:y.toLocaleString())&&void 0!==N?N:0]})]})]})]})})]}),(0,l.jsxs)(v.Grid,{children:[(0,l.jsx)(v.Grid.Col,{span:{base:12,md:6},children:(0,l.jsxs)(u.X,{p:"lg",withBorder:!0,radius:"md",h:"100%",children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:"md",children:[(0,l.jsx)(d.Title,{order:5,children:"Event Type Distribution"}),(0,l.jsx)(el.k,{size:"lg",radius:"md",color:"violet",variant:"light",children:(0,l.jsx)(eh.Z,{size:20})})]}),(0,l.jsx)(x.Stack,{gap:"sm",children:Q&&Q.length>0?Q.map(e=>{var s;let i=(null===(s=C.A4.find(s=>s.value===e.type))||void 0===s?void 0:s.label)||e.type;return(0,l.jsxs)("div",{children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:4,children:[(0,l.jsx)(p.Text,{size:"sm",lineClamp:1,style:{maxWidth:"50%"},children:i}),(0,l.jsxs)(n.Group,{gap:"xs",children:[(0,l.jsx)(p.Text,{size:"sm",fw:500,children:e.count}),(0,l.jsxs)(m.C,{size:"xs",variant:"light",children:[e.percentage.toFixed(1),"%"]})]})]}),(0,l.jsx)(er.E,{value:e.percentage,size:"md",radius:"md",color:"violet"})]},e.type)}):(0,l.jsx)(p.Text,{size:"sm",c:"dimmed",ta:"center",children:"No data available"})})]})}),(0,l.jsx)(v.Grid.Col,{span:{base:12,md:6},children:(0,l.jsxs)(u.X,{p:"lg",withBorder:!0,radius:"md",h:"100%",children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:"md",children:[(0,l.jsx)(d.Title,{order:5,children:"Hourly Distribution"}),(0,l.jsx)(el.k,{size:"lg",radius:"md",color:"cyan",variant:"light",children:(0,l.jsx)(eu.Z,{size:20})})]}),$&&$.count>0&&(0,l.jsx)(u.X,{p:"sm",withBorder:!0,radius:"md",bg:"cyan.0",mb:"md",children:(0,l.jsxs)(n.Group,{justify:"center",gap:"xs",children:[(0,l.jsx)(p.Text,{size:"sm",children:"Peak Hour:"}),(0,l.jsxs)(m.C,{color:"cyan",size:"lg",children:[$.hour.toString().padStart(2,"0"),":00 -"," ",(($.hour+1)%24).toString().padStart(2,"0"),":00"]}),(0,l.jsxs)(p.Text,{size:"sm",c:"dimmed",children:["(",$.count," SMS)"]})]})}),(0,l.jsx)(ei.M,{cols:6,children:V&&V.filter(e=>e.count>0).sort((e,s)=>s.count-e.count).slice(0,12).map(e=>{let s=Math.max(...V.map(e=>e.count)),i=s>0?e.count/s:0;return(0,l.jsxs)(u.X,{p:"xs",withBorder:!0,radius:"md",bg:i>.7?"cyan.2":i>.4?"cyan.1":"gray.0",ta:"center",children:[(0,l.jsxs)(p.Text,{size:"xs",fw:500,children:[e.hour.toString().padStart(2,"0"),":00"]}),(0,l.jsx)(p.Text,{size:"sm",fw:700,children:e.count})]},e.hour)})}),(!V||0===V.filter(e=>e.count>0).length)&&(0,l.jsx)(p.Text,{size:"sm",c:"dimmed",ta:"center",children:"No data available"})]})})]}),W&&W.totalPackages>0&&(0,l.jsxs)(u.X,{p:"lg",withBorder:!0,radius:"md",mt:"md",children:[(0,l.jsxs)(n.Group,{justify:"space-between",mb:"md",children:[(0,l.jsx)(d.Title,{order:5,children:"Cost Analysis"}),(0,l.jsx)(el.k,{size:"lg",radius:"md",color:"teal",variant:"light",children:(0,l.jsx)(em.Z,{size:20})})]}),(0,l.jsxs)(ei.M,{cols:{base:2,sm:4},children:[(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"gray.0",ta:"center",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",mb:"xs",children:"Total Packages"}),(0,l.jsx)(p.Text,{size:"xl",fw:700,children:W.totalPackages})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"gray.0",ta:"center",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",mb:"xs",children:"Total Spent"}),(0,l.jsxs)(p.Text,{size:"xl",fw:700,c:"teal",children:["৳",W.totalSpent.toLocaleString()]})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"gray.0",ta:"center",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",mb:"xs",children:"Avg Cost/SMS"}),(0,l.jsxs)(p.Text,{size:"xl",fw:700,children:["৳",W.totalUsedSMS>0?(W.totalSpent/W.totalUsedSMS).toFixed(2):"0.00"]})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"gray.0",ta:"center",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",mb:"xs",children:"Remaining Value"}),(0,l.jsxs)(p.Text,{size:"xl",fw:700,c:"green",children:["৳",W.totalPurchasedSMS>0?(W.totalSpent/W.totalPurchasedSMS*W.totalRemainingSMS).toFixed(0):"0"]})]})]})]})]})})},ep=i(26144),eg=i(13822),ev=i(54632),eS=i(25621),eb=i(7140),eT=i(22975),ey=i(62374),ew=i(46557),ez=i(69915),ef=i(9286),eM=i(37947),eC=i(86083),eP=i(60711),eB=i(84103),eA=i(42204),eZ=i(25091),ek=i(83553);let eE=[{value:"10",label:"10 per page"},{value:"15",label:"15 per page"},{value:"25",label:"25 per page"},{value:"50",label:"50 per page"}],eG=[{value:"",label:"All Status"},{value:"SENT",label:"Sent"},{value:"FAILED",label:"Failed"},{value:"PENDING",label:"Pending"},{value:"ON_HOLD",label:"On Hold"},{value:"REQUEST_SUBMITTED",label:"Request Submitted"}],eF=[{value:"",label:"All Events"},...C.A4.map(e=>({value:e.value,label:e.label}))],eD=e=>{switch(e){case"SENT":return"green";case"FAILED":return"red";case"PENDING":return"yellow";case"ON_HOLD":default:return"gray";case"REQUEST_SUBMITTED":return"blue"}},eI=e=>{switch(e){case"SENT":return(0,l.jsx)(G.Z,{size:14});case"FAILED":return(0,l.jsx)(ez.Z,{size:14});case"PENDING":return(0,l.jsx)(eu.Z,{size:14});default:return null}};var eN=()=>{var e;let[s,i]=(0,M.useState)(1),[o,c]=(0,M.useState)("15"),[h,j]=(0,M.useState)(""),[g,v]=(0,M.useState)(""),[T,y]=(0,M.useState)(""),[w]=(0,ey.c)(T,500),[z,f]=(0,M.useState)(null),[P,{open:B,close:A}]=(0,ew.q)(!1),{data:Z,isLoading:k,isFetching:E,error:G}=(0,ee.mg)({page:s,limit:parseInt(o),status:h||void 0,type:g||void 0,phone:w||void 0}),F=e=>{f(e),B()},D=h||g||T,I=null==Z?void 0:Z.pagination,L=I?(I.currentPage-1)*I.limit+1:0,R=I?Math.min(I.currentPage*I.limit,I.totalCount):0;return G?(0,l.jsx)(r.Z,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,children:(0,l.jsxs)(n.Group,{justify:"center",py:"xl",children:[(0,l.jsx)(en.Z,{size:24,color:"red"}),(0,l.jsx)(p.Text,{c:"red",children:"Failed to load messages"})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.Z,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,l.jsx)(r.Z.Section,{bg:"cyan.7",p:"md",mb:"md",children:(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(d.Title,{order:4,c:"white",children:"SMS Message History"}),(0,l.jsx)(N.Z,{color:"white",size:20})]})}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",mb:"md",bg:"gray.0",children:[(0,l.jsxs)(n.Group,{gap:"xs",mb:"xs",children:[(0,l.jsx)(ef.Z,{size:16}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:"Filters"}),D&&(0,l.jsx)(a.A,{size:"sm",variant:"subtle",color:"red",onClick:()=>{j(""),v(""),y(""),i(1)},children:(0,l.jsx)(eM.Z,{size:14})})]}),(0,l.jsxs)(n.Group,{grow:!0,children:[(0,l.jsx)(S.TextInput,{placeholder:"Search by phone...",leftSection:(0,l.jsx)(eC.Z,{size:16}),value:T,onChange:e=>{y(e.target.value),i(1)},size:"sm"}),(0,l.jsx)(b.P,{placeholder:"Filter by status",data:eG,value:h,onChange:e=>{j(e||""),i(1)},clearable:!0,size:"sm"}),(0,l.jsx)(b.P,{placeholder:"Filter by event",data:eF,value:g,onChange:e=>{v(e||""),i(1)},clearable:!0,size:"sm"})]})]}),(0,l.jsxs)(t.Box,{pos:"relative",children:[(0,l.jsx)(eg.f,{visible:k||E,zIndex:1e3,overlayProps:{radius:"sm",blur:2},loaderProps:{size:"md"}}),(0,l.jsx)(ev.i.ScrollContainer,{minWidth:600,children:(0,l.jsxs)(ev.i,{striped:!0,highlightOnHover:!0,children:[(0,l.jsx)(ev.i.Thead,{children:(0,l.jsxs)(ev.i.Tr,{children:[(0,l.jsx)(ev.i.Th,{children:"Phone"}),(0,l.jsx)(ev.i.Th,{children:"Event Type"}),(0,l.jsx)(ev.i.Th,{children:"Status"}),(0,l.jsx)(ev.i.Th,{children:"Language"}),(0,l.jsx)(ev.i.Th,{children:"Chars"}),(0,l.jsx)(ev.i.Th,{children:"Sent At"}),(0,l.jsx)(ev.i.Th,{children:"Actions"})]})}),(0,l.jsx)(ev.i.Tbody,{children:k?Array.from({length:5}).map((e,s)=>(0,l.jsxs)(ev.i.Tr,{children:[(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:100})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:120})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:70})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:30})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:40})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:100})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(eS.O,{height:20,width:30})})]},s)):(null==Z?void 0:Z.messages)&&Z.messages.length>0?Z.messages.map(e=>{var s;return(0,l.jsxs)(ev.i.Tr,{children:[(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(p.Text,{size:"sm",fw:500,children:e.phone})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(m.C,{variant:"light",size:"sm",children:(null===(s=C.A4.find(s=>s.value===e.type))||void 0===s?void 0:s.label)||e.type})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(m.C,{color:eD(e.status),leftSection:eI(e.status),size:"sm",children:e.status})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(m.C,{variant:"outline",size:"xs",color:e.inBengali?"green":"blue",children:e.inBengali?"BN":"EN"})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(p.Text,{size:"sm",children:e.charCount})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(p.Text,{size:"sm",children:e.sentAt?new Date(e.sentAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})}),(0,l.jsx)(ev.i.Td,{children:(0,l.jsx)(V.u,{label:"View Details",children:(0,l.jsx)(a.A,{variant:"light",color:"blue",onClick:()=>F(e),children:(0,l.jsx)(eP.Z,{size:16})})})})]},e.id)}):(0,l.jsx)(ev.i.Tr,{children:(0,l.jsx)(ev.i.Td,{colSpan:7,children:(0,l.jsx)(p.Text,{ta:"center",c:"dimmed",py:"xl",children:"No messages found"})})})})]})})]}),(0,l.jsx)(u.X,{p:"md",withBorder:!0,radius:"md",mt:"md",bg:"gray.0",children:(0,l.jsxs)(n.Group,{justify:"space-between",wrap:"wrap",gap:"md",children:[(0,l.jsxs)(n.Group,{gap:"md",children:[(0,l.jsx)(b.P,{size:"xs",w:130,value:o,onChange:e=>{e&&(c(e),i(1))},data:eE}),I&&I.totalCount>0&&(0,l.jsxs)(p.Text,{size:"sm",c:"dimmed",children:["Showing ",L," - ",R," of ",I.totalCount," messages"]})]}),(0,l.jsxs)(n.Group,{gap:"xs",children:[(0,l.jsx)(V.u,{label:"First page",children:(0,l.jsx)(a.A,{variant:"light",size:"sm",disabled:!I||1===s,onClick:()=>i(1),children:(0,l.jsx)(eB.Z,{size:16})})}),(0,l.jsx)(V.u,{label:"Previous page",children:(0,l.jsx)(a.A,{variant:"light",size:"sm",disabled:!I||!I.hasPrevPage,onClick:()=>i(e=>Math.max(1,e-1)),children:(0,l.jsx)(eA.Z,{size:16})})}),I&&I.totalPages>0&&(0,l.jsx)(eb.t,{total:I.totalPages,value:s,onChange:i,size:"sm",siblings:1,boundaries:1,withControls:!1}),(0,l.jsx)(V.u,{label:"Next page",children:(0,l.jsx)(a.A,{variant:"light",size:"sm",disabled:!I||!I.hasNextPage,onClick:()=>i(e=>{var s;return Math.min((null==Z?void 0:null===(s=Z.pagination)||void 0===s?void 0:s.totalPages)||1,e+1)}),children:(0,l.jsx)(eZ.Z,{size:16})})}),(0,l.jsx)(V.u,{label:"Last page",children:(0,l.jsx)(a.A,{variant:"light",size:"sm",disabled:!I||s===I.totalPages,onClick:()=>{var e;return i((null==Z?void 0:null===(e=Z.pagination)||void 0===e?void 0:e.totalPages)||1)},children:(0,l.jsx)(ek.Z,{size:16})})})]})]})})]}),(0,l.jsx)(eT.u,{opened:P,onClose:A,title:(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(p.Text,{fw:600,children:"Message Details"}),z&&(0,l.jsx)(m.C,{color:eD(z.status),children:z.status})]}),size:"lg",children:z&&(0,l.jsxs)(x.Stack,{gap:"md",children:[(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"gray.0",children:[(0,l.jsx)(p.Text,{size:"sm",c:"dimmed",mb:"xs",children:"Message Content"}),(0,l.jsx)(p.Text,{size:"sm",style:{whiteSpace:"pre-wrap"},children:z.content||"Content not available"})]}),(0,l.jsxs)(ei.M,{cols:2,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Phone"}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:z.phone})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Event Type"}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:(null===(e=C.A4.find(e=>e.value===z.type))||void 0===e?void 0:e.label)||z.type})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Language"}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:z.inBengali?"Bengali":"English"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Character Count"}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:z.charCount})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Created At"}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:new Date(z.createdAt).toLocaleString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",children:"Sent At"}),(0,l.jsx)(p.Text,{size:"sm",fw:500,children:z.sentAt?new Date(z.sentAt).toLocaleString():"-"})]})]}),z.error&&(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"red.0",children:[(0,l.jsx)(p.Text,{size:"xs",c:"red",fw:500,mb:"xs",children:"Error"}),(0,l.jsx)(p.Text,{size:"sm",c:"red",children:z.error})]}),z.deliveryStatus&&(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",bg:"green.0",children:[(0,l.jsx)(p.Text,{size:"xs",c:"green",fw:500,mb:"xs",children:"Delivery Status"}),(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(m.C,{color:"green",children:z.deliveryStatus.delivered?"Delivered":"Not Delivered"}),z.deliveryStatus.deliveredAt&&(0,l.jsxs)(p.Text,{size:"sm",children:["at ",new Date(z.deliveryStatus.deliveredAt).toLocaleString()]})]})]}),z.appointment&&(0,l.jsxs)(u.X,{p:"md",withBorder:!0,radius:"md",children:[(0,l.jsx)(p.Text,{size:"xs",c:"dimmed",fw:500,mb:"xs",children:"Related Appointment"}),(0,l.jsxs)(p.Text,{size:"sm",children:["Doctor: ",z.appointment.doctor.name]})]})]})})]})},eL=i(41363),eR=i(25499),eX=i(31662),e_=i(54244),eO=()=>{var e,s,i,t,a,o,c,h,m,g,v,S;let[b,T]=(0,M.useState)(!1),w=(0,eR.C)(e=>e.auth.diagnostic),C=(0,z.c)({initialValues:{sendSMSForBillCreation:null!==(e=null==w?void 0:w.sendSMSForBillCreation)&&void 0!==e&&e,sendSMSForBillPayment:null!==(s=null==w?void 0:w.sendSMSForBillPayment)&&void 0!==s&&s,sendSMSForIndoorBillPayment:null!==(i=null==w?void 0:w.sendSMSForIndoorBillPayment)&&void 0!==i&&i,sendSMSForLabReportCompletion:null!==(t=null==w?void 0:w.sendSMSForLabReportCompletion)&&void 0!==t&&t,sendSMSForSingleLabReportCompletion:null!==(a=null==w?void 0:w.sendSMSForSingleLabReportCompletion)&&void 0!==a&&a,sendSMSForPatientAdmission:null!==(o=null==w?void 0:w.sendSMSForPatientAdmission)&&void 0!==o&&o,sendSMSForAppointmentReminder:null!==(c=null==w?void 0:w.sendSMSForAppointmentReminder)&&void 0!==c&&c,sendSMSForAbsentEmployee:null!==(h=null==w?void 0:w.sendSMSForAbsentEmployee)&&void 0!==h&&h,sendSMSForSalaryDisbursement:null!==(m=null==w?void 0:w.sendSMSForSalaryDisbursement)&&void 0!==m&&m,sendSMSForSalaryAdvance:null!==(g=null==w?void 0:w.sendSMSForSalaryAdvance)&&void 0!==g&&g,sendSMSForSalaryRevision:null!==(v=null==w?void 0:w.sendSMSForSalaryRevision)&&void 0!==v&&v,sendPCSMS:null!==(S=null==w?void 0:w.sendPCSMS)&&void 0!==S&&S}}),P=async e=>{T(!0);try{await (0,eL.$)(e),f.N9.show({title:"Success",message:"SMS settings saved successfully",color:"green",icon:(0,l.jsx)(G.Z,{size:16})})}catch(e){f.N9.show({title:"Error",message:"Failed to save SMS settings",color:"red"})}finally{T(!1)}};return(0,l.jsxs)("div",{children:[(0,l.jsx)(d.Title,{order:3,children:"SMS Settings"}),(0,l.jsx)(p.Text,{c:"dimmed",mb:"xl",children:"Configure SMS notifications for your hospital"}),(0,l.jsx)("form",{onSubmit:C.onSubmit(P),children:(0,l.jsxs)(r.Z,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,mb:"md",children:[(0,l.jsx)(r.Z.Section,{bg:"blue.7",p:"md",mb:"md",children:(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(d.Title,{order:4,c:"white",children:"SMS Notification Events"}),(0,l.jsx)(eX.Z,{color:"white",size:20})]})}),(0,l.jsxs)(x.Stack,{gap:"lg",children:[(0,l.jsxs)(u.X,{p:"md",withBorder:!0,children:[(0,l.jsx)(d.Title,{order:5,mb:"md",children:"Billing Notifications"}),(0,l.jsxs)(x.Stack,{gap:"md",children:[(0,l.jsx)(j.r,{label:"Send SMS when outpatient bill is created",...C.getInputProps("sendSMSForBillCreation",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS when outpatient bill payment is received",...C.getInputProps("sendSMSForBillPayment",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS when indoor bill payment is received",...C.getInputProps("sendSMSForIndoorBillPayment",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS to PC when their patient receives services",...C.getInputProps("sendPCSMS",{type:"checkbox"})})]})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,children:[(0,l.jsx)(d.Title,{order:5,mb:"md",children:"Clinical Notifications"}),(0,l.jsxs)(x.Stack,{gap:"md",children:[(0,l.jsx)(j.r,{label:"Send SMS when all lab reports are completed",...C.getInputProps("sendSMSForLabReportCompletion",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS when individual lab report is completed",...C.getInputProps("sendSMSForSingleLabReportCompletion",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS when patient is admitted",...C.getInputProps("sendSMSForPatientAdmission",{type:"checkbox"})})]})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,children:[(0,l.jsx)(d.Title,{order:5,mb:"md",children:"Appointment Notifications"}),(0,l.jsx)(x.Stack,{gap:"md",children:(0,l.jsx)(j.r,{label:"Send SMS appointment reminder",...C.getInputProps("sendSMSForAppointmentReminder",{type:"checkbox"})})})]}),(0,l.jsxs)(u.X,{p:"md",withBorder:!0,children:[(0,l.jsx)(d.Title,{order:5,mb:"md",children:"HR Notifications"}),(0,l.jsxs)(x.Stack,{gap:"md",children:[(0,l.jsx)(j.r,{label:"Send SMS when employee is absent",...C.getInputProps("sendSMSForAbsentEmployee",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS for salary disbursement",...C.getInputProps("sendSMSForSalaryDisbursement",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS for salary advance",...C.getInputProps("sendSMSForSalaryAdvance",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send SMS for salary revision",...C.getInputProps("sendSMSForSalaryRevision",{type:"checkbox"})})]})]})]}),(0,l.jsx)(n.Group,{mt:"xl",children:(0,l.jsx)(y.Button,{type:"submit",loading:b,leftSection:(0,l.jsx)(e_.Z,{size:16}),children:"Save Settings"})})]})})]})};let eq=[{value:"{{patient_name}}",label:"Patient Name"},{value:"{{patient_id}}",label:"Patient Id"},{value:"{{doctor_name}}",label:"Doctor Name"},{value:"{{bill_amount}}",label:"Bill Amount"},{value:"{{bill_date_time}}",label:"Bill Date Time"},{value:"{{report_name}}",label:"Report Name"},{value:"{{hospital_name}}",label:"Hospital Name"},{value:"{{room_number}}",label:"Room Number"}],eU=()=>{var e;let{data:s,isLoading:i}=B(),[w]=A(),[P]=Z(),[E]=k(),[H,Q]=(0,M.useState)(!1),[V,W]=(0,M.useState)(null),$=(0,z.c)({initialValues:{name:"",eventType:"",isActive:!0,sendInBengali:!1,englishMessage:"",bengaliMessage:""},validate:{name:e=>0===e.trim().length?"Template name is required":null,eventType:e=>0===e.trim().length?"Event type is required":null,englishMessage:e=>0===e.trim().length?"English message is required":null}}),Y=(e,s)=>{let i=$.values[s]||"";$.setFieldValue(s,i+" "+e)},J=e=>{var s,i;W(e),Q(!0),$.setValues({name:e.name,eventType:e.eventType,isActive:e.isActive,englishMessage:null!==(s=e.englishMessage)&&void 0!==s?s:"",bengaliMessage:null!==(i=e.bengaliMessage)&&void 0!==i?i:""})},ee=(e,s)=>{};return(0,l.jsx)(t.Box,{children:(0,l.jsxs)(r.Z,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,l.jsx)(r.Z.Section,{p:"md",bg:"blue.7",children:(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(d.Title,{order:3,c:"white",children:"SMS Notification Templates"}),(0,l.jsx)(a.A,{variant:"transparent",color:"white",children:(0,l.jsx)(D.Z,{size:22})})]})}),(0,l.jsxs)(o.m,{defaultValue:"dashboard",mt:"md",children:[(0,l.jsxs)(o.m.List,{children:[(0,l.jsx)(o.m.Tab,{value:"dashboard",leftSection:(0,l.jsx)(I.Z,{size:16}),children:"Dashboard"}),(0,l.jsx)(o.m.Tab,{value:"history",leftSection:(0,l.jsx)(N.Z,{size:16}),children:"Messages"}),(0,l.jsx)(o.m.Tab,{value:"analytics",leftSection:(0,l.jsx)(L.Z,{size:16}),children:"Analytics"}),(0,l.jsx)(o.m.Tab,{value:"templates",leftSection:(0,l.jsx)(R.Z,{size:16}),children:"Templates"}),(0,l.jsx)(o.m.Tab,{value:"create",leftSection:(0,l.jsx)(X.Z,{size:16}),children:H?"Edit Template":"Create Template"}),(0,l.jsx)(o.m.Tab,{value:"defaults",leftSection:(0,l.jsx)(D.Z,{size:16}),children:"Default Templates"}),(0,l.jsx)(o.m.Tab,{value:"settings",leftSection:(0,l.jsx)(_.Z,{size:16}),children:"Settings"})]}),(0,l.jsx)(o.m.Panel,{value:"dashboard",pt:"md",children:(0,l.jsx)(ep.default,{})}),(0,l.jsx)(o.m.Panel,{value:"history",pt:"md",children:(0,l.jsx)(eN,{})}),(0,l.jsx)(o.m.Panel,{value:"analytics",pt:"md",children:(0,l.jsx)(ej,{})}),(0,l.jsx)(o.m.Panel,{value:"templates",pt:"md",children:(0,l.jsx)(c.x,{h:400,children:(0,l.jsx)(x.Stack,{gap:"md",children:(null==s?void 0:s.data.length)===0?(0,l.jsxs)(h.b,{icon:(0,l.jsx)(F.Z,{size:16}),title:"No templates found",color:"blue",children:["You haven","'",'t created any SMS templates yet. Go to the "Create Template" tab to add one.']}):null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.map(e=>{var s;return(0,l.jsxs)(u.X,{shadow:"xs",p:"md",withBorder:!0,children:[(0,l.jsxs)(n.Group,{mb:"xs",children:[(0,l.jsxs)(n.Group,{children:[(0,l.jsx)(d.Title,{order:5,children:e.name}),(0,l.jsx)(m.C,{color:e.isActive?"green":"gray",children:e.isActive?"Active":"Inactive"})]}),(0,l.jsxs)(n.Group,{gap:"xs",children:[(0,l.jsx)(j.r,{checked:e.isActive,onChange:s=>ee(e.id,s.currentTarget.checked),size:"md"}),(0,l.jsx)(a.A,{color:"blue",variant:"light",onClick:()=>J(e),children:(0,l.jsx)(O.Z,{size:18})}),(0,l.jsx)(a.A,{color:"red",variant:"light",onClick:()=>E(e.id),children:(0,l.jsx)(q.Z,{size:18})})]})]}),(0,l.jsxs)(p.Text,{size:"sm",color:"dimmed",mb:"xs",children:["Event:"," ",(null===(s=C.A4.find(s=>s.value===e.eventType))||void 0===s?void 0:s.label)||e.eventType]}),(0,l.jsx)(g.Divider,{my:"sm"}),(0,l.jsxs)(o.m,{defaultValue:"english",children:[(0,l.jsxs)(o.m.List,{children:[(0,l.jsx)(o.m.Tab,{value:"english",leftSection:(0,l.jsx)(U.Z,{size:14}),children:"English"}),(0,l.jsx)(o.m.Tab,{value:"bangla",leftSection:(0,l.jsx)(U.Z,{size:14}),children:"Bangla"})]}),(0,l.jsx)(o.m.Panel,{value:"english",pt:"xs",children:(0,l.jsx)(p.Text,{size:"sm",children:e.englishMessage})}),(0,l.jsx)(o.m.Panel,{value:"bangla",pt:"xs",children:(0,l.jsx)(p.Text,{size:"sm",children:e.bengaliMessage||"No Bangla message defined"})})]})]},e.id)})})})}),(0,l.jsx)(o.m.Panel,{value:"create",pt:"md",children:(0,l.jsxs)("form",{onSubmit:$.onSubmit(e=>{try{if(H&&V){console.log("currentTemplate",V);let s=P({...e,id:V.id});if("error"in s)throw Error("Error updating template");f.N9.show({title:"Template Updated",message:"".concat(e.name," has been updated successfully"),color:"green",icon:(0,l.jsx)(G.Z,{size:16})})}else{let s=w(e);if("error"in s)throw Error("Error creating template");f.N9.show({title:"Template Created",message:"".concat(e.name," has been created successfully"),color:"green",icon:(0,l.jsx)(G.Z,{size:16})}),$.reset(),Q(!1),W(null)}}catch(e){f.N9.show({title:"Error",message:"An error occurred while saving the template",color:"red",icon:(0,l.jsx)(F.Z,{size:16})})}}),children:[(0,l.jsxs)(v.Grid,{children:[(0,l.jsx)(v.Grid.Col,{span:8,children:(0,l.jsx)(S.TextInput,{required:!0,label:"Template Name",placeholder:"Enter a descriptive name",...$.getInputProps("name")})}),(0,l.jsx)(v.Grid.Col,{span:4,children:(0,l.jsx)(b.P,{required:!0,label:"Event Type",placeholder:"Select an event",data:C.A4,...$.getInputProps("eventType")})})]}),(0,l.jsxs)(n.Group,{gap:10,children:[(0,l.jsx)(j.r,{label:"Active",mt:"md",...$.getInputProps("isActive",{type:"checkbox"})}),(0,l.jsx)(j.r,{label:"Send in Bangla",mt:"md",...$.getInputProps("sendInBengali",{type:"checkbox"})})]}),(0,l.jsxs)(t.Box,{mt:"lg",children:[(0,l.jsx)(d.Title,{order:5,children:"English Message (Optional)"}),(0,l.jsx)(T.g,{placeholder:"Enter message in English",minRows:3,mt:"xs",...$.getInputProps("englishMessage")}),(0,l.jsxs)(n.Group,{gap:"xs",mt:"xs",children:[(0,l.jsx)(p.Text,{size:"sm",children:"Insert variable:"}),eq.map(e=>(0,l.jsx)(m.C,{style:{cursor:"pointer"},onClick:()=>Y(e.value,"englishMessage"),children:e.label},e.value))]})]}),(0,l.jsxs)(t.Box,{mt:"lg",children:[(0,l.jsx)(d.Title,{order:5,children:"Bangla Message (Optional)"}),(0,l.jsx)(T.g,{placeholder:"Enter message in Bangla",minRows:3,mt:"xs",...$.getInputProps("bengaliMessage")}),(0,l.jsxs)(n.Group,{gap:"xs",mt:"xs",children:[(0,l.jsx)(p.Text,{size:"sm",children:"Insert variable:"}),eq.map(e=>(0,l.jsx)(m.C,{style:{cursor:"pointer"},onClick:()=>Y(e.value,"bengaliMessage"),children:e.label},e.value))]})]}),(0,l.jsxs)(n.Group,{mt:"lg",children:[(0,l.jsx)(y.Button,{variant:"outline",onClick:()=>{$.reset(),Q(!1),W(null)},children:"Cancel"}),(0,l.jsx)(y.Button,{type:"submit",color:"blue",children:H?"Update Template":"Save Template"})]})]})}),(0,l.jsx)(o.m.Panel,{value:"defaults",pt:"md",children:(0,l.jsx)(K,{})}),(0,l.jsx)(o.m.Panel,{value:"settings",pt:"md",children:(0,l.jsx)(eO,{})})]})]})})};var eH=()=>(0,l.jsxs)(w.Container,{size:"lg",p:"md",children:[(0,l.jsx)(d.Title,{order:2,mb:"lg",children:"Hospital SMS Notification System"}),(0,l.jsx)(p.Text,{color:"dimmed",mb:"xl",children:"Configure and manage automated SMS notifications for your patients"}),(0,l.jsx)(eU,{})]})},41363:function(e,s,i){"use strict";i.d(s,{$:function(){return n}});var l=i(72940),t=i(6780),r=i(67732);let n=async e=>{try{let s=await t.default.patch("".concat("http://sasthotech.local:5000/api/v1","/admin/diagnostic"),e,l.y4);return{success:!0,data:s.data.data}}catch(e){if(e instanceof r.d7){var s;return{success:!1,data:null===(s=e.response)||void 0===s?void 0:s.data.message}}return{success:!1,data:"An error occurred"}}}},25499:function(e,s,i){"use strict";i.d(s,{C:function(){return r},T:function(){return t}});var l=i(53502);let t=()=>(0,l.I0)(),r=l.v9}},function(e){e.O(0,[1601,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,1493,7140,9645,5978,8709,7308,8486,419,2431,9341,9175,7402,1744],function(){return e(e.s=2598)}),_N_E=e.O()}]);