(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3133],{62140:function(t,e,o){Promise.resolve().then(o.bind(o,18160))},18160:function(t,e,o){"use strict";o.r(e);var l=o(68328),a=o(11114),n=o(22041),i=o(41224),u=o(76029),d=o(34473),s=o(32451),r=o(68242),m=o(53729),c=o(4505),h=o(12450),g=o(25499),p=o(74559),A=o(13603),v=o(13720),b=o(65971),x=o(41671),y=o(62904),P=o(2422);e.default=()=>{var t,e,o;let[f,C]=(0,c.useState)(1),[w,D]=(0,c.useState)(1),[k,S]=(0,c.useState)(1),[j,T]=(0,c.useState)({bills:[],totalCount:0,dueAmount:0}),[N,V]=(0,c.useState)({patients:[],totalCount:0}),[W,z]=(0,c.useState)(!0),[L,M]=(0,c.useState)(!0),O=(0,g.C)(p.nC),I=(0,g.C)(A.uA),B=(0,g.C)(t=>t.diagnosticSettings.viewId),Z=(0,h.useSearchParams)(),_="receptionist"===O?!Z.get("overall"):void 0,E="admin"===O&&B?B:void 0,{data:U}=(0,P.J)({from:I[0].toISOString(),to:I[1].toISOString()}),R=(null==U?void 0:null===(t=U.data)||void 0===t?void 0:t.outdoorDueAmount)||0,q=(null==U?void 0:null===(e=U.data)||void 0===e?void 0:e.indoorDueAmount)||0,G=(null==U?void 0:null===(o=U.data)||void 0===o?void 0:o.opdDueAmount)||0;(0,c.useEffect)(()=>{z(!0),(0,v.Q)({from:I[0],to:I[1],page:f,limit:5,isOwn:_||!1,userId:E,filterData:{isPaid:!1}}).then(t=>{let{success:e,data:o}=t;if(e&&"string"!=typeof o){let t=o.items.bills||[],e=t.reduce((t,e)=>t+(e.totalAmountWithDiscount-e.paidAmount),0);T({bills:t,totalCount:o.items.totalCount||0,dueAmount:e})}z(!1)})},[I,f,_,E]),(0,c.useEffect)(()=>{M(!0),(0,b.q)({from:I[0],to:I[1],page:1,limit:1e3,isOwn:_,userId:E,isPaid:!1}).then(t=>{let{success:e,data:o}=t;e&&"string"!=typeof o&&V({patients:o.items.hospitalPatients||[],totalCount:o.items.totalCount||0}),M(!1)})},[I,_,E]);let H=(0,c.useMemo)(()=>{let t=N.patients.filter(t=>"Day Patient"===t.status),e=t.reduce((t,e)=>t+(e.totalAmountWithDiscount-e.paidAmount),0);return{patients:t,totalCount:t.length,dueAmount:e}},[N]),J=(0,c.useMemo)(()=>{let t=N.patients.filter(t=>"Admitted"===t.status),e=t.reduce((t,e)=>t+(e.totalAmountWithDiscount-e.paidAmount),0);return{patients:t,totalCount:t.length,dueAmount:e}},[N]),Q=(0,c.useCallback)(t=>{C(t)},[]),F=(0,c.useCallback)(t=>{D(t)},[]),K=(0,c.useCallback)(t=>{S(t)},[]),X=(0,c.useMemo)(()=>[{key:"name",label:"Patient Name",width:180,getValue:t=>(null==t?void 0:t.name)||"N/A"},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"paidAmount",label:"Paid Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"dueAmount",label:"Due Amount",width:120,getValue:t=>"৳".concat(((null==t?void 0:t.totalAmountWithDiscount)||0)-((null==t?void 0:t.paidAmount)||0)),textProps:{fw:600,c:"red"}},{key:"status",label:"Status",width:100,render:t=>(0,l.jsx)(a.C,{color:"red",size:"sm",children:"Due"})},{key:"label",label:"Updated History",width:140,render:t=>{let e=null==t?void 0:t.updateInfo,o=null==t?void 0:t.hasAnyInRangeUpdate;if(!e||e.length<=1)return(0,l.jsx)(n.Text,{size:"sm",c:"dimmed",children:"No updates"});let d=(0,l.jsxs)(i.Stack,{gap:4,children:[(0,l.jsx)(n.Text,{size:"xs",fw:600,children:"Updates Within Range:"}),e.map((t,e)=>(0,l.jsxs)(n.Text,{size:"xs",children:[new Date(t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(t.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]},e))]});return(0,l.jsx)(u.u,{label:d,multiline:!0,children:(0,l.jsxs)(a.C,{color:o?"blue":"gray",size:"sm",variant:"light",children:[e.length," Updates"]})})}}],[]),Y=(0,c.useMemo)(()=>[{key:"name",label:"Patient Name",width:150,getValue:t=>{var e;return(null==t?void 0:null===(e=t.patient)||void 0===e?void 0:e.name)||"N/A"}},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"paidAmount",label:"Paid Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"dueAmount",label:"Due Amount",width:120,getValue:t=>"৳".concat(((null==t?void 0:t.totalAmountWithDiscount)||0)-((null==t?void 0:t.paidAmount)||0)),textProps:{fw:600,c:"red"}},{key:"status",label:"Status",width:100,render:t=>(0,l.jsx)(a.C,{color:"blue",size:"sm",children:(null==t?void 0:t.status)||"Day Patient"})}],[]),$=(0,c.useMemo)(()=>[{key:"name",label:"Patient Name",width:150,getValue:t=>{var e;return(null==t?void 0:null===(e=t.patient)||void 0===e?void 0:e.name)||"N/A"}},{key:"totalAmount",label:"Total Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.totalAmountWithDiscount)||0)},{key:"paidAmount",label:"Paid Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"dueAmount",label:"Due Amount",width:120,getValue:t=>"৳".concat(((null==t?void 0:t.totalAmountWithDiscount)||0)-((null==t?void 0:t.paidAmount)||0)),textProps:{fw:600,c:"red"}},{key:"paidToday",label:"Paid Today",width:100,getValue:t=>"৳".concat((null==t?void 0:t.paidInAmount)||0),textProps:{fw:600,c:"blue"}},{key:"status",label:"Status",width:100,render:t=>(0,l.jsx)(a.C,{color:"yellow",size:"sm",children:(null==t?void 0:t.status)||"Admitted"})}],[]);return(0,l.jsxs)(d.Container,{size:"xl",px:"md",children:[(0,l.jsx)(i.Stack,{gap:"lg",children:(0,l.jsxs)(s.Box,{p:"lg",children:[(0,l.jsx)(r.Title,{order:2,mb:(0,m.h)(4),children:"Due Summary"}),(0,l.jsx)(n.Text,{size:"sm",c:"dimmed",children:"Summary of all unpaid bills"})]})}),(0,l.jsxs)(s.Box,{p:"md",children:[(0,l.jsx)(x.Z,{title:"Outdoor Bill Due",data:j.bills,columns:X,totalAmount:R,totalAmountLabel:"Total Due",totalCount:j.totalCount,isLoading:W,currentPage:f,onPageChange:Q,itemsPerPage:5,emptyMessage:"No outdoor due bills found",renderCard:(t,e)=>(0,l.jsx)(y.Z,{item:t,type:"outdoor"},t.id||e)}),(0,l.jsx)(x.Z,{title:"OPD Bill Due",data:H.patients.slice((w-1)*5,5*w),columns:Y,totalAmount:G,totalAmountLabel:"Total Due",totalCount:H.totalCount,isLoading:L,currentPage:w,onPageChange:F,itemsPerPage:5,emptyMessage:"No OPD due bills found",renderCard:(t,e)=>(0,l.jsx)(y.Z,{item:t,type:"opd"},t.id||e)}),(0,l.jsx)(x.Z,{title:"Indoor Bill Due",data:J.patients.slice((k-1)*5,5*k),columns:$,totalAmount:q,totalAmountLabel:"Total Due",totalCount:J.totalCount,isLoading:L,currentPage:k,onPageChange:K,itemsPerPage:5,emptyMessage:"No indoor due bills found",renderCard:(t,e)=>(0,l.jsx)(y.Z,{item:t,type:"indoor"},t.id||e)})]})]})}}},function(t){t.O(0,[1601,3069,6945,3852,4670,9258,966,6029,7140,2389,6258,8278,9175,7402,1744],function(){return t(t.s=62140)}),_N_E=t.O()}]);