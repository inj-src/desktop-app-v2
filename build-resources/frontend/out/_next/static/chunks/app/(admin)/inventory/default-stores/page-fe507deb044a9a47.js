(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3049],{90078:function(e,t,n){Promise.resolve().then(n.bind(n,15908))},15908:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(68328),a=n(4505),o=n(34473),s=n(41224),i=n(68242),d=n(22041),l=n(89043),u=n(77379),c=n(36409),y=n(14587),m=n(46373),v=n(22614),h=n(31204),g=n(13916),f=n(54481),p=n(12697),T=n(9654),x=n(52387),j=n(31151);let q=[{value:"INDOOR",label:"Indoor Bills"},{value:"OUTDOOR",label:"Outdoor Bills"},{value:"APPOINTMENT",label:"Appointment Bills"}];function b(){let[e,t]=(0,a.useState)("INDOOR"),{data:n,isLoading:b}=(0,x.gZ)(),{data:E,isLoading:P}=(0,x.WY)({}),[S,{isLoading:w}]=(0,x.ap)(),[I,{isLoading:k}]=(0,x._r)(),D=null==n?void 0:n.data,R=(null==E?void 0:E.data)||[],G=(null==D?void 0:D.groupedByBillType[e])||[],A=G.map(e=>e.storeId),O=R.filter(e=>!A.includes(e.id)&&e.isActive),z=async t=>{try{await S({storeId:t,billType:e}).unwrap(),j.toast.success("Default store added successfully")}catch(e){var n;j.toast.error((null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to add default store")}},C=async t=>{try{await I({storeId:t,billType:e}).unwrap(),j.toast.success("Default store removed successfully")}catch(e){var n;j.toast.error((null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to remove default store")}},B=b||P,L=w||k;return(0,r.jsx)(o.Container,{size:"xl",py:"xl",children:(0,r.jsxs)(s.Stack,{gap:"lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Title,{order:2,children:"Default Inventory Stores"}),(0,r.jsx)(d.Text,{c:"dimmed",mt:"xs",children:"Configure which inventory stores are automatically selected for each bill type"})]}),(0,r.jsxs)(l.X,{withBorder:!0,p:"md",children:[(0,r.jsx)(d.Text,{fw:500,mb:"sm",children:"Select Bill Type"}),(0,r.jsx)(u.s,{fullWidth:!0,value:e,onChange:e=>t(e),data:q.map(e=>({value:e.value,label:e.label}))})]}),B&&(0,r.jsx)(c.M,{py:"xl",children:(0,r.jsx)(y.Loader,{size:"lg"})}),!B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.b,{icon:(0,r.jsx)(g.Z,{size:16}),color:"blue",children:[(0,r.jsxs)(d.Text,{size:"sm",fw:500,children:[G.length," store(s) configured for ",e," bills"]}),0===G.length&&(0,r.jsx)(d.Text,{size:"xs",c:"dimmed",mt:4,children:"Add stores from the list below to auto-select them when creating bills"})]}),(0,r.jsxs)(l.X,{withBorder:!0,p:"md",children:[(0,r.jsx)(v.Group,{justify:"space-between",mb:"md",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Text,{fw:600,size:"lg",children:"Current Default Stores"}),(0,r.jsxs)(d.Text,{size:"sm",c:"dimmed",children:["These stores will be automatically selected for ",e," bills"]})]})}),0===G.length?(0,r.jsxs)(m.b,{icon:(0,r.jsx)(f.Z,{size:16}),color:"gray",variant:"light",children:[(0,r.jsxs)(d.Text,{size:"sm",children:["No default stores configured for ",e," bills"]}),(0,r.jsx)(d.Text,{size:"xs",c:"dimmed",mt:4,children:'Add stores from the "Available Stores" section below'})]}):(0,r.jsx)(s.Stack,{gap:"xs",children:G.map(e=>(0,r.jsx)(l.X,{withBorder:!0,p:"md",radius:"md",children:(0,r.jsxs)(v.Group,{justify:"space-between",children:[(0,r.jsx)(v.Group,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Text,{fw:500,children:e.store.name}),(0,r.jsx)(v.Group,{gap:"xs",mt:4,children:e.store.location&&(0,r.jsx)(d.Text,{size:"xs",c:"dimmed",children:e.store.location})})]})}),(0,r.jsx)(h.Button,{leftSection:(0,r.jsx)(p.Z,{size:16}),color:"red",variant:"light",size:"sm",onClick:()=>C(e.storeId),disabled:L,loading:k,children:"Remove"})]})},e.id))})]}),(0,r.jsxs)(l.X,{withBorder:!0,p:"md",children:[(0,r.jsx)(v.Group,{justify:"space-between",mb:"md",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Text,{fw:600,size:"lg",children:"Available Stores"}),(0,r.jsxs)(d.Text,{size:"sm",c:"dimmed",children:['Click "Add" to set a store as default for ',e," bills"]})]})}),0===O.length?(0,r.jsx)(m.b,{icon:(0,r.jsx)(g.Z,{size:16}),color:"gray",variant:"light",children:(0,r.jsx)(d.Text,{size:"sm",children:0===R.length?"No stores available. Please create stores first.":"All active stores are already configured as defaults"})}):(0,r.jsx)(s.Stack,{gap:"xs",children:O.map(e=>(0,r.jsx)(l.X,{withBorder:!0,p:"md",radius:"md",children:(0,r.jsxs)(v.Group,{justify:"space-between",children:[(0,r.jsx)(v.Group,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Text,{fw:500,children:e.name}),(0,r.jsx)(v.Group,{gap:"xs",mt:4,children:e.location&&(0,r.jsx)(d.Text,{size:"xs",c:"dimmed",children:e.location})})]})}),(0,r.jsx)(h.Button,{leftSection:(0,r.jsx)(T.Z,{size:16}),color:"green",variant:"light",size:"sm",onClick:()=>z(e.id),disabled:L,loading:w,children:"Add"})]})},e.id))})]})]})]})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return a},Hn:function(){return r},y4:function(){return o}});let r={headers:{"Content-Type":"application/json"}},a={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},52387:function(e,t,n){"use strict";n.d(t,{Cf:function(){return z},DD:function(){return O},OB:function(){return I},OE:function(){return i},WK:function(){return y},WY:function(){return r},Xz:function(){return g},Yd:function(){return G},_r:function(){return _},a:function(){return D},aB:function(){return w},aS:function(){return k},ap:function(){return U},bM:function(){return m},bg:function(){return u},fF:function(){return f},fp:function(){return p},fv:function(){return h},gZ:function(){return L},j6:function(){return o},lg:function(){return A},mS:function(){return v},sv:function(){return B},vR:function(){return R},zQ:function(){return C}});let{useGetAllStoresQuery:r,useGetStoreQuery:a,useCreateStoreMutation:o,useUpdateStoreMutation:s,useDeleteStoreMutation:i,useGetAllStoreTagsQuery:d,useGetStoreTagQuery:l,useCreateStoreTagMutation:u,useDeleteStoreTagMutation:c,useGetAllInventoryItemsQuery:y,useGetInventoryItemQuery:m,useCreateInventoryItemMutation:v,useUpdateInventoryItemMutation:h,useDeleteInventoryItemMutation:g,useDeductStockMutation:f,useAddStockMutation:p,useGetAllInventoryPackagesQuery:T,useGetInventoryPackageQuery:x,useCreateInventoryPackageMutation:j,useUpdateInventoryPackageMutation:q,useDeleteInventoryPackageMutation:b,useAddItemToPackageMutation:E,useUpdatePackageItemMutation:P,useRemoveItemFromPackageMutation:S,useGetDeductionPoliciesQuery:w,useCreateDeductionPolicyMutation:I,useUpdateDeductionPolicyMutation:k,useDeleteDeductionPolicyMutation:D,useGetDashboardSummaryQuery:R,useGetStockTrendsQuery:G,useGetCriticalAlertsQuery:A,useGetTransactionLogsQuery:O,useGetBatchesQuery:z,useGetUsersQuery:C,useGetGroupedTransactionsQuery:B,useGetDefaultStoresQuery:L,useAddDefaultStoreMutation:U,useSetDefaultStoresMutation:N,useDeleteDefaultStoreMutation:_}=n(78101).g.injectEndpoints({endpoints:e=>({getAllStores:e.query({query:()=>({url:"/store",method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStore:e.query({query:e=>({url:"/store/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createStore:e.mutation({query:e=>({url:"/store",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateStore:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/store/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteStore:e.mutation({query:e=>({url:"/store/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),getAllStoreTags:e.query({query:()=>({url:"/storeTag",method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStoreTag:e.query({query:e=>({url:"/storeTag/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createStoreTag:e.mutation({query:e=>({url:"/storeTag",method:"POST",body:e}),invalidatesTags:["inventory"]}),deleteStoreTag:e.mutation({query:e=>({url:"/storeTag/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),getAllInventoryItems:e.query({query:e=>({url:"/inventoryItem",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data,pagination:e.pagination})}),getInventoryItem:e.query({query:e=>({url:"/inventoryItem/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createInventoryItem:e.mutation({query:e=>({url:"/inventoryItem",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateInventoryItem:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/inventoryItem/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteInventoryItem:e.mutation({query:e=>({url:"/inventoryItem/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),deductStock:e.mutation({query:e=>({url:"/inventoryItem/deduct-stock",method:"POST",body:e}),invalidatesTags:["inventory"]}),addStock:e.mutation({query:e=>({url:"/inventoryItem/add-stock",method:"POST",body:e}),invalidatesTags:["inventory"]}),getAllInventoryPackages:e.query({query:e=>({url:"/inventoryPackage",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data,pagination:e.pagination})}),getInventoryPackage:e.query({query:e=>({url:"/inventoryPackage/".concat(e),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createInventoryPackage:e.mutation({query:e=>({url:"/inventoryPackage",method:"POST",body:e}),invalidatesTags:["inventory"]}),updateInventoryPackage:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/inventoryPackage/".concat(t),method:"PUT",body:n}},invalidatesTags:["inventory"]}),deleteInventoryPackage:e.mutation({query:e=>({url:"/inventoryPackage/".concat(e),method:"DELETE"}),invalidatesTags:["inventory"]}),addItemToPackage:e.mutation({query:e=>{let{packageId:t,...n}=e;return{url:"/inventoryPackage/".concat(t,"/items"),method:"POST",body:n}},invalidatesTags:["inventory"]}),updatePackageItem:e.mutation({query:e=>{let{packageId:t,itemId:n,...r}=e;return{url:"/inventoryPackage/".concat(t,"/items/").concat(n),method:"PUT",body:r}},invalidatesTags:["inventory"]}),removeItemFromPackage:e.mutation({query:e=>{let{packageId:t,itemId:n}=e;return{url:"/inventoryPackage/".concat(t,"/items/").concat(n),method:"DELETE"}},invalidatesTags:["inventory"]}),getDeductionPolicies:e.query({query:e=>({url:"/inventoryItem/".concat(e,"/deduction-policy"),method:"GET"}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),createDeductionPolicy:e.mutation({query:e=>{let{itemId:t,...n}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy"),method:"POST",body:n}},invalidatesTags:["inventory"]}),updateDeductionPolicy:e.mutation({query:e=>{let{itemId:t,policyId:n,...r}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy/").concat(n),method:"PATCH",body:r}},invalidatesTags:["inventory"]}),deleteDeductionPolicy:e.mutation({query:e=>{let{itemId:t,policyId:n}=e;return{url:"/inventoryItem/".concat(t,"/deduction-policy/").concat(n),method:"DELETE"}},invalidatesTags:["inventory"]}),getDashboardSummary:e.query({query:e=>({url:"/inventory/dashboard/summary",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getStockTrends:e.query({query:e=>({url:"/inventory/dashboard/trends",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getCriticalAlerts:e.query({query:e=>({url:"/inventory/dashboard/critical-alerts",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getTransactionLogs:e.query({query:e=>({url:"/inventory/transactions",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getBatches:e.query({query:e=>({url:"/inventory/batches",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getUsers:e.query({query:()=>({url:"/admin/user",method:"GET"}),transformResponse:e=>({data:e.data})}),getGroupedTransactions:e.query({query:e=>({url:"/inventory/transactions/grouped",method:"GET",params:e}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),getDefaultStores:e.query({query:e=>({url:"/inventory/default-stores",method:"GET",params:e?{billType:e}:void 0}),providesTags:["inventory"],transformResponse:e=>({data:e.data})}),addDefaultStore:e.mutation({query:e=>({url:"/inventory/default-stores",method:"POST",body:e}),invalidatesTags:["inventory"]}),setDefaultStores:e.mutation({query:e=>({url:"/inventory/default-stores",method:"PUT",body:e}),invalidatesTags:["inventory"]}),deleteDefaultStore:e.mutation({query:e=>({url:"/inventory/default-stores",method:"DELETE",body:e}),invalidatesTags:["inventory"]})})})},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(49854),a=n(68240),o=n(94183),s=n(28317);let i=(0,a.LC)({baseQuery:(0,o.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let a="string"==typeof e?e:e.url;return a.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,s.t8)(a,await n.clone().json().catch(()=>null),(0,r.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,s.U2)(n,(0,r.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,t,n){"use strict";let r;n.d(t,{d:function(){return l},x:function(){return d}});var a=n(72940),o=n(6780),s=n(67732),i=n(28317);function d(){return r||(r=(0,i.MT)("cached-responses-store","cached-responses")),r}async function l(e,t){try{let n=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...a.FD});return await (0,i.t8)(e,n.data,d()),n.data}catch(t){if(t instanceof s.d7&&[s.d7.ERR_NETWORK,s.d7.ETIMEDOUT].includes(t.code)){let t=await (0,i.U2)(e,d());if(t)return t}throw t instanceof s.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[3069,6945,3852,1656,9258,966,7125,4698,9175,7402,1744],function(){return e(e.s=90078)}),_N_E=e.O()}]);