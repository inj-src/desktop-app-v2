(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3502,1054],{91054:function(){},7255:function(e,t,n){Promise.resolve().then(n.bind(n,95335))},95335:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var i=n(68328),o=n(73031),a=n(69667),l=n(35689),r=n(15139),s=n(65971),d=n(74559),c=n(13603),u=n(25499),f=n(84944),m=n(32451),h=n(22614),p=n(68242),v=n(31204),g=n(89043),x=n(54632),y=n(22975),b=n(58185),j=n(12450),w=n(4505),S=n(46557),T=n(65850),C=n(1860),D=n.n(C),P=n(26809),z=n(62549),B=n(25985),A=n(97698),k=n(84153),N=n(86431),I=n(71149),R=e=>{let{data:t,dates:n}=e;T.Zx.register({family:"Roboto",fonts:[{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc9.ttf",fontWeight:900},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf",fontWeight:400},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc9.ttf",fontWeight:700}]}),T.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let o=(0,u.C)(e=>e.auth.diagnostic),a=(0,I.q)(),l=(0,u.C)(e=>e.diagnosticSettings),r={name:(null==o?void 0:o.name)||"",address:(null==o?void 0:o.address)||"",phone1:(null==o?void 0:o.phone1)||"",phone2:(null==o?void 0:o.phone2)||"",division:(null==o?void 0:o.division)||"",logo:(null==o?void 0:o.logo)||"",id:(null==o?void 0:o.id)||"",city:(null==o?void 0:o.city)||"",paymentDate:(null==o?void 0:o.paymentDate)||"",admin:(null==o?void 0:o.admin)||""},s=(0,u.C)(e=>e.auth.user),d=null==s?void 0:s.name,c=T.mM.create({page:{flexDirection:"column",backgroundColor:"#f8fafc",padding:20},section:{width:"100%",marginBottom:15},summarySection:{marginTop:30,marginBottom:20,backgroundColor:"#ffffff",borderRadius:8,padding:15,border:"1px solid #e2e8f0"},summaryRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:8,borderBottom:"1px solid #e2e8f0"},summaryLabel:{fontSize:12,fontFamily:"Roboto",fontWeight:400,color:"#4a5568"},summaryValue:{fontSize:12,fontFamily:"Roboto",fontWeight:700,color:"#1e40af"},table:{display:"flex",width:"100%",borderStyle:"solid",borderWidth:1,borderColor:"#e2e8f0",borderRadius:8,overflow:"hidden",backgroundColor:"#ffffff"},tableRow:{flexDirection:"row",borderBottomColor:"#e2e8f0",borderBottomWidth:1,minHeight:35},tableHeader:{backgroundColor:"#1e40af",fontFamily:"Roboto",fontWeight:900},tableCell:{flex:1,padding:8,borderRightWidth:1,borderRightColor:"#e2e8f0",justifyContent:"center"},headerCell:{fontSize:11,fontWeight:900,color:"#ffffff"},cellText:{fontSize:10,textAlign:"left",color:"#374151"},title:{fontSize:14,marginBottom:12,marginTop:10,fontFamily:"Roboto",fontWeight:900,color:"#1e3a8a",paddingLeft:5},textBold:{fontFamily:"Roboto",fontWeight:900,fontSize:12,color:"#374151"},totalRow:{backgroundColor:"#f1f5f9"},totalText:{fontFamily:"Roboto",fontWeight:900,fontSize:10,color:"#1e3a8a"},footerContainer:{position:"absolute",bottom:10,left:0,right:0,width:"100%",borderTop:"1px solid #e2e8f0",paddingTop:5,backgroundColor:"#f8fafc"},footerContent:{display:"flex",paddingHorizontal:15,flexDirection:"row",justifyContent:"space-between"},footerText:{fontSize:8,color:"#6b7280"},card:{backgroundColor:"#ffffff",borderRadius:8,marginBottom:15,border:"1px solid #e2e8f0"}}),f=t.reduce((e,t)=>{var n;return e+(null!==(n=t.paidAmount)&&void 0!==n?n:0)},0),m=()=>{let e={title:"Day Patients",headers:["Sl.","Bill ID","Patient Name (P.ID)","Date","User","Status","Paid Amount"],rows:t.map((e,t)=>{var n,i,o,a,l;return[(t+1).toString(),e.billId,(null!==(a=null===(n=e.patient)||void 0===n?void 0:n.name)&&void 0!==a?a:"")+" ("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")",D()(e.createdAt).format("DD-MM-YYYY"),(null===(o=e.user)||void 0===o?void 0:o.name)||"",e.status||"",(null!==(l=e.paidAmount)&&void 0!==l?l:0).toString()]})},o=(n=>{let i=Array(e.headers.length).fill("");return i[0]="Total",i[1]=t.length.toString()+" patients",i[6]=f.toFixed(2),i})(e.rows);return(0,i.jsx)(T.BB,{children:(0,i.jsxs)(T.T3,{size:"A4",style:c.page,children:[a&&(0,i.jsx)(B.Z,{diagnosticState:r,pageSize:"A4"}),(0,i.jsx)(z.default,{diagnosticState:r}),(0,i.jsx)(P.Z,{small:!1,dates:{dates:n},userName:null!=d?d:""}),(0,i.jsx)(N.Z,{diagnosticSettings:l}),(0,i.jsxs)(T.G7,{style:[c.section,c.card],children:[(0,i.jsx)(T.xv,{style:c.title,children:e.title}),(0,i.jsxs)(T.G7,{style:c.table,children:[(0,i.jsx)(T.G7,{style:[c.tableRow,c.tableHeader],children:e.headers.map((e,t)=>(0,i.jsx)(T.G7,{style:c.tableCell,children:(0,i.jsx)(T.xv,{style:[c.headerCell],children:e})},"header-".concat(t)))}),e.rows.length>0?(0,i.jsxs)(i.Fragment,{children:[e.rows.map((e,t)=>(0,i.jsx)(T.G7,{style:[c.tableRow,t%2==1?{backgroundColor:"#f8fafc"}:{}],wrap:!1,children:e.map((e,n)=>(0,i.jsx)(T.G7,{style:c.tableCell,children:(0,i.jsx)(T.xv,{style:c.cellText,children:e||""})},"cell-".concat(t,"-").concat(n)))},"row-".concat(t))),(0,i.jsx)(T.G7,{style:[c.tableRow,c.totalRow],wrap:!1,children:o.map((e,t)=>(0,i.jsx)(T.G7,{style:c.tableCell,children:(0,i.jsx)(T.xv,{style:[c.cellText,c.totalText],children:e})},"total-".concat(t)))})]}):(0,i.jsx)(T.G7,{style:c.tableRow,children:(0,i.jsx)(T.G7,{style:c.tableCell,children:(0,i.jsx)(T.xv,{style:[c.cellText,c.textBold],children:"No data available"})})})]})]}),(0,i.jsxs)(T.G7,{style:c.summarySection,children:[(0,i.jsxs)(T.G7,{style:c.summaryRow,children:[(0,i.jsx)(T.xv,{style:c.summaryLabel,children:"Total Day Patients"}),(0,i.jsx)(T.xv,{style:c.summaryValue,children:t.length})]}),(0,i.jsxs)(T.G7,{style:[c.summaryRow,{borderBottom:"none"}],children:[(0,i.jsx)(T.xv,{style:c.summaryLabel,children:"Total Paid Amount"}),(0,i.jsx)(T.xv,{style:c.summaryValue,children:f.toFixed(2)})]})]}),(0,i.jsx)(T.G7,{fixed:!0,style:c.footerContainer,children:(0,i.jsxs)(T.G7,{style:c.footerContent,children:[(0,i.jsx)(T.xv,{style:c.footerText,render:e=>{let{pageNumber:t,totalPages:n}=e;return"Page ".concat(t," of ").concat(n)}}),(0,i.jsx)(T.xv,{style:c.footerText,children:"Powered By Sasthotech"}),(0,i.jsx)(T.xv,{style:c.footerText,children:(0,A.Z)(new Date,"dd-MMM-yyyy hh:mm a")})]})})]})})};return(0,i.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,i.jsx)(k.Z,{PDFTemplate:()=>(0,i.jsx)(m,{})})})};function F(){var e,t;let n=(0,u.C)(d.nC),T=(0,u.C)(c.uA),C=(0,j.useSearchParams)(),{columnSettings:D,getVisibleColumns:P,columnAccessors:z}=(0,f.yV)(),[B,A]=(0,w.useState)(null),[k,{open:N,close:I}]=(0,S.q)(!1),F=(0,w.useMemo)(()=>P(["billId","patientName","bed","dateTime","user","status","totalPaid"]),[D,P]);return(0,w.useEffect)(()=>{(async()=>{var e,t;let{success:i,data:o}=await (0,s.q)({from:T[0],to:T[1],isOwn:"receptionist"===n?!C.get("overall"):void 0,limit:Number.parseInt(null!==(e=C.get("limit"))&&void 0!==e?e:"")||25,page:Number.parseInt(null!==(t=C.get("page"))&&void 0!==t?t:"")||1,status:"Day Patient"});i?A(o):console.error(o)})()},[C,T,n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Box,{className:"p-3 bg-light p-md-5",children:[(0,i.jsxs)(h.Group,{children:[(0,i.jsx)(r.P,{fz:36,p:6,className:"bg-dark text-white rounded-circle"}),(0,i.jsx)(p.Title,{mr:"auto",children:"Day Patients"}),(0,i.jsxs)(h.Group,{gap:"xs",children:[(0,i.jsx)(l.i,{}),(0,i.jsx)(v.Button,{size:"md",radius:"md",leftSection:(0,i.jsx)(b.Z,{}),onClick:N,children:"Print"})]})]}),(0,i.jsx)(a.W,{mt:"lg"}),(0,i.jsxs)(g.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mt:"md",children:[(0,i.jsx)(x.i.ScrollContainer,{minWidth:767,children:(0,i.jsxs)(x.i,{children:[(0,i.jsx)(x.i.Thead,{children:(0,i.jsx)(x.i.Tr,{children:F.map(e=>(0,i.jsx)(x.i.Th,{children:e.label},e.id))})}),(0,i.jsx)(x.i.Tbody,{children:null==B?void 0:null===(e=B.items.hospitalPatients)||void 0===e?void 0:e.map((e,t)=>(0,i.jsx)(x.i.Tr,{children:F.map(t=>(0,i.jsx)(x.i.Td,{children:z[t.id](e)},"".concat(e.billId,"-").concat(t.id)))},t))})]})}),(0,i.jsx)(o.Z,{totalPages:null!==(t=null==B?void 0:B.totalPage)&&void 0!==t?t:1})]})]}),(0,i.jsx)(y.u,{opened:k,onClose:I,size:"100%",title:"Day Patients Report",padding:"md",children:(null==B?void 0:B.items.hospitalPatients)&&(0,i.jsx)(R,{data:B.items.hospitalPatients,dates:[T[0],T[1]]})})]})}},71149:function(e,t,n){"use strict";n.d(t,{AN:function(){return c},HG:function(){return r},J7:function(){return a},UA:function(){return d},dB:function(){return f},ev:function(){return l},q:function(){return u},tK:function(){return s}});var i=n(62471),o=n(4505);let a=["A4 portrait","A5 portrait","A4 landscape"],l=[["outdoor-bill","A5 portrait",60],["indoor-bill","A4 portrait",60,void 0,120],["indoor-admission-form","A4 portrait",90,"isHospitalManagement",120],["outdoor-summary","A4 portrait",90],["indoor-summary","A4 portrait",90,"isHospitalManagement"],["receptionist-summary","A4 portrait",90],["pc-payment","A5 portrait",60]];function r(e){let t=(0,o.useMemo)(()=>l.find(t=>t[0]===e),[e]),[n]=(0,i.I)({key:"".concat(e,"-print-page-size"),defaultValue:null==t?void 0:t[1]}),[a]=(0,i.I)({key:"".concat(e,"-print-page-scale"),defaultValue:null==t?void 0:t[2]});return"\n    @page { size: ".concat(n,";margin:10px 0px; }\n    :root { --mantine-scale: ").concat(+a/100,"; }\n    .fs-1{font-size:calc(var(--mantine-scale) * calc(1.375rem + 1.5vw))!important}\n    .fs-2{font-size:calc(var(--mantine-scale) * calc(1.325rem + .9vw))!important}\n    .fs-3{font-size:calc(var(--mantine-scale) * calc(1.3rem + .6vw))!important}\n    .fs-4{font-size:calc(var(--mantine-scale) * calc(1.275rem + .3vw))!important}\n    .fs-5{font-size:calc(var(--mantine-scale) * 1.25rem)!important}\n    .fs-6{font-size:calc(var(--mantine-scale) * 1rem)!important}")}function s(e){var t,n,a;let r=(0,o.useMemo)(()=>l.find(t=>t[0]===e),[e]),[s]=(0,i.I)({key:"".concat(e,"-print-page-height"),defaultValue:null!==(n=null==r?void 0:null===(t=r[4])||void 0===t?void 0:t.toString())&&void 0!==n?n:""});return s?+s:null!==(a=null==r?void 0:r[4])&&void 0!==a?a:100}function d(){let[e]=(0,i.I)({key:"selected-admission-template-id",defaultValue:"1"});return e?+e:1}function c(){let[e]=(0,i.I)({key:"selected-bill-template-id",defaultValue:"1"});return e?+e:1}function u(){let[e]=(0,i.I)({key:"print-watermark-enabled",defaultValue:"true"});return"true"===e}function f(){let[e]=(0,i.I)({key:"selected-appointment-token-template-id",defaultValue:"2"});return e?+e:2}},73031:function(e,t,n){"use strict";var i=n(68328),o=n(22614),a=n(7140),l=n(87967),r=n(62471),s=n(12450),d=n(4505);t.Z=e=>{let{totalPages:t,extraRoute:n,defaultLimit:c=25}=e,u=(0,s.useSearchParams)(),f=(0,s.useRouter)(),[m,h]=(0,r.I)({key:"pagination-limit",defaultValue:"25"}),p=u.get("limit")||m||c.toString(),v=u.get("page")||"1";return(0,d.useEffect)(()=>{if(!u.get("limit")&&m){let e=new URLSearchParams(Array.from(u.entries()));e.set("limit",m),e.set("page",v),f.replace("?".concat(e.toString()).concat(n||""))}},[]),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsxs)(o.Group,{justify:"space-between",children:[(0,i.jsx)(a.t,{value:parseInt(v),onChange:e=>{let t=new URLSearchParams(Array.from(u.entries()));t.set("limit",p),t.set("page",e.toString()),f.push("?".concat(t.toString()).concat(n||""))},total:t}),(0,i.jsx)(l.P,{label:"Select Limit",data:["25","50","75","100","200","500","1000","2000"],value:p,onChange:e=>{if(e){h(e);let t=new URLSearchParams(Array.from(u.entries()));t.set("limit",e),t.set("page","1"),f.push("?".concat(t.toString()).concat(n||""))}}})]})})}},35689:function(e,t,n){"use strict";n.d(t,{i:function(){return S}});var i=n(68328),o=n(84944),a=n(76029),l=n(3741),r=n(22975),s=n(68242),d=n(41224),c=n(22041),u=n(48604),f=n(22614),m=n(72375),h=n(55911),p=n(31204),v=n(46557),g=n(38156),x=n(45437),y=n(6660),b=n(52013),j=n(50430),w=n(4505);let S=()=>{let[e,{open:t,close:n}]=(0,v.q)(!1),{columnSettings:S,updateColumnLabel:T,toggleColumnVisibility:C,reorderColumns:D,resetToDefaults:P}=(0,o.yV)(),[z,B]=(0,w.useState)(null),[A,k]=(0,w.useState)(""),N=(0,w.useMemo)(()=>Object.values(S).sort((e,t)=>e.order-t.order),[S]),I=(e,t)=>{B(e),k(t)},R=e=>{A.trim()&&T(e,A),B(null),k("")},F=(e,t)=>{if(0===t)return;let n=N.map(n=>n.id===e?n.id:n.order===t-1?e:n.id),i=N[t-1],o=[...n];o[t]=i.id,o[t-1]=e,D(o)},M=(e,t)=>{if(t===N.length-1)return;let n=N.map(e=>e.id),i=N[t+1];n[t]=i.id,n[t+1]=e,D(n)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.u,{label:"Column Settings",children:(0,i.jsx)(l.A,{size:"lg",variant:"light",onClick:t,"aria-label":"Column Settings",children:(0,i.jsx)(g.Z,{size:20})})}),(0,i.jsx)(r.u,{opened:e,onClose:n,title:(0,i.jsx)(s.Title,{order:3,children:"Indoor Patient Column Settings"}),size:"lg",children:(0,i.jsxs)(d.Stack,{gap:"md",children:[(0,i.jsx)(c.Text,{size:"sm",c:"dimmed",children:"Customize column names, visibility, and order for all indoor patient tables."}),(0,i.jsx)(d.Stack,{gap:"xs",children:N.map((e,t)=>(0,i.jsx)(u.Z,{padding:"sm",withBorder:!0,children:(0,i.jsxs)(f.Group,{justify:"space-between",wrap:"nowrap",children:[(0,i.jsxs)(f.Group,{gap:"xs",style:{flex:1},children:[(0,i.jsx)(m.X,{checked:e.visible,onChange:t=>{t.stopPropagation(),C(e.id)},"aria-label":"Toggle ".concat(e.label," visibility")}),z===e.id?(0,i.jsx)(h.TextInput,{value:A,onChange:e=>k(e.target.value),onKeyDown:t=>{"Enter"===t.key&&R(e.id),"Escape"===t.key&&(B(null),k(""))},size:"xs",style:{flex:1},autoFocus:!0}):(0,i.jsx)(c.Text,{size:"sm",fw:500,style:{textDecoration:e.visible?"none":"line-through",opacity:e.visible?1:.5},children:e.label}),e.label!==e.defaultLabel&&(0,i.jsxs)(c.Text,{size:"xs",c:"dimmed",children:["(Default: ",e.defaultLabel,")"]})]}),(0,i.jsxs)(f.Group,{gap:"xs",children:[z===e.id?(0,i.jsx)(p.Button,{size:"xs",onClick:()=>R(e.id),children:"Save"}):(0,i.jsx)(a.u,{label:"Edit label",children:(0,i.jsx)(l.A,{size:"sm",variant:"subtle",onClick:()=>I(e.id,e.label),children:(0,i.jsx)(x.Z,{size:16})})}),(0,i.jsx)(a.u,{label:"Move up",children:(0,i.jsx)(l.A,{size:"sm",variant:"subtle",onClick:()=>F(e.id,t),disabled:0===t,children:(0,i.jsx)(y.Z,{size:16})})}),(0,i.jsx)(a.u,{label:"Move down",children:(0,i.jsx)(l.A,{size:"sm",variant:"subtle",onClick:()=>M(e.id,t),disabled:t===N.length-1,children:(0,i.jsx)(b.Z,{size:16})})})]})]})},e.id))}),(0,i.jsxs)(f.Group,{justify:"flex-end",mt:"md",children:[(0,i.jsx)(p.Button,{variant:"light",leftSection:(0,i.jsx)(j.Z,{size:16}),onClick:P,children:"Reset to Defaults"}),(0,i.jsx)(p.Button,{onClick:n,children:"Close"})]})]})})]})}},69667:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(68328),o=n(74559),a=n(25499),l=n(77379),r=n(12450);let s=e=>{let{className:t,defaultOverall:n=!1,...s}=e,d=(0,r.useSearchParams)(),c=(0,r.usePathname)(),u=(0,r.useRouter)();return"receptionist"===(0,a.C)(o.nC)&&(0,i.jsx)(l.s,{value:(n?!d.has("personal"):d.has("overall"))?"overall":"personal",onChange:e=>{let t=new URLSearchParams(d),i=n?"personal":"overall";e===i?t.set(i,"true"):t.delete(i),u.push("".concat(c,"?").concat(t))},className:["hide__print",t].filter(Boolean).join(" "),...s,data:[{label:"Personal View",value:"personal"},{label:"Overall View",value:"overall"}]})}},98641:function(e,t,n){"use strict";n.d(t,{HF:function(){return v},OU:function(){return g},t2:function(){return x}});var i=n(68328),o=n(15139),a=n(89043),l=n(22614),r=n(68242),s=n(54632),d=n(22041),c=n(20234),u=n(13520),f=n(22776),m=n.n(f),h=n(97722),p=n.n(h);let v=e=>{var t,n,f;let{table:m,...h}=e,v=new Map(null===(t=m.totals)||void 0===t?void 0:t.map(e=>[e,0]));return(0,i.jsxs)(a.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mt:"md",...h,children:[(0,i.jsxs)(l.Group,{mb:"md",children:[(0,i.jsx)(o.P,{fz:36,p:6,className:"bg-dark text-white rounded-circle hide__print"}),(0,i.jsx)(r.Title,{order:2,mr:"auto",children:m.title})]}),(null===(n=m.rows)||void 0===n?void 0:n.length)?(0,i.jsx)(s.i.ScrollContainer,{minWidth:767,children:(0,i.jsxs)(s.i,{className:p().table,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsx)(s.i.Tr,{children:m.headers.map((e,t)=>(0,i.jsx)(s.i.Th,{children:e},"".concat(e).concat(t)))})}),(0,i.jsxs)(s.i.Tbody,{children:[null===(f=m.rows)||void 0===f?void 0:f.map((e,t)=>(0,i.jsx)(s.i.Tr,{className:m.limit&&t>=m.limit?"print-only":"",children:e.map((e,t)=>{if(v.has(t)){let n="number"==typeof e?e:"string"==typeof e&&parseFloat(e)||0;v.set(t,v.get(t)+n)}return(0,i.jsx)(s.i.Td,{children:e},"".concat(e).concat(t))})},t)),m.totals&&(0,i.jsxs)(s.i.Tr,{style:{borderTop:"2px solid #000000"},className:"print-only",children:[(0,i.jsx)(s.i.Td,{children:"Total"}),m.headers.slice(1).map((e,t)=>(0,i.jsx)(s.i.Td,{children:v.get(t+1)},t))]})]})]})}):(0,i.jsxs)(d.Text,{ta:"center",c:"red",size:"xl",fw:600,children:["No ",m.title.toLowerCase()," found in this period."]}),m.linkToMore&&(0,i.jsx)("div",{className:"mt-3 text-center hide__print",children:(0,i.jsxs)(c.Anchor,{component:u.default,href:m.linkToMore,children:["See more ",m.title.toLowerCase()]})})]})},g=e=>(0,i.jsx)(c.Anchor,{component:u.default,href:"/patient/details?id=".concat(e.billId),children:e.billId},"patientId"),x=e=>(0,i.jsx)(m(),{format:"DD-MM-YYYY (h:mm a)",children:e.createdAt},"datetime")},62549:function(e,t,n){"use strict";n.r(t),n.d(t,{LoadDiagnosticImageUrl:function(){return d}});var i=n(68328),o=n(4505),a=n(65850),l=n(62471),r=n(6780),s=n(25499);function d(){var e;let t=(0,s.C)(e=>e.auth.diagnostic),n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")||window.location.hostname.includes("198")?null==t?void 0:t.offlineLogo:null!==(e=null==t?void 0:t.logo)&&void 0!==e?e:null,i="/images/demo-fallback-logo.png";return(0,o.useEffect)(()=>{if(!n||""===n.trim()){sessionStorage.setItem("diagnostic-logo",i);return}r.default.get(n,{headers:{"Cache-Control":"no-cache"},timeout:3e3,responseType:"blob"}).then(e=>{if(!e||!e.data)throw Error("Image not found or invalid response");let t=e.data;return new Promise((e,n)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=n,i.readAsDataURL(t)})}).then(e=>{sessionStorage.setItem("diagnostic-logo",e)}).catch(e=>{console.warn("Error loading primary image, using fallback:",e),sessionStorage.setItem("diagnostic-logo",i)})},[n,i,3e3]),null}let c=a.mM.create({container:{width:"100%",alignItems:"center",display:"flex",flexDirection:"row",gap:10},logoContainer:{width:100,height:80,marginBottom:10,position:"relative"},image:{width:"100%",height:"100%",objectFit:"contain",borderRadius:100},headerContainer:{width:"100%"},hospitalName:{fontSize:20,fontWeight:"bold",fontFamily:"NotoSans",marginBottom:4,textAlign:"left"},address:{fontSize:12,fontFamily:"NotoSans",marginBottom:2,textAlign:"left"},phone:{fontSize:12,fontFamily:"NotoSans",textAlign:"left"}});t.default=e=>{let{diagnosticState:t,fallbackImageUrl:n="/images/demo-fallback-logo.png",timeoutDuration:o=3e3}=e,r=(0,l._)({key:"print-show-division-name",defaultValue:"true"}),s=sessionStorage.getItem("diagnostic-logo")||n;return(0,i.jsxs)(a.G7,{style:c.container,children:[(0,i.jsx)(a.G7,{style:c.logoContainer,children:s&&(0,i.jsx)(a.Ee,{src:s,style:c.image})}),(0,i.jsxs)(a.G7,{style:c.headerContainer,children:[(0,i.jsx)(a.xv,{style:c.hospitalName,children:null==t?void 0:t.name}),(0,i.jsxs)(a.xv,{style:c.address,children:[null==t?void 0:t.address,"true"===r&&(null==t?void 0:t.division)?", ".concat(null==t?void 0:t.division):""]}),(0,i.jsxs)(a.xv,{style:c.phone,children:["Phone: ",null==t?void 0:t.phone1,(null==t?void 0:t.phone2)?", ".concat(null==t?void 0:t.phone2):""]})]})]})}},26809:function(e,t,n){"use strict";var i=n(68328);n(4505);var o=n(65850),a=n(97698);let l=o.mM.create({container:{paddingVertical:5,fontSize:12},group:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},text:{fontSize:12,fontWeight:700},circle:{width:6,height:6,borderRadius:3,backgroundColor:"black",marginHorizontal:2},divider:{borderTop:"1px solid #787878",marginVertical:3}});t.Z=e=>{var t,n,r,s;let{small:d,dates:c,userName:u}=e,f=e=>(0,a.Z)(e?new Date(e):new Date,"dd-MMM-yyyy");return(0,i.jsxs)(o.G7,{style:l.container,children:[(0,i.jsx)(o.G7,{style:l.divider}),(0,i.jsxs)(o.G7,{style:l.group,children:[(0,i.jsxs)(o.G7,{style:{flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)(o.xv,{style:[l.text,{fontSize:10}],children:"Period : "}),(0,i.jsx)(o.xv,{style:[l.text,{fontSize:10}],children:f(null!==(s=null==c?void 0:null===(t=c.dates)||void 0===t?void 0:t[0])&&void 0!==s?s:new Date)}),(0,i.jsxs)(o.xv,{style:[l.text,{fontSize:10}],children:[" "," To "," "]}),(0,i.jsx)(o.xv,{style:[l.text,{fontSize:10}],children:f((null==c?void 0:null===(n=c.dates)||void 0===n?void 0:n[1])||(null==c?void 0:null===(r=c.dates)||void 0===r?void 0:r[0])||new Date)})]}),(0,i.jsx)(o.G7,{style:l.circle}),(0,i.jsxs)(o.xv,{style:[l.text,{fontSize:10}],children:["Printed By : ",u||"Unknown"]}),(0,i.jsx)(o.G7,{style:l.circle}),(0,i.jsxs)(o.xv,{style:[l.text,{fontSize:10,marginTop:"15px"}],children:["Print Time : ",(0,a.Z)(new Date,"MM/dd/yyyy : hh:mm a")]})]}),!d&&(0,i.jsx)(o.G7,{style:l.divider})]})}},86431:function(e,t,n){"use strict";var i=n(68328),o=n(65850);t.Z=e=>{let{diagnosticSettings:t}=e;return(0,i.jsx)(o.G7,{children:(null==t?void 0:t.viewId)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.xv,{style:{textTransform:"capitalize",fontSize:12,fontWeight:"bold"},children:["Viewing as: ",(null==t?void 0:t.viewName)||"N/A"]}),(0,i.jsxs)(o.xv,{style:{fontSize:12},children:["Email: ",(null==t?void 0:t.viewEmail)||"N/A"]})]})})}},84153:function(e,t,n){"use strict";var i=n(68328),o=n(89043),a=n(22041),l=n(41224),r=n(31204),s=n(9323),d=n(65850),c=n(42870),u=n(42116),f=n(4505);let m=(0,f.memo)(e=>{let{PDFTemplate:t}=e,[n,l]=(0,d.Eb)({document:(0,i.jsx)(t,{})});return((0,f.useEffect)(()=>{let e,o=0;return n.error&&(console.log("PDF ERROR: ",n.error),n.error&&o<3&&(e=setTimeout(()=>{console.log("Retrying PDF generation attempt ".concat(o+1,"/").concat(3)),l((0,i.jsx)(t,{})),o++},2e3))),()=>{e&&clearTimeout(e)}},[t,n.error,l]),n.loading)?(0,i.jsx)(o.X,{shadow:"xs",p:"xl",withBorder:!0,children:(0,i.jsx)(a.Text,{size:"lg",ta:"center",children:"Loading PDF..."})}):n.error?(0,i.jsx)(o.X,{shadow:"xs",p:"xl",withBorder:!0,bg:"red.1",children:(0,i.jsxs)(a.Text,{c:"red",size:"lg",ta:"center",children:["Error loading PDF. Attempting to reload...",JSON.stringify(n.error)]})}):(0,i.jsx)(h,{instance:n})});m.displayName="RenderReactPdfWithRetry";let h=(0,f.memo)(e=>{let{instance:t}=e,n=(0,s.a)("(max-width: 768px)");return t.url?n?(0,i.jsxs)(l.Stack,{align:"center",justify:"center",gap:"lg",p:"xl",h:"100%",children:[(0,i.jsx)(a.Text,{size:"lg",fw:500,ta:"center",c:"dimmed",children:"PDF preview is not available on mobile devices"}),(0,i.jsx)(r.Button,{component:"a",href:t.url,download:"document.pdf",leftSection:(0,i.jsx)(c.Z,{size:24}),children:"Download PDF"}),(0,i.jsx)(a.Text,{size:"sm",c:"dimmed",ta:"center",children:"Tap the button above to download and view the PDF"})]}):(0,i.jsx)("iframe",{src:t.url,width:"100%",height:"1000px",style:{border:"none"}}):null});h.displayName="PDFPreview",t.Z=(0,u.default)(()=>Promise.resolve(m),{ssr:!1})},25985:function(e,t,n){"use strict";var i=n(68328),o=n(65850),a=n(6780),l=n(4505);let r=o.mM.create({wrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",zIndex:-1},watermark:{opacity:.08}});t.Z=e=>{let{diagnosticState:t,fallbackImageUrl:n="/images/demo-fallback-logo.png",timeoutDuration:s=5e3,pageSize:d="A4"}=e,[c,u]=(0,l.useState)(null),[f,m]=(0,l.useState)(!0),[h,p]=(0,l.useState)(!1),v=(null==t?void 0:t.logo)||(null==t?void 0:t.offlineLogo)||null;if((0,l.useEffect)(()=>{if(!v){p(!0),m(!1);return}m(!0),(async()=>{try{let e=await a.default.get(v,{timeout:s,responseType:"blob"}),t=await new Promise((t,n)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=n,i.readAsDataURL(e.data)});u(t),p(!1)}catch(e){p(!0)}finally{m(!1)}})()},[v,s]),f)return null;let g=h?n:c;if(!g)return null;let x=d.includes("A5");return(0,i.jsx)(o.G7,{fixed:!0,style:r.wrapper,children:(0,i.jsx)(o.Ee,{src:g,style:[r.watermark,{width:x?250:450,height:x?250:450}]})})}},15139:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var i=n(68328),o=n(32451),a=n(29013),l=n(98553);let r=(0,n(4505).forwardRef)(function(e,t){let{style:n,...r}=e;return(0,i.jsx)(o.Box,{component:"span",ref:t,style:{display:"flex",...n},...r,children:(0,i.jsxs)("span",{style:{display:"flex",position:"relative"},children:[(0,i.jsx)(a.Z,{size:"1em",stroke:1}),(0,i.jsx)(l.Z,{style:{position:"absolute",right:"0.1em",top:"0"},size:"0.4em",stroke:3})]})})})},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return o},Hn:function(){return i},y4:function(){return a}});let i={headers:{"Content-Type":"application/json"}},o={withCredentials:!0},a={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78284:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var i=n(4505),o=n(90685);function a(e){let{data:t}=(0,o.wz)(e);return(0,i.useMemo)(()=>{var e,n,i,o,a,l,r;let s=null==t?void 0:null===(i=t.data)||void 0===i?void 0:null===(n=i.BedSubCategory)||void 0===n?void 0:null===(e=n.BedCategory)||void 0===e?void 0:e.name,d=null==t?void 0:null===(a=t.data)||void 0===a?void 0:null===(o=a.BedSubCategory)||void 0===o?void 0:o.name,c=null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.bedNumber,u=null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.roomNo;return s&&d&&c&&u?"".concat(s,"/").concat(d," B").concat(c,"-R").concat(u):"Not Selected"},[null==t?void 0:t.data])}},84944:function(e,t,n){"use strict";n.d(t,{yV:function(){return f}});var i=n(68328),o=n(62471),a=n(22041),l=n(98641),r=n(78284),s=n(4505);let d=e=>{let{bedId:t}=e,n=(0,r.p)(null!=t?t:"");return(0,i.jsx)(a.Text,{children:n||"-"})},c={billId:{id:"billId",label:"Bill ID",defaultLabel:"Bill ID",visible:!0,order:0},patientName:{id:"patientName",label:"Patient Name(P.ID)",defaultLabel:"Patient Name(P.ID)",visible:!0,order:1},bed:{id:"bed",label:"Bed",defaultLabel:"Bed",visible:!0,order:2},dateTime:{id:"dateTime",label:"Bill Date & Time",defaultLabel:"Bill Date & Time",visible:!0,order:3},user:{id:"user",label:"User",defaultLabel:"User",visible:!0,order:4},status:{id:"status",label:"Status",defaultLabel:"Status",visible:!0,order:5},paidToday:{id:"paidToday",label:"Paid Today",defaultLabel:"Paid Today",visible:!0,order:6},totalPaid:{id:"totalPaid",label:"Total Paid",defaultLabel:"Total Paid",visible:!0,order:7},diagnosis:{id:"diagnosis",label:"Diagnosis",defaultLabel:"Diagnosis",visible:!0,order:8},admissionFee:{id:"admissionFee",label:"Add. Fee",defaultLabel:"Add. Fee",visible:!0,order:9},advanceFee:{id:"advanceFee",label:"Advance",defaultLabel:"Advance",visible:!0,order:10}},u={billId:e=>(0,l.OU)(e),patientName:e=>{var t,n,i;return(null!==(i=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==i?i:"")+"("+((null==e?void 0:null===(n=e.patient)||void 0===n?void 0:n.patientId)||"")+")"},bed:e=>{var t,n;return(0,i.jsx)(d,{bedId:null===(n=e.bookings)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.bedId},"bed-".concat(e.billId))},dateTime:e=>(0,l.t2)(e),user:e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.name},status:e=>e.status,paidToday:e=>e.paidInAmountTotal,totalPaid:e=>e.paidAmount,diagnosis:e=>e.diagnosis,admissionFee:e=>e.admissionFee,advanceFee:e=>e.advanceFee},f=()=>{let[e,t]=(0,o.I)({key:"indoor-patient-columns-settings",defaultValue:c,serialize:e=>JSON.stringify(e),deserialize:e=>e?JSON.parse(e):c}),[n,i]=(0,s.useTransition)(),a=(0,s.useRef)(null),l=(0,s.useCallback)(t=>{let n=Object.values(e).filter(e=>e.visible).sort((e,t)=>e.order-t.order);return t&&t.length>0?n.filter(e=>t.includes(e.id)):n},[e]),r=(0,s.useCallback)((e,n)=>{i(()=>{t(t=>{let i={...t};return i[e]={...i[e],label:n},i})})},[i]);return{columnSettings:e,getVisibleColumns:l,updateColumnLabel:r,toggleColumnVisibility:(0,s.useCallback)(e=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i(()=>{t(t=>{let n=t[e];if(!n)return console.error("Column not found:",e),t;let i=!n.visible,o={...t};return o[e]={...n,visible:i},o})}),a.current=null},0)},[i]),reorderColumns:(0,s.useCallback)(e=>{i(()=>{t(t=>{let n={...t};return e.forEach((e,t)=>{n[e]&&(n[e]={...n[e],order:t})}),n})})},[i]),resetToDefaults:(0,s.useCallback)(()=>{i(()=>{t(c)})},[i]),columnAccessors:u,isPending:n}}},65971:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var i=n(72940),o=n(6780),a=n(67732);let l=async e=>{let{from:t,to:n,isPaid:l,isOwn:r,phone:s,patientId:d,limit:c,page:u,status:f,userId:m,serviceId:h,doctorId:p,pCId:v,nurseId:g,referredDoctorId:x,isCommissionPaid:y,isAdmissionFeePaid:b}=e;try{t&&(t=new Date(t)).setHours(0,0,0,0),n&&(n=new Date(n)).setHours(23,59,59,999);let e=await o.default.get("hospitalBill",{baseURL:"http://sasthotech.local:5000/api/v1",params:{from:t,to:n,isPaid:l,isOwn:r,phone:s,patientId:d,limit:c,page:u,status:f,userId:m,serviceId:h,doctorId:p,pCId:v,nurseId:g,referredDoctorId:x,isCommissionPaid:y,isAdmissionFeePaid:b},...i.FD});return{success:!0,data:e.data.data}}catch(e){if(e instanceof a.d7){var j;return{success:!1,data:null===(j=e.response)||void 0===j?void 0:j.data.message}}return{success:!1,data:"An error occurred"}}}},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(49854),o=n(68240),a=n(94183),l=n(28317);let r=(0,o.LC)({baseQuery:(0,a.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let o="string"==typeof e?e:e.url;return o.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,l.t8)(o,await n.clone().json().catch(()=>null),(0,i.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,l.U2)(n,(0,i.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},74559:function(e,t,n){"use strict";n.d(t,{Im:function(){return l},av:function(){return a},nC:function(){return o}});let i=(0,n(79258).createSlice)({name:"auth",initialState:{isAuth:null,user:null,isProfileIncomplete:!1,diagnostic:null},reducers:{setUser:(e,t)=>{var n;e.user=t.payload,e.isAuth=!!t.payload,(null===(n=t.payload)||void 0===n?void 0:n.name)?localStorage.setItem("name",t.payload.name):localStorage.removeItem("name")},setDiagnostic:(e,t)=>{let n=t.payload;"hospital.sasthotech.com"===window.location.hostname?n.activeLogo=n.logo:n.activeLogo=n.offlineLogo,e.diagnostic=n},setProfileIncomplete:(e,t)=>{e.isProfileIncomplete=t.payload}}}),o=e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.role},{setUser:a,setDiagnostic:l}=i.actions;t.ZP=i.reducer},90685:function(e,t,n){"use strict";n.d(t,{fN:function(){return r},kt:function(){return o},lq:function(){return d},ww:function(){return s},wz:function(){return a}});let i=n(78101).g.injectEndpoints({endpoints:e=>({getBeds:e.query({query:()=>({url:"/bed/Bed"}),keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createBed:e.mutation({query:e=>({url:"/bed/beds",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:o}=t,a=Date.now().toString(36),l=n(i.util.updateQueryData("getBeds",void 0,t=>{t.data.push({...e,id:a,loading:!0})}));try{let{data:e}=await o;n(i.util.updateQueryData("getBeds",void 0,t=>{let n=t.data.findIndex(e=>e.id===a);n>=0&&(t.data[n]=e.data)}))}catch(e){l.undo()}}}),createMultipleBeds:e.mutation({query:e=>({url:"/bed/beds/multi",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:o}=t,a=e.map(()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5)),l=n(i.util.updateQueryData("getBeds",void 0,t=>{a.forEach((n,i)=>{t.data.push({...e[i],id:n,loading:!0})})}));try{let{data:e}=await o;n(i.util.updateQueryData("getBeds",void 0,t=>{e.data.forEach((e,n)=>{let i=a[n],o=t.data.findIndex(e=>e.id===i);o>=0&&(t.data[o]=e)})}))}catch(e){l.undo()}}}),updateBed:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/bed/beds/".concat(t),method:"PATCH",body:n}},async onQueryStarted(e,t){let{id:n,...o}=e,{dispatch:a,queryFulfilled:l}=t,r=a(i.util.updateQueryData("getBeds",void 0,e=>{let t=e.data.findIndex(e=>e.id===n);t>=0&&(e.data[t]={...e.data[t],...o})}));try{let{data:e}=await l;a(i.util.updateQueryData("getBeds",void 0,t=>{let i=t.data.findIndex(e=>e.id===n);i>=0&&(t.data[i]=e.data)}))}catch(e){r.undo()}}}),deleteBed:e.mutation({query:e=>({url:"/bed/beds/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:o}=t,a=n(i.util.updateQueryData("getBeds",void 0,t=>{let n=t.data.find(t=>t.id===e);n&&(n.loading=!0)}));try{await o,n(i.util.updateQueryData("getBeds",void 0,t=>{let n=t.data.findIndex(t=>t.id===e);n>=0&&t.data.splice(n,1)}))}catch(e){a.undo()}}}),getSingleBed:e.query({query:e=>({url:"/bed/beds/".concat(e)})})})}),{useCreateBedMutation:o,useGetSingleBedQuery:a,useGetBedsQuery:l,useCreateMultipleBedsMutation:r,useUpdateBedMutation:s,useDeleteBedMutation:d}=i},13603:function(e,t,n){"use strict";n.d(t,{rm:function(){return d},uA:function(){return s}});var i=n(79258),o=n(69192),a=n(4646),l=n(14685);let r=(0,i.createSlice)({name:"dates",initialState:{dates:[null,null]},reducers:{setDates:(e,t)=>{e.dates=t.payload}}}),s=(0,o.createSelector)([e=>e.dates.dates],e=>{let[t,n]=e;return[t?new Date(t):(0,a.Z)(),n?new Date(n):(0,l.Z)()]}),{setDates:d}=r.actions;t.ZP=r.reducer},25499:function(e,t,n){"use strict";n.d(t,{C:function(){return a},T:function(){return o}});var i=n(53502);let o=()=>(0,i.I0)(),a=i.v9},49854:function(e,t,n){"use strict";let i;n.d(t,{d:function(){return d},x:function(){return s}});var o=n(72940),a=n(6780),l=n(67732),r=n(28317);function s(){return i||(i=(0,r.MT)("cached-responses-store","cached-responses")),i}async function d(e,t){try{let n=await a.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...o.FD});return await (0,r.t8)(e,n.data,s()),n.data}catch(t){if(t instanceof l.d7&&[l.d7.ERR_NETWORK,l.d7.ETIMEDOUT].includes(t.code)){let t=await (0,r.U2)(e,s());if(t)return t}throw t instanceof l.d7&&t.response&&401===t.response.status||console.error(t),t}}},97722:function(e){e.exports={table:"SummaryTable_table__2sSSa"}}},function(e){e.O(0,[1601,3313,9826,4404,3439,7281,748,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,154,7698,4927,4890,817,982,9175,7402,1744],function(){return e(e.s=7255)}),_N_E=e.O()}]);