(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2255],{23633:function(e,t,n){Promise.resolve().then(n.bind(n,78960))},78960:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(68328),i=n(81721),r=n(7203),o=n(10713),l=n(31100),s=n(43797),d=n(91793),u=n(29259),c=n(22614),y=n(72375),p=n(76283),h=n(23583),x=n(90660),g=n.n(x),m=n(14193);let f=m.Ry({name:m.Z_().required(d.B),amount:m.Rx().min(0,"Amount cannot be negative").required(d.B),isIndoorExpense:m.O7().required(d.B)}),v=e=>{var t,n,i;let{monthlyExpenseCategory:r,onValue:d,onClose:x}=e,[m,{isLoading:v}]=(0,s.Io)(),[j,{isLoading:C}]=(0,s.P5)();return(0,a.jsx)(h.J9,{validationSchema:f,initialValues:{name:null!==(t=null==r?void 0:r.name)&&void 0!==t?t:"",amount:null!==(n=null==r?void 0:r.amount)&&void 0!==n?n:0,isIndoorExpense:null!==(i=null==r?void 0:r.isIndoorExpense)&&void 0!==i&&i},onSubmit:async(e,t)=>{let{setSubmitting:n,resetForm:a}=t;if(!v&&!C)try{let t={...e},{data:n}=await ((null==r?void 0:r.id)?j({id:r.id,...t}).unwrap():m(t).unwrap());null==d||d(n),a(),g().fire({title:"Success",text:"Monthly Expense Category saved successfully!",icon:"success"}),null==x||x()}catch(e){var i,o;console.error(e),g().fire("Failed",null!==(o=null===(i=e.data)||void 0===i?void 0:i.message)&&void 0!==o?o:"An unknown error occurred!","error")}finally{n(!1)}},children:e=>{let{values:t,setFieldValue:n,handleChange:i}=e;return(0,a.jsxs)(h.l0,{children:[(0,a.jsx)(o.Z,{name:"name",labelText:"Category Name",placeholder:"Enter category name",withAsterisk:!0,value:t.name,onChange:e=>n("name",e.currentTarget.value),mt:0,"data-autofocus":!0,mb:"md"}),(0,a.jsx)(u.Y,{name:"amount",label:"Standard Amount",value:t.amount,placeholder:"Enter standard amount",withAsterisk:!0,onChange:e=>n("amount",e),mb:"md",min:0}),(0,a.jsx)(c.Group,{mb:"md",children:(0,a.jsx)(y.X,{label:"Indoor Expense",checked:t.isIndoorExpense,onChange:e=>n("isIndoorExpense",e.currentTarget.checked)})}),(0,a.jsx)(l.M,{size:"md",radius:"md",leftSection:(0,a.jsx)(p.Z,{}),loading:v||C,children:"Save"})]})}})};var j=n(40307),C=n(54632),E=n(3741),w=n(32451),T=n(22041),b=n(41224),S=n(68242),D=n(77379),A=n(31204),I=n(89043),M=n(22975),k=n(46557),B=n(44019),Q=n(12697),Z=n(35288),q=n(57650),N=n(94131),P=n(4505);function O(){var e,t;let[n,{open:o,close:l}]=(0,k.q)(!1),[d,u]=(0,P.useState)("daily"),[y,p]=(0,P.useState)(),[h,x]=(0,P.useState)(null),{data:m,isLoading:f,isSuccess:O}=(0,j.KZ)(),[R]=(0,j.uf)(),{data:F,isLoading:z,isSuccess:L}=(0,s.mb)({}),[U]=(0,s.By)();return(0,a.jsxs)(w.Box,{className:"p-3 bg-light p-md-5",children:[(0,a.jsxs)(b.Stack,{gap:"md",children:[(0,a.jsxs)(c.Group,{children:[(0,a.jsxs)(S.Title,{children:["daily"===d?"Daily":"Monthly"," Expense Categories"]}),(0,a.jsx)(D.s,{w:400,value:d,onChange:e=>u(e),data:[{label:(0,a.jsxs)(c.Group,{gap:"xs",children:[(0,a.jsx)(Z.Z,{size:16}),(0,a.jsx)("span",{children:"Daily"})]}),value:"daily"},{label:(0,a.jsxs)(c.Group,{gap:"xs",children:[(0,a.jsx)(q.Z,{size:16}),(0,a.jsx)("span",{children:"Monthly"})]}),value:"monthly"}]})]}),(0,a.jsx)(c.Group,{align:"right",children:(0,a.jsxs)(A.Button,{size:"md",radius:"md",leftSection:(0,a.jsx)(N.Z,{}),onClick:()=>{p(void 0),o()},children:["Add New ","daily"===d?"Daily":"Monthly"," Category"]})}),(0,a.jsx)(I.X,{bg:"white",p:"lg",radius:"md",shadow:"md",children:"daily"===d?f?(0,a.jsx)(r.Z,{}):O&&(null==m?void 0:null===(e=m.data)||void 0===e?void 0:e.length)>0?(0,a.jsx)(C.i.ScrollContainer,{minWidth:767,children:(0,a.jsxs)(C.i,{layout:"fixed",children:[(0,a.jsx)(C.i.Thead,{children:(0,a.jsx)(C.i.Tr,{children:["Category Name","Actions"].map((e,t)=>(0,a.jsx)(C.i.Th,{children:e},"".concat(e).concat(t)))})}),(0,a.jsx)(C.i.Tbody,{children:m.data.map((e,t)=>(0,a.jsxs)(C.i.Tr,{bg:e.loading?"yellow.1":void 0,children:[(0,a.jsx)(C.i.Td,{children:e.name}),(0,a.jsx)(C.i.Td,{children:(0,a.jsxs)(c.Group,{children:[(0,a.jsx)(E.A,{variant:"transparent",onClick:()=>{p(e),o()},loading:e.loading,children:(0,a.jsx)(B.Z,{})}),(0,a.jsx)(E.A,{variant:"transparent",onClick:async()=>{if((await g().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#fa5252",confirmButtonText:"Yes, delete it!",focusCancel:!0})).isConfirmed)try{await R(e.id).unwrap()}catch(e){console.error(e),g().fire("Error","Error","error")}},loading:e.loading,children:(0,a.jsx)(Q.Z,{})})]})})]},e.id))})]})}):(0,a.jsx)(w.Box,{ta:"center",py:"xl",children:(0,a.jsx)(T.Text,{size:"lg",c:"dimmed",children:"No daily expense categories found"})}):z?(0,a.jsx)(r.Z,{}):L&&(null==F?void 0:null===(t=F.data)||void 0===t?void 0:t.length)>0?(0,a.jsx)(C.i.ScrollContainer,{minWidth:767,children:(0,a.jsxs)(C.i,{layout:"fixed",children:[(0,a.jsx)(C.i.Thead,{children:(0,a.jsx)(C.i.Tr,{children:["Category Name","Amount","Type","Actions"].map((e,t)=>(0,a.jsx)(C.i.Th,{children:e},"".concat(e).concat(t)))})}),(0,a.jsx)(C.i.Tbody,{children:F.data.map(e=>(0,a.jsxs)(C.i.Tr,{children:[(0,a.jsx)(C.i.Td,{children:e.name}),(0,a.jsx)(C.i.Td,{children:e.amount}),(0,a.jsx)(C.i.Td,{children:e.isIndoorExpense?"Indoor":"Outdoor"}),(0,a.jsx)(C.i.Td,{children:(0,a.jsxs)(c.Group,{children:[(0,a.jsx)(E.A,{variant:"transparent",onClick:()=>{x(e),o()},children:(0,a.jsx)(B.Z,{})}),(0,a.jsx)(E.A,{variant:"transparent",onClick:async()=>{if((await g().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#fa5252",confirmButtonText:"Yes, delete it!",focusCancel:!0})).isConfirmed)try{await U(e.id).unwrap()}catch(e){console.error(e),g().fire("Error","Error","error")}},children:(0,a.jsx)(Q.Z,{})})]})})]},e.id))})]})}):(0,a.jsx)(w.Box,{ta:"center",py:"xl",children:(0,a.jsx)(T.Text,{size:"lg",c:"dimmed",children:"No monthly expense categories found"})})})]}),(0,a.jsx)(M.u,{opened:n,onClose:l,title:(y?"Edit":"Add New")+("daily"===d?" Daily":" Monthly")+" Expense Category",children:"daily"===d?(0,a.jsx)(i.o,{dailyExpenseCategory:y,onQueryStarted:l},null==y?void 0:y.id):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v,{monthlyExpenseCategory:h,onClose:l})})})]})}},81721:function(e,t,n){"use strict";n.d(t,{o:function(){return h}});var a=n(68328),i=n(10713),r=n(31100),o=n(40307),l=n(91793),s=n(76283),d=n(23583),u=n(90660),c=n.n(u),y=n(14193);let p=y.Ry({name:y.Z_().required(l.B)}),h=e=>{var t;let{dailyExpenseCategory:n,onValue:l,onQueryStarted:u}=e,[y,{isLoading:h}]=(0,o.AQ)(),[x,{isLoading:g}]=(0,o.IV)();return(0,a.jsx)(d.J9,{validationSchema:p,initialValues:{name:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:""},onSubmit:async(e,t)=>{let{setSubmitting:a,resetForm:i}=t;if(!h&&!g)try{null==u||u(e);let{data:t}=await ((null==n?void 0:n.id)?x({id:n.id,...e}).unwrap():y(e).unwrap());null==l||l(t),i()}catch(e){console.error(e),c().fire("Failed","An unknown error occurred!","error")}finally{a(!1)}},children:(0,a.jsxs)(d.l0,{children:[(0,a.jsx)(i.Z,{name:"name",labelText:"DailyExpenseCategory Name",placeholder:"Type name",withAsterisk:!0,mt:0,"data-autofocus":!0,mb:"md"}),(0,a.jsx)(r.M,{size:"md",radius:"md",leftSection:(0,a.jsx)(s.Z,{}),children:"Save"})]})})}},7203:function(e,t,n){"use strict";var a=n(68328),i=n(14587);n(4505),t.Z=()=>(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:600},children:(0,a.jsx)(i.Loader,{color:"teal",variant:"dots"})})},10713:function(e,t,n){"use strict";n.d(t,{E:function(){return y}});var a=n(68328),i=n(30331),r=n(30293),o=n(55911),l=n(87513),s=n(58689),d=n(73626),u=n(23583),c=n(4505);let y={size:"md",variant:"default",radius:"md"},p=(0,r.F)((0,c.forwardRef)(function(e,t){let{labelText:n,labelTextColor:r,size:p=y.size,variant:h=y.variant,radius:x=y.radius,mt:g="md",withAsterisk:m=!1,onChange:f,onBlur:v,onClick:j,readonly:C,styles:E,value:w,...T}=e,b=Object.assign({label:{color:null!=r?r:"black"}},E),[{value:S,onChange:D,onBlur:A,...I},M,k]=(0,u.U$)(T.name),B=(0,c.useRef)(null),Q=(0,s.Yx)(t,B),Z=(0,d.y)(()=>{if(B.current){let e;let{type:t,value:n}=B.current;k.setValue("number"===t?isNaN(e=parseFloat(n))?"":e:n)}},200);return(0,c.useEffect)(()=>{B.current&&B.current.value!==S&&!(document.hasFocus()&&document.activeElement===B.current)&&(B.current.value=null!=S?S:"")},[S]),(0,a.jsx)(o.TextInput,{label:n,readOnly:C,ref:Q,error:M.touched&&M.error,styles:b,defaultValue:S,onChange:e=>{Z()},onBlur:e=>{null==v||v(e),A(e)},onClick:e=>{"number"===T.type&&"0"===e.currentTarget.value&&e.currentTarget.select(),null==j||j(e)},onWheel:i.P,rightSectionPointerEvents:"all",rightSection:(0,a.jsx)(l.P,{"aria-label":"Clear input",onClick:()=>{k.setValue(""),B.current&&(B.current.value="")},style:{display:S?void 0:"none"}}),...I,size:p,variant:h,radius:x,mt:g,withAsterisk:m,...T})}));t.Z=p},31100:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var a=n(68328),i=n(31204),r=n(23583);function o(e){let{loading:t,disabled:n,...o}=e,{isSubmitting:l}=(0,r.u6)();return(0,a.jsx)(i.Button,{type:"submit",loading:l||t,disabled:l||n,...o})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return i},Hn:function(){return a},y4:function(){return r}});let a={headers:{"Content-Type":"application/json"}},i={withCredentials:!0},r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var a=n(49854),i=n(68240),r=n(94183),o=n(28317);let l=(0,i.LC)({baseQuery:(0,r.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let i="string"==typeof e?e:e.url;return i.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,o.t8)(i,await n.clone().json().catch(()=>null),(0,a.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(n,(0,a.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},40307:function(e,t,n){"use strict";n.d(t,{AQ:function(){return s},IV:function(){return d},KZ:function(){return l},uf:function(){return u},vy:function(){return h}});var a=n(69192),i=n(78101),r=n(40085);let o=i.g.injectEndpoints({endpoints:e=>({getDailyExpenseCategories:e.query({query:()=>({url:"/dailyExpenseCategory"})}),createDailyExpenseCategory:e.mutation({query:e=>({url:"/dailyExpenseCategory",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:a}=t,i=(0,r.x0)(),l=n(o.util.updateQueryData("getDailyExpenseCategories",void 0,t=>{t.data.push({id:i,...e,loading:!0})}));try{let{data:e}=await a;n(o.util.updateQueryData("getDailyExpenseCategories",void 0,t=>{let n=t.data.findIndex(e=>e.id===i);n>=0&&(t.data[n]=e.data)}))}catch(e){l.undo()}}}),updateDailyExpenseCategory:e.mutation({query:e=>{let{id:t,name:n}=e;return{url:"/dailyExpenseCategory/".concat(t),method:"PATCH",body:{name:n}}},async onQueryStarted(e,t){let{id:n,name:a}=e,{dispatch:i,queryFulfilled:r}=t,l=i(o.util.updateQueryData("getDailyExpenseCategories",void 0,e=>{let t=e.data.find(e=>e.id===n);t&&(void 0!==a&&(t.name=a),t.loading=!0)}));try{await r,i(o.util.updateQueryData("getDailyExpenseCategories",void 0,e=>{let t=e.data.find(e=>e.id===n);t&&delete t.loading}))}catch(e){l.undo()}}}),deleteDailyExpenseCategory:e.mutation({query:e=>({url:"/dailyExpenseCategory/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:a}=t,i=n(o.util.updateQueryData("getDailyExpenseCategories",void 0,t=>{let n=t.data.find(t=>t.id===e);n&&(n.loading=!0)}));try{await a,n(o.util.updateQueryData("getDailyExpenseCategories",void 0,t=>{let n=t.data.findIndex(t=>t.id===e);n>=0&&t.data.splice(n,1)}))}catch(e){i.undo()}}})})}),{useGetDailyExpenseCategoriesQuery:l,useCreateDailyExpenseCategoryMutation:s,useUpdateDailyExpenseCategoryMutation:d,useDeleteDailyExpenseCategoryMutation:u}=o,c=o.endpoints.getDailyExpenseCategories.select(),y=[],p=(0,a.createSelector)(c,e=>{var t,n;return null!==(n=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data)&&void 0!==n?n:y}),h=(0,a.createSelector)([p,(e,t)=>t],(e,t)=>e.find(e=>e.id===t))},43797:function(e,t,n){"use strict";n.d(t,{By:function(){return l},Io:function(){return r},P5:function(){return o},mb:function(){return i}});let a=n(78101).g.injectEndpoints({endpoints:e=>({getMonthlyExpenseCategories:e.query({query:e=>{let t=new URLSearchParams;return e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString()),e.diagnosticId&&t.append("diagnosticId",e.diagnosticId),void 0!==e.isIndoorExpense&&t.append("isIndoorExpense",e.isIndoorExpense.toString()),{url:"/monthlyExpenseCategory?".concat(t.toString())}},keepUnusedDataFor:86400,transformResponse:e=>e}),createMonthlyExpenseCategory:e.mutation({query:e=>({url:"/monthlyExpenseCategory",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,r=Date.now().toString(36),o=n(a.util.updateQueryData("getMonthlyExpenseCategories",{page:void 0,limit:void 0},t=>{t.data.push({...e,id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),loading:!0})}));try{let{data:e}=await i;n(a.util.updateQueryData("getMonthlyExpenseCategories",{page:void 0,limit:void 0},t=>{let n=t.data.findIndex(e=>e.id===r);n>=0&&(t.data[n]=e.data)}))}catch(e){o.undo()}}}),updateMonthlyExpenseCategory:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/monthlyExpenseCategory/".concat(t),method:"PATCH",body:n}},async onQueryStarted(e,t){let{id:n,...i}=e,{dispatch:r,queryFulfilled:o}=t,l=r(a.util.updateQueryData("getMonthlyExpenseCategories",{page:void 0,limit:void 0},e=>{let t=e.data.findIndex(e=>e.id===n);t>=0&&(e.data[t]={...e.data[t],...i})}));try{let{data:e}=await o;r(a.util.updateQueryData("getMonthlyExpenseCategories",{page:void 0,limit:void 0},t=>{let a=t.data.findIndex(e=>e.id===n);a>=0&&(t.data[a]=e.data)}))}catch(e){l.undo()}}}),deleteMonthlyExpenseCategory:e.mutation({query:e=>({url:"/monthlyExpenseCategory/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,r=n(a.util.updateQueryData("getMonthlyExpenseCategories",{page:void 0,limit:void 0},t=>{console.log(t,"draft"),t.data.find(t=>t.id===e)}));try{await i,n(a.util.updateQueryData("getMonthlyExpenseCategories",{page:void 0,limit:void 0},t=>{let n=t.data.findIndex(t=>t.id===e);n>=0&&t.data.splice(n,1)}))}catch(e){r.undo()}}}),getSingleMonthlyExpenseCategory:e.query({query:e=>({url:"/monthlyExpenseCategory/".concat(e)})})})}),{useGetMonthlyExpenseCategoriesQuery:i,useCreateMonthlyExpenseCategoryMutation:r,useUpdateMonthlyExpenseCategoryMutation:o,useDeleteMonthlyExpenseCategoryMutation:l,useGetSingleMonthlyExpenseCategoryQuery:s}=a},49854:function(e,t,n){"use strict";let a;n.d(t,{d:function(){return d},x:function(){return s}});var i=n(72940),r=n(6780),o=n(67732),l=n(28317);function s(){return a||(a=(0,l.MT)("cached-responses-store","cached-responses")),a}async function d(e,t){try{let n=await r.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...i.FD});return await (0,l.t8)(e,n.data,s()),n.data}catch(t){if(t instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(t.code)){let t=await (0,l.U2)(e,s());if(t)return t}throw t instanceof o.d7&&t.response&&401===t.response.status||console.error(t),t}}},30331:function(e,t,n){"use strict";function a(e){e.currentTarget.blur(),e.stopPropagation(),setTimeout(()=>{var t;null==e||null===(t=e.currentTarget)||void 0===t||t.focus()},0)}n.d(t,{P:function(){return a}})},91793:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});let a=e=>{let{label:t,path:n}=e;return"".concat(null!=t?t:n.split(".").map(e=>e?e[0].toUpperCase()+e.slice(1):"").join(" ")," is required")}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,966,12,7538,6306,3583,4193,4927,3147,8492,9175,7402,1744],function(){return e(e.s=23633)}),_N_E=e.O()}]);