(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6307],{76964:function(e,t,s){Promise.resolve().then(s.bind(s,9872))},9872:function(e,t,s){"use strict";s.r(t);var i=s(68328),r=s(34172),a=s(36409),l=s(22041),n=s(14587),o=s(41224),d=s(22614),c=s(3741),m=s(68242),u=s(77303),x=s(48604),h=s(11114),j=s(68823),g=s(29663),v=s(34022),p=s(63998),f=s(26546),T=s(69861),b=s(35288),C=s(19376),y=s(25564),k=s(4505),w=s(57620),M=s(79033),D=s(80516),Z=s(1860),z=s.n(Z),G=s(12450);let I=e=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e),P=e=>0===e.totalCommission?0:e.commissionPaid/e.totalCommission*100;t.default=()=>{var e,t,s;let Z=(0,G.useRouter)(),E=(0,G.useSearchParams)().get("id"),{data:V,isLoading:B,error:Y}=(0,r.a4)(E||"",{skip:!E}),[S,A]=(0,k.useState)(null),[q,F]=(0,k.useState)(!1),N=null==V?void 0:null===(e=V.data)||void 0===e?void 0:e.stats,_=null==V?void 0:null===(s=V.data)||void 0===s?void 0:null===(t=s.targets)||void 0===t?void 0:t.data,O=_&&_.length>0?_[0]:null;if(!E)return(0,i.jsx)(a.M,{h:"50vh",children:(0,i.jsx)(l.Text,{c:"red",size:"lg",children:"Marketer ID is required."})});if(B)return(0,i.jsx)(a.M,{h:"50vh",children:(0,i.jsx)(n.Loader,{size:"lg"})});if(Y||!N)return(0,i.jsx)(a.M,{h:"50vh",children:(0,i.jsx)(l.Text,{c:"red",size:"lg",children:"Error loading statistics or no data available."})});let L=O?{from:new Date(O.startDate),to:new Date(O.endDate)}:{from:new Date(new Date().getFullYear(),new Date().getMonth(),1),to:new Date};return(0,i.jsxs)("div",{style:{padding:"20px",minHeight:"100vh"},children:[(0,i.jsxs)(o.Stack,{gap:"md",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(d.Group,{mb:"xs",children:[(0,i.jsx)(c.A,{variant:"light",color:"gray",size:"lg",onClick:()=>Z.back(),children:(0,i.jsx)(p.Z,{size:20})}),(0,i.jsx)(m.Title,{order:2,children:"Marketer Overview"})]}),(0,i.jsx)(l.Text,{size:"sm",c:"dimmed",children:"Detailed performance statistics and target progress"})]}),O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Divider,{label:"Active Target",labelPosition:"center"}),(0,i.jsxs)(x.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,i.jsxs)(d.Group,{justify:"space-between",align:"flex-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(d.Group,{gap:"xs",mb:"xs",children:[(0,i.jsx)(f.Z,{size:24,color:"var(--mantine-color-violet-6)"}),(0,i.jsx)(m.Title,{order:3,children:"Current Target"}),(0,i.jsx)(h.C,{color:"MONTHLY"===O.targetType?"green":"WEEKLY"===O.targetType?"orange":"blue",variant:"filled",size:"sm",children:O.targetType})]}),(0,i.jsxs)(l.Text,{size:"sm",c:"dimmed",mb:"md",children:[z()(O.startDate).format("MMM DD, YYYY")," -"," ",z()(O.endDate).format("MMM DD, YYYY")]})]}),(0,i.jsx)(j.T,{size:100,thickness:10,roundCaps:!0,sections:[{value:Math.min(N.totalIncome/O.targetValue*100,100),color:N.totalIncome>=O.targetValue?"violet":"teal"}],label:(0,i.jsxs)(l.Text,{ta:"center",size:"xs",fw:700,children:[Math.round(N.totalIncome/O.targetValue*100),"%"]})})]}),(0,i.jsx)(u.Divider,{my:"sm"}),(0,i.jsxs)(g.Grid,{children:[(0,i.jsxs)(g.Grid.Col,{span:6,children:[(0,i.jsx)(l.Text,{size:"xs",c:"dimmed",children:"Achieved"}),(0,i.jsx)(l.Text,{size:"xl",fw:700,c:"teal",children:I(N.totalIncome)})]}),(0,i.jsxs)(g.Grid.Col,{span:6,style:{textAlign:"right"},children:[(0,i.jsx)(l.Text,{size:"xs",c:"dimmed",children:"Target Amount"}),(0,i.jsx)(l.Text,{size:"xl",fw:700,c:"violet",children:I(O.targetValue)})]})]}),(0,i.jsx)(v.E,{value:Math.min(N.totalIncome/O.targetValue*100,100),size:"lg",radius:"xl",mt:"md",color:N.totalIncome>=O.targetValue?"violet":"teal"}),(0,i.jsxs)(d.Group,{justify:"space-between",mt:"xs",children:[(0,i.jsxs)(l.Text,{size:"xs",c:"dimmed",children:[I(N.totalIncome)," / ",I(O.targetValue)]}),(0,i.jsx)(l.Text,{size:"xs",c:N.totalIncome>=O.targetValue?"teal":"dimmed",fw:500,children:N.totalIncome>=O.targetValue?"\uD83C\uDF89 Target Achieved!":"".concat(I(O.targetValue-N.totalIncome)," remaining")})]})]})]}):(0,i.jsx)(x.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,i.jsxs)(d.Group,{justify:"center",gap:"xs",children:[(0,i.jsx)(f.Z,{size:20,color:"gray"}),(0,i.jsx)(l.Text,{c:"dimmed",children:"No active target found"})]})}),(0,i.jsx)(u.Divider,{label:"Overview Statistics",labelPosition:"center"}),(0,i.jsxs)(g.Grid,{children:[(0,i.jsx)(g.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,i.jsx)(w.Z,{title:"Total PCs",value:N.totalPCs,icon:(0,i.jsx)(T.Z,{}),color:"blue"})}),(0,i.jsx)(g.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,i.jsx)(w.Z,{title:"Total Income",value:I(N.totalIncome),icon:(0,i.jsx)(b.Z,{}),color:"green"})}),(0,i.jsx)(g.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,i.jsx)(w.Z,{title:"Total Commission",value:I(N.totalCommission),icon:(0,i.jsx)(C.Z,{}),color:"violet"})}),(0,i.jsx)(g.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,i.jsx)(w.Z,{title:"Commission Paid",value:I(N.commissionPaid),icon:(0,i.jsx)(C.Z,{}),color:"teal",subtitle:"".concat(P(N).toFixed(1),"% of total")})}),(0,i.jsx)(g.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,i.jsx)(w.Z,{title:"Commission Unpaid",value:I(N.commissionUnpaid),icon:(0,i.jsx)(C.Z,{}),color:"red",subtitle:"".concat((100-P(N)).toFixed(1),"% remaining")})}),(0,i.jsx)(g.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,i.jsx)(w.Z,{title:"Total Bills",value:N.totalBills,icon:(0,i.jsx)(y.Z,{}),color:"orange",subtitle:"Paid: ".concat(N.paidBills," | Unpaid: ").concat(N.unpaidBills," ")})})]}),(0,i.jsx)(u.Divider,{label:"PC Performance",labelPosition:"center"}),(0,i.jsx)(x.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,i.jsxs)(o.Stack,{gap:"md",children:[(0,i.jsx)(m.Title,{order:3,children:"Performance by PC"}),(0,i.jsx)(l.Text,{size:"sm",c:"dimmed",children:"View detailed performance metrics for each assigned PC"}),(0,i.jsx)(M.Z,{pcStats:N.pcStats,onViewDetails:e=>{console.log(e),A(e),F(!0)}})]})})]}),(0,i.jsx)(D.Z,{opened:q,onClose:()=>{F(!1),A(null)},pcId:S,dateRange:L,marketerId:E})]})}},34172:function(e,t,s){"use strict";s.d(t,{AW:function(){return a},a4:function(){return r}});let{useGetMarketersQuery:i,useGetMarketerByIdQuery:r,useCreateMarketerMutation:a,useDeleteMarketerMutation:l}=s(78101).g.injectEndpoints({endpoints:e=>({getMarketers:e.query({query:()=>({url:"/admin/marketer",method:"GET"}),providesTags:["Marketer"]}),getMarketerById:e.query({query:e=>({url:"/admin/marketer/".concat(e,"/stats"),method:"GET"}),providesTags:(e,t,s)=>[{type:"Marketer",id:s}]}),createMarketer:e.mutation({query:e=>({url:"/admin/marketer",method:"POST",body:e}),invalidatesTags:["Marketer"]}),deleteMarketer:e.mutation({query:e=>({url:"/admin/marketer/".concat(e),method:"DELETE"}),invalidatesTags:["Marketer"]})})})},36409:function(e,t,s){"use strict";s.d(t,{M:function(){return c}});var i=s(68328);s(4505);var r=s(65786),a=s(28266),l=s(32451),n=s(4687),o={root:"m_4451eb3a"};let d={},c=(0,n.b)((e,t)=>{let s=(0,r.w)("Center",d,e),{classNames:n,className:c,style:m,styles:u,unstyled:x,vars:h,inline:j,mod:g,...v}=s,p=(0,a.y)({name:"Center",props:s,classes:o,className:c,style:m,classNames:n,styles:u,unstyled:x,vars:h});return(0,i.jsx)(l.Box,{ref:t,mod:[{inline:j},g],...p("root"),...v})});c.classes=o,c.displayName="@mantine/core/Center"},63998:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(52165).Z)("outline","arrow-left","ArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]])}},function(e){e.O(0,[1601,748,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,1493,7140,7308,9150,6616,5851,9175,7402,1744],function(){return e(e.s=76964)}),_N_E=e.O()}]);