(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9315],{95690:function(e,t,i){Promise.resolve().then(i.bind(i,84300))},60595:function(e,t,i){"use strict";var s=i(42752);i.o(s,"isArray")&&i.d(t,{isArray:function(){return s.isArray}})},84300:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return L}});var s=i(68328),r=i(34473),n=i(41224),a=i(22614),l=i(68242),o=i(22041),d=i(31204),c=i(22975),u=i(46557),x=i(34331),p=i(9654),h=i(98073),m=i(25499),g=i(70150),j=i(68232),f=i(55911),v=i(57956),y=i(32451),C=i(21288),b=i(23366),w=i(22115),T=i(47301),S=i(46247),k=i(12921),z=i(23583),P=i(4505);let I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",i=atob(e.split(",")[1]),s=new ArrayBuffer(i.length),r=new Uint8Array(s);for(let e=0;e<i.length;e++)r[e]=i.charCodeAt(e);return new Blob([s],{type:t})},G=async(e,t)=>{try{let i=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&zoom=18&addressdetails=1"),{headers:{"User-Agent":"PCMeetupApp/1.0"}}),s=await i.json();if(s&&s.display_name)return{address:s.display_name,details:s.address||null};return console.error("❌ Geocoding failed: No address found"),{address:null,details:null}}catch(e){return console.error("❌ Error fetching address:",e),{address:null,details:null}}},M=e=>{let t=new FormData;if(e.pCId&&t.append("pcId",e.pCId),e.addressType&&t.append("userLocation",e.addressType),e.location){t.append("metadata",JSON.stringify({latitude:e.location.latitude,longitude:e.location.longitude}));let i=e.address?"".concat(e.location.latitude,",").concat(e.location.longitude," (").concat(e.address,")"):"".concat(e.location.latitude,",").concat(e.location.longitude);t.append("deviceLocation",i)}if(e.note&&t.append("note",e.note),e.meetupTime&&t.append("visitedAt",e.meetupTime.toISOString()),e.imgSrc){let i=I(e.imgSrc),s=new File([i],"pc-meetup-".concat(Date.now(),".jpg"),{type:"image/jpeg"});t.append("image",s)}else e.file&&t.append("image",e.file);return t};var A=i(55168);let Z=e=>{let{onSuccess:t}=e,[i,{open:r,close:l}]=(0,u.q)(!1),[x,{open:p,close:h}]=(0,u.q)(!1),[m,{isLoading:g}]=(0,A.to)(),I=(0,P.useRef)(null),Z=(0,P.useRef)(null),L=(0,P.useRef)(null),[E,D]=(0,P.useState)(null),[N,U]=(0,P.useState)(null),[B,R]=(0,P.useState)(null),[F,O]=(0,P.useState)(null),[V,q]=(0,P.useState)(!1),[H,_]=(0,P.useState)(!1);(0,P.useEffect)(()=>{if(!i)return;let e=null;return(async()=>{try{e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}),U(e),I.current&&(I.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e),w.N9.show({title:"Camera Error",message:"Unable to access camera. Please allow permissions.",color:"red"}),l()}})(),()=>{null==e||e.getTracks().forEach(e=>e.stop())}},[i,l]),(0,P.useEffect)(()=>{!i&&N&&(N.getTracks().forEach(e=>e.stop()),U(null))},[i,N]);let Y=(0,P.useCallback)(()=>{if(!B&&!V){if(!navigator.geolocation){w.N9.show({title:"Error",message:"Geolocation is not supported by your browser",color:"red"});return}q(!0),navigator.geolocation.getCurrentPosition(async e=>{let t={latitude:e.coords.latitude,longitude:e.coords.longitude};R(t),_(!0);let i=await G(t.latitude,t.longitude);i.address&&O(i.address),_(!1),q(!1)},e=>{q(!1),console.error("Geolocation error:",e),w.N9.show({title:"Location Error",message:"Unable to retrieve your location. Please ensure location services are enabled.",color:"orange"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},[B,V]);(0,P.useEffect)(()=>{Y()},[Y]);let W=(0,P.useCallback)(()=>{if(!I.current||!Z.current)return;let e=I.current,t=Z.current;t.width=e.videoWidth,t.height=e.videoHeight;let i=t.getContext("2d");i&&(i.drawImage(e,0,0,t.width,t.height),D(t.toDataURL("image/jpeg")),Y(),l())},[l,Y]),J=async e=>{if(!e.addressType){w.N9.show({title:"Validation Error",message:"Please enter an address type",color:"red"});return}if(!E&&!e.file){w.N9.show({title:"Validation Error",message:"Please capture a photo or upload an image",color:"red"});return}if(!B){w.N9.show({title:"Location Required",message:"Device location is still loading or could not be fetched. Please wait a moment or try again.",color:"orange"}),Y();return}let i=M({addressType:e.addressType,location:B,address:F,imgSrc:E,pCId:e.pCId,note:e.note,meetupTime:e.meetupTime,file:e.file});try{await m(i).unwrap(),w.N9.show({title:"Success",message:"PC Meetup data submitted successfully!",color:"green"}),D(null),R(null),O(null),null==t||t()}catch(e){var s;console.error("Error submitting form:",e),w.N9.show({title:"Error",message:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to submit PC Meetup data",color:"red"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.J9,{initialValues:{pCId:"",addressType:""},onSubmit:J,children:e=>{let{values:t,setFieldValue:i}=e;return(0,s.jsx)(z.l0,{children:(0,s.jsxs)(n.Stack,{gap:"lg",children:[(0,s.jsx)(j.t,{label:"Select PC",placeholder:"Search by name or code",onOptionSubmit:e=>{e&&("object"==typeof e&&"id"in e?i("pCId",e.id):i("pCId",e))},required:!0}),(0,s.jsx)(f.TextInput,{label:"Address",required:!0,placeholder:"Enter address type (e.g., Chamber, Hospital, Residence)",value:t.addressType,onChange:e=>i("addressType",e.target.value)}),(0,s.jsx)(a.Group,{grow:!0,align:"flex-start",children:(0,s.jsx)(b.x,{label:"Meetup Time",placeholder:"Pick date and time",value:t.meetupTime,onChange:e=>i("meetupTime",e),maxDate:new Date})}),(0,s.jsx)(v.g,{label:"Note",placeholder:"Add any notes about the meetup...",value:t.note,onChange:e=>i("note",e.target.value),minRows:3}),(0,s.jsxs)(y.Box,{children:[(0,s.jsx)(o.Text,{fw:500,size:"sm",mb:5,children:"Take a Selfie or Upload Photo"}),(0,s.jsx)(C.S,{style:{display:"none"},ref:L,accept:"image/*",value:t.file,onChange:e=>{i("file",e),e&&(D(null),Y()),h()}}),(0,s.jsx)("div",{onClick:p,style:{border:"2px dashed #ced4da",borderRadius:"8px",padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:E||t.file?"#f8f9fa":"transparent",minHeight:"200px",transition:"background-color 0.2s"},children:E||t.file?(0,s.jsxs)(s.Fragment,{children:[E?(0,s.jsx)("img",{src:E,alt:"Captured",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}):t.file?(0,s.jsx)("img",{src:URL.createObjectURL(t.file),alt:"Uploaded",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},onLoad:e=>URL.revokeObjectURL(e.currentTarget.src)}):null,(0,s.jsx)(o.Text,{size:"xs",c:"dimmed",mt:"xs",children:"Click to change"})]}):(0,s.jsxs)(n.Stack,{align:"center",gap:"xs",children:[(0,s.jsx)(T.Z,{size:48,color:"#adb5bd"}),(0,s.jsx)(o.Text,{c:"dimmed",children:"Click to Take Photo or Upload"})]})}),(E||t.file)&&(0,s.jsx)(d.Button,{color:"red",variant:"subtle",size:"xs",mt:"sm",onClick:e=>{e.stopPropagation(),D(null),i("file",null),R(null),O(null)},children:"Remove Photo"})]}),(0,s.jsx)(d.Button,{type:"submit",fullWidth:!0,mt:"md",loading:g,children:"Submit Meetup"})]})})}}),(0,s.jsx)(c.u,{opened:x,onClose:h,title:"Select Image Source",centered:!0,size:"sm",children:(0,s.jsxs)(n.Stack,{children:[(0,s.jsx)(d.Button,{size:"lg",variant:"light",leftSection:(0,s.jsx)(S.Z,{size:24}),onClick:()=>{h(),r()},children:"Use Camera"}),(0,s.jsx)(o.Text,{ta:"center",size:"sm",c:"dimmed",children:"OR"}),(0,s.jsx)(d.Button,{size:"lg",variant:"light",leftSection:(0,s.jsx)(k.Z,{size:24}),onClick:()=>{L.current&&L.current.click()},children:"Upload Image"})]})}),(0,s.jsx)(c.u,{opened:i,onClose:l,title:"Take Photo",size:"lg",centered:!0,children:(0,s.jsxs)(n.Stack,{align:"center",children:[(0,s.jsx)("div",{style:{width:"100%",borderRadius:"8px",overflow:"hidden",backgroundColor:"black"},children:(0,s.jsx)("video",{ref:I,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",display:"block",maxHeight:"60vh",objectFit:"contain",transform:"scaleX(-1)"}})}),(0,s.jsx)("canvas",{ref:Z,style:{display:"none"}}),(0,s.jsx)(d.Button,{onClick:W,fullWidth:!0,leftSection:(0,s.jsx)(S.Z,{}),children:"Capture"})]})})]})};var L=()=>{let[e,{open:t,close:i}]=(0,u.q)(!1),j=(0,m.C)(e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.role});return(0,s.jsxs)(r.Container,{size:"xl",py:"md",children:[(0,s.jsxs)(n.Stack,{gap:"lg",children:[(0,s.jsxs)(a.Group,{justify:"space-between",align:"center",children:[(0,s.jsxs)(n.Stack,{gap:0,children:[(0,s.jsxs)(a.Group,{gap:"xs",children:[(0,s.jsx)(x.Z,{size:24,color:"green"}),(0,s.jsx)(l.Title,{order:2,children:"PC Meetup History"})]}),(0,s.jsx)(o.Text,{size:"sm",c:"dimmed",children:"View and manage your PC visit records"})]}),(0,s.jsx)(d.Button,{leftSection:(0,s.jsx)(p.Z,{size:18}),color:"green",size:"md",onClick:t,children:"New PC VISIT"})]}),(0,s.jsx)(g.Z,{isAdmin:"admin"===j})]}),(0,s.jsx)(c.u,{opened:e,onClose:i,title:(0,s.jsxs)(a.Group,{gap:"xs",children:[(0,s.jsx)(h.Z,{size:20,color:"green"}),(0,s.jsx)(o.Text,{fw:700,children:"Log New PC Visit"})]}),size:"lg",centered:!0,children:(0,s.jsx)(Z,{onSuccess:i})})]})}},70150:function(e,t,i){"use strict";var s=i(68328),r=i(4505),n=i(41224),a=i(48604),l=i(22614),o=i(68242),d=i(31204),c=i(29663),u=i(87967),x=i(14587),p=i(89043),h=i(22041),m=i(32451),g=i(77303),j=i(7140),f=i(22975),v=i(25621),y=i(23138),C=i(11114),b=i(77052),w=i(9286),T=i(37947),S=i(67781),k=i(86083),z=i(42484),P=i(34499),I=i(98073),G=i(29076),M=i(71140),A=i(29013),Z=i(92671),L=i(55168),E=i(75540),D=i(1860),N=i.n(D),U=i(25499);t.Z=e=>{var t,i,D,B;let{isAdmin:R=!1}=e,[F,O]=(0,r.useState)(null),[V,q]=(0,r.useState)(null),[H,_]=(0,r.useState)(""),[Y,W]=(0,r.useState)(""),[J,X]=(0,r.useState)(1),[K]=(0,r.useState)(12),[Q,$]=(0,r.useState)(null),[ee,et]=(0,r.useState)(!1),ei=(0,U.C)(e=>e.diagnostic.marketer)||[],{data:es,isLoading:er}=(0,E.K0)({limit:1e3}),en={startDate:null==F?void 0:F.toISOString(),endDate:null==V?void 0:V.toISOString(),pcId:H||void 0,...R?{marketerId:Y||void 0}:{},page:J,limit:K},ea=(0,L.C_)(en,{skip:!R}),el=(0,L.H0)(en,{skip:R}),{data:eo,isLoading:ed,isError:ec,refetch:eu}=R?ea:el,ex=(null==eo?void 0:eo.data)||[],ep=(null==eo?void 0:eo.pagination)||{totalPages:1,total:0};console.log(ex);let{data:eh,isLoading:em}=(0,L.DM)(Q,{skip:!Q}),eg=null==eh?void 0:eh.data,ej=e=>{$(e),et(!0)};return(0,s.jsxs)(n.Stack,{gap:"lg",children:[(0,s.jsxs)(a.Z,{shadow:"sm",padding:"md",radius:"md",withBorder:!0,children:[(0,s.jsxs)(l.Group,{justify:"space-between",mb:"xs",children:[(0,s.jsxs)(l.Group,{gap:"xs",children:[(0,s.jsx)(w.Z,{size:18}),(0,s.jsx)(o.Title,{order:4,children:"Filters"})]}),(0,s.jsx)(d.Button,{variant:"subtle",color:"red",size:"xs",leftSection:(0,s.jsx)(T.Z,{size:14}),onClick:()=>{O(null),q(null),_(""),W(""),X(1)},children:"Clear Filters"})]}),(0,s.jsxs)(c.Grid,{align:"flex-end",children:[(0,s.jsx)(c.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(b.DatePickerInput,{label:"Start Date",placeholder:"Pick start date",value:F,onChange:e=>{O(e),X(1)},leftSection:(0,s.jsx)(S.Z,{size:18}),clearable:!0})}),(0,s.jsx)(c.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(b.DatePickerInput,{label:"End Date",placeholder:"Pick end date",value:V,onChange:e=>{q(e),X(1)},leftSection:(0,s.jsx)(S.Z,{size:18}),clearable:!0})}),R&&(0,s.jsx)(c.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(u.P,{label:"Marketer",placeholder:"Filter by marketer",data:ei.map(e=>({value:e.id,label:e.name||e.email})),value:Y,onChange:e=>{W(e||""),X(1)},clearable:!0,searchable:!0})}),(0,s.jsx)(c.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(u.P,{label:"PC",placeholder:"Filter by PC",data:((null==es?void 0:es.data)||[]).map(e=>({value:e.id,label:e.pcCode?"".concat(e.name," (").concat(e.pcCode,")"):e.name})),value:H,onChange:e=>{_(e||""),X(1)},clearable:!0,searchable:!0,leftSection:er?(0,s.jsx)(x.Loader,{size:"xs"}):(0,s.jsx)(k.Z,{size:18})})})]})]}),ed?(0,s.jsx)(l.Group,{justify:"center",py:"xl",children:(0,s.jsx)(x.Loader,{size:"xl"})}):ec?(0,s.jsxs)(p.X,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,ta:"center",children:[(0,s.jsx)(h.Text,{c:"red",children:"Failed to load PC visits. Please try again."}),(0,s.jsx)(d.Button,{mt:"md",variant:"light",onClick:()=>eu(),children:"Retry"})]}):0===ex.length?(0,s.jsx)(p.X,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,ta:"center",children:(0,s.jsxs)(n.Stack,{align:"center",gap:"xs",children:[(0,s.jsx)(z.Z,{size:48,color:"gray",opacity:.5}),(0,s.jsx)(h.Text,{c:"dimmed",children:"No PC visits found matching your filters."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Grid,{gutter:"md",children:ex.map(e=>{var t,i,r,d;return(0,s.jsx)(c.Grid.Col,{span:{base:12,sm:6,lg:4},children:(0,s.jsxs)(a.Z,{shadow:"sm",padding:"md",radius:"md",withBorder:!0,style:{cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onClick:()=>ej(e.id),onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=""},children:[(0,s.jsx)(a.Z.Section,{children:(0,s.jsx)(m.Box,{pos:"relative",children:(0,s.jsx)("img",{src:e.imageUrl,alt:"Visit",style:{height:180,width:"100%",objectFit:"cover"},onError:e=>{e.target.src="https://placehold.co/400x200?text=No+Image"}})})}),(0,s.jsxs)(n.Stack,{gap:"xs",mt:"md",children:[(0,s.jsxs)(l.Group,{justify:"space-between",align:"flex-start",children:[(0,s.jsx)(o.Title,{order:5,lineClamp:1,children:(null===(t=e.pc)||void 0===t?void 0:t.name)||"Unknown PC"}),(0,s.jsxs)(h.Text,{size:"xs",c:"green",fw:700,children:["#",null===(i=e.pc)||void 0===i?void 0:i.pcCode]})]}),R&&(0,s.jsxs)(l.Group,{gap:5,wrap:"nowrap",children:[(0,s.jsx)(P.Z,{size:14,color:"gray"}),(0,s.jsxs)(h.Text,{size:"xs",c:"dimmed",children:["Marketer:"," ",(0,s.jsx)("strong",{children:(null===(r=e.marketer)||void 0===r?void 0:r.name)||(null===(d=e.marketer)||void 0===d?void 0:d.email)||"N/A"})]})]}),(0,s.jsx)(g.Divider,{variant:"dashed"}),(0,s.jsxs)(l.Group,{gap:5,wrap:"nowrap",align:"flex-start",children:[(0,s.jsx)(I.Z,{size:16,color:"blue"}),(0,s.jsxs)(m.Box,{style:{flex:1},children:[(0,s.jsxs)(h.Text,{size:"xs",fw:500,lineClamp:1,children:["Location: ",e.userLocation]}),R&&(0,s.jsxs)(h.Text,{size:"xs",lineClamp:1,children:["Device: ",e.deviceLocation]})]})]}),(0,s.jsxs)(l.Group,{gap:5,children:[(0,s.jsx)(S.Z,{size:16,color:"orange"}),(0,s.jsx)(h.Text,{size:"xs",children:N()(e.visitedAt).format("MMM DD, YYYY hh:mm A")})]}),e.note&&"null"!==e.note&&(0,s.jsxs)(l.Group,{gap:5,wrap:"nowrap",align:"flex-start",children:[(0,s.jsx)(G.Z,{size:16,color:"gray"}),(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",lineClamp:2,children:e.note})]}),(0,s.jsx)(g.Divider,{variant:"dashed"}),(0,s.jsxs)(l.Group,{justify:"space-between",children:[(0,s.jsx)(h.Text,{size:"xs",c:"dimmed"}),(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:N()(e.createdAt).fromNow()})]})]})]})},e.id)})}),ep.totalPages>1&&(0,s.jsx)(l.Group,{justify:"center",mt:"xl",children:(0,s.jsx)(j.t,{total:ep.totalPages,value:J,onChange:X,color:"green"})})]}),(0,s.jsx)(f.u,{opened:ee,onClose:()=>{et(!1),$(null)},title:(0,s.jsxs)(l.Group,{gap:"xs",children:[(0,s.jsx)(z.Z,{size:20}),(0,s.jsx)(h.Text,{fw:600,children:"PC Visit Details"})]}),size:"lg",centered:!0,children:em?(0,s.jsxs)(n.Stack,{gap:"md",children:[(0,s.jsx)(v.O,{height:250,radius:"md"}),(0,s.jsx)(v.O,{height:20,width:"60%"}),(0,s.jsx)(v.O,{height:15,width:"40%"}),(0,s.jsx)(v.O,{height:100})]}):eg?(0,s.jsxs)(n.Stack,{gap:"md",children:[(0,s.jsx)(m.Box,{style:{borderRadius:"var(--mantine-radius-md)",overflow:"hidden"},children:(0,s.jsx)(y.E,{src:eg.imageUrl,alt:"Visit Image",height:280,fit:"cover",fallbackSrc:"https://placehold.co/600x300?text=No+Image"})}),(0,s.jsxs)(a.Z,{withBorder:!0,padding:"sm",radius:"md",bg:"gray.0",children:[(0,s.jsxs)(l.Group,{justify:"space-between",align:"flex-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.Group,{gap:"xs",mb:4,children:[(0,s.jsx)(M.Z,{size:18,color:"var(--mantine-color-blue-6)"}),(0,s.jsx)(o.Title,{order:4,children:(null===(t=eg.pc)||void 0===t?void 0:t.name)||"Unknown PC"})]}),(null===(i=eg.pc)||void 0===i?void 0:i.pcCode)&&(0,s.jsxs)(C.C,{color:"green",variant:"light",size:"sm",children:["Code: ",eg.pc.pcCode]})]}),(null===(D=eg.pc)||void 0===D?void 0:D.phone)&&(0,s.jsxs)(l.Group,{gap:4,children:[(0,s.jsx)(A.Z,{size:14}),(0,s.jsx)(h.Text,{size:"sm",children:eg.pc.phone})]})]}),(null===(B=eg.pc)||void 0===B?void 0:B.address)&&(0,s.jsxs)(h.Text,{size:"sm",c:"dimmed",mt:"xs",children:[(0,s.jsx)(I.Z,{size:14,style:{display:"inline",marginRight:4}}),eg.pc.address]})]}),eg.marketer&&(0,s.jsxs)(a.Z,{withBorder:!0,padding:"sm",radius:"md",children:[(0,s.jsxs)(l.Group,{gap:"xs",mb:"xs",children:[(0,s.jsx)(P.Z,{size:18,color:"var(--mantine-color-violet-6)"}),(0,s.jsx)(h.Text,{fw:600,children:"Marketer Information"})]}),(0,s.jsxs)(l.Group,{gap:"lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:"Name"}),(0,s.jsx)(h.Text,{size:"sm",fw:500,children:eg.marketer.name||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:"Email"}),(0,s.jsx)(h.Text,{size:"sm",fw:500,children:eg.marketer.email})]})]})]}),R&&(0,s.jsxs)(a.Z,{withBorder:!0,padding:"sm",radius:"md",children:[(0,s.jsxs)(l.Group,{gap:"xs",mb:"xs",children:[(0,s.jsx)(I.Z,{size:18,color:"var(--mantine-color-teal-6)"}),(0,s.jsx)(h.Text,{fw:600,children:"Location Details"})]}),(0,s.jsxs)(n.Stack,{gap:"xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:"User Location"}),(0,s.jsx)(h.Text,{size:"sm",children:eg.userLocation||"Not available"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:"Device Location"}),(0,s.jsx)(h.Text,{size:"sm",children:eg.deviceLocation||"Not available"})]})]})]}),(0,s.jsxs)(a.Z,{withBorder:!0,padding:"sm",radius:"md",children:[(0,s.jsxs)(l.Group,{gap:"xs",mb:"xs",children:[(0,s.jsx)(Z.Z,{size:18,color:"var(--mantine-color-orange-6)"}),(0,s.jsx)(h.Text,{fw:600,children:"Visit Information"})]}),(0,s.jsxs)(n.Stack,{gap:"xs",children:[(0,s.jsx)(l.Group,{gap:"lg",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:"Visited At"}),(0,s.jsx)(h.Text,{size:"sm",fw:500,children:N()(eg.visitedAt).format("MMMM DD, YYYY hh:mm A")})]})}),eg.note&&"null"!==eg.note&&(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.Group,{gap:"xs",mb:4,children:[(0,s.jsx)(G.Z,{size:14}),(0,s.jsx)(h.Text,{size:"xs",c:"dimmed",children:"Note"})]}),(0,s.jsx)(h.Text,{size:"sm",style:{whiteSpace:"pre-wrap"},children:eg.note})]})]})]})]}):(0,s.jsx)(h.Text,{c:"dimmed",ta:"center",py:"xl",children:"No details available for this visit."})})]})}},68232:function(e,t,i){"use strict";i.d(t,{t:function(){return j}});var s=i(68328),r=i(74559),n=i(25499),a=i(75540),l=i(87967),o=i(31204),d=i(22041),c=i(14587),u=i(11445),x=i(22975),p=i(46557),h=i(23583),m=i(4505),g=i(17135);let j=(0,m.memo)(function(e){let{pcName:t,label:i="Select PC",mt:j="md",isFloat:f,onOptionSubmit:v,...y}=e,C=(0,n.C)(r.nC),[b,{open:w,close:T}]=(0,p.q)(!1),[S,k,{setValue:z}]=(0,h.U$)("pCId"),{data:P,isLoading:I}=(0,a.JC)(),G=(0,m.useMemo)(()=>{var e,t;return(null==P?void 0:null===(t=P.data)||void 0===t?void 0:null===(e=t.items)||void 0===e?void 0:e.map(e=>({value:e.id,label:e.pcCode?"".concat(e.name," (").concat(e.pcCode,")"):e.name,original:e})))||[]},[P]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.P,{label:i,placeholder:"Search by name or code",data:G,value:S.value?String(S.value):null,onChange:e=>{z(e||"");let t=G.find(t=>t.value===e);t?null==v||v(t.original):null==v||v(null)},searchable:!0,clearable:!0,nothingFoundMessage:"receptionist"===C||"admin"===C?(0,s.jsx)(o.Button,{variant:"subtle",onClick:w,fullWidth:!0,size:"xs",children:"Add new PC"}):(0,s.jsx)(d.Text,{size:"sm",c:"dimmed",ta:"center",children:"No PC Found"}),maxDropdownHeight:200,mt:j,error:k.touched&&k.error,rightSection:I?(0,s.jsx)(c.Loader,{size:"xs"}):null,filter:e=>{let{options:t,search:i}=e,s=i.toLowerCase().trim().split(" ");return t.filter(e=>{let t=e.label.toLowerCase().trim().split(" ");return s.every(e=>t.some(t=>t.includes(e)))})},...y}),(0,s.jsx)(u.h,{children:(0,s.jsx)(x.u,{opened:b,onClose:T,title:"Add New PC",centered:!0,children:(0,s.jsx)(g._,{onValue:e=>{(null==e?void 0:e.id)&&(z(e.id),null==v||v(e)),T()}})})})]})})},72940:function(e,t,i){"use strict";i.d(t,{FD:function(){return r},Hn:function(){return s},y4:function(){return n}});let s={headers:{"Content-Type":"application/json"}},r={withCredentials:!0},n={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},55168:function(e,t,i){"use strict";i.d(t,{C_:function(){return n},DM:function(){return a},H0:function(){return s},to:function(){return r}});let{useGetPCMeetupQuery:s,useAddPCMeetupMutation:r,useGetPCMeetupAdminQuery:n,useGetPCMeetupByIdQuery:a}=i(78101).g.injectEndpoints({endpoints:e=>({getPCMeetup:e.query({query:e=>({url:"/pcVisit",method:"GET",params:e}),providesTags:["PCMeetup"]}),addPCMeetup:e.mutation({query:e=>({url:"/pcVisit",method:"POST",body:e}),invalidatesTags:["PCMeetup"]}),getPCMeetupAdmin:e.query({query:e=>({url:"/pcVisit/admin",method:"GET",params:e}),providesTags:["PCMeetup"]}),getPCMeetupById:e.query({query:e=>({url:"/pcVisit/".concat(e),method:"GET"}),providesTags:["PCMeetup"]})})})},78101:function(e,t,i){"use strict";i.d(t,{g:function(){return l}});var s=i(49854),r=i(68240),n=i(94183),a=i(28317);let l=(0,r.LC)({baseQuery:(0,n.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async i=>{let r="string"==typeof e?e:e.url;return r.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,a.t8)(r,await i.clone().json().catch(()=>null),(0,s.x)()),i}).catch(async i=>{if(i instanceof TypeError){let i="string"==typeof e?e:e.url;if(!i.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,a.U2)(i,(0,s.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw i})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},74559:function(e,t,i){"use strict";i.d(t,{Im:function(){return a},av:function(){return n},nC:function(){return r}});let s=(0,i(79258).createSlice)({name:"auth",initialState:{isAuth:null,user:null,isProfileIncomplete:!1,diagnostic:null},reducers:{setUser:(e,t)=>{var i;e.user=t.payload,e.isAuth=!!t.payload,(null===(i=t.payload)||void 0===i?void 0:i.name)?localStorage.setItem("name",t.payload.name):localStorage.removeItem("name")},setDiagnostic:(e,t)=>{let i=t.payload;"hospital.sasthotech.com"===window.location.hostname?i.activeLogo=i.logo:i.activeLogo=i.offlineLogo,e.diagnostic=i},setProfileIncomplete:(e,t)=>{e.isProfileIncomplete=t.payload}}}),r=e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.role},{setUser:n,setDiagnostic:a}=s.actions;t.ZP=s.reducer},25499:function(e,t,i){"use strict";i.d(t,{C:function(){return n},T:function(){return r}});var s=i(53502);let r=()=>(0,s.I0)(),n=s.v9},49854:function(e,t,i){"use strict";let s;i.d(t,{d:function(){return d},x:function(){return o}});var r=i(72940),n=i(6780),a=i(67732),l=i(28317);function o(){return s||(s=(0,l.MT)("cached-responses-store","cached-responses")),s}async function d(e,t){try{let i=await n.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...r.FD});return await (0,l.t8)(e,i.data,o()),i.data}catch(t){if(t instanceof a.d7&&[a.d7.ERR_NETWORK,a.d7.ETIMEDOUT].includes(t.code)){let t=await (0,l.U2)(e,o());if(t)return t}throw t instanceof a.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[1601,2975,7852,748,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,3583,7186,4193,1493,9669,7140,3204,7487,7135,9175,7402,1744],function(){return e(e.s=95690)}),_N_E=e.O()}]);