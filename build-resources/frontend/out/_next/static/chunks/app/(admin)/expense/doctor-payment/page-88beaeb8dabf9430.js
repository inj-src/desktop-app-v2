(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1210,1054],{91054:function(){},53538:function(e,t,i){Promise.resolve().then(i.bind(i,85123))},85123:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return ez}});var n=i(68328),s=i(27405),o=i(34473),l=i(41224),r=i(4505),a=i(77379),d=i(89043),c=i(16391),u=i(32451),m=i(22041),h=i(31204),x=i(77052),f=i(67781),g=i(69861),p=i(37003),j=i(87967),v=i(14587),y=i(22614),w=i(86083);let b=e=>"৳".concat(e.toLocaleString()),S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function T(e){let{onTestSelect:t}=e,[i,s]=(0,r.useState)([]),[o,l]=(0,r.useState)(null),[a,d]=(0,r.useState)(!1),[c,h]=(0,r.useState)(""),x=(0,r.useCallback)(async()=>{d(!0);try{let e=await (0,p.p)(void 0,!0);s(e.data.items||[])}catch(e){console.error("Error fetching tests:",e),s([])}finally{d(!1)}},[]);(0,r.useEffect)(()=>{x()},[x]);let f=i.map(e=>({value:e.id,label:e.name,test:e}));return(0,n.jsx)(j.P,{placeholder:"Search and select test...",data:f,value:o?o.id:null,onChange:e=>{if(e){let i=f.find(t=>t.value===e);i&&(l(i.test),t(i.test))}},searchable:!0,searchValue:c,onSearchChange:h,clearable:!0,onClear:()=>{h(""),l(null),t(null)},leftSection:(0,n.jsx)(w.Z,{size:16}),rightSection:a?(0,n.jsx)(v.Loader,{size:16}):void 0,size:"md",comboboxProps:{shadow:"md",transitionProps:{transition:"pop",duration:200}},renderOption:e=>{var t;let{option:i}=e,s=null===(t=f.find(e=>e.value===i.value))||void 0===t?void 0:t.test;return s?(0,n.jsx)(u.Box,{p:"xs",children:(0,n.jsx)(y.Group,{justify:"space-between",wrap:"nowrap",children:(0,n.jsxs)(u.Box,{style:{flex:1,minWidth:0},children:[(0,n.jsx)(m.Text,{size:"sm",fw:500,truncate:!0,children:s.name}),(0,n.jsx)(y.Group,{gap:6,mt:2,children:(0,n.jsx)(m.Text,{size:"xs",c:"dimmed",children:b(s.price||0)})})]})})}):i.label},filter:e=>{let{options:t,search:i}=e;return t},nothingFoundMessage:0===c.length?(0,n.jsx)(m.Text,{size:"sm",c:"dimmed",ta:"center",py:"sm",children:"Start typing to search tests..."}):(0,n.jsxs)(m.Text,{size:"sm",c:"dimmed",ta:"center",py:"sm",children:['No tests found for "',c,'"']}),maxDropdownHeight:300})}function z(e){let{dateRange:t,setDateRange:i,paidDateRange:s,setPaidDateRange:o,commissionFilter:r,setCommissionFilter:p,selectedItems:j,selectedTestForQuery:v,setSelectedTestForQuery:y,onBulkPayment:w}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.s,{value:r,onChange:p,size:"md",radius:"md",data:[{label:"All",value:"all"},{label:"Pending",value:"unpaid"},{label:"Paid",value:"paid"}],fullWidth:!0}),(0,n.jsx)(d.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:(0,n.jsxs)(c.k,{gap:"lg",align:"end",wrap:"wrap",children:[(0,n.jsx)(u.Box,{style:{width:"max-content"},children:(0,n.jsxs)(l.Stack,{gap:4,children:[(0,n.jsx)(m.Text,{size:"sm",fw:500,c:"dark.7",children:"Add Test"}),(0,n.jsx)(T,{onTestSelect:e=>{console.log("Selected test for commission setup:",e),y(e)}})]})}),"paid"===r&&(0,n.jsx)(u.Box,{style:{width:"max-content"},children:(0,n.jsx)(x.DatePickerInput,{type:"range",placeholder:"Select payment date range",label:"Payment Date Range",value:s,onChange:o,leftSection:(0,n.jsx)(f.Z,{size:18}),clearable:!0,size:"md",radius:"md"})}),(0,n.jsx)(u.Box,{style:{width:"max-content"},children:(0,n.jsx)(x.DatePickerInput,{type:"range",placeholder:"Select date range",label:"Date Range",value:t,onChange:i,leftSection:(0,n.jsx)(f.Z,{size:18}),clearable:!0,size:"md",radius:"md"})}),j.length>0&&(0,n.jsx)(u.Box,{style:{marginLeft:"auto"},children:(0,n.jsxs)(h.Button,{leftSection:(0,n.jsx)(g.Z,{size:18}),size:"md",color:"green",onClick:w,children:["Pay ",j.length]})})]})})]})}var C=i(68242),D=i(11114),P=i(40573),A=i(9326);function k(e){let{stats:t}=e;return(0,n.jsx)(d.X,{p:"xl",radius:"lg",withBorder:!0,bg:"gradient-to-r from-blue-50 to-indigo-50",style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},children:(0,n.jsxs)(c.k,{justify:"space-between",align:"center",children:[(0,n.jsxs)(u.Box,{children:[(0,n.jsx)(C.Title,{order:1,size:"h2",c:"dark.7",mb:"xs",children:"Doctor Commission Management"}),(0,n.jsx)(m.Text,{size:"lg",c:"dimmed",mb:"sm",children:"Track and manage doctor commission payments for diagnostic tests"}),(0,n.jsxs)(y.Group,{gap:"lg",children:[(0,n.jsxs)(D.C,{size:"lg",variant:"light",color:"blue",leftSection:(0,n.jsx)(P.Z,{size:14}),children:[t.totalTests," Total Tests"]}),(0,n.jsxs)(D.C,{size:"lg",variant:"light",color:"orange",leftSection:(0,n.jsx)(A.Z,{size:14}),children:[t.unpaidTests," Pending"]})]})]}),(0,n.jsx)(y.Group,{})]})})}var B=i(58539),N=i(22975),I=i(58812),G=i(77303),Z=i(89822),R=i(35288),F=i(82e3),M=i(59406),E=i(90660),W=i.n(E),L=i(65850),U=i(25499),H=i(62549),Y=i(25985),O=i(26809),_=i(84153),V=i(71149),X=i(33908),q=i.n(X);let Q=L.mM.create({page:{padding:10},table:{width:"100%",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tableRow:{flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,padding:5,fontSize:10,textAlign:"center"},tableHeader:{fontWeight:"bold",textAlign:"center",backgroundColor:"#f8f9fa",fontSize:11},reportTitle:{fontSize:16,fontWeight:"bold",marginBottom:10,marginTop:15,textAlign:"center"},doctorInfo:{fontSize:14,marginBottom:15,textAlign:"center",fontWeight:"bold"},summarySection:{marginTop:15,padding:10,backgroundColor:"#f8f9fa",borderWidth:1,borderStyle:"solid"},summaryText:{fontSize:12,marginBottom:5},totalAmount:{fontSize:14,fontWeight:"bold",textAlign:"right",marginTop:10},signatureSection:{position:"absolute",bottom:30,left:30,width:"40%"},signatureLine:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"#000",width:"100%",marginBottom:5,height:40},signatureText:{fontSize:10,textAlign:"center"}});L.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});var K=e=>{let{paymentData:t,doctorName:i,reportPeriod:s,paidBy:o}=e,l=(0,U.C)(e=>e.auth.user),r=(0,U.C)(e=>e.auth.diagnostic),a=(0,V.q)(),d={name:(null==r?void 0:r.name)||"",address:(null==r?void 0:r.address)||"",phone1:(null==r?void 0:r.phone1)||"",phone2:(null==r?void 0:r.phone2)||"",division:(null==r?void 0:r.division)||"",logo:(null==r?void 0:r.logo)||"",id:(null==r?void 0:r.id)||"",city:(null==r?void 0:r.city)||"",paymentDate:(null==r?void 0:r.paymentDate)||"",admin:(null==r?void 0:r.admin)||""},c=(0,U.C)(e=>e.dates),u=null==l?void 0:l.name,m=t.reduce((e,t)=>e+t.amount,0),h=()=>(0,n.jsx)(L.BB,{children:(0,n.jsxs)(L.T3,{size:"A4",style:Q.page,children:[a&&(0,n.jsx)(Y.Z,{diagnosticState:d,pageSize:"A4"}),(0,n.jsx)(H.default,{diagnosticState:d}),(0,n.jsx)(O.Z,{small:!1,dates:c,userName:null!=u?u:""}),(0,n.jsx)(L.xv,{style:Q.reportTitle,children:"Doctor Payment Report"}),s&&(0,n.jsxs)(L.xv,{style:{fontSize:12,marginBottom:10,textAlign:"center"},children:["Period: ",q()(s.startDate).format("DD/MM/YYYY")," to"," ",q()(s.endDate).format("DD/MM/YYYY")]}),(0,n.jsxs)(L.xv,{style:{fontSize:12,marginTop:35,marginBottom:15},children:["Paid to: ",i]}),(0,n.jsxs)(L.G7,{style:Q.table,children:[(0,n.jsxs)(L.G7,{style:[Q.tableRow,Q.tableHeader],children:[(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"30%"}],children:"Test Name"}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"15%"}],children:"Bill ID"}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"15%"}],children:"Date"}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"15%"}],children:"Amount"}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"25%"}],children:"Doctor Name"})]}),null==t?void 0:t.map((e,t)=>(0,n.jsxs)(L.G7,{style:Q.tableRow,children:[(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"30%"}],children:e.testName}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"15%"}],children:e.billId}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"15%"}],children:q()(e.date).format("DD/MM/YYYY")}),(0,n.jsxs)(L.xv,{style:[Q.tableCol,{width:"15%"}],children:[e.amount.toLocaleString(),"TK"]}),(0,n.jsx)(L.xv,{style:[Q.tableCol,{width:"25%"}],children:e.doctorName})]},e.id||t))]}),(0,n.jsxs)(L.G7,{style:Q.summarySection,children:[(0,n.jsxs)(L.xv,{style:Q.summaryText,children:["Total Payment Records: ",t.length]}),(0,n.jsxs)(L.xv,{style:Q.summaryText,children:["Paid by: ",o]}),(0,n.jsxs)(L.xv,{style:Q.totalAmount,children:["Total Amount: ",m.toLocaleString(),"TK"]})]}),(0,n.jsxs)(L.G7,{style:Q.signatureSection,children:[(0,n.jsx)(L.G7,{style:Q.signatureLine}),(0,n.jsx)(L.xv,{style:Q.signatureText,children:"Authorized Signature"})]})]})});return(0,n.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,n.jsx)(_.Z,{PDFTemplate:()=>(0,n.jsx)(h,{})})})},J=i(46557),$=i(72940),ee=i(6780),et=i(67732);let ei=async e=>{try{let t=await ee.default.post("".concat("http://sasthotech.local:5000/api/v1","/billTest/pay-bill-test-doctor-commission"),e,{...$.FD,...$.Hn});return{success:!0,data:t.data.data}}catch(e){if(e instanceof et.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}};var en=i(29259);function es(e){let[t,i]=(0,r.useState)(e.value);return(0,r.useEffect)(()=>{let i=setTimeout(()=>{var i;void 0!==t&&(null===(i=e.onChange)||void 0===i||i.call(e,t))},200);return()=>{clearTimeout(i)}},[e,t]),(0,n.jsx)(en.Y,{...e,value:t,onChange:i})}function eo(e){let{opened:t,onClose:i,selectedTests:s,editableAmounts:o,updateAmount:c,onPaymentSuccess:x}=e,f=e=>{var t;return null!==(t=o[e.id])&&void 0!==t?t:e.doctorAmount},[p,{open:v,close:w}]=(0,J.q)(!1),[S,T]=(0,r.useState)(!1),[z,C]=(0,r.useState)("individual"),[P,A]=(0,r.useState)([]),[k,E]=(0,r.useState)(0),[L,H]=(0,r.useState)("cash"),[Y,O]=(0,r.useState)(null),[_,V]=(0,r.useState)(null),X=(0,U.C)(e=>e.auth.user),q=s.length>1;(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,B.c)();A(e.data.items||[])}catch(e){console.error("Error fetching doctors:",e)}})()},[]);let Q=e=>{if(!e||!e.info)return null;let t=e.info.map(e=>({id:e.id,testName:e.name,billId:e.bill.billId,date:e.createdAt,amount:e.doctorAmount,doctorName:e.bill.doctor.name})),i=e.info.length>0?e.info[0].bill.doctor.name:"",n=e.createdAt;return{paymentData:t,doctorName:i,reportPeriod:{startDate:n,endDate:n},paidBy:(null==X?void 0:X.name)||"Admin"}},$=async()=>{T(!0);let e=await ei({doctorId:Y,tests:s.map(e=>({id:e.id,doctorAmount:q&&"same"===z?k:f(e)}))});if(!e.success){T(!1),W().fire({title:"Payment Failed",text:e.data,icon:"error",confirmButtonText:"OK"});return}if(e.success){var t;T(!1),V(e.data),W().fire({title:"Payment Successful",text:"Commission payment for ".concat(q?"".concat(s.length," tests"):null===(t=s[0])||void 0===t?void 0:t.name," has been processed successfully."),icon:"success",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Print Receipt",preConfirm(){v()},didClose(){x()}})}},ee=()=>{E(0),C("individual"),H("cash"),V(null),i()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.u,{opened:t,onClose:ee,title:(0,n.jsxs)(y.Group,{children:[(0,n.jsx)(I.k,{color:"green",variant:"light",size:"lg",children:q?(0,n.jsx)(g.Z,{size:20}):(0,n.jsx)(R.Z,{size:20})}),(0,n.jsx)(m.Text,{fw:600,size:"lg",children:q?"Bulk Commission Payment (".concat(s.length," tests)"):"Confirm Commission Payment"})]}),size:"xl",radius:"md",children:(0,n.jsxs)(l.Stack,{gap:"lg",children:[q&&(0,n.jsx)(d.X,{p:"md",radius:"md",withBorder:!0,bg:"blue.0",children:(0,n.jsxs)(l.Stack,{gap:"md",children:[(0,n.jsxs)(y.Group,{justify:"space-between",children:[(0,n.jsx)(m.Text,{fw:600,size:"md",children:"Payment Mode"}),(0,n.jsxs)(D.C,{variant:"outline",size:"lg",children:[s.length," tests selected"]})]}),(0,n.jsx)(a.s,{value:z,onChange:e=>C(e),data:[{label:"Individual Amounts",value:"individual"},{label:"Same Amount for All",value:"same"}],fullWidth:!0}),"same"===z&&(0,n.jsxs)(y.Group,{align:"end",children:[(0,n.jsx)(es,{label:"Amount per test",placeholder:"Enter amount",value:k,onChange:e=>E(Number(e)),prefix:"৳",min:0,step:1,size:"md",style:{flex:1}}),(0,n.jsxs)(m.Text,{c:"dimmed",size:"sm",children:["Total: ",b(k*s.length)]})]})]})}),(0,n.jsx)(d.X,{p:"lg",radius:"md",withBorder:!0,bg:"gray.0",children:(0,n.jsx)(l.Stack,{gap:"md",children:(0,n.jsxs)(l.Stack,{gap:"md",children:[(0,n.jsxs)(y.Group,{justify:"space-between",children:[(0,n.jsx)(m.Text,{fw:600,size:"md",children:"Selected Tests"}),(0,n.jsx)(y.Group,{gap:"lg",children:(0,n.jsxs)(m.Text,{size:"sm",c:"dimmed",children:["Total Amount:"," ",(0,n.jsx)(m.Text,{span:!0,fw:600,c:"green",children:b("same"===z?k*s.length:s.reduce((e,t)=>e+f(t),0))})]})})]}),(0,n.jsx)(G.Divider,{}),(0,n.jsx)(Z.x,{h:200,children:(0,n.jsx)(l.Stack,{gap:"sm",children:s.map(e=>(0,n.jsx)(d.X,{p:"sm",radius:"sm",withBorder:!0,children:(0,n.jsxs)(y.Group,{justify:"space-between",children:[(0,n.jsxs)(u.Box,{style:{flex:1},children:[(0,n.jsx)(m.Text,{fw:500,size:"sm",children:e.name}),(0,n.jsxs)(y.Group,{gap:8,children:[(0,n.jsx)(m.Text,{size:"xs",c:"dimmed",children:e.bill.patient.name}),(0,n.jsx)(m.Text,{size:"xs",c:"dimmed",children:"•"}),(0,n.jsx)(m.Text,{size:"xs",c:"dimmed",children:e.bill.doctor.name})]})]}),"individual"===z?(0,n.jsx)(y.Group,{gap:8,children:"percentage"===e.doctorAmountType?(0,n.jsx)(es,{size:"xs",w:80,value:f(e),onChange:t=>c(e.id,Number(t)),suffix:"%",min:0,max:100,step:.1}):(0,n.jsx)(es,{size:"xs",w:100,value:f(e),onChange:t=>c(e.id,Number(t)),prefix:"৳",min:0,step:1})}):(0,n.jsx)(m.Text,{fw:600,size:"sm",c:"green",children:b(k)})]})},e.id))})})]})})}),(0,n.jsx)(m.Text,{c:"red",mt:"sm",children:"You must select a doctor to proceed with the payment."}),(0,n.jsx)(j.P,{searchable:!0,label:"Select Doctor",placeholder:"Choose a doctor",data:P.map(e=>({value:e.id,label:e.name})),required:!0,size:"md",radius:"md",onChange:e=>{e&&O(e)},leftSection:(0,n.jsx)(F.Z,{size:16}),maxDropdownHeight:300}),(0,n.jsxs)(y.Group,{justify:"flex-end",mt:"xl",children:[(0,n.jsx)(h.Button,{variant:"subtle",onClick:ee,size:"md",children:"Cancel"}),(0,n.jsxs)(h.Button,{color:"green",leftSection:(0,n.jsx)(M.Z,{size:18}),onClick:$,loading:S,size:"md",children:["Confirm Payment ",q?"(".concat(s.length," tests)"):""]})]})]})}),(0,n.jsx)(N.u,{opened:p,onClose:w,size:"80%",radius:0,transitionProps:{transition:"fade",duration:200},title:"Doctor Payment Report PDF",children:_&&(()=>{let e=Q(_);return e?(0,n.jsx)(K,{paymentData:e.paymentData,doctorName:e.doctorName,reportPeriod:e.reportPeriod,paidBy:e.paidBy}):(0,n.jsx)(m.Text,{children:"Error: Unable to generate PDF data"})})()})]})}var el=i(49905),er=i(48604),ea=i(77647),ed=i(92671),ec=i(94514);function eu(e){let{stats:t}=e;return(0,n.jsxs)(el.M,{cols:{base:1,sm:2,md:4},spacing:"lg",children:[(0,n.jsx)(er.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,h:130,children:(0,n.jsxs)(y.Group,{justify:"space-between",mb:"md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Text,{size:"xs",tt:"uppercase",fw:700,c:"dimmed",children:"Total Tests"}),(0,n.jsx)(m.Text,{fw:700,size:"xl",mt:4,children:t.totalTests})]}),(0,n.jsx)(I.k,{color:"blue",variant:"light",size:50,radius:"md",children:(0,n.jsx)(ea.Z,{size:26})})]})}),(0,n.jsx)(er.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,h:130,children:(0,n.jsxs)(y.Group,{justify:"space-between",mb:"md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Text,{size:"xs",tt:"uppercase",fw:700,c:"dimmed",children:"Pending Payment"}),(0,n.jsx)(m.Text,{fw:700,size:"xl",mt:4,c:"orange",children:t.unpaidTests})]}),(0,n.jsx)(I.k,{color:"orange",variant:"light",size:50,radius:"md",children:(0,n.jsx)(ed.Z,{size:26})})]})}),(0,n.jsx)(er.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,h:130,children:(0,n.jsxs)(y.Group,{justify:"space-between",mb:"md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Text,{size:"xs",tt:"uppercase",fw:700,c:"dimmed",children:"Unpaid Amount"}),(0,n.jsx)(m.Text,{fw:700,size:"xl",mt:4,c:"red",children:b(t.totalUnpaidAmount)})]}),(0,n.jsx)(I.k,{color:"red",variant:"light",size:50,radius:"md",children:(0,n.jsx)(ec.Z,{size:26})})]})}),(0,n.jsx)(er.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,h:130,children:(0,n.jsxs)(y.Group,{justify:"space-between",mb:"md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Text,{size:"xs",tt:"uppercase",fw:700,c:"dimmed",children:"Paid Amount"}),(0,n.jsx)(m.Text,{fw:700,size:"xl",mt:4,c:"green",children:b(t.totalPaidAmount)})]}),(0,n.jsx)(I.k,{color:"green",variant:"light",size:50,radius:"md",children:(0,n.jsx)(M.Z,{size:26})})]})})]})}var em=i(54632),eh=i(72375),ex=i(97428),ef=i(3741),eg=i(75865),ep=i(36409),ej=i(29013),ev=i(8720),ey=i(45437),ew=i(77255),eb=i(25564),eS=i(58185);function eT(e){var t,i,s,o,r,a;let{filteredData:c,selectedItems:x,setSelectedItems:f,editableAmounts:g,editingItems:p,toggleEdit:j,updateAmount:v,handlePayCommission:w}=e,T=e=>{var t;return null!==(t=g[e.id])&&void 0!==t?t:e.doctorAmount};return(0,n.jsxs)(d.X,{shadow:"sm",radius:"md",withBorder:!0,children:[(0,n.jsx)(Z.x,{children:(0,n.jsxs)(em.i,{highlightOnHover:!0,verticalSpacing:"md",horizontalSpacing:"lg",children:[(0,n.jsx)(em.i.Thead,{children:(0,n.jsxs)(em.i.Tr,{children:[(0,n.jsx)(em.i.Th,{w:50,children:(0,n.jsx)(eh.X,{onChange:e=>{e.currentTarget.checked?f(((null==c?void 0:c.filter(e=>!e.isDoctorCommissionPaid))||[]).map(e=>e.id)):f([])},checked:x.length===(null!==(o=null==c?void 0:null===(t=c.filter(e=>!e.isDoctorCommissionPaid))||void 0===t?void 0:t.length)&&void 0!==o?o:0)&&(null!==(r=null==c?void 0:null===(i=c.filter(e=>!e.isDoctorCommissionPaid))||void 0===i?void 0:i.length)&&void 0!==r?r:0)>0,indeterminate:x.length>0&&x.length<(null!==(a=null==c?void 0:null===(s=c.filter(e=>!e.isDoctorCommissionPaid))||void 0===s?void 0:s.length)&&void 0!==a?a:0)})}),(0,n.jsx)(em.i.Th,{children:"Test Information"}),(0,n.jsx)(em.i.Th,{children:"Patient Details"}),(0,n.jsx)(em.i.Th,{children:"Doctor"}),(0,n.jsx)(em.i.Th,{children:"Commission"}),(0,n.jsx)(em.i.Th,{children:"Status"}),(0,n.jsx)(em.i.Th,{w:120,children:"Actions"})]})}),(0,n.jsx)(em.i.Tbody,{children:null==c?void 0:c.map(e=>(0,n.jsxs)(em.i.Tr,{children:[(0,n.jsx)(em.i.Td,{children:(0,n.jsx)(eh.X,{checked:x.includes(e.id),onChange:t=>{t.currentTarget.checked?f([...x,e.id]):f(x.filter(t=>t!==e.id))},disabled:e.isDoctorCommissionPaid})}),(0,n.jsx)(em.i.Td,{children:(0,n.jsxs)(l.Stack,{gap:6,children:[(0,n.jsx)(m.Text,{fw:500,size:"sm",children:e.name}),(0,n.jsxs)(y.Group,{gap:8,children:[(0,n.jsx)(D.C,{variant:"outline",size:"sm",color:"blue",children:e.bill.billId}),(0,n.jsx)(m.Text,{size:"xs",c:"dimmed",children:S(e.createdAt)})]})]})}),(0,n.jsx)(em.i.Td,{children:(0,n.jsxs)(y.Group,{gap:12,children:[(0,n.jsx)(ex.q,{size:40,radius:"xl",color:"blue",children:e.bill.patient.name.charAt(0).toUpperCase()}),(0,n.jsxs)(u.Box,{children:[(0,n.jsx)(m.Text,{fw:500,size:"sm",children:e.bill.patient.name}),(0,n.jsxs)(y.Group,{gap:4,children:[(0,n.jsx)(ej.Z,{size:12,style:{color:"#868e96"}}),(0,n.jsx)(m.Text,{size:"xs",c:"dimmed",children:e.bill.patient.phone})]})]})]})}),(0,n.jsx)(em.i.Td,{children:(0,n.jsxs)(y.Group,{gap:8,maw:200,children:[(0,n.jsx)(I.k,{size:32,radius:"xl",color:"teal",variant:"light",children:(0,n.jsx)(ev.Z,{size:16})}),(0,n.jsx)(m.Text,{size:"sm",fw:500,children:e.bill.doctor.name})]})}),(0,n.jsx)(em.i.Td,{children:(0,n.jsxs)(l.Stack,{gap:4,children:[p.includes(e.id)&&!e.isDoctorCommissionPaid?(0,n.jsxs)(y.Group,{gap:8,children:["percentage"===e.doctorAmountType?(0,n.jsx)(es,{size:"sm",w:80,value:T(e),onChange:t=>v(e.id,Number(t)),suffix:"%",min:0,max:100,step:.1}):(0,n.jsx)(es,{size:"sm",w:100,value:T(e),onChange:t=>v(e.id,Number(t)),prefix:"৳",min:0,step:1}),(0,n.jsx)(ef.A,{size:"sm",color:"green",onClick:()=>j(e.id),children:(0,n.jsx)(M.Z,{size:14})})]}):(0,n.jsxs)(y.Group,{gap:8,children:["percentage"===e.doctorAmountType?(0,n.jsxs)(D.C,{variant:"filled",color:"violet",size:"lg",children:[T(e),"%"]}):(0,n.jsx)(m.Text,{fw:600,size:"sm",c:"green",children:b(T(e))}),!e.isDoctorCommissionPaid&&(0,n.jsx)(ef.A,{size:"sm",variant:"subtle",onClick:()=>j(e.id),children:(0,n.jsx)(ey.Z,{size:14})})]}),e.isDoctorCommissionPaid&&(0,n.jsxs)(m.Text,{size:"xs",c:"dimmed",children:["Paid"," ",e.doctorCommissionPaidAt?S(e.doctorCommissionPaidAt):""]})]})}),(0,n.jsx)(em.i.Td,{children:e.isDoctorCommissionPaid?(0,n.jsx)(D.C,{color:"green",variant:"light",leftSection:(0,n.jsx)(M.Z,{size:14}),size:"md",children:"Paid"}):(0,n.jsx)(D.C,{color:"orange",variant:"light",leftSection:(0,n.jsx)(ed.Z,{size:14}),size:"md",children:"Pending"})}),(0,n.jsx)(em.i.Td,{children:(0,n.jsxs)(u.Box,{style:{display:"flex",gap:4},children:[!e.isDoctorCommissionPaid&&(0,n.jsx)(h.Button,{size:"sm",variant:"filled",color:"green",leftSection:(0,n.jsx)(R.Z,{size:16}),onClick:()=>w(e.id),children:"Pay"}),(0,n.jsxs)(eg.v,{position:"bottom-end",shadow:"sm",children:[(0,n.jsx)(eg.v.Target,{children:(0,n.jsx)(ef.A,{variant:"subtle",size:"lg",children:(0,n.jsx)(ew.Z,{size:16})})}),(0,n.jsxs)(eg.v.Dropdown,{children:[(0,n.jsx)(eg.v.Item,{leftSection:(0,n.jsx)(eb.Z,{size:14}),children:"View Details"}),(0,n.jsx)(eg.v.Item,{leftSection:(0,n.jsx)(eS.Z,{size:14}),children:"Print Receipt"}),e.isDoctorCommissionPaid&&(0,n.jsx)(eg.v.Item,{leftSection:(0,n.jsx)(F.Z,{size:14}),children:"Payment History"})]})]})]})})]},e.id))})]})}),(null==c?void 0:c.length)===0&&(0,n.jsx)(ep.M,{p:"xl",children:(0,n.jsxs)(l.Stack,{align:"center",gap:"sm",children:[(0,n.jsx)(I.k,{size:60,radius:"xl",variant:"light",color:"gray",children:(0,n.jsx)(ea.Z,{size:30})}),(0,n.jsx)(m.Text,{size:"lg",fw:500,c:"dimmed",children:"No tests found"}),(0,n.jsx)(m.Text,{size:"sm",c:"dimmed",children:"Try adjusting your search or filter criteria"})]})})]})}var ez=function(){var e,t,i,a,d,c,u,m,h,x,f,g,p,j,v,y,w;let[b,S]=(0,r.useState)([new Date,new Date]),[T,C]=(0,r.useState)([new Date,new Date]),[D,P]=(0,r.useState)("all"),[A,B]=(0,r.useState)([]),[N,I]=(0,r.useState)(!1),[G,Z]=(0,r.useState)(null),[R,F]=(0,r.useState)({}),[M,E]=(0,r.useState)([]),{data:W,refetch:L}=(0,s.H1)({from:null===(e=b[0])||void 0===e?void 0:e.toISOString(),to:null===(t=b[1])||void 0===t?void 0:t.toISOString(),testId:null!==(v=null==G?void 0:G.id)&&void 0!==v?v:void 0}),U={totalTests:(null==W?void 0:null===(a=W.data)||void 0===a?void 0:null===(i=a.items)||void 0===i?void 0:i.length)||0,unpaidTests:(null==W?void 0:null===(c=W.data)||void 0===c?void 0:null===(d=c.items)||void 0===d?void 0:d.filter(e=>!e.isDoctorCommissionPaid).length)||0,paidTests:(null==W?void 0:null===(m=W.data)||void 0===m?void 0:null===(u=m.items)||void 0===u?void 0:u.filter(e=>e.isDoctorCommissionPaid).length)||0,totalUnpaidAmount:null!==(y=null==W?void 0:null===(x=W.data)||void 0===x?void 0:null===(h=x.items)||void 0===h?void 0:h.filter(e=>!e.isDoctorCommissionPaid).reduce((e,t)=>e+t.doctorAmount,0))&&void 0!==y?y:0,totalPaidAmount:null!==(w=null==W?void 0:null===(g=W.data)||void 0===g?void 0:null===(f=g.items)||void 0===f?void 0:f.filter(e=>e.isDoctorCommissionPaid).reduce((e,t)=>e+t.doctorAmount,0))&&void 0!==w?w:0},H=null==W?void 0:null===(j=W.data)||void 0===j?void 0:null===(p=j.items)||void 0===p?void 0:p.filter(e=>"unpaid"===D?!e.isDoctorCommissionPaid:"paid"!==D||e.isDoctorCommissionPaid),Y=(e,t)=>{F(i=>({...i,[e]:t}))};return(0,n.jsxs)(o.Container,{size:"xl",py:"md",children:[(0,n.jsxs)(l.Stack,{gap:"xl",children:[(0,n.jsx)(k,{stats:U}),(0,n.jsx)(eu,{stats:U}),(0,n.jsx)(z,{dateRange:b,setDateRange:S,paidDateRange:T,setPaidDateRange:C,commissionFilter:D,setCommissionFilter:P,selectedItems:A,selectedTestForQuery:G,setSelectedTestForQuery:Z,onBulkPayment:()=>{I(!0)}}),(0,n.jsx)(eT,{filteredData:H,selectedItems:A,setSelectedItems:B,editableAmounts:R,editingItems:M,toggleEdit:e=>{if(M.includes(e))E(M.filter(t=>t!==e));else{E([...M,e]);let t=null==H?void 0:H.find(t=>t.id===e);t&&F(i=>({...i,[e]:t.doctorAmount}))}},updateAmount:Y,handlePayCommission:e=>{B([e]),I(!0)}})]}),(0,n.jsx)(eo,{opened:N,onClose:()=>I(!1),selectedTests:(null==H?void 0:H.filter(e=>A.includes(e.id)))||[],editableAmounts:R,updateAmount:Y,onPaymentSuccess:()=>{B([]),I(!1),L()}})]})}},71149:function(e,t,i){"use strict";i.d(t,{AN:function(){return c},HG:function(){return r},J7:function(){return o},UA:function(){return d},dB:function(){return m},ev:function(){return l},q:function(){return u},tK:function(){return a}});var n=i(62471),s=i(4505);let o=["A4 portrait","A5 portrait","A4 landscape"],l=[["outdoor-bill","A5 portrait",60],["indoor-bill","A4 portrait",60,void 0,120],["indoor-admission-form","A4 portrait",90,"isHospitalManagement",120],["outdoor-summary","A4 portrait",90],["indoor-summary","A4 portrait",90,"isHospitalManagement"],["receptionist-summary","A4 portrait",90],["pc-payment","A5 portrait",60]];function r(e){let t=(0,s.useMemo)(()=>l.find(t=>t[0]===e),[e]),[i]=(0,n.I)({key:"".concat(e,"-print-page-size"),defaultValue:null==t?void 0:t[1]}),[o]=(0,n.I)({key:"".concat(e,"-print-page-scale"),defaultValue:null==t?void 0:t[2]});return"\n    @page { size: ".concat(i,";margin:10px 0px; }\n    :root { --mantine-scale: ").concat(+o/100,"; }\n    .fs-1{font-size:calc(var(--mantine-scale) * calc(1.375rem + 1.5vw))!important}\n    .fs-2{font-size:calc(var(--mantine-scale) * calc(1.325rem + .9vw))!important}\n    .fs-3{font-size:calc(var(--mantine-scale) * calc(1.3rem + .6vw))!important}\n    .fs-4{font-size:calc(var(--mantine-scale) * calc(1.275rem + .3vw))!important}\n    .fs-5{font-size:calc(var(--mantine-scale) * 1.25rem)!important}\n    .fs-6{font-size:calc(var(--mantine-scale) * 1rem)!important}")}function a(e){var t,i,o;let r=(0,s.useMemo)(()=>l.find(t=>t[0]===e),[e]),[a]=(0,n.I)({key:"".concat(e,"-print-page-height"),defaultValue:null!==(i=null==r?void 0:null===(t=r[4])||void 0===t?void 0:t.toString())&&void 0!==i?i:""});return a?+a:null!==(o=null==r?void 0:r[4])&&void 0!==o?o:100}function d(){let[e]=(0,n.I)({key:"selected-admission-template-id",defaultValue:"1"});return e?+e:1}function c(){let[e]=(0,n.I)({key:"selected-bill-template-id",defaultValue:"1"});return e?+e:1}function u(){let[e]=(0,n.I)({key:"print-watermark-enabled",defaultValue:"true"});return"true"===e}function m(){let[e]=(0,n.I)({key:"selected-appointment-token-template-id",defaultValue:"2"});return e?+e:2}},62549:function(e,t,i){"use strict";i.r(t),i.d(t,{LoadDiagnosticImageUrl:function(){return d}});var n=i(68328),s=i(4505),o=i(65850),l=i(62471),r=i(6780),a=i(25499);function d(){var e;let t=(0,a.C)(e=>e.auth.diagnostic),i="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")||window.location.hostname.includes("198")?null==t?void 0:t.offlineLogo:null!==(e=null==t?void 0:t.logo)&&void 0!==e?e:null,n="/images/demo-fallback-logo.png";return(0,s.useEffect)(()=>{if(!i||""===i.trim()){sessionStorage.setItem("diagnostic-logo",n);return}r.default.get(i,{headers:{"Cache-Control":"no-cache"},timeout:3e3,responseType:"blob"}).then(e=>{if(!e||!e.data)throw Error("Image not found or invalid response");let t=e.data;return new Promise((e,i)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=i,n.readAsDataURL(t)})}).then(e=>{sessionStorage.setItem("diagnostic-logo",e)}).catch(e=>{console.warn("Error loading primary image, using fallback:",e),sessionStorage.setItem("diagnostic-logo",n)})},[i,n,3e3]),null}let c=o.mM.create({container:{width:"100%",alignItems:"center",display:"flex",flexDirection:"row",gap:10},logoContainer:{width:100,height:80,marginBottom:10,position:"relative"},image:{width:"100%",height:"100%",objectFit:"contain",borderRadius:100},headerContainer:{width:"100%"},hospitalName:{fontSize:20,fontWeight:"bold",fontFamily:"NotoSans",marginBottom:4,textAlign:"left"},address:{fontSize:12,fontFamily:"NotoSans",marginBottom:2,textAlign:"left"},phone:{fontSize:12,fontFamily:"NotoSans",textAlign:"left"}});t.default=e=>{let{diagnosticState:t,fallbackImageUrl:i="/images/demo-fallback-logo.png",timeoutDuration:s=3e3}=e,r=(0,l._)({key:"print-show-division-name",defaultValue:"true"}),a=sessionStorage.getItem("diagnostic-logo")||i;return(0,n.jsxs)(o.G7,{style:c.container,children:[(0,n.jsx)(o.G7,{style:c.logoContainer,children:a&&(0,n.jsx)(o.Ee,{src:a,style:c.image})}),(0,n.jsxs)(o.G7,{style:c.headerContainer,children:[(0,n.jsx)(o.xv,{style:c.hospitalName,children:null==t?void 0:t.name}),(0,n.jsxs)(o.xv,{style:c.address,children:[null==t?void 0:t.address,"true"===r&&(null==t?void 0:t.division)?", ".concat(null==t?void 0:t.division):""]}),(0,n.jsxs)(o.xv,{style:c.phone,children:["Phone: ",null==t?void 0:t.phone1,(null==t?void 0:t.phone2)?", ".concat(null==t?void 0:t.phone2):""]})]})]})}},26809:function(e,t,i){"use strict";var n=i(68328);i(4505);var s=i(65850),o=i(97698);let l=s.mM.create({container:{paddingVertical:5,fontSize:12},group:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},text:{fontSize:12,fontWeight:700},circle:{width:6,height:6,borderRadius:3,backgroundColor:"black",marginHorizontal:2},divider:{borderTop:"1px solid #787878",marginVertical:3}});t.Z=e=>{var t,i,r,a;let{small:d,dates:c,userName:u}=e,m=e=>(0,o.Z)(e?new Date(e):new Date,"dd-MMM-yyyy");return(0,n.jsxs)(s.G7,{style:l.container,children:[(0,n.jsx)(s.G7,{style:l.divider}),(0,n.jsxs)(s.G7,{style:l.group,children:[(0,n.jsxs)(s.G7,{style:{flexDirection:"row",alignItems:"center"},children:[(0,n.jsx)(s.xv,{style:[l.text,{fontSize:10}],children:"Period : "}),(0,n.jsx)(s.xv,{style:[l.text,{fontSize:10}],children:m(null!==(a=null==c?void 0:null===(t=c.dates)||void 0===t?void 0:t[0])&&void 0!==a?a:new Date)}),(0,n.jsxs)(s.xv,{style:[l.text,{fontSize:10}],children:[" "," To "," "]}),(0,n.jsx)(s.xv,{style:[l.text,{fontSize:10}],children:m((null==c?void 0:null===(i=c.dates)||void 0===i?void 0:i[1])||(null==c?void 0:null===(r=c.dates)||void 0===r?void 0:r[0])||new Date)})]}),(0,n.jsx)(s.G7,{style:l.circle}),(0,n.jsxs)(s.xv,{style:[l.text,{fontSize:10}],children:["Printed By : ",u||"Unknown"]}),(0,n.jsx)(s.G7,{style:l.circle}),(0,n.jsxs)(s.xv,{style:[l.text,{fontSize:10,marginTop:"15px"}],children:["Print Time : ",(0,o.Z)(new Date,"MM/dd/yyyy : hh:mm a")]})]}),!d&&(0,n.jsx)(s.G7,{style:l.divider})]})}},84153:function(e,t,i){"use strict";var n=i(68328),s=i(89043),o=i(22041),l=i(41224),r=i(31204),a=i(9323),d=i(65850),c=i(42870),u=i(42116),m=i(4505);let h=(0,m.memo)(e=>{let{PDFTemplate:t}=e,[i,l]=(0,d.Eb)({document:(0,n.jsx)(t,{})});return((0,m.useEffect)(()=>{let e,s=0;return i.error&&(console.log("PDF ERROR: ",i.error),i.error&&s<3&&(e=setTimeout(()=>{console.log("Retrying PDF generation attempt ".concat(s+1,"/").concat(3)),l((0,n.jsx)(t,{})),s++},2e3))),()=>{e&&clearTimeout(e)}},[t,i.error,l]),i.loading)?(0,n.jsx)(s.X,{shadow:"xs",p:"xl",withBorder:!0,children:(0,n.jsx)(o.Text,{size:"lg",ta:"center",children:"Loading PDF..."})}):i.error?(0,n.jsx)(s.X,{shadow:"xs",p:"xl",withBorder:!0,bg:"red.1",children:(0,n.jsxs)(o.Text,{c:"red",size:"lg",ta:"center",children:["Error loading PDF. Attempting to reload...",JSON.stringify(i.error)]})}):(0,n.jsx)(x,{instance:i})});h.displayName="RenderReactPdfWithRetry";let x=(0,m.memo)(e=>{let{instance:t}=e,i=(0,a.a)("(max-width: 768px)");return t.url?i?(0,n.jsxs)(l.Stack,{align:"center",justify:"center",gap:"lg",p:"xl",h:"100%",children:[(0,n.jsx)(o.Text,{size:"lg",fw:500,ta:"center",c:"dimmed",children:"PDF preview is not available on mobile devices"}),(0,n.jsx)(r.Button,{component:"a",href:t.url,download:"document.pdf",leftSection:(0,n.jsx)(c.Z,{size:24}),children:"Download PDF"}),(0,n.jsx)(o.Text,{size:"sm",c:"dimmed",ta:"center",children:"Tap the button above to download and view the PDF"})]}):(0,n.jsx)("iframe",{src:t.url,width:"100%",height:"1000px",style:{border:"none"}}):null});x.displayName="PDFPreview",t.Z=(0,u.default)(()=>Promise.resolve(h),{ssr:!1})},25985:function(e,t,i){"use strict";var n=i(68328),s=i(65850),o=i(6780),l=i(4505);let r=s.mM.create({wrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",zIndex:-1},watermark:{opacity:.08}});t.Z=e=>{let{diagnosticState:t,fallbackImageUrl:i="/images/demo-fallback-logo.png",timeoutDuration:a=5e3,pageSize:d="A4"}=e,[c,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),[x,f]=(0,l.useState)(!1),g=(null==t?void 0:t.logo)||(null==t?void 0:t.offlineLogo)||null;if((0,l.useEffect)(()=>{if(!g){f(!0),h(!1);return}h(!0),(async()=>{try{let e=await o.default.get(g,{timeout:a,responseType:"blob"}),t=await new Promise((t,i)=>{let n=new FileReader;n.onload=()=>t(n.result),n.onerror=i,n.readAsDataURL(e.data)});u(t),f(!1)}catch(e){f(!0)}finally{h(!1)}})()},[g,a]),m)return null;let p=x?i:c;if(!p)return null;let j=d.includes("A5");return(0,n.jsx)(s.G7,{fixed:!0,style:r.wrapper,children:(0,n.jsx)(s.Ee,{src:p,style:[r.watermark,{width:j?250:450,height:j?250:450}]})})}},72940:function(e,t,i){"use strict";i.d(t,{FD:function(){return s},Hn:function(){return n},y4:function(){return o}});let n={headers:{"Content-Type":"application/json"}},s={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},58539:function(e,t,i){"use strict";i.d(t,{c:function(){return o}});var n=i(49854),s=i(67732);let o=async(e,t,i)=>{try{let s=new URLSearchParams(Object.fromEntries(Object.entries({page:e,limit:t,search:i}).filter(e=>{let[t,i]=e;return void 0!==i}).map(e=>{let[t,i]=e;return[t,String(i)]}))),o="admin/doctor?".concat(s.toString()),l=await (0,n.d)(o);return{success:!0,data:l.data}}catch(e){if(e instanceof s.d7){var o;return{success:!1,data:null===(o=e.response)||void 0===o?void 0:o.data.message}}return{success:!1,data:"An error occurred"}}}},37003:function(e,t,i){"use strict";i.d(t,{p:function(){return o}});var n=i(49854),s=i(67732);let o=async(e,t)=>{try{let i="test/admin",s=new URLSearchParams;e&&s.append("subTestCategoryId",e),void 0!==t&&s.append("isDoctorPayment",t.toString()),i+="?".concat(s.toString());let o=await (0,n.d)(i);return{success:!0,data:o.data}}catch(e){if(e instanceof s.d7){var i;return{success:!1,data:null===(i=e.response)||void 0===i?void 0:i.data.message}}return{success:!1,data:"An error occurred"}}}},78101:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});var n=i(49854),s=i(68240),o=i(94183),l=i(28317);let r=(0,s.LC)({baseQuery:(0,o.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async i=>{let s="string"==typeof e?e:e.url;return s.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,l.t8)(s,await i.clone().json().catch(()=>null),(0,n.x)()),i}).catch(async i=>{if(i instanceof TypeError){let i="string"==typeof e?e:e.url;if(!i.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,l.U2)(i,(0,n.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw i})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},27405:function(e,t,i){"use strict";i.d(t,{F1:function(){return s},H1:function(){return l},Py:function(){return r},lX:function(){return o}});let n=i(78101).g.injectEndpoints({endpoints:e=>({getSingleBillTest:e.query({query:e=>({url:"/billTest/".concat(e)}),keepUnusedDataFor:86400}),getPayableBillTests:e.query({query:e=>({url:"/billTest/payable-bill-test",params:e}),keepUnusedDataFor:86400}),updateBillTest:e.mutation({query:e=>{let{id:t,template:i,isTestSample:n,testTemplateId:s}=e;return{url:"/billTest/".concat(t),method:"PATCH",body:{template:i,isTestSample:n,testTemplateId:s}}},async onQueryStarted(e,t){let{id:i,template:s,isTestSample:o}=e,{dispatch:l,queryFulfilled:r}=t,a=l(n.util.updateQueryData("getSingleBillTest",i,e=>{void 0!==s&&(e.data.template=s),void 0!==o&&(e.data.isTestSample=o),e.data.loading=!0}));try{await r,l(n.util.updateQueryData("getSingleBillTest",i,e=>{e.data.loading=void 0}))}catch(e){a.undo()}},invalidatesTags:["BillTest"]})})}),{getSingleBillTest:s}=n.endpoints,{useGetSingleBillTestQuery:o,useGetPayableBillTestsQuery:l,useUpdateBillTestMutation:r}=n},25499:function(e,t,i){"use strict";i.d(t,{C:function(){return o},T:function(){return s}});var n=i(53502);let s=()=>(0,n.I0)(),o=n.v9},49854:function(e,t,i){"use strict";let n;i.d(t,{d:function(){return d},x:function(){return a}});var s=i(72940),o=i(6780),l=i(67732),r=i(28317);function a(){return n||(n=(0,r.MT)("cached-responses-store","cached-responses")),n}async function d(e,t){try{let i=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...s.FD});return await (0,r.t8)(e,i.data,a()),i.data}catch(t){if(t instanceof l.d7&&[l.d7.ERR_NETWORK,l.d7.ETIMEDOUT].includes(t.code)){let t=await (0,r.U2)(e,a());if(t)return t}throw t instanceof l.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[1601,2975,3313,9826,4404,3439,7281,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6306,7698,7186,4927,4890,6485,9175,7402,1744],function(){return e(e.s=53538)}),_N_E=e.O()}]);