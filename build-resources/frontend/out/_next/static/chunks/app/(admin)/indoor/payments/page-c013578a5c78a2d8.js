(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{42262:function(e,t,n){Promise.resolve().then(n.bind(n,90513))},65399:function(e,t,n){"use strict";function i(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return i}})},61321:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(48694),s=n(21279),a=n(47003),o=n(44377),r=n(65399),l=n(55749);function d(e,t){if((0,r.Z)(2,arguments),!t||"object"!==(0,i.Z)(t))return new Date(NaN);var n=t.years?(0,l.Z)(t.years):0,d=t.months?(0,l.Z)(t.months):0,c=t.weeks?(0,l.Z)(t.weeks):0,u=t.days?(0,l.Z)(t.days):0,h=t.hours?(0,l.Z)(t.hours):0,g=t.minutes?(0,l.Z)(t.minutes):0,x=t.seconds?(0,l.Z)(t.seconds):0,m=(0,o.Z)(e),p=d||n?(0,a.Z)(m,d+12*n):m;return new Date((u||c?(0,s.Z)(p,u+7*c):p).getTime()+1e3*(x+60*(g+60*h)))}},21279:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(55749),s=n(44377),a=n(65399);function o(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),o=(0,i.Z)(t);return isNaN(o)?new Date(NaN):(o&&n.setDate(n.getDate()+o),n)}},47003:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(55749),s=n(44377),a=n(65399);function o(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),o=(0,i.Z)(t);if(isNaN(o))return new Date(NaN);if(!o)return n;var r=n.getDate(),l=new Date(n.getTime());return(l.setMonth(n.getMonth()+o+1,0),r>=l.getDate())?l:(n.setFullYear(l.getFullYear(),l.getMonth(),r),n)}},76607:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(44377),s=n(65399);function a(e){(0,s.Z)(1,arguments);var t=(0,i.Z)(e);return t.setHours(23,59,59,999),t}},78259:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(44377),s=n(65399);function a(e){(0,s.Z)(1,arguments);var t=(0,i.Z)(e);return t.setHours(0,0,0,0),t}},44377:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(48694),s=n(65399);function a(e){(0,s.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,i.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},13520:function(e,t,n){"use strict";n.d(t,{default:function(){return s.a}});var i=n(40154),s=n.n(i)},90513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eW}});var i=n(68328),s=n(54632),a=n(72375),o=n(16938),r=n(11114),l=n(22614),d=n(76029),c=n(3741),u=n(89043),h=n(68242),g=n(22041),x=n(87967),m=n(31204),p=n(7140),v=n(22975),j=n(41224),f=n(77303),y=n(77052),T=n(60711),S=n(35587),w=n(58185),D=n(4505),b=n(22115),A=n(12450),P=n(61222),C=n(25499),k=n(78101);let I=k.g.injectEndpoints({endpoints:e=>({getSurgeonOperations:e.query({query:e=>{let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,i]=e;void 0!==i&&t.append(n,i.toString())}),console.log(t.toString(),"queryParams.toString()"),{url:"/operation/surgeonOperation?".concat(t.toString())}},keepUnusedDataFor:86400,transformResponse(e){var t;return Array.isArray(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.surgeonOperations)&&e.data.surgeonOperations.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),e}}),createSurgeonOperation:e.mutation({query:e=>({url:"/operation/surgeonOperation",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,s=Date.now().toString(36),a=n(I.util.updateQueryData("getSurgeonOperations",{page:void 0,limit:void 0},t=>{t.data.surgeonOperations.unshift({...e,id:s,loading:!0})}));try{let{data:e}=await i;n(I.util.updateQueryData("getSurgeonOperations",{page:void 0,limit:void 0},t=>{let n=t.data.surgeonOperations.findIndex(e=>e.id===s);n>=0&&(t.data.surgeonOperations[n]=e.data)}))}catch(e){a.undo()}}}),processPayment:e.mutation({query:e=>({url:"/operation/surgeonOperation/process-payment",method:"POST",body:e})}),getSurgeonOperationTransactions:e.query({query:e=>{let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,i]=e;void 0!==i&&t.append(n,i.toString())}),{url:"/operation/surgeon-operation-transactions?".concat(t.toString())}},keepUnusedDataFor:86400,transformResponse(e){var t;return Array.isArray(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.surgeonOperationTransactions)&&e.data.surgeonOperationTransactions.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),e}}),updateSurgeonOperation:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/operation/surgeonOperation/".concat(t),method:"PATCH",body:n}},async onQueryStarted(e,t){let{id:n,...i}=e,{dispatch:s,queryFulfilled:a}=t,o=s(I.util.updateQueryData("getSurgeonOperations",{page:void 0,limit:void 0},e=>{let t=e.data.surgeonOperations.findIndex(e=>e.id===n);t>=0&&(e.data.surgeonOperations[t]={...e.data.surgeonOperations[t],...i})}));try{let{data:e}=await a;s(I.util.updateQueryData("getSurgeonOperations",{page:void 0,limit:void 0},t=>{let i=t.data.surgeonOperations.findIndex(e=>e.id===n);i>=0&&(t.data.surgeonOperations[i]=e.data)}))}catch(e){o.undo()}}}),deleteSurgeonOperation:e.mutation({query:e=>({url:"/operation/surgeonOperation/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,s=n(I.util.updateQueryData("getSurgeonOperations",{page:void 0,limit:void 0},t=>{t.data.surgeonOperations.find(t=>t.id===e)}));try{await i,n(I.util.updateQueryData("getSurgeonOperations",{page:void 0,limit:void 0},t=>{let n=t.data.surgeonOperations.findIndex(t=>t.id===e);n>=0&&t.data.surgeonOperations.splice(n,1)}))}catch(e){s.undo()}}}),getSingleSurgeonOperation:e.query({query:e=>({url:"/operation/surgeonOperation/".concat(e)})})})}),{useGetSurgeonOperationsQuery:O,useCreateSurgeonOperationMutation:Z,useUpdateSurgeonOperationMutation:N,useDeleteSurgeonOperationMutation:z,useGetSingleSurgeonOperationQuery:B,useProcessPaymentMutation:E,useGetSurgeonOperationTransactionsQuery:M}=I;var F=n(38917),R=n(78259),G=n(76607),L=n(97698),q=n(13520),_=n(88412),H=n(90660),U=n.n(H),Q=n(3098),W=n(37038),Y=n(64571),X=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;return{handleZoomIn:(0,D.useCallback)(()=>{t(Math.min(e+s,i))},[e,t,i,s]),handleZoomOut:(0,D.useCallback)(()=>{t(Math.max(e-s,n))},[e,t,n,s]),handleZoomReset:(0,D.useCallback)(()=>{t(70)},[t]),canZoomIn:e<i,canZoomOut:e>n,isZoomReset:100===e}},V=e=>{let{zoomLevel:t,setZoomLevel:n}=e,{handleZoomIn:s,handleZoomOut:a,handleZoomReset:o,canZoomIn:r,canZoomOut:u,isZoomReset:h}=X(t,n);return(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(d.u,{label:"Zoom it out",children:(0,i.jsx)(c.A,{variant:"default",onClick:a,disabled:!u,size:"lg",radius:"md",children:(0,i.jsx)(Q.Z,{size:18})})}),(0,i.jsxs)(g.Text,{children:[t,"%"]}),(0,i.jsx)(d.u,{label:"Zoom it in",children:(0,i.jsx)(c.A,{variant:"default",onClick:s,disabled:!r,size:"lg",radius:"md",children:(0,i.jsx)(W.Z,{size:18})})}),(0,i.jsx)(d.u,{label:"Reset the zoom",children:(0,i.jsx)(c.A,{variant:"default",onClick:o,disabled:h,size:"lg",radius:"md",children:(0,i.jsx)(Y.Z,{size:18})})})]})},J=n(71256),K=n(32451),$=n(26475),ee=n.n($);let et=D.forwardRef((e,t)=>{let{doctor:n,operations:a,totalAmount:o,isAnesthesiologist:r}=e;return(0,i.jsx)("div",{ref:t,children:(0,i.jsx)(u.X,{p:"md",shadow:"sm",radius:"md",style:{maxWidth:800,margin:"auto"},children:(0,i.jsxs)(j.Stack,{gap:"xl",children:[(0,i.jsxs)(K.Box,{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,i.jsx)(g.Text,{size:"xl",fw:700,style:{letterSpacing:"1px"},children:"PAYMENT RECEIPT"}),(0,i.jsx)(f.Divider,{size:"sm",style:{margin:"0.5rem auto",width:"50%"}})]}),(0,i.jsxs)(l.Group,{justify:"space-between",align:"start",children:[(0,i.jsxs)(K.Box,{children:[(0,i.jsx)(g.Text,{size:"sm",c:"dimmed",mb:4,children:"Date Issued"}),(0,i.jsx)(g.Text,{fw:500,children:new Date().toLocaleDateString()})]}),(0,i.jsxs)(K.Box,{style:{textAlign:"right"},children:[(0,i.jsx)(g.Text,{size:"sm",c:"dimmed",mb:4,children:r?"Anesthesiologist Details":"Surgeon Details"}),(0,i.jsx)(g.Text,{fw:500,children:n.name}),(0,i.jsx)(g.Text,{size:"sm",children:n.designation})]})]}),(0,i.jsx)(K.Box,{style:{margin:"2rem 0"},children:(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,style:{border:"1px solid #dee2e6"},className:ee().table,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{style:{backgroundColor:"#f8f9fa",fontWeight:600},children:[(0,i.jsx)(s.i.Th,{children:"Patient Name"}),(0,i.jsx)(s.i.Th,{children:"Patient ID"}),(0,i.jsx)(s.i.Th,{children:"Operation Date"}),(0,i.jsx)(s.i.Th,{style:{textAlign:"right"},children:"Amount"})]})}),(0,i.jsx)(s.i.Tbody,{children:a.map(e=>{var t,n;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(t=e.patient)||void 0===t?void 0:t.name}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(n=e.patient)||void 0===n?void 0:n.patientId}),(0,i.jsx)(s.i.Td,{children:new Date(e.createdAt).toLocaleDateString()}),(0,i.jsxs)(s.i.Td,{style:{textAlign:"right"},children:["৳",(r?e.anesthesiologistAmount:e.surgeonAmount).toLocaleString()]})]},e.id)})})]})}),(0,i.jsx)(K.Box,{style:{borderTop:"2px solid #333",marginTop:"2rem",paddingTop:"1rem",textAlign:"right"},children:(0,i.jsxs)(g.Text,{size:"lg",fw:700,children:["Total Amount: ৳",o.toLocaleString()]})}),(0,i.jsx)(l.Group,{justify:"space-between",align:"flex-end",mt:40,children:(0,i.jsxs)(j.Stack,{align:"center",children:[(0,i.jsx)("div",{style:{width:200,borderTop:"1px solid black"}}),(0,i.jsx)(g.Text,{size:"sm",children:"Authorized Signature"})]})}),(0,i.jsxs)(g.Text,{ta:"center",size:"sm",c:"dimmed",mt:30,style:{fontStyle:"italic"},children:["Generated on ",new Date().toLocaleString(),(0,i.jsx)("br",{}),"Powered by SasthoTech"]})]})})})});et.displayName="PrintableReceipt";var en=n(25621),ei=n(89822);function es(){return(0,i.jsx)(u.X,{shadow:"xs",p:"md",children:(0,i.jsxs)(j.Stack,{children:[(0,i.jsxs)(l.Group,{justify:"space-between",mb:"md",children:[(0,i.jsx)(en.O,{height:40,width:200}),(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(en.O,{height:40,width:120}),(0,i.jsx)(en.O,{height:40,width:120}),(0,i.jsx)(en.O,{height:40,width:200})]})]}),(0,i.jsx)(ei.x,{children:(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsx)(s.i.Tr,{children:[...Array(10)].map((e,t)=>(0,i.jsx)(s.i.Th,{children:(0,i.jsx)(en.O,{height:20,width:80})},t))})}),(0,i.jsx)(s.i.Tbody,{children:[...Array(10)].map((e,t)=>(0,i.jsx)(s.i.Tr,{children:[...Array(10)].map((e,t)=>(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(en.O,{height:20,width:0===t?20:80})},t))},t))})]})}),(0,i.jsxs)(l.Group,{justify:"space-between",mt:"md",children:[(0,i.jsx)(en.O,{height:20,width:200}),(0,i.jsx)(en.O,{height:36,width:300})]})]})})}var ea=n(62471),eo=n(67781),er=n(58211);function el(){var e,t,n,k,I,Z,N,z,B,M,H;let[Q,W]=(0,D.useState)(!1),[Y,X]=(0,D.useState)(!1),[K,$]=(0,D.useState)([null,null]),[ee,en]=(0,D.useState)([]),[ei,el]=(0,D.useState)(!1),[ed,ec]=(0,D.useState)(null),[eu,eh]=(0,D.useState)(1),eg=(0,A.useRouter)(),ex=(0,A.useSearchParams)(),{data:em}=(0,P.cW)({}),[ep]=E(),{data:ev,isLoading:ej,isError:ef,refetch:ey}=O({isAnesthesiologistPaid:!!Q,startDate:K[0]?(0,R.Z)(K[0]).toISOString():void 0,endDate:K[1]?(0,G.Z)(K[1]).toISOString():void 0,anesthesiologistId:ex.get("anesthesiologistId")||void 0,page:eu,limit:100,isHospitalBillPaid:Y},{refetchOnMountOrArgChange:!0}),[eT,eS]=(0,D.useState)("anesthesiologistPayment1"),ew=(0,D.useMemo)(()=>{var e;return(null==ev?void 0:null===(e=ev.data)||void 0===e?void 0:e.surgeonOperations)||[]},[null==ev?void 0:null===(e=ev.data)||void 0===e?void 0:e.surgeonOperations]),eD=Math.ceil(((null==ev?void 0:null===(t=ev.data)||void 0===t?void 0:t.totalItems)||0)/100),eb=e=>{en(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eA=(0,D.useMemo)(()=>ew.filter(e=>ee.includes(e.id)).reduce((e,t)=>e+t.anesthesiologistAmount,0),[ew,ee]),[eP,eC]=(0,D.useState)([]),ek=(0,D.useRef)(null),eI=(0,C.C)(e=>e.auth.diagnostic),[eO,eZ]=(0,D.useState)(!1),eN=(0,_.useReactToPrint)({content:()=>ek.current,onAfterPrint(){en([]),ey(),eZ(!1),eS(e=>e+1),b.N9.show({title:"Payment Successful",message:"Paid Anesthesiologist",color:"green"})}}),ez=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ex.get("anesthesiologistId"))try{var t;let n=await ep({operationIds:ee,paymentType:"anesthesiologist",anesthesiologistId:null!==(t=ex.get("anesthesiologistId"))&&void 0!==t?t:void 0});if("error"in n)throw Error("error");let i=ew.filter(e=>ee.includes(e.id));eC(i),e?(eZ(!0),setTimeout(()=>eN(),2e3)):(b.N9.show({title:"Payment Successful",message:"Paid ".concat(ee.length," operations for a total of ").concat(eA),color:"green"}),en([]),ey())}catch(e){b.N9.show({title:"Payment Failed",message:"There was an error processing the payment",color:"red"})}else U().fire("Error","Select Anesthesiologist from Dropdown","error")},eB=e=>{ec(e),el(!0)},eE=ew.map((e,t)=>{var n,u,h,g,x,m,p,v;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(a.X,{disabled:e.isAnesthesiologistPaid,checked:ee.includes(e.id),onChange:()=>eb(e.id)})}),(0,i.jsxs)(s.i.Td,{children:[(0,i.jsxs)(o.T,{children:[" ",(eu-1)*100+t+1," "]}),null===(n=e.anesthesiologist)||void 0===n?void 0:n.name]}),(0,i.jsx)(s.i.Td,{children:null===(u=e.anesthesiologist)||void 0===u?void 0:u.designation}),(0,i.jsx)(s.i.Td,{children:"".concat(null===(h=e.patient)||void 0===h?void 0:h.name," (").concat(null===(g=e.patient)||void 0===g?void 0:g.patientId,")")}),(0,i.jsx)(s.i.Td,{children:(0,L.Z)(new Date(e.createdAt),"dd-MMM-yyyy")}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(x=e.hospitalBill)||void 0===x?void 0:x.totalAmountWithDiscount}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(r.C,{p:"sm",color:(null==e?void 0:e.hospitalBill.isPaid)?"green":"yellow",children:(null==e?void 0:e.hospitalBill.isPaid)?"Paid":"Due(".concat((null==e?void 0:null===(m=e.hospitalBill)||void 0===m?void 0:m.totalAmountWithDiscount)-(null==e?void 0:null===(p=e.hospitalBill)||void 0===p?void 0:p.paidAmount),")")})}),(0,i.jsx)(s.i.Td,{children:e.anesthesiologistAmount}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(r.C,{p:"sm",color:e.isAnesthesiologistPaid?"green":"yellow",children:e.isAnesthesiologistPaid?"Paid":"Due(".concat(e.anesthesiologistAmount,")")})}),(0,i.jsx)(s.i.Td,{children:(0,i.jsxs)(l.Group,{gap:4,children:[(0,i.jsx)(d.u,{label:"See Details",children:(0,i.jsx)(c.A,{onClick:()=>eB(e),children:(0,i.jsx)(T.Z,{size:"1.125rem"})})}),(0,i.jsx)(d.u,{label:"Bill Summary",children:(0,i.jsx)(c.A,{component:q.default,href:"/patient/details?id=".concat(null==e?void 0:null===(v=e.hospitalBill)||void 0===v?void 0:v.billId),children:(0,i.jsx)(F.Z,{size:"1.125rem"})})})]})})]},e.id)}),eM=(0,D.useMemo)(()=>{var e,t;return(null==em?void 0:null===(t=em.data)||void 0===t?void 0:null===(e=t.anesthesiologists)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name})))||[]},[null==em?void 0:em.data]),[eF,eR]=(0,ea.I)({key:"anesthesiologist-zoom",defaultValue:70});return(0,i.jsxs)(u.X,{style:{transform:"scale(".concat(eF/100,")"),transformOrigin:"top left",transition:"transform 0.3s ease",width:"".concat(1e4/eF,"%"),overflow:"auto"},shadow:"xs",p:"md",children:[(0,i.jsx)(V,{zoomLevel:eF,setZoomLevel:e=>{eR(e)}}),(0,i.jsxs)(l.Group,{mb:"md",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Title,{order:3,children:"Anesthesiologists"}),(0,i.jsxs)(g.Text,{children:[(null==ev?void 0:null===(n=ev.data)||void 0===n?void 0:n.totalItems)||0," operations found"]})]}),(0,i.jsxs)(l.Group,{justify:"space-between",style:{flexGrow:1},mb:"md",children:[(0,i.jsx)(x.P,{my:10,placeholder:"Search Anesthesiologist",data:eM,searchable:!0,clearable:!0,onClear:()=>eg.push("/indoor/payments"),size:"lg",value:ex.get("anesthesiologistId"),onChange:e=>{eg.push("?anesthesiologistId=".concat(e)),en([])}}),(0,i.jsxs)("div",{style:{flexGrow:1,display:"flex",justifyContent:"end",alignItems:"center",gap:20},children:[(0,i.jsx)(a.X,{label:"Bill Paid",checked:Y,onChange:e=>X(e.currentTarget.checked)}),(0,i.jsx)(a.X,{label:"Fee Paid",checked:Q,onChange:e=>W(e.currentTarget.checked)}),(0,i.jsx)(y.DatePickerInput,{label:"Select Date Range",placeholder:"Pick date range",type:"range",clearable:!0,allowSingleDateInRange:!0,valueFormat:"DD MMM, YYYY",value:K,onChange:$,leftSection:(0,i.jsx)(eo.Z,{size:20}),maxDate:new Date,size:"sm",radius:"sm",variant:"filled"})]})]})]}),ee.length>0&&(0,i.jsxs)(l.Group,{mb:"md",children:[(0,i.jsxs)(g.Text,{children:["Selected: ",ee.length]}),(0,i.jsxs)(g.Text,{children:["Total Amount: ",eA]}),(0,i.jsx)(m.Button,{leftSection:(0,i.jsx)(S.Z,{}),onClick:()=>ez(!1),children:"Pay Selected"}),(0,i.jsx)(m.Button,{loading:eO,leftSection:(0,i.jsx)(w.Z,{}),onClick:()=>ez(!0),children:"Pay & Print"})]}),(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"Select"}),(0,i.jsx)(s.i.Th,{children:"An. Name"}),(0,i.jsx)(s.i.Th,{children:"Designation"}),(0,i.jsx)(s.i.Th,{children:"Patient Name & ID"}),(0,i.jsx)(s.i.Th,{children:"Date"}),(0,i.jsx)(s.i.Th,{children:"Total "}),(0,i.jsx)(s.i.Th,{children:"Status"}),(0,i.jsx)(s.i.Th,{children:"An. fee"}),(0,i.jsx)(s.i.Th,{children:"Status(An. Fee)"}),(0,i.jsx)(s.i.Th,{children:"Details"})]})}),(0,i.jsx)(s.i.Tbody,{children:eE})]}),(0,i.jsxs)(l.Group,{mt:"md",children:[(0,i.jsxs)(g.Text,{children:["Showing ",(eu-1)*100+1," to"," ",Math.min(100*eu,(null==ev?void 0:null===(k=ev.data)||void 0===k?void 0:k.totalItems)||0)," of"," ",(null==ev?void 0:null===(I=ev.data)||void 0===I?void 0:I.totalItems)||0]}),(0,i.jsx)(p.t,{total:eD,value:eu,onChange:eh})]}),ej&&(0,i.jsx)(es,{}),ef&&(0,i.jsx)(g.Text,{c:"red",children:"Error loading data"}),(0,i.jsx)(v.u,{opened:ei,onClose:()=>el(!1),title:"Operation Details",size:"lg",children:ed&&(0,i.jsxs)(j.Stack,{gap:"md",children:[(0,i.jsxs)(l.Group,{children:[(0,i.jsxs)(g.Text,{size:"lg",w:700,children:["Operation ID: ",ed.id]}),(0,i.jsx)(r.C,{color:ed.isAnesthesiologistPaid?"green":"yellow",size:"lg",children:ed.isAnesthesiologistPaid?"Paid":"Due"})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(l.Group,{grow:!0,children:[(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Anesthesiologist Details"}),(0,i.jsxs)(g.Text,{children:["Name: ",null===(Z=ed.anesthesiologist)||void 0===Z?void 0:Z.name]}),(0,i.jsxs)(g.Text,{children:["Designation: ",null===(N=ed.anesthesiologist)||void 0===N?void 0:N.designation]})]}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Patient Details"}),(0,i.jsxs)(g.Text,{children:["Name: ",null===(z=ed.patient)||void 0===z?void 0:z.name]}),(0,i.jsxs)(g.Text,{children:["ID: ",null===(B=ed.patient)||void 0===B?void 0:B.id]})]})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Operation Information"}),(0,i.jsxs)(g.Text,{children:["Name: ",ed.name]}),(0,i.jsxs)(g.Text,{children:["Description: ",ed.description||"N/A"]}),(0,i.jsxs)(g.Text,{children:["Type: ",ed.operationType||"N/A"]}),(0,i.jsxs)(g.Text,{children:["Status: ",ed.status]}),(0,i.jsxs)(g.Text,{children:["Priority: ",ed.priority]}),(0,i.jsxs)(g.Text,{children:["Start Time:"," ",ed.operationStartTime?new Date(ed.operationStartTime).toLocaleString():"N/A"]}),(0,i.jsxs)(g.Text,{children:["End Time:"," ",ed.operationEndTime?new Date(ed.operationEndTime).toLocaleString():"N/A"]})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Financial Details"}),(0,i.jsxs)(g.Text,{children:["Price: ",(0,i.jsx)(er.Z,{})," ",ed.price]}),(0,i.jsxs)(g.Text,{children:["Anesthesiologist Amount: ",(0,i.jsx)(er.Z,{}),ed.anesthesiologistAmount]}),(0,i.jsxs)(g.Text,{children:["Surgeon Amount: ",(0,i.jsx)(er.Z,{})," ",ed.surgeonAmount]}),(0,i.jsxs)(g.Text,{children:["Discount: ",(0,i.jsx)(er.Z,{})," ",ed.discount," (",ed.discountType,")"]}),(0,i.jsxs)(g.Text,{children:["Referral Discount: ",(0,i.jsx)(er.Z,{})," ",ed.referralDiscount," (",ed.referralDiscountType,")"]})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Additional Information"}),(0,i.jsxs)(g.Text,{children:["Referred By: ",ed.referredBy||"N/A"]}),(0,i.jsxs)(g.Text,{children:["Surgeon Paid: ",ed.isSurgeonPaid?"Yes":"No"]}),(0,i.jsxs)(g.Text,{children:["Created At: ",new Date(ed.createdAt).toLocaleString()]}),(0,i.jsxs)(g.Text,{children:["Last Updated: ",new Date(ed.updatedAt).toLocaleString()]})]}),ed.note&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Notes"}),(0,i.jsx)(g.Text,{children:ed.note})]})]})]})}),eP.length>0&&(0,i.jsxs)("div",{className:"diagnostic-info p-3",ref:ek,children:[(0,i.jsx)(J.Z,{diagnostic:eI}),(0,i.jsx)(et,{doctor:{name:(null===(M=eP[0].anesthesiologist)||void 0===M?void 0:M.name)||"",designation:(null===(H=eP[0].anesthesiologist)||void 0===H?void 0:H.designation)||""},operations:eP,totalAmount:eA,isAnesthesiologist:!0})]})]},eT)}var ed=n(72940),ec=n(6780),eu=n(67732);let eh=async e=>{let{from:t,to:n,isPaid:i,isCommissionPaid:s,status:a,isOwn:o,limit:r,page:l,pCId:d}=e;try{t&&(t=new Date(t)).setHours(0,0,0,0),n&&(n=new Date(n)).setHours(23,59,59,999);let e=await ec.default.get("pc/hospital",{baseURL:"http://sasthotech.local:5000/api/v1",params:{from:t,to:n,isPaid:i,isOwn:o,limit:r,page:l,pCId:d,isCommissionPaid:s,status:a},...ed.FD});return{success:!0,data:e.data.data}}catch(e){if(e instanceof eu.d7){var c;return{success:!1,data:null===(c=e.response)||void 0===c?void 0:c.data.message}}return{success:!1,data:"An error occurred"}}};function eg(e,t){let n=e.get(t);return"null"===n||null===n?void 0:n}var ex=n(89123),em=n(74559),ep=n(75540),ev=n(29259),ej=n(59406),ef=n(37947),ey=n(45437);let eT=async(e,t)=>{try{let n=await ec.default.patch("".concat("http://sasthotech.local:5000/api/v1","/hospitalBill/pcAmount/").concat(e),{pcAmount:t},{...ed.FD,...ed.Hn});return{success:!0,data:n.data.data}}catch(e){if(e instanceof eu.d7){var n;return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data.message}}return{success:!1,data:"An error occurred"}}},eS=async(e,t)=>{try{let n=await ec.default.post("".concat("http://sasthotech.local:5000/api/v1","/commission/indoor-pc-commission/").concat(e),t,{...ed.FD,...ed.Hn});return{success:!0,data:n.data.data}}catch(e){if(e instanceof eu.d7){var n;return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data.message}}return{success:!1,data:"An error occurred"}}},ew=D.forwardRef((e,t)=>{var n,a,o,r;let{bills:d,totalAmount:c}=e;return(0,i.jsx)("div",{ref:t,children:(0,i.jsxs)(j.Stack,{gap:"xl",children:[(0,i.jsxs)(l.Group,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(g.Text,{size:"xl",w:700,children:"PC Payment Receipt (indoor)"}),(0,i.jsxs)(g.Text,{children:["Date: ",new Date().toLocaleDateString()]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(g.Text,{w:500,children:["Pc Name: ",null==d?void 0:null===(a=d[0])||void 0===a?void 0:null===(n=a.PC)||void 0===n?void 0:n.name]}),(0,i.jsxs)(g.Text,{children:["Contact No:",null==d?void 0:null===(r=d[0])||void 0===r?void 0:null===(o=r.PC)||void 0===o?void 0:o.mobile," "]}),(0,i.jsxs)(g.Text,{children:["Address: ",(()=>{var e;let t=null===(e=d[0])||void 0===e?void 0:e.PC;if(!t)return"N/A";let n=[t.address,t.thana,t.district].filter(Boolean);return n.length>0?n.join(", "):"N/A"})()]})]})]}),(0,i.jsxs)(s.i,{className:ee().table,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"Sl"}),(0,i.jsx)(s.i.Th,{children:"Bill ID"}),(0,i.jsx)(s.i.Th,{children:"Patient Name & ID"}),(0,i.jsx)(s.i.Th,{children:"Total Amount"}),(0,i.jsx)(s.i.Th,{children:"PC Amount"})]})}),(0,i.jsx)(s.i.Tbody,{children:d.map((e,t)=>{var n,a;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:t+1}),(0,i.jsx)(s.i.Td,{children:e.billId}),(0,i.jsx)(s.i.Td,{children:"".concat((null===(n=e.patient)||void 0===n?void 0:n.name)||"N/A"," (").concat((null===(a=e.patient)||void 0===a?void 0:a.patientId)||"N/A",")")}),(0,i.jsxs)(s.i.Td,{children:[(0,i.jsx)(er.Z,{}),e.totalAmountWithDiscount]}),(0,i.jsxs)(s.i.Td,{children:[(0,i.jsx)(er.Z,{}),e.pcAmount]})]},e.billId+t)})})]}),(0,i.jsx)(l.Group,{children:(0,i.jsxs)(g.Text,{size:"lg",w:700,children:["Total PC Amount: ",(0,i.jsx)(er.Z,{}),c]})}),(0,i.jsxs)(j.Stack,{mt:50,align:"flex-end",children:[(0,i.jsx)(g.Text,{children:"Authorized Signature"}),(0,i.jsx)("div",{style:{width:200,borderTop:"1px solid black"}})]})]})})});function eD(e){let{status:t}=e;return(0,i.jsx)(r.C,{p:"sm",color:(e=>{switch(e){case"Day Patient":return"yellow";case"Admitted":return"blue";case"Released":return"green";case"Paid":return"teal";default:return"gray"}})(t),children:t})}function eb(){var e,t;let n=(0,C.C)(em.nC),o=(0,C.C)(e=>e.auth.diagnostic),r=(0,A.useSearchParams)(),[d,c]=(0,D.useState)([null,null]),[v,j]=(0,D.useState)(!1),[f,T]=(0,D.useState)([]),P=(0,D.useRef)(null),{data:k,isLoading:I}=(0,ep.K0)(),[O,Z]=(0,D.useState)(!1),[N,z]=(0,D.useState)(!1),[B,E]=(0,D.useState)(1),[M,F]=(0,D.useState)(100),[L,q]=(0,ea.I)({key:"pc-zoom",defaultValue:70}),[H,Q]=(0,D.useState)([]),W=(0,_.useReactToPrint)({content:()=>P.current,onAfterPrint(){el(),j(!1)}}),{data:Y,loading:X,setData:K,refetch:$}=function(e,t,n,i,s,a){let[o,r]=(0,D.useState)(null),[l,d]=(0,D.useState)(!0),[c,u]=(0,D.useState)(null),h=(0,A.useSearchParams)(),g=(0,D.useCallback)(async()=>{d(!0),u(null);try{let o=e[0]?(0,R.Z)(e[0]):void 0,l=e[1]?(0,G.Z)(e[1]):e[0]?(0,G.Z)(e[0]):void 0,{success:d,data:c}=await eh({from:o,to:l,isOwn:"receptionist"===i?!h.get("overall"):void 0,limit:n,page:t,isPaid:s,isCommissionPaid:a,pCId:eg(h,"pcID"),status:eg(h,"status")});if(d)r(c);else throw Error("Failed to fetch data")}catch(e){console.error(e),u(e instanceof Error?e.message:"An error occurred while fetching data")}finally{d(!1)}},[h,e,i,t,n,s,a]);return(0,D.useEffect)(()=>{g()},[g]),{data:o,loading:l,error:c,setData:r,refetch:(0,D.useCallback)(()=>{g()},[g])}}(d,B,M,n,O,N),ee=(0,D.useMemo)(()=>{var e;return(null==k?void 0:null===(e=k.data)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name})))||[]},[null==k?void 0:k.data]),et=(0,D.useMemo)(()=>null==Y?void 0:Y.data.filter(e=>f.includes(e.billId)).reduce((e,t)=>e+t.pcAmount,0),[null==Y?void 0:Y.data,f]),{updateUrlParam:en}=(0,ex.G)(),ei=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},er=async e=>{let t=f.map(e=>({id:e}));if(r.get("pcID")&&null!==r.get("pcID")){var n,s;let{success:a,data:o}=await eS(null!==(n=r.get("pcID"))&&void 0!==n?n:"",{bills:t});if(a){if(b.N9.show({title:"Pc Payment Successful",message:"Pc has been paid of ".concat(et," TAKA"),color:"green",position:"top-right",icon:(0,i.jsx)(ej.Z,{})}),e){let e=null==Y?void 0:null===(s=Y.data)||void 0===s?void 0:s.filter(e=>f.includes(e.billId));Q(null!=e?e:[]),j(!0),setTimeout(()=>W(),2e3)}else el()}}else U().fire("Error","Select Pc From Dropdown","error")},el=()=>{$(),T([])},ed=Y?Math.ceil(Y.totalItems/M):0;return X||I?(0,i.jsx)(es,{}):(0,i.jsxs)(u.X,{style:{transform:"scale(".concat(L/100,")"),transformOrigin:"top left",transition:"transform 0.3s ease",width:"".concat(1e4/L,"%")},shadow:"xs",p:"md",children:[(0,i.jsx)(V,{zoomLevel:L,setZoomLevel:q}),(0,i.jsxs)(l.Group,{justify:"space-between",mb:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Title,{order:3,children:"PCs"}),(0,i.jsxs)(g.Text,{children:[null!==(t=null==Y?void 0:Y.totalItems)&&void 0!==t?t:0," bills found"]})]}),(0,i.jsxs)(l.Group,{justify:"space-between",style:{flexGrow:1},mb:"md",children:[(0,i.jsx)(x.P,{my:10,placeholder:"Select or Search PC",data:ee,searchable:!0,clearable:!0,size:"lg",value:r.get("pcID"),onChange:e=>{en("pcID",e),T([])}}),(0,i.jsxs)("div",{style:{flexGrow:1,display:"flex",justifyContent:"end",alignItems:"center",gap:20},children:[(0,i.jsx)(x.P,{my:10,placeholder:"Select or Search Bill Status",data:["Admitted","Released","Day Patient"],searchable:!0,clearable:!0,size:"lg",value:r.get("status"),onChange:e=>en("status",e)}),(0,i.jsx)(a.X,{label:"Bill Paid",checked:O,onChange:e=>Z(e.currentTarget.checked)}),(0,i.jsx)(a.X,{label:"Commission Paid",checked:N,onChange:e=>z(e.currentTarget.checked)}),(0,i.jsx)(y.DatePickerInput,{label:"Select Date Range",placeholder:"Pick date range",type:"range",clearable:!0,allowSingleDateInRange:!0,valueFormat:"DD MMM, YYYY",value:d,onChange:c,leftSection:(0,i.jsx)(eo.Z,{size:20}),maxDate:new Date,size:"sm",radius:"sm",variant:"filled"})]})]})]}),f.length>0&&(0,i.jsxs)(l.Group,{mb:"md",children:[(0,i.jsxs)(g.Text,{children:["Selected: ",f.length]}),(0,i.jsxs)(g.Text,{children:["Total Amount: ",et]}),(0,i.jsx)(m.Button,{leftSection:(0,i.jsx)(S.Z,{}),onClick:()=>er(!1),children:"Pay Selected"}),(0,i.jsx)(m.Button,{loading:v,leftSection:(0,i.jsx)(w.Z,{}),onClick:()=>er(!0),children:"Pay & Print"})]}),(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"Select"}),(0,i.jsx)(s.i.Th,{children:"PC Name"}),(0,i.jsx)(s.i.Th,{children:"Bill ID"}),(0,i.jsx)(s.i.Th,{children:"Patient Name & ID"}),(0,i.jsx)(s.i.Th,{children:"Total Amount"}),(0,i.jsx)(s.i.Th,{children:"Payment Status"}),(0,i.jsx)(s.i.Th,{children:"PC Amount"}),(0,i.jsx)(s.i.Th,{children:"Bill Status"}),(0,i.jsx)(s.i.Th,{children:"Pc Payment Status"})]})}),(0,i.jsx)(s.i.Tbody,{children:null==Y?void 0:null===(e=Y.data)||void 0===e?void 0:e.map((e,t)=>(0,i.jsx)(eA,{currentPage:B,itemsPerPage:M,selectedRows:f,handleRowSelect:ei,bill:e,setData:K,index:t},e.billId+t))})]}),(0,i.jsxs)(l.Group,{justify:"space-between",mt:"md",children:[(0,i.jsxs)(g.Text,{children:["Showing ",(B-1)*M+1," to"," ",Math.min(B*M,(null==Y?void 0:Y.totalItems)||0)," of ",(null==Y?void 0:Y.totalItems)||0]}),(0,i.jsx)(p.t,{total:ed,value:B,onChange:E})]}),(0,i.jsxs)(l.Group,{mt:"md",justify:"flex-end",children:[(0,i.jsx)(g.Text,{children:"Items per page:"}),(0,i.jsx)(x.P,{data:["100","200","500","1000"],value:M.toString(),onChange:e=>F(Number(e))})]}),H.length>0&&(0,i.jsxs)("div",{className:"diagnostic-info p-3",ref:P,children:[(0,i.jsx)(J.Z,{diagnostic:o}),(0,i.jsx)(ew,{bills:H,totalAmount:null!=et?et:0})]})]})}function eA(e){var t,n,u;let{bill:h,handleRowSelect:g,selectedRows:x,setData:m,index:p,currentPage:v,itemsPerPage:j}=e,[f,y]=(0,D.useState)(h.pcAmount),[T,S]=(0,D.useState)(!1),w=async()=>{S(!1);let{success:e,data:t}=await eT(h.billId,f);e?(b.N9.show({title:"Update Successful",message:"Bill with id ".concat(h.billId," updated with new pc amount of ").concat(f),color:"green",position:"top-right",icon:(0,i.jsx)(ej.Z,{})}),m(e=>e?{...e,data:e.data.map(e=>e.billId!==h.billId?e:{...e,pcAmount:f})}:e)):b.N9.show({title:"Update Failed",message:"Bill with id ".concat(h.billId," failed due to ").concat(t),color:"red",position:"top-right",icon:(0,i.jsx)(ef.Z,{})})};return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(a.X,{disabled:h.isCommissionPaid,checked:x.includes(h.billId),onChange:()=>g(h.billId)})}),(0,i.jsxs)(s.i.Td,{style:{fontWeight:700},children:[(0,i.jsxs)(o.T,{children:[" ",(v-1)*j+p+1,". "]}),null===(t=h.PC)||void 0===t?void 0:t.name]}),(0,i.jsx)(s.i.Td,{children:h.billId}),(0,i.jsxs)(s.i.Td,{children:[null===(n=h.patient)||void 0===n?void 0:n.name,"(",null===(u=h.patient)||void 0===u?void 0:u.patientId,")"]}),(0,i.jsxs)(s.i.Td,{children:["৳",h.totalAmountWithDiscount]}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(r.C,{p:"sm",color:h.isPaid?"green":"yellow",children:h.isPaid?"Paid":"Due"+"(".concat(h.totalAmountWithDiscount-h.paidAmount,")")})}),(0,i.jsx)(s.i.Td,{children:T?(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(ev.Y,{value:f,onChange:e=>y("string"==typeof e?parseInt(e):e),min:0,size:"xs",styles:{input:{backgroundColor:"white"}}}),(0,i.jsx)(c.A,{color:"blue",onClick:()=>S(!1),children:(0,i.jsx)(ef.Z,{})}),(0,i.jsx)(c.A,{color:"blue",onClick:()=>w(),children:(0,i.jsx)(ej.Z,{size:16})})]}):(0,i.jsxs)(l.Group,{children:["৳",h.pcAmount,h.isCommissionPaid?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(d.u,{label:"Edit Pc Amount",children:(0,i.jsx)(c.A,{color:"blue",onClick:()=>S(!0),children:(0,i.jsx)(ey.Z,{size:16})})})]})}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(eD,{status:h.status})}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(r.C,{p:"sm",color:h.isCommissionPaid?"green":"yellow",children:h.isCommissionPaid?"Paid":"Due"+"(".concat(h.pcAmount,")")})})]})}ew.displayName="PrintablePcReceipt";var eP=n(77606);function eC(){var e,t,n,P,k,I,Z,N,z,B,M;let[H,Q]=(0,D.useState)(!1),[W,Y]=(0,D.useState)(!1),[X,K]=(0,D.useState)("pending"),[$,ee]=(0,D.useState)([null,null]),[en,el]=(0,D.useState)([]),[ed,ec]=(0,D.useState)(!1),[eu,eh]=(0,D.useState)(null),[eg,ex]=(0,D.useState)(1),em=(0,A.useRouter)(),ep=(0,A.useSearchParams)(),{data:ev}=(0,eP.$T)({}),[ej,ef]=(0,D.useState)([]),ey=(0,D.useRef)(null),eT=(0,C.C)(e=>e.auth.diagnostic),[eS,ew]=(0,D.useState)("surgeonPayment1"),[eD,eb]=(0,D.useState)(!1),[eA]=E(),{data:eC,isLoading:ek,isError:eI,refetch:eO}=O({isSurgeonPaid:!!H,status:X||void 0,startDate:$[0]?(0,R.Z)($[0]).toISOString():void 0,endDate:$[1]?(0,G.Z)($[1]).toISOString():void 0,surgeonId:ep.get("surgeonId")||void 0,page:eg,limit:100,sortBy:"isSurgeonPaid",isHospitalBillPaid:W},{refetchOnMountOrArgChange:!0}),eZ=(0,D.useMemo)(()=>{var e;return el([]),(null==eC?void 0:null===(e=eC.data)||void 0===e?void 0:e.surgeonOperations)||[]},[null==eC?void 0:null===(e=eC.data)||void 0===e?void 0:e.surgeonOperations]),eN=Math.ceil(((null==eC?void 0:null===(t=eC.data)||void 0===t?void 0:t.totalItems)||0)/100),ez=(0,_.useReactToPrint)({content:()=>ey.current,onAfterPrint(){el([]),eO(),eb(!1),ew(e=>e+1),b.N9.show({title:"Payment Successful",message:"Paid Surgeon",color:"green"})}}),eB=e=>{el(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eE=(0,D.useMemo)(()=>eZ.filter(e=>en.includes(e.id)).reduce((e,t)=>e+t.surgeonAmount,0),[eZ,en]),eM=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ep.get("surgeonId"))try{var t;let n=en.map(e=>e),i=await eA({operationIds:n,paymentType:"surgeon",surgeonId:null!==(t=ep.get("surgeonId"))&&void 0!==t?t:void 0});if("error"in i)throw Error("error");let s=eZ.filter(e=>en.includes(e.id));ef(s),e?(eb(!0),setTimeout(()=>ez(),2e3)):(b.N9.show({title:"Payment Successful",message:"Paid ".concat(en.length," operations for a total of ").concat(eE),color:"green"}),el([]),eO())}catch(e){b.N9.show({title:"Payment Failed",message:"There was an error processing the payment",color:"red"})}else U().fire("Error","Select Surgeon from Dropdown","error")},eF=e=>{eh(e),ec(!0)},eR=eZ.map((e,t)=>{var n,u,h,g,x,m,p,v;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(a.X,{disabled:e.isSurgeonPaid,checked:en.includes(e.id),onChange:()=>eB(e.id)})}),(0,i.jsxs)(s.i.Td,{children:[(0,i.jsxs)(o.T,{children:[" ",(eg-1)*100+t+1," "]}),null===(n=e.surgeon)||void 0===n?void 0:n.name]}),(0,i.jsx)(s.i.Td,{children:null===(u=e.surgeon)||void 0===u?void 0:u.designation}),(0,i.jsx)(s.i.Td,{children:"".concat(null===(h=e.patient)||void 0===h?void 0:h.name," (").concat(null===(g=e.patient)||void 0===g?void 0:g.patientId,")")}),(0,i.jsx)(s.i.Td,{children:(0,L.Z)(new Date(e.createdAt),"dd-MMM-yyyy")}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(x=e.hospitalBill)||void 0===x?void 0:x.totalAmountWithDiscount}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(r.C,{p:"sm",color:(null==e?void 0:e.hospitalBill.isPaid)?"green":"yellow",children:(null==e?void 0:e.hospitalBill.isPaid)?"Paid":"Due(".concat((null==e?void 0:null===(m=e.hospitalBill)||void 0===m?void 0:m.totalAmountWithDiscount)-(null==e?void 0:null===(p=e.hospitalBill)||void 0===p?void 0:p.paidAmount),")")})}),(0,i.jsx)(s.i.Td,{children:e.surgeonAmount}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(r.C,{p:"sm",color:e.isSurgeonPaid?"green":"yellow",children:e.isSurgeonPaid?"Paid":"Due(".concat(e.surgeonAmount,")")})}),(0,i.jsx)(s.i.Td,{children:(0,i.jsxs)(l.Group,{gap:4,children:[(0,i.jsx)(d.u,{label:"See Details",children:(0,i.jsx)(c.A,{onClick:()=>eF(e),children:(0,i.jsx)(T.Z,{size:"1.125rem"})})}),(0,i.jsx)(d.u,{label:"Bill Summary",children:(0,i.jsx)(c.A,{component:q.default,href:"/patient/details?id=".concat(null==e?void 0:null===(v=e.hospitalBill)||void 0===v?void 0:v.billId),children:(0,i.jsx)(F.Z,{size:"1.125rem"})})})]})})]},e.id)}),[eG,eL]=(0,ea.I)({key:"surgeon-zoom",defaultValue:70}),eq=(0,D.useMemo)(()=>{var e,t;return(null==ev?void 0:null===(t=ev.data)||void 0===t?void 0:null===(e=t.surgeons)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name})))||[]},[null==ev?void 0:ev.data]);return(0,i.jsxs)(u.X,{style:{transform:"scale(".concat(eG/100,")"),transformOrigin:"top left",transition:"transform 0.3s ease",width:"".concat(1e4/eG,"%")},shadow:"xs",p:"md",children:[(0,i.jsx)(V,{zoomLevel:eG,setZoomLevel:eL}),(0,i.jsxs)(l.Group,{mb:"md",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Title,{order:3,children:"Surgeons"}),(0,i.jsxs)(g.Text,{children:[(null==eC?void 0:null===(n=eC.data)||void 0===n?void 0:n.totalItems)||0," operations found"]})]}),(0,i.jsxs)(l.Group,{justify:"space-between",style:{flexGrow:1},mb:"md",children:[(0,i.jsx)(x.P,{my:10,placeholder:"Search Surgeon",data:eq,searchable:!0,clearable:!0,onClear:()=>em.push("/indoor/payments"),size:"lg",value:ep.get("surgeonId"),onChange:e=>{em.push("?surgeonId=".concat(e)),el([])}}),(0,i.jsxs)("div",{style:{flexGrow:1,display:"flex",justifyContent:"end",alignItems:"center",gap:20},children:[(0,i.jsx)(a.X,{label:"Bill Paid",checked:W,onChange:e=>Y(e.currentTarget.checked)}),(0,i.jsx)(a.X,{label:"Fee Paid",checked:H,onChange:e=>Q(e.currentTarget.checked)}),(0,i.jsx)(y.DatePickerInput,{label:"Select Date Range",placeholder:"Pick date range",type:"range",clearable:!0,allowSingleDateInRange:!0,valueFormat:"DD MMM, YYYY",value:$,onChange:ee,leftSection:(0,i.jsx)(eo.Z,{size:20}),maxDate:new Date,size:"sm",radius:"sm",variant:"filled"})]})]})]}),en.length>0&&(0,i.jsxs)(l.Group,{mb:"md",children:[(0,i.jsxs)(g.Text,{children:["Selected: ",en.length]}),(0,i.jsxs)(g.Text,{children:["Total Amount: ",eE]}),(0,i.jsx)(m.Button,{leftSection:(0,i.jsx)(S.Z,{}),onClick:()=>eM(!1),children:"Pay Selected"}),(0,i.jsx)(m.Button,{loading:eD,leftSection:(0,i.jsx)(w.Z,{}),onClick:()=>eM(!0),children:"Pay & Print"})]}),(0,i.jsx)(ei.x,{children:(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"Select"}),(0,i.jsx)(s.i.Th,{children:"Surgeons Name"}),(0,i.jsx)(s.i.Th,{children:"Designation"}),(0,i.jsx)(s.i.Th,{children:"Patient Name & ID"}),(0,i.jsx)(s.i.Th,{children:"Date"}),(0,i.jsx)(s.i.Th,{children:"Total "}),(0,i.jsx)(s.i.Th,{children:"Status"}),(0,i.jsx)(s.i.Th,{children:"Surgeon fee"}),(0,i.jsx)(s.i.Th,{children:"Status(S. Fee)"}),(0,i.jsx)(s.i.Th,{children:"Details"})]})}),(0,i.jsx)(s.i.Tbody,{children:eR})]})}),(0,i.jsxs)(l.Group,{mt:"md",children:[(0,i.jsxs)(g.Text,{children:["Showing ",(eg-1)*100+1," to"," ",Math.min(100*eg,(null==eC?void 0:null===(P=eC.data)||void 0===P?void 0:P.totalItems)||0)," of"," ",(null==eC?void 0:null===(k=eC.data)||void 0===k?void 0:k.totalItems)||0]}),(0,i.jsx)(p.t,{total:eN,value:eg,onChange:ex})]}),ek&&(0,i.jsx)(es,{}),eI&&(0,i.jsx)(g.Text,{color:"red",children:"Error loading data"}),(0,i.jsx)(v.u,{opened:ed,onClose:()=>ec(!1),title:"Operation Details",size:"lg",children:eu&&(0,i.jsxs)(j.Stack,{gap:"md",children:[(0,i.jsxs)(l.Group,{children:[(0,i.jsxs)(g.Text,{size:"lg",w:700,children:["Operation ID: ",eu.id]}),(0,i.jsx)(r.C,{color:eu.isSurgeonPaid?"green":"yellow",size:"lg",children:eu.isSurgeonPaid?"Paid":"Due"})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(l.Group,{grow:!0,children:[(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Surgeon Details"}),(0,i.jsxs)(g.Text,{children:["Name: ",null===(I=eu.surgeon)||void 0===I?void 0:I.name]}),(0,i.jsxs)(g.Text,{children:["Designation: ",null===(Z=eu.surgeon)||void 0===Z?void 0:Z.designation]})]}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Patient Details"}),(0,i.jsxs)(g.Text,{children:["Name: ",null===(N=eu.patient)||void 0===N?void 0:N.name]}),(0,i.jsxs)(g.Text,{children:["ID: ",null===(z=eu.patient)||void 0===z?void 0:z.id]})]})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Operation Information"}),(0,i.jsxs)(g.Text,{children:["Name: ",eu.name]}),(0,i.jsxs)(g.Text,{children:["Description: ",eu.description||"N/A"]}),(0,i.jsxs)(g.Text,{children:["Type: ",eu.operationType||"N/A"]}),(0,i.jsxs)(g.Text,{children:["Status: ",eu.status]}),(0,i.jsxs)(g.Text,{children:["Priority: ",eu.priority]}),(0,i.jsxs)(g.Text,{children:["Start Time:"," ",eu.operationStartTime?new Date(eu.operationStartTime).toLocaleString():"N/A"]}),(0,i.jsxs)(g.Text,{children:["End Time:"," ",eu.operationEndTime?new Date(eu.operationEndTime).toLocaleString():"N/A"]})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Financial Details"}),(0,i.jsxs)(g.Text,{children:["Price: ",(0,i.jsx)(er.Z,{}),eu.price]}),(0,i.jsxs)(g.Text,{children:["Surgeon Amount:",(0,i.jsx)(er.Z,{})," ",eu.surgeonAmount]}),(0,i.jsxs)(g.Text,{children:["Anesthesiologist Amount: ",(0,i.jsx)(er.Z,{}),eu.anesthesiologistAmount]}),(0,i.jsxs)(g.Text,{children:["Discount: ",(0,i.jsx)(er.Z,{})," ",eu.discount," (",eu.discountType,")"]}),(0,i.jsxs)(g.Text,{children:["Referral Discount: ",(0,i.jsx)(er.Z,{})," ",eu.referralDiscount," (",eu.referralDiscountType,")"]})]}),(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Additional Information"}),(0,i.jsxs)(g.Text,{children:["Referred By: ",eu.referredBy||"N/A"]}),(0,i.jsxs)(g.Text,{children:["Anesthesiologist Paid: ",eu.isAnesthesiologistPaid?"Yes":"No"]}),(0,i.jsxs)(g.Text,{children:["Created At: ",new Date(eu.createdAt).toLocaleString()]}),(0,i.jsxs)(g.Text,{children:["Last Updated: ",new Date(eu.updatedAt).toLocaleString()]})]}),eu.note&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Divider,{}),(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{w:700,children:"Notes"}),(0,i.jsx)(g.Text,{children:eu.note})]})]})]})}),ej.length>0&&(0,i.jsxs)("div",{className:"diagnostic-info p-3",ref:ey,children:[(0,i.jsx)(J.Z,{diagnostic:eT}),(0,i.jsx)(et,{doctor:{name:(null===(B=ej[0].surgeon)||void 0===B?void 0:B.name)||"",designation:(null===(M=ej[0].surgeon)||void 0===M?void 0:M.designation)||""},operations:ej,totalAmount:eE})]})]},eS)}var ek=n(13342),eI=n(48604),eO=n(57167),eZ=n.n(eO),eN=n(13822),ez=n(61321);let eB=D.forwardRef((e,t)=>{var n,a,o,r,d,c,h,x;let{transactions:m,startDate:p,endDate:v,diagnosticName:f}=e;m.reduce((e,t)=>e+t.totalAmount,0);let y=m.reduce((e,t)=>e+t.paidAmount,0),T=(0,C.C)(e=>e.auth.diagnostic);return(0,i.jsxs)("div",{ref:t,className:"p-4 bg-white",children:[(0,i.jsx)(J.Z,{diagnostic:T}),(0,i.jsxs)(j.Stack,{children:[(0,i.jsxs)(l.Group,{justify:"space-between",align:"flex-start",children:[(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{size:"sm",c:"dimmed",children:"Transaction Statement"}),(null===(n=m[0])||void 0===n?void 0:n.surgeon)&&(0,i.jsxs)(j.Stack,{gap:2,children:[(0,i.jsx)(g.Text,{size:"xl",fw:500,children:"Surgeon Details:"}),(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Name : ",null===(o=m[0])||void 0===o?void 0:null===(a=o.surgeon)||void 0===a?void 0:a.name]}),(null===(d=m[0])||void 0===d?void 0:null===(r=d.surgeon)||void 0===r?void 0:r.designation)&&(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Designation: ",null===(h=m[0])||void 0===h?void 0:null===(c=h.surgeon)||void 0===c?void 0:c.designation]})]}),(null===(x=m[0])||void 0===x?void 0:x.anesthesiologist)&&(0,i.jsxs)(j.Stack,{gap:2,children:[(0,i.jsx)(g.Text,{size:"xl",fw:500,children:"Anesthesiologist Details:"}),(0,i.jsx)(g.Text,{fw:700,size:"sm",children:m[0].anesthesiologist.name}),m[0].anesthesiologist.designation&&(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Designation: ",m[0].anesthesiologist.designation]})]})]}),(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(g.Text,{size:"sm",children:"Period:"}),(0,i.jsxs)(g.Text,{children:[p?new Date(p).toLocaleDateString():"All time",v?" - ".concat(new Date(v).toLocaleDateString()):""]})]})]}),(0,i.jsx)(u.X,{withBorder:!0,className:"mt-4",children:(0,i.jsxs)(s.i,{className:ee().table,striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"Payment Date"}),(0,i.jsx)(s.i.Th,{children:"Operation Name"}),(0,i.jsx)(s.i.Th,{children:"Bill ID"}),(0,i.jsx)(s.i.Th,{children:"Bill Date"}),(0,i.jsx)(s.i.Th,{children:"Patient ID"}),(0,i.jsx)(s.i.Th,{children:"Paid Amount"})]})}),(0,i.jsx)(s.i.Tbody,{children:m.map(e=>("string"==typeof e.info?Array.isArray(JSON.parse(e.info))?JSON.parse(e.info):[JSON.parse(e.info)]:Array.isArray(e.info)?e.info:[e.info]).map(t=>{var n,a,o;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:new Date(e.updatedAt).toLocaleDateString()}),(0,i.jsx)(s.i.Td,{children:t.name}),(0,i.jsx)(s.i.Td,{children:(null==t?void 0:null===(n=t.hospitalBill)||void 0===n?void 0:n.billId)||"-"}),(0,i.jsx)(s.i.Td,{children:new Date(t.createdAt).toLocaleDateString()}),(0,i.jsx)(s.i.Td,{children:(null==t?void 0:null===(a=t.patient)||void 0===a?void 0:a.patientId)||"-"}),(0,i.jsx)(s.i.Td,{children:((null===(o=m[0])||void 0===o?void 0:o.surgeon)?(null==t?void 0:t.surgeonAmount)||0:(null==t?void 0:t.anesthesiologistAmount)||0).toFixed(2)})]},t.id)}))}),(0,i.jsx)(s.i.Tfoot,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{colSpan:5,style:{textAlign:"center"},children:(0,i.jsx)("strong",{children:"Total"})}),(0,i.jsx)(s.i.Td,{children:(0,i.jsxs)("strong",{children:[y.toFixed(2)," BDT"]})})]})})]})}),(0,i.jsxs)(g.Text,{size:"sm",c:"dimmed",ta:"center",className:"mt-4",children:["Generated on ",new Date().toLocaleString(),(0,i.jsx)("br",{}),"Powered By SasthoTech"]})]})]})});eB.displayName="StatementView";var eE=e=>{let{transactions:t,startDate:n,endDate:s,diagnosticName:a}=e,o=D.useRef(null),r=(0,_.useReactToPrint)({content:()=>o.current,documentTitle:"Indoor Transaction Statement"});return(0,i.jsxs)(j.Stack,{children:[(0,i.jsx)(l.Group,{justify:"flex-end",children:(0,i.jsxs)(m.Button,{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[(0,i.jsx)(w.Z,{size:16}),"Print Statement"]})}),(0,i.jsx)(eB,{ref:o,transactions:t,startDate:n,endDate:s,diagnosticName:a})]})};let eM=[{value:"Anesthesiologist",paramName:"anesthesiologistId"},{value:"Surgeon",paramName:"surgeonId"}];var eF=()=>{var e,t,n,s,a,o,r;let[d,c]=(0,D.useState)(!1),[u,h]=(0,D.useState)([]),[g,p]=(0,D.useState)(null),[v,f]=(0,D.useState)(null),[T,S]=(0,D.useState)([null,null]),w=async()=>{let e;if(c(!0),v&&g){var t;e=null===(t=eM.find(e=>e.value===g))||void 0===t?void 0:t.paramName}try{let[t,n]=T,i=await ec.default.get("".concat("http://sasthotech.local:5000/api/v1","/operation/surgeon-operation-transactions"),{params:{startDate:(0,R.Z)(null!=t?t:new Date),endDate:(0,R.Z)(n?(0,ez.Z)(n,{days:1}):new Date),...e&&{[e]:v}},...ed.FD});h(i.data.data.surgeonOperationTransactions)}catch(e){console.error("Error fetching transactions:",e)}finally{c(!1)}};(0,D.useEffect)(()=>{g&&v&&w()},[T,g,v]);let{data:b}=(0,P.cW)({}),{data:A}=(0,eP.$T)({}),{data:C}=(0,ep.K0)(),k=(null==b?void 0:null===(t=b.data)||void 0===t?void 0:null===(e=t.anesthesiologists)||void 0===e?void 0:e.map(e=>({value:e.id,label:e.name})))||[],I=(null==A?void 0:null===(s=A.data)||void 0===s?void 0:null===(n=s.surgeons)||void 0===n?void 0:n.map(e=>({value:e.id,label:e.name})))||[],O=(null==C?void 0:null===(a=C.data)||void 0===a?void 0:a.map(e=>({value:e.id,label:e.name})))||[];return console.log(T,"date"),(0,i.jsxs)(j.Stack,{className:"relative p-4",children:[(0,i.jsx)(eN.f,{visible:d}),(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(y.DatePickerInput,{type:"range",label:"Select Date Range",placeholder:"Pick dates range",value:T,onChange:S,className:"w-80"}),(0,i.jsx)(x.P,{label:"View Statement For",data:["Anesthesiologist","Surgeon"],value:g,onChange:e=>{p(e),f(null)},className:"w-60"})," ",g&&(0,i.jsx)(x.P,{label:"Select ".concat(g),data:"Anesthesiologist"===g?k:"Surgeon"===g?I:O,value:v,onChange:f,className:"w-60",searchable:!0,clearable:!0,placeholder:"Select ".concat(g)}),(0,i.jsx)(m.Button,{mt:5,onClick:w,children:"Refresh"})]}),u.length>0&&(0,i.jsx)(eE,{transactions:u,startDate:null===(o=T[0])||void 0===o?void 0:o.toISOString(),endDate:null===(r=T[1])||void 0===r?void 0:r.toISOString(),diagnosticName:"Your Diagnostic Center Name"})]})},eR=n(46557),eG=n(50430);let{useGetIndoorCommissionTransactionsQuery:eL}=k.g.injectEndpoints({endpoints:e=>({getIndoorCommissionTransactions:e.query({query:e=>{let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,i]=e;void 0!==i&&t.append(n,i.toString())}),{url:"/commission/indoor-pc-commission?".concat(t.toString())}},keepUnusedDataFor:86400,transformResponse(e){var t;return Array.isArray(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.surgeonOperationTransactions)&&e.data.surgeonOperationTransactions.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),e}})})}),eq=()=>{var e,t;let[n,a]=(0,D.useState)([new Date,new Date]),[o,r]=(0,ea.I)({key:"transaction-zoom",defaultValue:70}),{data:d,isLoading:g,refetch:x}=eL({from:(0,R.Z)(null!==(e=n[0])&&void 0!==e?e:new Date).toISOString(),to:(0,G.Z)(null!==(t=n[1])&&void 0!==t?t:new Date).toISOString()},{refetchOnMountOrArgChange:!0,refetchOnFocus:!0});return(0,i.jsxs)(u.X,{style:{transform:"scale(".concat(o/100,")"),transformOrigin:"top left",transition:"transform 0.3s ease",width:"".concat(1e4/o,"%"),overflow:"auto"},shadow:"xs",p:"md",children:[(0,i.jsx)(eN.f,{visible:g}),(0,i.jsxs)(l.Group,{justify:"space-between",children:[(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(h.Title,{children:"Transaction By PC"})," "]}),(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(V,{zoomLevel:o,setZoomLevel:e=>{r(e)}}),(0,i.jsx)(c.A,{onClick:()=>x(),color:"blue",variant:"light",children:(0,i.jsx)(eG.Z,{size:"1.125rem"})})]})]}),(0,i.jsx)(y.DatePickerInput,{w:"300px",type:"range",label:"Select Date Range",placeholder:"Pick dates range",value:n,onChange:a,allowSingleDateInRange:!0,maxDate:new Date,className:"w-80"})," ",(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"PC Name"}),(0,i.jsx)(s.i.Th,{children:"Paid Amount"}),(0,i.jsx)(s.i.Th,{children:"Paid By"}),(0,i.jsx)(s.i.Th,{children:"Paid At"}),(0,i.jsx)(s.i.Th,{children:"Action"})]})}),(0,i.jsx)(s.i.Tbody,{children:null==d?void 0:d.data.commissionTx.map(e=>{var t,a,o,r;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(t=e.pC)||void 0===t?void 0:t.name}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:e.paidAmount}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.name}),(0,i.jsx)(s.i.Td,{children:(0,L.Z)(new Date(e.updatedAt),"dd-MMM-yyyy hh:mm a")}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(l.Group,{gap:5,children:(0,i.jsx)(eQ,{trx:e,startDate:null!==(o=n[0])&&void 0!==o?o:void 0,endDate:null!==(r=n[1])&&void 0!==r?r:void 0})})})]},e.id)})})]})]})},e_=e=>{var t,n;let{isBySurgeon:a,isByAnesthesiologist:o}=e,[r,d]=(0,D.useState)([new Date,new Date]),[g,x]=(0,ea.I)({key:"transaction-zoom",defaultValue:70}),{data:m,isLoading:p,refetch:v}=M({isBySurgeon:null!=a?a:void 0,isByAnesthesiologist:null!=o?o:void 0,startDate:(0,R.Z)(null!==(t=r[0])&&void 0!==t?t:new Date).toISOString(),endDate:(0,G.Z)(null!==(n=r[1])&&void 0!==n?n:new Date).toISOString()},{refetchOnMountOrArgChange:!0,refetchOnFocus:!0});return(0,i.jsxs)(u.X,{style:{transform:"scale(".concat(g/100,")"),transformOrigin:"top left",transition:"transform 0.3s ease",width:"".concat(1e4/g,"%"),overflow:"auto"},shadow:"xs",p:"md",children:[(0,i.jsx)(eN.f,{visible:p}),(0,i.jsxs)(l.Group,{justify:"space-between",children:[(0,i.jsxs)(l.Group,{children:[(0,i.jsxs)(h.Title,{children:["Transaction By ",a?"Surgeon":"Anesthesiologist"]})," "]}),(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(V,{zoomLevel:g,setZoomLevel:e=>{x(e)}}),(0,i.jsx)(c.A,{onClick:()=>v(),color:"blue",variant:"light",children:(0,i.jsx)(eG.Z,{size:"1.125rem"})})]})]}),(0,i.jsx)(y.DatePickerInput,{w:"300px",type:"range",label:"Select Date Range",placeholder:"Pick dates range",value:r,onChange:d,allowSingleDateInRange:!0,className:"w-80",maxDate:new Date})," ",(0,i.jsxs)(s.i,{striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsxs)(s.i.Th,{children:[a?"Surgeon":"Anesthesiologist"," Name"]}),(0,i.jsx)(s.i.Th,{children:"Paid Amount"}),(0,i.jsx)(s.i.Th,{children:"Paid By"}),(0,i.jsx)(s.i.Th,{children:"Paid At"}),(0,i.jsx)(s.i.Th,{children:"Action"})]})}),(0,i.jsx)(s.i.Tbody,{children:null==m?void 0:m.data.surgeonOperationTransactions.map(e=>{var t,n,o,d,c;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:a?null==e?void 0:null===(t=e.surgeon)||void 0===t?void 0:t.name:null==e?void 0:null===(n=e.anesthesiologist)||void 0===n?void 0:n.name}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:e.paidAmount}),(0,i.jsx)(s.i.Td,{children:null==e?void 0:null===(o=e.user)||void 0===o?void 0:o.name}),(0,i.jsx)(s.i.Td,{children:(0,L.Z)(new Date(e.updatedAt),"dd-MMM-yyyy hh:mm a")}),(0,i.jsx)(s.i.Td,{children:(0,i.jsx)(l.Group,{gap:5,children:(0,i.jsx)(eQ,{trx:e,startDate:null!==(d=r[0])&&void 0!==d?d:void 0,endDate:null!==(c=r[1])&&void 0!==c?c:void 0})})})]},e.id)})})]})]})};var eH=()=>(0,i.jsxs)(ek.m,{defaultValue:"surgeons",children:[(0,i.jsxs)(ek.m.List,{children:[(0,i.jsx)(ek.m.Tab,{value:"surgeons",children:"Surgeons"}),(0,i.jsx)(ek.m.Tab,{value:"anesthesiologists",children:"Anesthesiologists"}),(0,i.jsx)(ek.m.Tab,{value:"pc",children:"PCs"})]}),(0,i.jsxs)(ek.m.Panel,{value:"surgeons",children:[" ",(0,i.jsx)(e_,{isBySurgeon:!0})," "]}),(0,i.jsxs)(ek.m.Panel,{value:"anesthesiologists",children:[" ",(0,i.jsx)(e_,{isByAnesthesiologist:!0})," "]}),(0,i.jsxs)(ek.m.Panel,{value:"pc",children:[" ",(0,i.jsx)(eq,{})," "]})]});let eU=D.forwardRef((e,t)=>{var n,a,o,r,d,c,h;let{transaction:x,startDate:m,endDate:p}=e;x.totalAmount;let v=x.paidAmount,f=(0,C.C)(e=>e.auth.diagnostic);return(0,i.jsxs)("div",{ref:t,className:"p-4 bg-white",children:[(0,i.jsx)(J.Z,{diagnostic:f}),(0,i.jsxs)(j.Stack,{children:[(0,i.jsxs)(l.Group,{justify:"space-between",align:"flex-start",children:[(0,i.jsxs)(j.Stack,{gap:"xs",children:[(0,i.jsx)(g.Text,{size:"sm",c:"dimmed",children:"Transaction Statement"}),"surgeon"in x&&(null==x?void 0:x.surgeon)&&(0,i.jsxs)(j.Stack,{gap:2,children:[(0,i.jsx)(g.Text,{size:"xl",fw:500,children:"Surgeon Details:"}),(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Name : ",null==x?void 0:null===(n=x.surgeon)||void 0===n?void 0:n.name]}),(null==x?void 0:null===(a=x.surgeon)||void 0===a?void 0:a.designation)&&(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Designation: ",null==x?void 0:null===(o=x.surgeon)||void 0===o?void 0:o.designation]})]}),"anesthesiologist"in x&&(null==x?void 0:x.anesthesiologist)&&(0,i.jsxs)(j.Stack,{gap:2,children:[(0,i.jsx)(g.Text,{size:"xl",fw:500,children:"Anesthesiologist Details:"}),(0,i.jsx)(g.Text,{fw:700,size:"sm",children:null==x?void 0:null===(r=x.anesthesiologist)||void 0===r?void 0:r.name}),(null==x?void 0:null===(d=x.anesthesiologist)||void 0===d?void 0:d.designation)&&(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Designation: ",null==x?void 0:null===(c=x.anesthesiologist)||void 0===c?void 0:c.designation]})]}),"pC"in x&&(null==x?void 0:x.pC)&&(0,i.jsxs)(j.Stack,{gap:2,children:[(0,i.jsx)(g.Text,{size:"xl",fw:500,children:"PC Details:"}),(0,i.jsxs)(g.Text,{fw:700,size:"sm",children:["Name: ",null==x?void 0:null===(h=x.pC)||void 0===h?void 0:h.name]})]})]}),(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(g.Text,{size:"sm",children:"Period:"}),(0,i.jsxs)(g.Text,{children:[m?new Date(m).toLocaleDateString():"All time",p?" - ".concat(new Date(p).toLocaleDateString()):""]})]})]}),(0,i.jsx)(u.X,{withBorder:!0,className:"mt-4",children:(0,i.jsxs)(s.i,{className:ee().table,striped:!0,highlightOnHover:!0,children:[(0,i.jsx)(s.i.Thead,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Th,{children:"Payment Date"}),(0,i.jsx)(s.i.Th,{children:"Operation Name"}),(0,i.jsx)(s.i.Th,{children:"Bill ID"}),(0,i.jsx)(s.i.Th,{children:"Bill Date"}),(0,i.jsx)(s.i.Th,{children:"Patient (PID)"}),(0,i.jsx)(s.i.Th,{children:"Paid Amount"})]})}),(0,i.jsx)(s.i.Tbody,{children:[x].map(e=>("string"==typeof e.info?Array.isArray(JSON.parse(e.info))?JSON.parse(e.info):[JSON.parse(e.info)]:Array.isArray(e.info)?e.info:[e.info]).map(t=>{var n,a,o;return(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{children:new Date(e.updatedAt).toLocaleDateString()}),(0,i.jsx)(s.i.Td,{children:t.name}),(0,i.jsx)(s.i.Td,{children:(null==t?void 0:null===(n=t.hospitalBill)||void 0===n?void 0:n.billId)||(null==t?void 0:t.billId)||"-"}),(0,i.jsx)(s.i.Td,{children:new Date(t.createdAt).toLocaleDateString()}),(0,i.jsxs)(s.i.Td,{children:[(null==t?void 0:null===(a=t.patient)||void 0===a?void 0:a.name)||"-","(",(null==t?void 0:null===(o=t.patient)||void 0===o?void 0:o.patientId)||"-",")"]}),(0,i.jsxs)(s.i.Td,{children:[("pC"in x?(null==t?void 0:t.pcAmount)||0:"surgeon"in x&&(null==x?void 0:x.surgeon)?(null==t?void 0:t.surgeonAmount)||0:(null==t?void 0:t.anesthesiologistAmount)||0).toFixed(2)," "]})]},t.id)}))}),(0,i.jsx)(s.i.Tfoot,{children:(0,i.jsxs)(s.i.Tr,{children:[(0,i.jsx)(s.i.Td,{colSpan:5,style:{textAlign:"center"},children:(0,i.jsx)("strong",{children:"Total"})}),(0,i.jsx)(s.i.Td,{children:(0,i.jsxs)("strong",{children:[v.toFixed(2)," BDT"]})})]})})]})}),(0,i.jsxs)(g.Text,{size:"sm",c:"dimmed",ta:"center",className:"mt-4",children:["Generated on ",new Date().toLocaleString(),(0,i.jsx)("br",{}),"Powered By SasthoTech"]})]})]})});eU.displayName="StatementView";let eQ=e=>{let{trx:t,startDate:n,endDate:s}=e,[a,{open:o,close:r}]=(0,eR.q)(!1),u=D.useRef(null),h=(0,_.useReactToPrint)({content:()=>u.current,documentTitle:" Indoor Transaction  Details",onBeforeGetContent:()=>new Promise(e=>{a?e():(o(),setTimeout(()=>{e()},500))}),onAfterPrint:()=>{r()}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Group,{gap:5,children:[(0,i.jsx)(d.u,{label:"View Details",children:(0,i.jsx)(c.A,{onClick:o,color:"green",variant:"light",children:(0,i.jsx)(T.Z,{size:"1.125rem"})})}),(0,i.jsx)(d.u,{label:"Print this transaction",children:(0,i.jsx)(c.A,{onClick:h,color:"orange",variant:"light",children:(0,i.jsx)(w.Z,{size:"1.125rem"})})})]}),(0,i.jsx)(v.u,{size:"80%",opened:a,onClose:r,title:"Transaction Details",children:(0,i.jsx)(eU,{ref:u,transaction:t,startDate:n,endDate:s})})]})};var eW=()=>{let[e,t]=(0,D.useState)("surgeons"),[n,s]=(0,D.useState)("surgeons"),a=(0,A.useRouter)(),o=(0,A.useSearchParams)();return console.log(o.get("tabId"),"tabID"),(0,D.useEffect)(()=>{if(o.get("tabId")){var e;t(null!==(e=null==o?void 0:o.get("tabId"))&&void 0!==e?e:"surgeons")}},[o]),(0,i.jsxs)("div",{className:eZ().container,children:[(0,i.jsxs)("div",{className:eZ().bg,children:[(0,i.jsx)(h.Title,{children:"Indoor Payments"}),(0,i.jsx)(ek.m,{classNames:eZ(),mt:20,defaultValue:n,value:e,onChange:e=>{e&&a.push("?tabId=".concat(e)),t(e)},styles:{tab:{padding:"15px 20px",fontSize:18}},children:(0,i.jsxs)(ek.m.List,{children:[(0,i.jsx)(ek.m.Tab,{value:"surgeons",children:"Surgeons"}),(0,i.jsx)(ek.m.Tab,{value:"anesthesiologists",children:"Anesthesiologists"}),(0,i.jsx)(ek.m.Tab,{value:"pc",children:"PCs"}),(0,i.jsx)(ek.m.Tab,{value:"statements",children:"Statements"}),(0,i.jsx)(ek.m.Tab,{value:"transactions",children:"Transactions"})]})})]}),(0,i.jsx)(eI.Z,{radius:"md",className:eZ().bg2,children:(0,i.jsxs)(ek.m,{value:e,children:[(0,i.jsx)(ek.m.Panel,{value:"surgeons",children:(0,i.jsx)(eC,{})}),(0,i.jsx)(ek.m.Panel,{value:"anesthesiologists",children:(0,i.jsx)(el,{})}),(0,i.jsx)(ek.m.Panel,{value:"pc",children:(0,i.jsx)(eb,{})}),(0,i.jsx)(ek.m.Panel,{value:"statements",children:(0,i.jsx)(eF,{})}),(0,i.jsx)(ek.m.Panel,{value:"transactions",children:(0,i.jsx)(eH,{})})]})})]})}},71256:function(e,t,n){"use strict";var i=n(68328),s=n(22614),a=n(22041),o=n(77303),r=n(62471);t.Z=e=>{let{diagnostic:t,email:n,children:l,color:d,patientId:c,small:u,large:h,isBigLogo:g,idLabel:x,idBorder:m,labId:p}=e,v=(0,r._)({key:"print-show-division-name",defaultValue:"true"});return(0,i.jsxs)("div",{className:"diagnostic-info1",children:[(0,i.jsx)(s.Group,{children:g&&(0,i.jsx)("img",{style:{aspectRatio:"auto",width:"100%",height:"100px"},src:"/images/heathcare.png",alt:"Diagnotic Image"})}),(0,i.jsxs)(s.Group,{wrap:"nowrap",justify:g?"center":"space-between",children:[(0,i.jsxs)(s.Group,{wrap:"nowrap",bg:"white",py:1,mb:1,align:"center",children:[null!=g?g:(0,i.jsx)("img",{width:u?50:100,height:u?50:100,style:{objectFit:"cover"},src:"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")?null==t?void 0:t.offlineLogo:null==t?void 0:t.logo,alt:"Diagnotic Image"}),(0,i.jsx)(s.Group,{wrap:"nowrap",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Text,{styles:{root:{fontSize:"".concat(h?32:u?14:24)}},size:"xl",style:{fontSize:h?16:void 0},fw:700,children:null==t?void 0:t.name}),(0,i.jsxs)(a.Text,{fw:500,my:1,styles:{root:{wordBreak:"break-word",fontSize:h?12:void 0}},children:["Address: ",null==t?void 0:t.address,"true"===v&&(null==t?void 0:t.division)?";".concat(null==t?void 0:t.division):""]}),(0,i.jsxs)(s.Group,{children:[(0,i.jsxs)(a.Text,{my:1,fw:500,styles:{root:{wordBreak:"break-word",fontSize:h?12:void 0}},children:["Phone: ",null==t?void 0:t.phone1," , ",null==t?void 0:t.phone2]}),n?(0,i.jsxs)(a.Text,{my:1,fw:500,styles:{root:{wordBreak:"break-word",fontSize:h?16:void 0}},children:["; Email : ",n]}):(0,i.jsx)(i.Fragment,{})]})]})})]}),p&&(0,i.jsxs)(a.Text,{fw:700,mt:"auto",mb:9,style:{border:m?"2px solid #555":"none",padding:m?"4px":"0px",borderRadius:m?"2px":"0px"},styles:{root:{fontSize:"calc(var(--mantine-scale) * ".concat(h?16:u?12:14,")")}},children:["Lab\xa0ID:\xa0",p]}),c&&(0,i.jsxs)(a.Text,{fw:700,mt:"auto",mb:9,style:{border:m?"2px solid #555":"none",padding:m?"4px":"0px",borderRadius:m?"2px":"0px"},styles:{root:{fontSize:"calc(var(--mantine-scale) * ".concat(h?16:u?12:14,")")}},children:["Patient\xa0ID:\xa0",c]}),l]}),(0,i.jsx)(o.Divider,{size:"sm",color:d||"black",style:{marginBottom:"2px"}})]})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return s},Hn:function(){return i},y4:function(){return a}});let i={headers:{"Content-Type":"application/json"}},s={withCredentials:!0},a={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},89123:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var i=n(12450),s=n(4505);function a(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),n=(0,s.useCallback)(e=>null==e||""===e?null:e instanceof Date?e.toISOString():String(e),[]),a=(0,s.useCallback)(e=>t.get(e),[t]),o=(0,s.useCallback)((e,n)=>{let i=t.get(e);if(null===i)return n;if(n instanceof Date){let e=new Date(i);return isNaN(e.getTime())?n:e}if("boolean"==typeof n)return"true"===i;if("number"==typeof n){let e=Number(i);return isNaN(e)?n:e}return i},[t]),r=(0,s.useCallback)(()=>{let e={};return t.forEach((t,n)=>{e[n]=t}),e},[t]),l=(0,s.useCallback)((i,s)=>{let a=new URLSearchParams(Array.from(t.entries())),o=n(s);null!==o?a.set(i,o):a.delete(i);let r=a.toString();e.replace("".concat(window.location.pathname).concat(r?"?".concat(r):""),{scroll:!1})},[e,t,n]),d=(0,s.useCallback)(i=>{let s=new URLSearchParams(Array.from(t.entries()));Object.entries(i).forEach(e=>{let[t,i]=e,a=n(i);null!==a?s.set(t,a):s.delete(t)});let a=s.toString();e.replace("".concat(window.location.pathname).concat(a?"?".concat(a):""),{scroll:!1})},[e,t,n]);return{getParam:a,getTypedParam:o,getAllParams:r,updateUrlParam:l,updateUrlParams:d,removeUrlParam:(0,s.useCallback)(n=>{let i=new URLSearchParams(Array.from(t.entries()));i.delete(n);let s=i.toString();e.replace("".concat(window.location.pathname).concat(s?"?".concat(s):""),{scroll:!1})},[e,t]),removeUrlParams:(0,s.useCallback)(n=>{let i=new URLSearchParams(Array.from(t.entries()));n.forEach(e=>i.delete(e));let s=i.toString();e.replace("".concat(window.location.pathname).concat(s?"?".concat(s):""),{scroll:!1})},[e,t]),clearAllParams:(0,s.useCallback)(()=>{e.replace(window.location.pathname,{scroll:!1})},[e])}}},61222:function(e,t,n){"use strict";n.d(t,{Ag:function(){return a},Ju:function(){return d},OS:function(){return c},P8:function(){return o},cW:function(){return l},ls:function(){return s}});let i=n(78101).g.injectEndpoints({endpoints:e=>({getAnesthesiologists:e.query({query:e=>{let{page:t,limit:n}=e,i=new URLSearchParams;return t&&i.append("page",t.toString()),n&&i.append("limit",n.toString()),{url:"/anesthesiologist?".concat(i.toString())}},keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createAnesthesiologist:e.mutation({query:e=>{let t=new FormData;return console.log(e),t.append("name",e.name),e.designation&&t.append("designation",e.designation),e.image&&t.append("image",e.image,e.image.name),e.operations&&e.operations.forEach((e,n)=>{t.append("anesthesiologistFee[".concat(n,"][anesthesiologistFeeAmount]"),e.price.toString()),t.append("anesthesiologistFee[".concat(n,"][operationId]"),e.id)}),{url:"/anesthesiologist",method:"POST",body:t}},async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t;Date.now().toString(36);try{let{data:e}=await i}catch(e){}}}),updateAnesthesiologist:e.mutation({query:e=>{let{id:t,name:n,designation:i,image:s,operations:a}=e;console.log(a);let o=new FormData;return o.append("name",n),i&&o.append("designation",i),s&&o.append("image",s,s.name),a&&a.length>0&&a.forEach((e,t)=>{o.append("anesthesiologistFee[".concat(t,"][anesthesiologistFeeAmount]"),e.price.toString()),e.anesthesiologistFeeId&&o.append("anesthesiologistFee[".concat(t,"][id]"),e.anesthesiologistFeeId),o.append("anesthesiologistFee[".concat(t,"][operationId]"),e.id)}),{url:"/anesthesiologist/".concat(t),method:"PATCH",body:o}}}),updateAnesthesiologistFee:e.mutation({query:e=>{let{anesthesiologistId:t,...n}=e;return{url:"/anesthesiologist/fee/".concat(t),method:"PATCH",body:n}}}),deleteAnesthesiologistFee:e.mutation({query:e=>{let{id:t}=e;return{url:"/anesthesiologist/fee/".concat(t),method:"DELETE"}}}),deleteAnesthesiologist:e.mutation({query:e=>({url:"/anesthesiologist/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t,a=n(i.util.updateQueryData("getAnesthesiologists",{page:void 0,limit:void 0},t=>{t.data.anesthesiologists.find(t=>t.id===e)&&(t.data.loading=!0)}));try{await s,n(i.util.updateQueryData("getAnesthesiologists",{page:void 0,limit:void 0},t=>{let n=t.data.anesthesiologists.findIndex(t=>t.id===e);n>=0&&t.data.anesthesiologists.splice(n,1)}))}catch(e){a.undo()}}}),getSingleAnesthesiologist:e.query({query:e=>({url:"/anesthesiologist/".concat(e)})})})}),{useCreateAnesthesiologistMutation:s,useUpdateAnesthesiologistMutation:a,useDeleteAnesthesiologistMutation:o,useGetSingleAnesthesiologistQuery:r,useGetAnesthesiologistsQuery:l,useDeleteAnesthesiologistFeeMutation:d,useUpdateAnesthesiologistFeeMutation:c}=i},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(49854),s=n(68240),a=n(94183),o=n(28317);let r=(0,s.LC)({baseQuery:(0,a.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let s="string"==typeof e?e:e.url;return s.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,o.t8)(s,await n.clone().json().catch(()=>null),(0,i.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(n,(0,i.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},74559:function(e,t,n){"use strict";n.d(t,{Im:function(){return o},av:function(){return a},nC:function(){return s}});let i=(0,n(79258).createSlice)({name:"auth",initialState:{isAuth:null,user:null,isProfileIncomplete:!1,diagnostic:null},reducers:{setUser:(e,t)=>{var n;e.user=t.payload,e.isAuth=!!t.payload,(null===(n=t.payload)||void 0===n?void 0:n.name)?localStorage.setItem("name",t.payload.name):localStorage.removeItem("name")},setDiagnostic:(e,t)=>{let n=t.payload;"hospital.sasthotech.com"===window.location.hostname?n.activeLogo=n.logo:n.activeLogo=n.offlineLogo,e.diagnostic=n},setProfileIncomplete:(e,t)=>{e.isProfileIncomplete=t.payload}}}),s=e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.role},{setUser:a,setDiagnostic:o}=i.actions;t.ZP=i.reducer},25499:function(e,t,n){"use strict";n.d(t,{C:function(){return a},T:function(){return s}});var i=n(53502);let s=()=>(0,i.I0)(),a=i.v9},75540:function(e,t,n){"use strict";n.d(t,{JC:function(){return o},K0:function(){return a},Nr:function(){return g},Uc:function(){return c},Vi:function(){return j},db:function(){return d},ey:function(){return l},fR:function(){return r},h2:function(){return u},hC:function(){return m},js:function(){return v},pL:function(){return x},s:function(){return h}});var i=n(78101);let s=i.g.injectEndpoints({endpoints:e=>({getPCs:e.query({query:e=>{let{page:t=1,limit:n=10,search:i=""}=e||{},s=new URLSearchParams;return s.append("page",t.toString()),s.append("limit",n.toString()),i&&s.append("search",i),{url:"/pc?".concat(s.toString())}},keepUnusedDataFor:60}),getPCsPaginated:e.query({query:e=>{let{page:t=1,limit:n=10,search:i=""}=e||{},s=new URLSearchParams;return s.append("page",t.toString()),s.append("limit",n.toString()),i&&s.append("search",i),{url:"/pc/paginated?".concat(s.toString())}},keepUnusedDataFor:60}),createPC:e.mutation({query:e=>({url:"/pc",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s,n(i.g.util.invalidateTags(["PC"]))}catch(e){}}}),updatePC:e.mutation({query:e=>{let{id:t,name:n,percentage:i,fathersName:s,mobile:a,thana:o,address:r,district:l}=e;return{url:"/pc/".concat(t),method:"PATCH",body:{name:n,percentage:i,fathersName:s,mobile:a,thana:o,address:r,district:l}}},async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s,n(i.g.util.invalidateTags(["PC"]))}catch(e){}}}),deletePC:e.mutation({query:e=>({url:"/pc/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s,n(i.g.util.invalidateTags(["PC"]))}catch(e){}}}),getSinglePC:e.query({query:e=>({url:"/pc/".concat(e)})}),getSinglePCTests:e.query({query:e=>({url:"/pc/".concat(e,"/tests")})}),getPCCodeSettings:e.query({query:()=>({url:"/diagnostic/pc-code-settings"})}),updatePCCodeSettings:e.mutation({query:e=>({url:"/diagnostic/pc-code-settings",method:"PATCH",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t;try{let{data:e}=await i;n(s.util.updateQueryData("getPCCodeSettings",void 0,t=>{Object.assign(t.data,e.data)}))}catch(e){}}}),bulkCreatePCs:e.mutation({query:e=>({url:"/pc/bulk-create",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s,n(i.g.util.invalidateTags(["PC"]))}catch(e){}}}),bulkAssignCodes:e.mutation({query:()=>({url:"/pc/bulk-assign-codes",method:"POST"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s,n(i.g.util.invalidateTags(["PC"]))}catch(e){}}}),previewSyncCodes:e.query({query:()=>({url:"/pc/sync-codes/preview"})}),syncCodes:e.mutation({query:()=>({url:"/pc/sync-codes",method:"POST"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t;try{await s,n(i.g.util.invalidateTags(["PC"]))}catch(e){}}})})}),{useGetPCsQuery:a,useGetPCsPaginatedQuery:o,useCreatePCMutation:r,useUpdatePCMutation:l,useDeletePCMutation:d,useGetSinglePCQuery:c,useGetSinglePCTestsQuery:u,useGetPCCodeSettingsQuery:h,useUpdatePCCodeSettingsMutation:g,useBulkCreatePCsMutation:x,useBulkAssignCodesMutation:m,usePreviewSyncCodesQuery:p,useLazyPreviewSyncCodesQuery:v,useSyncCodesMutation:j}=s},77606:function(e,t,n){"use strict";n.d(t,{$T:function(){return l},Bu:function(){return o},Y0:function(){return d},dF:function(){return a},jj:function(){return s},qO:function(){return c}});let i=n(78101).g.injectEndpoints({endpoints:e=>({getSurgeons:e.query({query:e=>{let{page:t,limit:n}=e,i=new URLSearchParams;return t&&i.append("page",t.toString()),n&&i.append("to",n.toString()),{url:"/surgeon?".concat(i.toString())}},keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createSurgeon:e.mutation({query:e=>{let t=new FormData;return console.log(e),t.append("name",e.name),e.designation&&t.append("designation",e.designation),e.image&&t.append("image",e.image,e.image.name),e.operations&&e.operations.forEach((e,n)=>{t.append("surgeonFee[".concat(n,"][surgeonFeeAmount]"),e.price.toString()),t.append("surgeonFee[".concat(n,"][operationId]"),e.id)}),{url:"/surgeon",method:"POST",body:t}},async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t;Date.now().toString(36);try{let{data:e}=await i;console.log(e)}catch(e){}}}),updateSurgeon:e.mutation({query:e=>{let{id:t,name:n,designation:i,image:s,operations:a}=e;console.log(a);let o=new FormData;return o.append("name",n),i&&o.append("designation",i),s&&o.append("image",s,s.name),a&&a.length>0&&a.forEach((e,t)=>{o.append("surgeonFee[".concat(t,"][surgeonFeeAmount]"),e.price.toString()),e.surgeonFeeId&&o.append("surgeonFee[".concat(t,"][id]"),e.surgeonFeeId),o.append("surgeonFee[".concat(t,"][operationId]"),e.id)}),{url:"/surgeon/".concat(t),method:"PATCH",body:o}}}),updateSurgeonFee:e.mutation({query:e=>{let{surgeonId:t,...n}=e;return{url:"/surgeon/fee/".concat(t),method:"PATCH",body:n}}}),deleteSurgeonFee:e.mutation({query:e=>{let{id:t}=e;return{url:"/surgeon/fee/".concat(t),method:"DELETE"}}}),deleteSurgeon:e.mutation({query:e=>({url:"/surgeon/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:s}=t,a=n(i.util.updateQueryData("getSurgeons",{page:void 0,limit:void 0},t=>{t.data.surgeons.find(t=>t.id===e)&&(t.data.loading=!0)}));try{await s,n(i.util.updateQueryData("getSurgeons",{page:void 0,limit:void 0},t=>{let n=t.data.surgeons.findIndex(t=>t.id===e);n>=0&&t.data.surgeons.splice(n,1)}))}catch(e){a.undo()}}}),getSingleSurgeon:e.query({query:e=>({url:"/surgeon/".concat(e)})})})}),{useCreateSurgeonMutation:s,useUpdateSurgeonMutation:a,useDeleteSurgeonMutation:o,useGetSingleSurgeonQuery:r,useGetSurgeonsQuery:l,useDeleteSurgeonFeeMutation:d,useUpdateSurgeonFeeMutation:c}=i},49854:function(e,t,n){"use strict";let i;n.d(t,{d:function(){return d},x:function(){return l}});var s=n(72940),a=n(6780),o=n(67732),r=n(28317);function l(){return i||(i=(0,r.MT)("cached-responses-store","cached-responses")),i}async function d(e,t){try{let n=await a.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...s.FD});return await (0,r.t8)(e,n.data,l()),n.data}catch(t){if(t instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(t.code)){let t=await (0,r.U2)(e,l());if(t)return t}throw t instanceof o.d7&&t.response&&401===t.response.status||console.error(t),t}}},57167:function(e){e.exports={container:"styles_container__s8sRx",bg2:"styles_bg2__s1gWx",bg1:"styles_bg1__b94_1",bg:"styles_bg__f1g21",tab:"styles_tab__xfmnd"}},26475:function(e){e.exports={table:"styles_table__TAqKc"}},22614:function(e,t,n){"use strict";n.r(t),n.d(t,{Group:function(){return x}});var i=n(68328),s=n(4505),a=n(63773),o=n(55622),r=n(65786),l=n(28266),d=n(32451),c=n(36246),u={root:"m_4081bf90"};let h={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},g=(0,o.Z)((e,t,n)=>{let{grow:i,preventGrowOverflow:s,gap:o,align:r,justify:l,wrap:d}=t,{childWidth:c}=n;return{root:{"--group-child-width":i&&s?c:void 0,"--group-gap":(0,a.bG)(o),"--group-align":r,"--group-justify":l,"--group-wrap":d}}}),x=(0,c.d5)((e,t)=>{let n=(0,r.w)("Group",h,e),{classNames:o,className:c,style:x,styles:m,unstyled:p,children:v,gap:j,align:f,justify:y,wrap:T,grow:S,preventGrowOverflow:w,vars:D,variant:b,__size:A,mod:P,...C}=n,k=s.Children.toArray(v).filter(Boolean),I=k.length,O=(0,a.bG)(null!=j?j:"md"),Z="calc(".concat(100/I,"% - (").concat(O," - ").concat(O," / ").concat(I,"))"),N=(0,l.y)({name:"Group",props:n,stylesCtx:{childWidth:Z},className:c,style:x,classes:u,classNames:o,styles:m,unstyled:p,vars:D,varsResolver:g});return(0,i.jsx)(d.Box,{...N("root"),ref:t,variant:b,mod:[{grow:S},P],size:A,...C,children:k})});x.classes=u,x.displayName="@mantine/core/Group"},80745:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});var i=n(68328);n(4505);var s=n(4687),a=n(9722),o=n(83375);let r={__staticSelector:"InputBase",withAria:!0},l=(0,s.b)((e,t)=>{let{inputProps:n,wrapperProps:s,...l}=(0,o.k)("InputBase",r,e);return(0,i.jsx)(a.I.Wrapper,{...s,children:(0,i.jsx)(a.I,{...n,...l,ref:t})})});l.classes={...a.I.classes,...a.I.Wrapper.classes},l.displayName="@mantine/core/InputBase"},13822:function(e,t,n){"use strict";n.d(t,{f:function(){return v}});var i=n(68328);n(4505);var s=n(58535),a=n(55622),o=n(11692),r=n(65786),l=n(28266),d=n(32451),c=n(36246),u=n(14587),h=n(94405),g=n(44176),x={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};let m={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:(0,s.w)("overlay")},p=(0,a.Z)((e,t)=>{let{zIndex:n}=t;return{root:{"--lo-z-index":null==n?void 0:n.toString()}}}),v=(0,c.d5)((e,t)=>{let n=(0,r.w)("LoadingOverlay",m,e),{classNames:s,className:a,style:c,styles:v,unstyled:j,vars:f,transitionProps:y,loaderProps:T,overlayProps:S,visible:w,zIndex:D,...b}=n,A=(0,o.rZ)(),P=(0,l.y)({name:"LoadingOverlay",classes:x,props:n,className:a,style:c,classNames:s,styles:v,unstyled:j,vars:f,varsResolver:p}),C={...m.overlayProps,...S};return(0,i.jsx)(g.u,{transition:"fade",...y,mounted:!!w,children:e=>(0,i.jsxs)(d.Box,{...P("root",{style:e}),ref:t,...b,children:[(0,i.jsx)(u.Loader,{...P("loader"),unstyled:j,...T}),(0,i.jsx)(h.a,{...C,...P("overlay"),darkHidden:!0,unstyled:j,color:(null==S?void 0:S.color)||A.white}),(0,i.jsx)(h.a,{...C,...P("overlay"),lightHidden:!0,unstyled:j,color:(null==S?void 0:S.color)||A.colors.dark[5]})]})})});v.classes=x,v.displayName="@mantine/core/LoadingOverlay"},25621:function(e,t,n){"use strict";n.d(t,{O:function(){return x}});var i=n(68328),s=n(53729);n(4505);var a=n(63773),o=n(55622),r=n(65786),l=n(28266),d=n(32451),c=n(36246),u={root:"m_18320242","skeleton-fade":"m_299c329c"};let h={visible:!0,animate:!0},g=(0,o.Z)((e,t)=>{let{width:n,height:i,radius:o,circle:r}=t;return{root:{"--skeleton-height":(0,s.h)(i),"--skeleton-width":r?(0,s.h)(i):(0,s.h)(n),"--skeleton-radius":r?"1000px":void 0===o?void 0:(0,a.H5)(o)}}}),x=(0,c.d5)((e,t)=>{let n=(0,r.w)("Skeleton",h,e),{classNames:s,className:a,style:o,styles:c,unstyled:x,vars:m,width:p,height:v,circle:j,visible:f,radius:y,animate:T,mod:S,...w}=n,D=(0,l.y)({name:"Skeleton",classes:u,props:n,className:a,style:o,classNames:s,styles:c,unstyled:x,vars:m,varsResolver:g});return(0,i.jsx)(d.Box,{ref:t,...D("root"),mod:[{visible:f,animate:T},S],...w})});x.classes=u,x.displayName="@mantine/core/Skeleton"},68242:function(e,t,n){"use strict";n.r(t),n.d(t,{Title:function(){return m}});var i=n(68328);n(4505);var s=n(55622),a=n(65786),o=n(28266),r=n(32451),l=n(36246),d=n(53729);let c=["h1","h2","h3","h4","h5","h6"],u=["xs","sm","md","lg","xl"];var h={root:"m_8a5d1357"};let g={order:1},x=(0,s.Z)((e,t)=>{let{order:n,size:i,lineClamp:s,textWrap:a}=t,o=function(e,t){let n=void 0!==t?t:"h".concat(e);return c.includes(n)?{fontSize:"var(--mantine-".concat(n,"-font-size)"),fontWeight:"var(--mantine-".concat(n,"-font-weight)"),lineHeight:"var(--mantine-".concat(n,"-line-height)")}:u.includes(n)?{fontSize:"var(--mantine-font-size-".concat(n,")"),fontWeight:"var(--mantine-h".concat(e,"-font-weight)"),lineHeight:"var(--mantine-h".concat(e,"-line-height)")}:{fontSize:(0,d.h)(n),fontWeight:"var(--mantine-h".concat(e,"-font-weight)"),lineHeight:"var(--mantine-h".concat(e,"-line-height)")}}(n,i);return{root:{"--title-fw":o.fontWeight,"--title-lh":o.lineHeight,"--title-fz":o.fontSize,"--title-line-clamp":"number"==typeof s?s.toString():void 0,"--title-text-wrap":a}}}),m=(0,l.d5)((e,t)=>{let n=(0,a.w)("Title",g,e),{classNames:s,className:l,style:d,styles:c,unstyled:u,order:m,vars:p,size:v,variant:j,lineClamp:f,textWrap:y,mod:T,...S}=n,w=(0,o.y)({name:"Title",props:n,classes:h,className:l,style:d,classNames:s,styles:c,unstyled:u,vars:p,varsResolver:x});return[1,2,3,4,5,6].includes(m)?(0,i.jsx)(r.Box,{...w("root"),component:"h".concat(m),variant:j,ref:t,mod:[{order:m,"data-line-clamp":"number"==typeof f},T],size:v,...S}):null});m.classes=h,m.displayName="@mantine/core/Title"},62471:function(e,t,n){"use strict";n.d(t,{_:function(){return l},I:function(){return r}});var i=n(4505),s=n(6975);function a(e){try{return e&&JSON.parse(e)}catch(t){return e}}function o(e){return{getItem:t=>{try{return window[e].getItem(t)}catch(e){return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(t,n)=>{try{window[e].setItem(t,n)}catch(e){console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:t=>{try{window[e].removeItem(t)}catch(e){console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function r(e){return(function(e,t){let n="localStorage"===e?"mantine-local-storage":"mantine-session-storage",{getItem:r,setItem:l,removeItem:d}=o(e);return function(o){let{key:c,defaultValue:u,getInitialValueInEffect:h=!0,sync:g=!0,deserialize:x=a,serialize:m=e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"use-local-storage";try{return JSON.stringify(e)}catch(e){throw Error("@mantine/hooks ".concat(t,": Failed to serialize the value"))}})(e,t)}=o,p=(0,i.useCallback)(t=>{let n;try{n="undefined"==typeof window||!(e in window)||null===window[e]||!!t}catch(e){n=!0}if(n)return u;let i=r(c);return null!==i?x(i):u},[c,u]),[v,j]=(0,i.useState)(p(h)),f=(0,i.useCallback)(e=>{e instanceof Function?j(t=>{let i=e(t);return l(c,m(i)),window.dispatchEvent(new CustomEvent(n,{detail:{key:c,value:e(t)}})),i}):(l(c,m(e)),window.dispatchEvent(new CustomEvent(n,{detail:{key:c,value:e}})),j(e))},[c]),y=(0,i.useCallback)(()=>{d(c),window.dispatchEvent(new CustomEvent(n,{detail:{key:c,value:u}}))},[]);return(0,s.s)("storage",t=>{if(g&&t.storageArea===window[e]&&t.key===c){var n;j(x(null!==(n=t.newValue)&&void 0!==n?n:void 0))}}),(0,s.s)(n,e=>{g&&e.detail.key===c&&j(e.detail.value)}),(0,i.useEffect)(()=>{void 0!==u&&void 0===v&&f(u)},[u,v,f]),(0,i.useEffect)(()=>{let e=p();void 0!==e&&f(e)},[c]),[void 0===v?u:v,f,y]}})("localStorage","use-local-storage")(e)}let l=function(e){let{getItem:t}=o(e);return function(n){let i,{key:s,defaultValue:o,deserialize:r=a}=n;try{i="undefined"==typeof window||!(e in window)||null===window[e]}catch(e){i=!0}if(i)return o;let l=t(s);return null!==l?r(l):o}}("localStorage")},67781:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","calendar","Calendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]])},35587:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","credit-card-pay","CreditCardPay",[["path",{d:"M12 19h-6a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v4.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M16 19h6",key:"svg-2"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-3"}],["path",{d:"M7.005 15h.005",key:"svg-4"}],["path",{d:"M11 15h2",key:"svg-5"}]])},38917:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","receipt","Receipt",[["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16l-3 -2l-2 2l-2 -2l-2 2l-2 -2l-3 2m4 -14h6m-6 4h6m-2 4h2",key:"svg-0"}]])},50430:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","refresh","Refresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]])},37038:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","zoom-in","ZoomIn",[["path",{d:"M3 10a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M10 7l0 6",key:"svg-2"}],["path",{d:"M21 21l-6 -6",key:"svg-3"}]])},3098:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","zoom-out","ZoomOut",[["path",{d:"M3 10a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M21 21l-6 -6",key:"svg-2"}]])},64571:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(52165).Z)("outline","zoom-reset","ZoomReset",[["path",{d:"M21 21l-6 -6",key:"svg-0"}],["path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403",key:"svg-1"}],["path",{d:"M3 4v4h4",key:"svg-2"}]])}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,154,6306,7698,7186,4927,9669,7140,1291,1522,9175,7402,1744],function(){return e(e.s=42262)}),_N_E=e.O()}]);