(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2179,1054],{91054:function(){},33848:function(e,t,i){Promise.resolve().then(i.bind(i,16493))},16493:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return ey}});var o=i(68328),n=i(71256),l=i(35689),a=i(3741),r=i(52042),s=i(68242),d=i(41224),u=i(72375),c=i(46557),m=i(38156),h=i(4505);let p=[{id:"totalBill",label:"Total Bill",visible:!0},{id:"todayAdmitted",label:"Today Admitted",visible:!0},{id:"paidAmount",label:"Paid Amount",visible:!0},{id:"dueAmount",label:"Due Amount",visible:!0},{id:"pcPayment",label:"PC Payment",visible:!0},{id:"surgeonFee",label:"Surgeon Fee",visible:!0},{id:"admissionFee",label:"Admission Fee",visible:!0},{id:"anesthesiologistFee",label:"Anesthesiologist Fee",visible:!0},{id:"otherExpenses",label:"Other Expenses",visible:!0},{id:"advanceFee",label:"Advance Fee",visible:!0},{id:"moneyInCash",label:"Money In Cash",visible:!0},{id:"sasthoTechCharge",label:"SasthoTech Service Charge",visible:!0}],f="indoor-dashboard-field-visibility";function v(){let[e,t]=(0,h.useState)(p);return(0,h.useEffect)(()=>{let e=localStorage.getItem(f);if(e)try{let i=JSON.parse(e);t(i)}catch(e){console.error("Failed to parse dashboard field settings",e)}},[]),{fields:e,updateField:(i,o)=>{let n=e.map(e=>e.id===i?{...e,visible:o}:e);t(n),localStorage.setItem(f,JSON.stringify(n))},resetFields:()=>{t(p),localStorage.removeItem(f)}}}function x(){let[e,{open:t,close:i}]=(0,c.q)(!1),{fields:n,updateField:l,resetFields:h}=v();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.A,{variant:"filled",size:"lg",onClick:t,"aria-label":"Dashboard Field Settings",children:(0,o.jsx)(m.Z,{style:{width:"70%",height:"70%"},stroke:1.5})}),(0,o.jsx)(r.d,{opened:e,onClose:i,title:(0,o.jsx)(s.Title,{order:4,children:"Dashboard Field Visibility"}),position:"right",size:"md",children:(0,o.jsx)(d.Stack,{gap:"md",children:n.map(e=>(0,o.jsx)(u.X,{label:e.label,checked:e.visible,onChange:t=>l(e.id,t.currentTarget.checked)},e.id))})})]})}var g=i(69667),y=i(98641),b=i(7203),j=i(72752),w=i(65850),S=i(1860),A=i.n(S),C=i(26809),T=i(25499),k=i(62549),D=i(25985),I=i(97698),P=i(86431),B=i(71149),z=e=>{var t;let{dashboardInfo:n,patients:l}=e,[a,r]=(0,h.useState)(null),[s,d]=(0,h.useState)(!1),[u,c]=(0,h.useState)(null),[m,p]=(0,h.useState)(0);null==l||null===(t=l.todayAdmitted)||void 0===t||t.reduce((e,t)=>e+(null==t?void 0:t.paidAmount),0),w.Zx.register({family:"Roboto",fonts:[{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc9.ttf",fontWeight:900},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf",fontWeight:400},{src:"https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc9.ttf",fontWeight:700}]}),w.Zx.register({family:"NotoSans",fonts:[{src:"/fonts/NotoSans/NotoSans_Condensed-Regular.ttf"},{src:"/fonts/NotoSans/NotoSans-Bold.ttf",fontWeight:"bold"},{src:"/fonts/NotoSans/NotoSans-Italic.ttf",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-BoldItalic.ttf",fontWeight:"bold",fontStyle:"italic"},{src:"/fonts/NotoSans/NotoSans-Black.ttf",fontWeight:900},{src:"/fonts/NotoSans/NotoSans-ExtraBold.ttf",fontWeight:800},{src:"/fonts/NotoSans/NotoSans_Condensed-SemiBold.ttf",fontWeight:600},{src:"/fonts/NotoSans/NotoSans_Condensed-Medium.ttf",fontWeight:500},{src:"/fonts/NotoSans/NotoSans_Condensed-Light.ttf",fontWeight:300},{src:"/fonts/NotoSans/NotoSans_Condensed-Thin.ttf",fontWeight:100}]});let f=(0,T.C)(e=>e.auth.diagnostic),v=(0,B.q)(),x=(0,T.C)(e=>e.diagnosticSettings),g={name:(null==f?void 0:f.name)||"",address:(null==f?void 0:f.address)||"",phone1:(null==f?void 0:f.phone1)||"",phone2:(null==f?void 0:f.phone2)||"",division:(null==f?void 0:f.division)||"",logo:(null==f?void 0:f.logo)||"",id:(null==f?void 0:f.id)||"",city:(null==f?void 0:f.city)||"",paymentDate:(null==f?void 0:f.paymentDate)||"",admin:(null==f?void 0:f.admin)||""},y=(0,T.C)(e=>e.auth.user),b=(0,T.C)(e=>e.dates),j=null==y?void 0:y.name,S=(0,h.useMemo)(()=>{var e,t,i,o;return((null==l?void 0:null===(e=l.todayAdmitted)||void 0===e?void 0:e.length)||0)+((null==l?void 0:null===(t=l.otherAdmitted)||void 0===t?void 0:t.length)||0)+((null==l?void 0:null===(i=l.released)||void 0===i?void 0:i.length)||0)+((null==l?void 0:null===(o=l.dayPatients)||void 0===o?void 0:o.length)||0)>50},[l]),z=(0,h.useMemo)(()=>{var e,t,i,o;return((null==l?void 0:null===(e=l.todayAdmitted)||void 0===e?void 0:e.length)||0)+((null==l?void 0:null===(t=l.otherAdmitted)||void 0===t?void 0:t.length)||0)+((null==l?void 0:null===(i=l.released)||void 0===i?void 0:i.length)||0)+((null==l?void 0:null===(o=l.dayPatients)||void 0===o?void 0:o.length)||0)>100},[l]),[F,M]=(0,h.useState)(!1),[N,R]=(0,h.useState)(!0);(0,h.useEffect)(()=>{z&&R(!1)},[z]);let L=w.mM.create({page:{flexDirection:"column",backgroundColor:"#f8fafc",padding:20},section:{width:"100%",marginBottom:15},summarySection:{marginTop:30,marginBottom:20,backgroundColor:"#ffffff",borderRadius:8,padding:15,border:"1px solid #e2e8f0"},summaryRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:8,borderBottom:"1px solid #e2e8f0"},summaryLabel:{fontSize:12,fontFamily:"Roboto",fontWeight:400,color:"#4a5568"},summaryValue:{fontSize:12,fontFamily:"Roboto",fontWeight:700,color:"#1e40af"},table:{display:"flex",width:"100%",borderStyle:"solid",borderWidth:1,borderColor:"#e2e8f0",borderRadius:8,overflow:"hidden",backgroundColor:"#ffffff"},tableRow:{flexDirection:"row",borderBottomColor:"#e2e8f0",borderBottomWidth:1,minHeight:35},tableHeader:{backgroundColor:"#1e40af",fontFamily:"Roboto",fontWeight:900},tableCell:{flex:1,padding:8,borderRightWidth:1,borderRightColor:"#e2e8f0",justifyContent:"center"},headerCell:{fontSize:11,fontWeight:900,color:"#ffffff"},cellText:{fontSize:10,textAlign:"left",color:"#374151"},title:{fontSize:14,marginBottom:12,marginTop:10,fontFamily:"Roboto",fontWeight:900,color:"#1e3a8a",paddingLeft:5},textBold:{fontFamily:"Roboto",fontWeight:900,fontSize:12,color:"#374151"},totalRow:{backgroundColor:"#f1f5f9"},totalText:{fontFamily:"Roboto",fontWeight:900,fontSize:10,color:"#1e3a8a"},footerContainer:{position:"absolute",bottom:10,left:0,right:0,width:"100%",borderTop:"1px solid #e2e8f0",paddingTop:5,backgroundColor:"#f8fafc"},footerContent:{display:"flex",paddingHorizontal:15,flexDirection:"row",justifyContent:"space-between"},footerText:{fontSize:8,color:"#6b7280"},card:{backgroundColor:"#ffffff",borderRadius:8,marginBottom:15,border:"1px solid #e2e8f0"}}),E=e=>{if(!e)return null;let t=Array.isArray(e.rows)?(t=>{let i=Array(e.headers.length).fill(0);return t.forEach(e=>{e.forEach((e,t)=>{let o=parseFloat(e);!/^\d{2}[-/.]\d{2}[-/.]\d{4}$/.test(e)&&(isNaN(o)||(i[t]+=o))})}),i})(e.rows):[];return(0,o.jsxs)(w.G7,{style:[L.section,L.card],children:[(0,o.jsx)(w.xv,{style:L.title,children:e.title}),(0,o.jsxs)(w.G7,{style:L.table,children:[(0,o.jsx)(w.G7,{style:[L.tableRow,L.tableHeader],children:e.headers.map((e,t)=>(0,o.jsx)(w.G7,{style:L.tableCell,children:(0,o.jsx)(w.xv,{style:[L.headerCell],children:e})},"header-".concat(t)))}),Array.isArray(e.rows)&&e.rows.length>0?(0,o.jsxs)(o.Fragment,{children:[e.rows.map((e,t)=>(0,o.jsx)(w.G7,{style:[L.tableRow,t%2==1?{backgroundColor:"#f8fafc"}:{}],wrap:!1,children:Array.isArray(e)&&e.map((e,i)=>(0,o.jsx)(w.G7,{style:L.tableCell,children:(0,o.jsx)(w.xv,{style:L.cellText,children:(null==e?void 0:e.toString())||""})},"cell-".concat(t,"-").concat(i)))},"row-".concat(t))),(0,o.jsx)(w.G7,{style:[L.tableRow,L.totalRow],wrap:!1,children:t.map((t,i)=>{var n,l;return(0,o.jsx)(w.G7,{style:L.tableCell,children:(0,o.jsx)(w.xv,{style:[L.cellText,L.totalText],children:0===i?"Total":isNaN(t)||0===t?"Patient Name"===e.headers[i]?null!==(l=null==e?void 0:null===(n=e.rows)||void 0===n?void 0:n.length)&&void 0!==l?l:0:"":t.toFixed(2)})},"total-".concat(i))})})]}):(0,o.jsx)(w.G7,{style:L.tableRow,children:(0,o.jsx)(w.G7,{style:L.tableCell,children:(0,o.jsx)(w.xv,{style:[L.cellText,L.textBold],children:"No data available"})})})]})]})},G=()=>{var e,t,i,a,r,s,d,u,c,m,h,p;let f=[((null==l?void 0:l.todayAdmitted)||(null==n?void 0:n.todayAdmitted))&&{title:"Admitted Today",headers:["Bill ID","Patient Name","Date","User","Paid Amount","Diagnosis"],rows:null===(e=(null==l?void 0:l.todayAdmitted)||(null==n?void 0:n.todayAdmitted))||void 0===e?void 0:e.map(e=>{var t,i,o,n;return[e.billId,(null!==(n=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==n?n:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")",A()(e.createdAt).format("DD-MM-YYYY"),null===(o=e.user)||void 0===o?void 0:o.name,e.paidInAmount,e.diagnosis]})},((null==l?void 0:l.otherAdmitted)||(null==n?void 0:n.admittedPatient))&&{title:"Patients Admitted in Hospital",headers:["Bill ID","Patient Name","Date","User","Paid Today","Total Paid","Diagnosis"],rows:null===(t=(null==l?void 0:l.otherAdmitted)||(null==n?void 0:n.admittedPatient))||void 0===t?void 0:t.map(e=>{var t,i,o,n,l;return[e.billId,(null!==(n=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==n?n:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")",A()(e.createdAt).format("DD-MM-YYYY"),null===(o=e.user)||void 0===o?void 0:o.name,null!==(l=e.paidInAmount)&&void 0!==l?l:0,e.paidAmount,e.diagnosis]})},((null==l?void 0:l.released)||(null==n?void 0:n.releasedPatient))&&{title:"Patients Released From Hospital",headers:["Bill ID","Patient Name","Date","User","Paid Today","Total Paid","Diagnosis"],rows:null===(i=(null==l?void 0:l.released)||(null==n?void 0:n.releasedPatient))||void 0===i?void 0:i.map(e=>{var t,i,o,n;return[e.billId,(null!==(n=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==n?n:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")",A()(e.createdAt).format("DD-MM-YYYY"),null===(o=e.user)||void 0===o?void 0:o.name,e.paidInAmount,e.paidAmount,e.diagnosis]})},(null==l?void 0:l.dayPatients)&&{title:"Day Patients",headers:["Bill ID","Patient Name","Date","User","Status","Paid Amount","Diagnosis"],rows:null==l?void 0:l.dayPatients.map(e=>{var t,i,o,n;return[e.billId,(null!==(n=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==n?n:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")",A()(e.createdAt).format("DD-MM-YYYY"),null===(o=e.user)||void 0===o?void 0:o.name,e.status,e.paidAmount,e.diagnosis]})}],y=Math.floor((null==n?void 0:n.paidInAmountAll)||0).toString()||"0",S=Math.floor(null!==(a=null==l?void 0:l.todayAdmitted.length)&&void 0!==a?a:(null==n?void 0:n.totalAdmittedToday)||0).toString()||"0",T=Math.floor(((null==n?void 0:n.totalAmount)||0)+(null!==(r=null==n?void 0:n.hospitalBedDueAmount)&&void 0!==r?r:0)-((null==n?void 0:n.paidAmountOfBillsCreatedInRange)||0)).toString()||"0",B=Math.floor((null==n?void 0:n.hospitalPcAmount)||0).toString()||"0",z=Math.floor(((null==n?void 0:n.paidInAmountAll)||0)-(null!==(s=null==n?void 0:n.hospitalPcAmount)&&void 0!==s?s:0)-(null!==(d=null==n?void 0:n.totalExpense)&&void 0!==d?d:0)).toString()||"0";return(0,o.jsx)(w.BB,{children:(0,o.jsxs)(w.T3,{size:"A4",style:L.page,children:[v&&(0,o.jsx)(D.Z,{diagnosticState:g,pageSize:"A4"}),(0,o.jsx)(k.default,{diagnosticState:g}),(0,o.jsx)(C.Z,{small:!1,dates:b,userName:null!=j?j:""}),(0,o.jsx)(P.Z,{diagnosticSettings:x}),f.map(e=>E(e)),(0,o.jsxs)(w.G7,{style:L.summarySection,children:[(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Paid Amount"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:y})]}),(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Today Admitted"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:S})]}),(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Surgeon Amount"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:null!==(u=null==n?void 0:n.surgeonAmount)&&void 0!==u?u:0})]}),(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Anesthesiologist Amount"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:null!==(c=null==n?void 0:n.anesthesiologistAmount)&&void 0!==c?c:0})]}),(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"PC Commission"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:B})]}),(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Other Expenses"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:(null!==(m=null==n?void 0:n.totalExpense)&&void 0!==m?m:0)-((null!==(h=null==n?void 0:n.anesthesiologistAmount)&&void 0!==h?h:0)+(null!==(p=null==n?void 0:n.surgeonAmount)&&void 0!==p?p:0))})]}),(0,o.jsxs)(w.G7,{style:L.summaryRow,children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Due Amount"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:T})]}),(0,o.jsxs)(w.G7,{style:[L.summaryRow,{borderBottom:"none"}],children:[(0,o.jsx)(w.xv,{style:L.summaryLabel,children:"Money In Cash"}),(0,o.jsx)(w.xv,{style:L.summaryValue,children:z})]})]}),(0,o.jsx)(w.G7,{fixed:!0,style:L.footerContainer,children:(0,o.jsxs)(w.G7,{style:L.footerContent,children:[(0,o.jsx)(w.xv,{style:L.footerText,render:e=>{let{pageNumber:t,totalPages:i}=e;return"Page ".concat(t," of ").concat(i)}}),(0,o.jsx)(w.xv,{style:L.footerText,children:"Powered By Sasthotech"}),(0,o.jsx)(w.xv,{style:L.footerText,children:(0,I.Z)(new Date,"dd-MMM-yyyy hh:mm a")})]})})]})})};(0,h.useEffect)(()=>{if(!n||!l||!N)return;let e=!0;return(async()=>{try{d(!0),c(null),p(5);let t=()=>new Promise(e=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>e(),{timeout:z?50:100}):setTimeout(()=>e(),0)});if(await t(),!e||(p(10),await t(),!e))return;p(15);let{pdf:n}=await Promise.resolve().then(i.bind(i,65850));if(p(25),await t(),!e||(p(35),await t(),!e))return;p(45);let l=(0,o.jsx)(G,{});if(p(55),await t(),!e||(p(60),await t(),!e))return;p(65);let a=await n(l).toBlob();if(p(80),await t(),!e||(p(90),await t(),!e))return;let s=URL.createObjectURL(a);r(s),p(100),d(!1),z||M(!0)}catch(t){console.error("PDF generation error:",t),e&&(c("Failed to generate PDF"),d(!1),p(0))}})(),()=>{e=!1}},[n,l,N]),(0,h.useEffect)(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);let Z=()=>{if(a){let e=document.createElement("a");e.href=a,e.download="indoor-report-".concat((0,I.Z)(new Date,"yyyy-MM-dd"),".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}else R(!0)};return(0,h.useEffect)(()=>{if(a&&N&&!F&&z){let e=document.createElement("a");e.href=a,e.download="indoor-report-".concat((0,I.Z)(new Date,"yyyy-MM-dd"),".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},[a,N,F,z]),(0,o.jsx)("div",{style:{width:"100%",height:"100%"},children:!N&&z?(0,o.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"32px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),(0,o.jsx)("div",{style:{fontSize:"20px",fontWeight:"600",color:"#374151",marginBottom:"12px"},children:"Very Large Dataset Detected"}),(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"20px",textAlign:"center",maxWidth:"450px"},children:["Your report contains over 100 records. Generating this PDF may cause the browser to slow down or become unresponsive temporarily.",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"Recommended:"})," Download the PDF directly instead of previewing it."]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,o.jsxs)("button",{onClick:Z,style:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",fontSize:"14px",fontWeight:"500",borderRadius:"6px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",children:[(0,o.jsx)("svg",{style:{width:"16px",height:"16px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Generate & Download (Recommended)"]}),(0,o.jsxs)("button",{onClick:()=>{R(!0),M(!0)},style:{padding:"8px 16px",backgroundColor:"#e5e7eb",color:"#374151",fontSize:"14px",fontWeight:"500",borderRadius:"6px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#d1d5db",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e5e7eb",children:[(0,o.jsxs)("svg",{style:{width:"16px",height:"16px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview Anyway"]})]})]}):s||!a?(0,o.jsxs)("div",{style:{width:"100%",height:"720px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"18px",color:"#666",gap:"16px"},children:[(0,o.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,o.jsx)("div",{children:u?(0,o.jsx)("span",{style:{color:"red"},children:u}):z?"Very large dataset - This may take 10-30 seconds. Please don't close this window.":S?"Large dataset detected. This may take a moment...":"Please wait while we prepare your indoor report"}),(0,o.jsx)("div",{style:{width:"100%",maxWidth:"400px",backgroundColor:"#e5e7eb",borderRadius:"9999px",height:"10px",overflow:"hidden"},children:(0,o.jsx)("div",{style:{width:"".concat(m,"%"),backgroundColor:"#3b82f6",height:"100%",borderRadius:"9999px",transition:"width 0.3s ease-in-out"}})}),(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#9ca3af"},children:[m,"%"]}),z&&(0,o.jsx)("div",{style:{marginTop:"16px",fontSize:"12px",color:"#ef4444",fontWeight:"500"},children:"⚠️ Browser may appear frozen - this is normal for large reports"}),(0,o.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]}):!F&&z?(0,o.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"32px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,o.jsx)("div",{style:{fontSize:"60px",color:"#10b981",marginBottom:"24px"},children:"✓"}),(0,o.jsx)("div",{style:{fontSize:"24px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:"PDF Generated Successfully"}),(0,o.jsx)("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"24px",textAlign:"center",maxWidth:"450px"},children:"Your report contains a very large dataset (100+ records). To prevent browser slowdown, we recommend downloading the PDF instead of previewing it."}),(0,o.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,o.jsxs)("button",{onClick:Z,style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",fontSize:"16px",fontWeight:"500",borderRadius:"8px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",children:[(0,o.jsx)("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF (Recommended)"]}),(0,o.jsxs)("button",{onClick:()=>M(!0),style:{padding:"12px 24px",backgroundColor:"#e5e7eb",color:"#374151",fontSize:"16px",fontWeight:"500",borderRadius:"8px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#d1d5db",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e5e7eb",children:[(0,o.jsxs)("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View in Browser Anyway"]})]})]}):(0,o.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[S&&(0,o.jsxs)("div",{style:{backgroundColor:"#fef3c7",borderLeft:"4px solid #f59e0b",padding:"12px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},children:[(0,o.jsxs)("p",{style:{margin:0,fontSize:"14px",color:"#92400e",flex:1},children:[(0,o.jsx)("strong",{children:z?"Very Large Report:":"Large Report:"})," This report contains",z?" a very large":" a large","dataset. ",z?"Browser may be slow. ":"For better performance, ","Download recommended."]}),(0,o.jsxs)("button",{onClick:Z,style:{marginLeft:"16px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",fontSize:"14px",fontWeight:"500",borderRadius:"6px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",children:[(0,o.jsx)("svg",{style:{width:"16px",height:"16px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]})]}),(0,o.jsx)("iframe",{src:a,style:{width:"100%",height:S?"calc(100% - 70px)":"100%",minHeight:"800px",border:"none",flex:1},title:"Indoor Summary PDF"})]})})},F=i(84944),M=i(38670),N=i(50555),R=i(65971),L=i(74559),E=i(13603),G=i(32451),Z=i(22975),W=i(48604),O=i(22614),V=i(22041),U=i(31204),_=i(9722),Y=i(89043),H=i(23719),q=i(76029),Q=i(58185),K=i(86083),J=i(25564),X=i(34499),$=i(9286),ee=i(59636),et=i(28704),ei=i(7965),eo=i(8720),en=i(52700),el=i(62134),ea=i(19376),er=i(35288),es=i(20433),ed=i(45437),eu=i(66843),ec=i(38917),em=i(12697),eh=i(13520),ep=i(12450),ef=i(70818),ev=i(42062),ex=i(90660),eg=i.n(ex),ey=()=>{var e,t,i,a,r,u,m,p,f,w,S,A,C,k,D,I,P,q;let ed=(0,T.C)(L.nC),eu=(0,T.C)(E.uA),ec=(0,T.C)(e=>e.auth.diagnostic),em=(0,T.C)(e=>e.auth.diagnostic),{columnSettings:ex,getVisibleColumns:ey,columnAccessors:ej}=(0,F.yV)(),{fields:ew}=v(),[eS,eA]=(0,h.useState)(null),[eC,eT]=(0,h.useState)(null),[ek,eD]=(0,h.useState)(0),[eI,eP]=(0,h.useState)(!0),eB=(0,h.useRef)(null),ez=(0,h.useRef)(Promise.resolve()),eF=(0,ep.useSearchParams)(),eM=eF.has("printNow"),eN=(0,T.C)(e=>e.diagnosticSettings.viewId),[eR,{open:eL,close:eE}]=(0,c.q)(!1);(0,h.useEffect)(()=>{eM&&setTimeout(()=>{eL()},1e3)},[eM,eL]),(0,h.useEffect)(()=>{eP(!0),(0,M.O)({dates:eu,isOwn:"receptionist"===ed?!eF.get("overall"):void 0,userId:"admin"===ed&&eN?eN:void 0}).then(e=>{let{success:t,data:i}=e;t?eA(i):console.error(i)}),ez.current=(0,R.q)({from:eu[0],to:eu[1],isOwn:"receptionist"===ed?!eF.get("overall"):void 0,userId:"admin"===ed&&eN?eN:void 0}).then(e=>{let{success:t,data:i}=e;if(t){let e=new Date,t=[e.getFullYear()%100,e.getMonth()+1,e.getDate()].map(e=>e.toString().padStart(2,"0")).join(""),o=[],n=[],l=[],a=[];for(let e of i.items.hospitalPatients)("Released"===e.status?l:"Day Patient"===e.status?a:e.billId.startsWith(t)?o:n).push(e);eT({todayAdmitted:o,otherAdmitted:n,released:l,dayPatients:a})}else throw console.error(i),Error(i);eP(!1)})},[eF,eu,ed,ek,eN]);let eG=(0,B.HG)("indoor-summary"),eZ=(0,h.useMemo)(()=>ey(["billId","patientName","bed","dateTime","user","status","paidToday","totalPaid","admissionFee","advanceFee","diagnosis"]),[ey]),eW=(0,h.useMemo)(()=>ey(["billId","patientName","bed","dateTime","user","status","paidToday","totalPaid","admissionFee","advanceFee","diagnosis"]),[ey]),eO=(0,h.useMemo)(()=>ey(["billId","patientName","bed","dateTime","user","status","paidToday","totalPaid","admissionFee","advanceFee","diagnosis"]),[ey]);(0,h.useMemo)(()=>ey(["billId","patientName","bed","dateTime","user","status","paidToday","totalPaid","admissionFee","advanceFee","diagnosis"]),[ey]);let eV=async e=>{try{if((await eg().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed){let t=await (0,N.y)(e.billId);t.success?(eg().fire("Deleted!","The record has been deleted.","success"),eD(e=>e+1)):eg().fire("Error",t.data,"error")}}catch(e){eg().fire("Error","An error occurred","error")}};return eI?(0,o.jsx)(b.Z,{}):(0,o.jsxs)(G.Box,{className:"p-3 bg-light p-md-5 printable",ref:eB,children:[(0,o.jsx)(Z.u,{opened:eR,onClose:eE,size:"80%",radius:0,transitionProps:{transition:"fade",duration:200},children:(0,o.jsx)(z,{dashboardInfo:eS,patients:eC})}),(0,o.jsx)("style",{type:"text/css",media:"print",children:eG}),(0,o.jsxs)("div",{className:"print-only",children:[(0,o.jsx)(n.Z,{diagnostic:em,children:(0,o.jsxs)(W.Z,{w:"25%",radius:"md",bg:"#EFEFEF",children:[(0,o.jsxs)(O.Group,{justify:"space-between",children:[(0,o.jsx)(V.Text,{fw:500,children:"Paid Amount"})," ",(0,o.jsx)(V.Text,{fw:500,children:"receptionist"!==ed||eF.get("overall")?Math.floor((null==eS?void 0:eS.paidInAmountAll)||0).toString()||"0":Math.floor((null==eS?void 0:eS.paidInAmount)||0).toString()||"0"})]}),(0,o.jsxs)(O.Group,{justify:"space-between",children:[(0,o.jsx)(V.Text,{fw:500,children:"Today Admitted"}),(0,o.jsx)(V.Text,{fw:500,children:Math.floor(null!==(r=null==eC?void 0:eC.todayAdmitted.length)&&void 0!==r?r:(null==eS?void 0:eS.totalAdmittedToday)||0).toString()||"0"})]}),(0,o.jsxs)(O.Group,{justify:"space-between",children:[(0,o.jsx)(V.Text,{fw:500,children:"Due Amount"})," ",(0,o.jsx)(V.Text,{fw:500,children:Math.floor(((null==eS?void 0:eS.totalAmount)||0)+(null!==(u=null==eS?void 0:eS.hospitalBedDueAmount)&&void 0!==u?u:0)-((null==eS?void 0:eS.paidAmount)||0)).toString()||"0"})]}),(0,o.jsxs)(O.Group,{justify:"space-between",children:[(0,o.jsx)(V.Text,{fw:500,children:"Pc Commission"})," ",(0,o.jsx)(V.Text,{fw:500,children:Math.floor((null==eS?void 0:eS.hospitalPcAmount)||0).toString()||"0"})]}),(0,o.jsxs)(O.Group,{justify:"space-between",children:[(0,o.jsx)(V.Text,{fw:500,children:"Money In Cash"})," ",(0,o.jsxs)(V.Text,{fw:500,children:[" ",Math.floor(("receptionist"!==ed||eF.get("overall")?(null==eS?void 0:eS.paidInAmountAll)||0:(null==eS?void 0:eS.paidInAmount)||0)-(null!==(m=null==eS?void 0:eS.hospitalPcAmount)&&void 0!==m?m:0)-(null!==(p=null==eS?void 0:eS.surgeonAmount)&&void 0!==p?p:0)-(null!==(f=null==eS?void 0:eS.anesthesiologistAmount)&&void 0!==f?f:0)).toString()||"0"]})]})]})}),(0,o.jsx)(j.Z,{})]}),(0,o.jsxs)(O.Group,{children:[(0,o.jsxs)(s.Title,{mr:"auto",children:["Indoor Dashboard",(0,o.jsxs)("span",{className:"print-only",children:[" (",eF.get("overall")||"receptionist"!==ed?"Overall":"Personal",")"]})]}),(0,o.jsx)(g.W,{}),(0,o.jsxs)(O.Group,{gap:"xs",className:"hide__print",children:[(0,o.jsx)(x,{}),(0,o.jsx)(l.i,{}),(0,o.jsx)(U.Button,{size:"lg",radius:"md",onClick:eL,leftSection:(0,o.jsx)(Q.Z,{}),children:"Print"})]})]}),(0,o.jsxs)(O.Group,{my:"lg",className:"hide__print",children:[(0,o.jsx)("form",{method:"get",action:"/indoor/in-patient-billing",className:"me-auto",children:(0,o.jsx)(_.I,{name:"patientId",leftSection:(0,o.jsx)(K.Z,{}),placeholder:"Search by patient id",size:"lg",radius:"md"})}),(0,o.jsx)(U.Button,{size:"lg",radius:"md",component:eh.default,href:"/indoor/in-patient-billing",leftSection:(0,o.jsx)(J.Z,{}),children:"Patient Billing"}),(0,o.jsx)(U.Button,{size:"lg",radius:"md",component:eh.default,href:"/indoor/in-patient-admission",leftSection:(0,o.jsx)(X.Z,{}),children:"Patient Admission"}),(0,o.jsx)(U.Button,{size:"lg",radius:"md",component:eh.default,href:"/indoor/filtered-bills",leftSection:(0,o.jsx)($.Z,{}),children:"Filtered Bills"})]}),(0,o.jsx)(Y.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mt:"md",className:"hide__print",children:(0,o.jsx)(ef.default,{className:"row-gap-4",children:[["totalBill","Total Bill",null==eS?void 0:eS.totalBill,J.Z],["todayAdmitted","Today Admitted",null!==(w=null==eC?void 0:eC.todayAdmitted.length)&&void 0!==w?w:(null==eS?void 0:eS.totalAdmittedToday)||0,X.Z],["paidAmount","Paid Amount","receptionist"!==ed||eF.get("overall")?(null==eS?void 0:eS.paidInAmountAll)||0:(null==eS?void 0:eS.paidInAmount)||0,ee.Z],["dueAmount","Due Amount",((null==eS?void 0:eS.totalAmount)||0)+(null!==(S=null==eS?void 0:eS.hospitalBedDueAmount)&&void 0!==S?S:0)-((null==eS?void 0:eS.paidAmountOfBillsCreatedInRange)||0),et.Z],["pcPayment","Pc Payment",null==eS?void 0:eS.hospitalPcAmount,ei.Z],["surgeonFee","Surgeon Fee",null==eS?void 0:eS.surgeonAmount,eo.Z],["admissionFee","Admission Fee",null==eS?void 0:eS.admissionFee,en.Z],["anesthesiologistFee","Anesthesiologist Fee",null==eS?void 0:eS.anesthesiologistAmount,eo.Z],["otherExpenses","Other Expenses",(null!==(A=null==eS?void 0:eS.totalExpense)&&void 0!==A?A:0)-((null!==(C=null==eS?void 0:eS.anesthesiologistAmount)&&void 0!==C?C:0)+(null!==(k=null==eS?void 0:eS.surgeonAmount)&&void 0!==k?k:0)),el.Z],["advanceFee","Advance Fee",null==eS?void 0:eS.advanceFee,ea.Z],["moneyInCash","Money In Cash",("receptionist"!==ed||eF.get("overall")?(null==eS?void 0:eS.paidInAmountAll)||0:(null==eS?void 0:eS.paidInAmount)||0)-(null!==(D=null==eS?void 0:eS.hospitalPcAmount)&&void 0!==D?D:0)-(null!==(I=null==eS?void 0:eS.totalExpense)&&void 0!==I?I:0),er.Z],...(null==ec?void 0:ec.indoorServiceCharge)?[["sasthoTechCharge","SasthoTech Service Charge",null==eS?void 0:eS.sasthoTechCharge,es.Z]]:[]].filter(e=>{var t;let[i]=e;return(null===(t=ew.find(e=>e.id===i))||void 0===t?void 0:t.visible)!==!1}).map((e,t)=>{let[,i,n,l]=e;return(0,o.jsx)(ev.default,{lg:3,children:(0,o.jsxs)(Y.X,{component:d.Stack,shadow:"sm",p:"lg",radius:"md",h:"100%",bg:(t/4&1)==(1&t)?"#CABDFF40":"#E9F6FC",children:[(0,o.jsx)(G.Box,{className:"rounded-pill",w:48,h:48,p:12,c:"white",bg:"black",children:(0,o.jsx)(l,{size:24})}),(0,o.jsx)(V.Text,{c:"",fw:600,children:i}),(0,o.jsx)(V.Text,{fz:"2rem",fw:700,lh:"3rem",mt:"auto",c:"black",style:{letterSpacing:"-0.96px"},children:(0,o.jsx)(H.e,{thousandSeparator:!0,value:n||0,decimalScale:2})})]})},i)})})}),[((null==eC?void 0:eC.todayAdmitted)||(null==eS?void 0:eS.todayAdmitted))&&{title:"Admitted Today",headers:[...eZ.map(e=>e.label),"Actions"],rows:null===(e=(null==eC?void 0:eC.todayAdmitted)||(null==eS?void 0:eS.todayAdmitted))||void 0===e?void 0:e.map(e=>[...eZ.map(t=>ej[t.id](e)),(0,o.jsx)(eb,{billId:e.billId,userRole:ed,onDelete:()=>eV(e)},e.billId)]),totals:-1!==eZ.findIndex(e=>"paidToday"===e.id)?[eZ.findIndex(e=>"paidToday"===e.id)]:[],linkToMore:"/indoor/today-admitted",limit:5},(null!==(P=null==eS?void 0:eS.admittedPatient)&&void 0!==P?P:[])&&{title:"Patients Admitted in Hospital",headers:[...eW.map(e=>e.label),"Actions"],rows:null===(t=null!==(q=null==eS?void 0:eS.admittedPatient)&&void 0!==q?q:[])||void 0===t?void 0:t.map(e=>[...eW.map(t=>ej[t.id](e)),(0,o.jsx)(eb,{billId:e.billId,userRole:ed,onDelete:()=>eV(e)},e.billId)]),totals:-1!==eW.findIndex(e=>"paidToday"===e.id)?[eW.findIndex(e=>"paidToday"===e.id)]:[],linkToMore:"/indoor/admitted-patients",limit:5},((null==eC?void 0:eC.released)||(null==eS?void 0:eS.releasedPatient))&&{title:"Patients Released From Hospital",headers:[...eO.map(e=>e.label),"Actions"],rows:null===(i=(null==eC?void 0:eC.released)||(null==eS?void 0:eS.releasedPatient))||void 0===i?void 0:i.map(e=>[...eO.map(t=>ej[t.id](e)),(0,o.jsx)(eb,{billId:e.billId,userRole:ed,onDelete:()=>eV(e)},e.billId)]),totals:-1!==eO.findIndex(e=>"paidToday"===e.id)?[eO.findIndex(e=>"paidToday"===e.id)]:[],linkToMore:"/indoor/released-patients",limit:5},(null==eS?void 0:eS.hospitalPc)&&{title:"PC Payment",headers:["Bill ID","Patient Name","Total Amount","PC Name","PC Amount","Status"],rows:null==eS?void 0:null===(a=eS.hospitalPc)||void 0===a?void 0:a.map(e=>{var t,i,o,n;return[(0,y.OU)(e),(null!==(n=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==n?n:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")",e.totalAmount,null===(o=e.PC)||void 0===o?void 0:o.name,e.pcAmount,e.status]}),totals:[2,4],linkToMore:"/indoor/pc-payment",limit:5,className:"hide__print"}].map((e,t)=>e?(0,o.jsx)(y.HF,{table:e,className:e.className},e.title):(0,o.jsx)(b.Z,{},t))]},ek)};let eb=e=>{let{billId:t,userRole:i,onDelete:n}=e;return(0,o.jsxs)(O.Group,{children:[(0,o.jsx)(q.u,{label:"Edit Admission Form",children:(0,o.jsx)(a.A,{component:eh.default,variant:"filled","aria-label":"Edit",href:"/indoor/in-patient-billing/detail?billId=".concat(t,"#billing"),children:(0,o.jsx)(ed.Z,{style:{width:"70%",height:"70%"},stroke:1.5})})}),(0,o.jsx)(q.u,{label:"Summary",children:(0,o.jsx)(a.A,{component:eh.default,variant:"filled","aria-label":"Edit",href:"/patient/details?id=".concat(t),children:(0,o.jsx)(eu.Z,{style:{width:"70%",height:"70%"},stroke:1.5})})}),(0,o.jsx)(q.u,{label:"Patient Billing",children:(0,o.jsx)(a.A,{component:eh.default,variant:"filled","aria-label":"Edit",href:"/patient/details?id=".concat(t,"&billing=true"),children:(0,o.jsx)(ec.Z,{style:{width:"70%",height:"70%"},stroke:1.5})})}),"admin"===i&&(0,o.jsx)(q.u,{label:"Delete",children:(0,o.jsx)(a.A,{variant:"transparent","aria-label":"Delete",style:{background:"red"},children:(0,o.jsx)(em.Z,{style:{width:"100%",height:"100%",padding:"1px",stroke:"white"},stroke:1.5,onClick:n})})})]},t)}},71149:function(e,t,i){"use strict";i.d(t,{AN:function(){return u},HG:function(){return r},J7:function(){return l},UA:function(){return d},dB:function(){return m},ev:function(){return a},q:function(){return c},tK:function(){return s}});var o=i(62471),n=i(4505);let l=["A4 portrait","A5 portrait","A4 landscape"],a=[["outdoor-bill","A5 portrait",60],["indoor-bill","A4 portrait",60,void 0,120],["indoor-admission-form","A4 portrait",90,"isHospitalManagement",120],["outdoor-summary","A4 portrait",90],["indoor-summary","A4 portrait",90,"isHospitalManagement"],["receptionist-summary","A4 portrait",90],["pc-payment","A5 portrait",60]];function r(e){let t=(0,n.useMemo)(()=>a.find(t=>t[0]===e),[e]),[i]=(0,o.I)({key:"".concat(e,"-print-page-size"),defaultValue:null==t?void 0:t[1]}),[l]=(0,o.I)({key:"".concat(e,"-print-page-scale"),defaultValue:null==t?void 0:t[2]});return"\n    @page { size: ".concat(i,";margin:10px 0px; }\n    :root { --mantine-scale: ").concat(+l/100,"; }\n    .fs-1{font-size:calc(var(--mantine-scale) * calc(1.375rem + 1.5vw))!important}\n    .fs-2{font-size:calc(var(--mantine-scale) * calc(1.325rem + .9vw))!important}\n    .fs-3{font-size:calc(var(--mantine-scale) * calc(1.3rem + .6vw))!important}\n    .fs-4{font-size:calc(var(--mantine-scale) * calc(1.275rem + .3vw))!important}\n    .fs-5{font-size:calc(var(--mantine-scale) * 1.25rem)!important}\n    .fs-6{font-size:calc(var(--mantine-scale) * 1rem)!important}")}function s(e){var t,i,l;let r=(0,n.useMemo)(()=>a.find(t=>t[0]===e),[e]),[s]=(0,o.I)({key:"".concat(e,"-print-page-height"),defaultValue:null!==(i=null==r?void 0:null===(t=r[4])||void 0===t?void 0:t.toString())&&void 0!==i?i:""});return s?+s:null!==(l=null==r?void 0:r[4])&&void 0!==l?l:100}function d(){let[e]=(0,o.I)({key:"selected-admission-template-id",defaultValue:"1"});return e?+e:1}function u(){let[e]=(0,o.I)({key:"selected-bill-template-id",defaultValue:"1"});return e?+e:1}function c(){let[e]=(0,o.I)({key:"print-watermark-enabled",defaultValue:"true"});return"true"===e}function m(){let[e]=(0,o.I)({key:"selected-appointment-token-template-id",defaultValue:"2"});return e?+e:2}},71256:function(e,t,i){"use strict";var o=i(68328),n=i(22614),l=i(22041),a=i(77303),r=i(62471);t.Z=e=>{let{diagnostic:t,email:i,children:s,color:d,patientId:u,small:c,large:m,isBigLogo:h,idLabel:p,idBorder:f,labId:v}=e,x=(0,r._)({key:"print-show-division-name",defaultValue:"true"});return(0,o.jsxs)("div",{className:"diagnostic-info1",children:[(0,o.jsx)(n.Group,{children:h&&(0,o.jsx)("img",{style:{aspectRatio:"auto",width:"100%",height:"100px"},src:"/images/heathcare.png",alt:"Diagnotic Image"})}),(0,o.jsxs)(n.Group,{wrap:"nowrap",justify:h?"center":"space-between",children:[(0,o.jsxs)(n.Group,{wrap:"nowrap",bg:"white",py:1,mb:1,align:"center",children:[null!=h?h:(0,o.jsx)("img",{width:c?50:100,height:c?50:100,style:{objectFit:"cover"},src:"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")?null==t?void 0:t.offlineLogo:null==t?void 0:t.logo,alt:"Diagnotic Image"}),(0,o.jsx)(n.Group,{wrap:"nowrap",children:(0,o.jsxs)("div",{children:[(0,o.jsx)(l.Text,{styles:{root:{fontSize:"".concat(m?32:c?14:24)}},size:"xl",style:{fontSize:m?16:void 0},fw:700,children:null==t?void 0:t.name}),(0,o.jsxs)(l.Text,{fw:500,my:1,styles:{root:{wordBreak:"break-word",fontSize:m?12:void 0}},children:["Address: ",null==t?void 0:t.address,"true"===x&&(null==t?void 0:t.division)?";".concat(null==t?void 0:t.division):""]}),(0,o.jsxs)(n.Group,{children:[(0,o.jsxs)(l.Text,{my:1,fw:500,styles:{root:{wordBreak:"break-word",fontSize:m?12:void 0}},children:["Phone: ",null==t?void 0:t.phone1," , ",null==t?void 0:t.phone2]}),i?(0,o.jsxs)(l.Text,{my:1,fw:500,styles:{root:{wordBreak:"break-word",fontSize:m?16:void 0}},children:["; Email : ",i]}):(0,o.jsx)(o.Fragment,{})]})]})})]}),v&&(0,o.jsxs)(l.Text,{fw:700,mt:"auto",mb:9,style:{border:f?"2px solid #555":"none",padding:f?"4px":"0px",borderRadius:f?"2px":"0px"},styles:{root:{fontSize:"calc(var(--mantine-scale) * ".concat(m?16:c?12:14,")")}},children:["Lab\xa0ID:\xa0",v]}),u&&(0,o.jsxs)(l.Text,{fw:700,mt:"auto",mb:9,style:{border:f?"2px solid #555":"none",padding:f?"4px":"0px",borderRadius:f?"2px":"0px"},styles:{root:{fontSize:"calc(var(--mantine-scale) * ".concat(m?16:c?12:14,")")}},children:["Patient\xa0ID:\xa0",u]}),s]}),(0,o.jsx)(a.Divider,{size:"sm",color:d||"black",style:{marginBottom:"2px"}})]})}},35689:function(e,t,i){"use strict";i.d(t,{i:function(){return S}});var o=i(68328),n=i(84944),l=i(76029),a=i(3741),r=i(22975),s=i(68242),d=i(41224),u=i(22041),c=i(48604),m=i(22614),h=i(72375),p=i(55911),f=i(31204),v=i(46557),x=i(38156),g=i(45437),y=i(6660),b=i(52013),j=i(50430),w=i(4505);let S=()=>{let[e,{open:t,close:i}]=(0,v.q)(!1),{columnSettings:S,updateColumnLabel:A,toggleColumnVisibility:C,reorderColumns:T,resetToDefaults:k}=(0,n.yV)(),[D,I]=(0,w.useState)(null),[P,B]=(0,w.useState)(""),z=(0,w.useMemo)(()=>Object.values(S).sort((e,t)=>e.order-t.order),[S]),F=(e,t)=>{I(e),B(t)},M=e=>{P.trim()&&A(e,P),I(null),B("")},N=(e,t)=>{if(0===t)return;let i=z.map(i=>i.id===e?i.id:i.order===t-1?e:i.id),o=z[t-1],n=[...i];n[t]=o.id,n[t-1]=e,T(n)},R=(e,t)=>{if(t===z.length-1)return;let i=z.map(e=>e.id),o=z[t+1];i[t]=o.id,i[t+1]=e,T(i)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.u,{label:"Column Settings",children:(0,o.jsx)(a.A,{size:"lg",variant:"light",onClick:t,"aria-label":"Column Settings",children:(0,o.jsx)(x.Z,{size:20})})}),(0,o.jsx)(r.u,{opened:e,onClose:i,title:(0,o.jsx)(s.Title,{order:3,children:"Indoor Patient Column Settings"}),size:"lg",children:(0,o.jsxs)(d.Stack,{gap:"md",children:[(0,o.jsx)(u.Text,{size:"sm",c:"dimmed",children:"Customize column names, visibility, and order for all indoor patient tables."}),(0,o.jsx)(d.Stack,{gap:"xs",children:z.map((e,t)=>(0,o.jsx)(c.Z,{padding:"sm",withBorder:!0,children:(0,o.jsxs)(m.Group,{justify:"space-between",wrap:"nowrap",children:[(0,o.jsxs)(m.Group,{gap:"xs",style:{flex:1},children:[(0,o.jsx)(h.X,{checked:e.visible,onChange:t=>{t.stopPropagation(),C(e.id)},"aria-label":"Toggle ".concat(e.label," visibility")}),D===e.id?(0,o.jsx)(p.TextInput,{value:P,onChange:e=>B(e.target.value),onKeyDown:t=>{"Enter"===t.key&&M(e.id),"Escape"===t.key&&(I(null),B(""))},size:"xs",style:{flex:1},autoFocus:!0}):(0,o.jsx)(u.Text,{size:"sm",fw:500,style:{textDecoration:e.visible?"none":"line-through",opacity:e.visible?1:.5},children:e.label}),e.label!==e.defaultLabel&&(0,o.jsxs)(u.Text,{size:"xs",c:"dimmed",children:["(Default: ",e.defaultLabel,")"]})]}),(0,o.jsxs)(m.Group,{gap:"xs",children:[D===e.id?(0,o.jsx)(f.Button,{size:"xs",onClick:()=>M(e.id),children:"Save"}):(0,o.jsx)(l.u,{label:"Edit label",children:(0,o.jsx)(a.A,{size:"sm",variant:"subtle",onClick:()=>F(e.id,e.label),children:(0,o.jsx)(g.Z,{size:16})})}),(0,o.jsx)(l.u,{label:"Move up",children:(0,o.jsx)(a.A,{size:"sm",variant:"subtle",onClick:()=>N(e.id,t),disabled:0===t,children:(0,o.jsx)(y.Z,{size:16})})}),(0,o.jsx)(l.u,{label:"Move down",children:(0,o.jsx)(a.A,{size:"sm",variant:"subtle",onClick:()=>R(e.id,t),disabled:t===z.length-1,children:(0,o.jsx)(b.Z,{size:16})})})]})]})},e.id))}),(0,o.jsxs)(m.Group,{justify:"flex-end",mt:"md",children:[(0,o.jsx)(f.Button,{variant:"light",leftSection:(0,o.jsx)(j.Z,{size:16}),onClick:k,children:"Reset to Defaults"}),(0,o.jsx)(f.Button,{onClick:i,children:"Close"})]})]})})]})}},69667:function(e,t,i){"use strict";i.d(t,{W:function(){return s}});var o=i(68328),n=i(74559),l=i(25499),a=i(77379),r=i(12450);let s=e=>{let{className:t,defaultOverall:i=!1,...s}=e,d=(0,r.useSearchParams)(),u=(0,r.usePathname)(),c=(0,r.useRouter)();return"receptionist"===(0,l.C)(n.nC)&&(0,o.jsx)(a.s,{value:(i?!d.has("personal"):d.has("overall"))?"overall":"personal",onChange:e=>{let t=new URLSearchParams(d),o=i?"personal":"overall";e===o?t.set(o,"true"):t.delete(o),c.push("".concat(u,"?").concat(t))},className:["hide__print",t].filter(Boolean).join(" "),...s,data:[{label:"Personal View",value:"personal"},{label:"Overall View",value:"overall"}]})}},98641:function(e,t,i){"use strict";i.d(t,{HF:function(){return v},OU:function(){return x},t2:function(){return g}});var o=i(68328),n=i(15139),l=i(89043),a=i(22614),r=i(68242),s=i(54632),d=i(22041),u=i(20234),c=i(13520),m=i(22776),h=i.n(m),p=i(97722),f=i.n(p);let v=e=>{var t,i,m;let{table:h,...p}=e,v=new Map(null===(t=h.totals)||void 0===t?void 0:t.map(e=>[e,0]));return(0,o.jsxs)(l.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mt:"md",...p,children:[(0,o.jsxs)(a.Group,{mb:"md",children:[(0,o.jsx)(n.P,{fz:36,p:6,className:"bg-dark text-white rounded-circle hide__print"}),(0,o.jsx)(r.Title,{order:2,mr:"auto",children:h.title})]}),(null===(i=h.rows)||void 0===i?void 0:i.length)?(0,o.jsx)(s.i.ScrollContainer,{minWidth:767,children:(0,o.jsxs)(s.i,{className:f().table,children:[(0,o.jsx)(s.i.Thead,{children:(0,o.jsx)(s.i.Tr,{children:h.headers.map((e,t)=>(0,o.jsx)(s.i.Th,{children:e},"".concat(e).concat(t)))})}),(0,o.jsxs)(s.i.Tbody,{children:[null===(m=h.rows)||void 0===m?void 0:m.map((e,t)=>(0,o.jsx)(s.i.Tr,{className:h.limit&&t>=h.limit?"print-only":"",children:e.map((e,t)=>{if(v.has(t)){let i="number"==typeof e?e:"string"==typeof e&&parseFloat(e)||0;v.set(t,v.get(t)+i)}return(0,o.jsx)(s.i.Td,{children:e},"".concat(e).concat(t))})},t)),h.totals&&(0,o.jsxs)(s.i.Tr,{style:{borderTop:"2px solid #000000"},className:"print-only",children:[(0,o.jsx)(s.i.Td,{children:"Total"}),h.headers.slice(1).map((e,t)=>(0,o.jsx)(s.i.Td,{children:v.get(t+1)},t))]})]})]})}):(0,o.jsxs)(d.Text,{ta:"center",c:"red",size:"xl",fw:600,children:["No ",h.title.toLowerCase()," found in this period."]}),h.linkToMore&&(0,o.jsx)("div",{className:"mt-3 text-center hide__print",children:(0,o.jsxs)(u.Anchor,{component:c.default,href:h.linkToMore,children:["See more ",h.title.toLowerCase()]})})]})},x=e=>(0,o.jsx)(u.Anchor,{component:c.default,href:"/patient/details?id=".concat(e.billId),children:e.billId},"patientId"),g=e=>(0,o.jsx)(h(),{format:"DD-MM-YYYY (h:mm a)",children:e.createdAt},"datetime")},7203:function(e,t,i){"use strict";var o=i(68328),n=i(14587);i(4505),t.Z=()=>(0,o.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:600},children:(0,o.jsx)(n.Loader,{color:"teal",variant:"dots"})})},72752:function(e,t,i){"use strict";var o=i(68328),n=i(25499),l=i(22614),a=i(22041),r=i(29593),s=i(77303),d=i(97698);i(4505),t.Z=e=>{let{small:t}=e,i=(0,n.C)(e=>e.dates),u=(0,n.C)(e=>e.auth.user);return(0,o.jsxs)("div",{className:"py-2",children:[(0,o.jsxs)(l.Group,{justify:"space-between",children:[(0,o.jsxs)(l.Group,{className:"fw-bold",gap:"sm",children:[(0,o.jsxs)(a.Text,{fw:700,style:{fontSize:t?10:16},size:"".concat(t?"xs":"md"),children:["Period :"," "]}),(0,o.jsx)(a.Text,{style:{fontSize:t?10:16},styles:{root:{textUnderlineOffset:5}},fw:700,children:(0,d.Z)((null==i?void 0:i.dates[0])?new Date(null==i?void 0:i.dates[0]):new Date,"dd-MMM-yyyy")}),(0,o.jsxs)(a.Text,{style:{fontSize:t?10:16},fw:700,children:[" "," To "," "," "]}),(0,o.jsx)(a.Text,{styles:{root:{textUnderlineOffset:5}},style:{fontSize:t?10:16},fw:700,children:(0,d.Z)((null==i?void 0:i.dates[1])?new Date(null==i?void 0:i.dates[1]):(null==i?void 0:i.dates[0])?new Date(null==i?void 0:i.dates[0]):new Date,"dd-MMM-yyyy")})]}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 4 4",fill:"none",children:(0,o.jsx)("circle",{cx:"2",cy:"2",r:"2",fill:"black"})}),(0,o.jsxs)(a.Text,{style:{fontSize:t?10:16},fw:600,children:["Printed By : ",null==u?void 0:u.name]}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 4 4",fill:"none",children:(0,o.jsx)("circle",{cx:"2",cy:"2",r:"2",fill:"black"})}),(0,o.jsxs)(a.Text,{style:{fontSize:t?10:16},fw:600,children:["Print Time : ",(0,d.Z)(new Date,"MM/dd/yyyy : hh:mm a")]})]}),!t&&(0,o.jsx)(r.Space,{h:10}),(0,o.jsx)(s.Divider,{color:"#787878"})]})}},62549:function(e,t,i){"use strict";i.r(t),i.d(t,{LoadDiagnosticImageUrl:function(){return d}});var o=i(68328),n=i(4505),l=i(65850),a=i(62471),r=i(6780),s=i(25499);function d(){var e;let t=(0,s.C)(e=>e.auth.diagnostic),i="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("local")||window.location.hostname.includes("198")?null==t?void 0:t.offlineLogo:null!==(e=null==t?void 0:t.logo)&&void 0!==e?e:null,o="/images/demo-fallback-logo.png";return(0,n.useEffect)(()=>{if(!i||""===i.trim()){sessionStorage.setItem("diagnostic-logo",o);return}r.default.get(i,{headers:{"Cache-Control":"no-cache"},timeout:3e3,responseType:"blob"}).then(e=>{if(!e||!e.data)throw Error("Image not found or invalid response");let t=e.data;return new Promise((e,i)=>{let o=new FileReader;o.onload=()=>e(o.result),o.onerror=i,o.readAsDataURL(t)})}).then(e=>{sessionStorage.setItem("diagnostic-logo",e)}).catch(e=>{console.warn("Error loading primary image, using fallback:",e),sessionStorage.setItem("diagnostic-logo",o)})},[i,o,3e3]),null}let u=l.mM.create({container:{width:"100%",alignItems:"center",display:"flex",flexDirection:"row",gap:10},logoContainer:{width:100,height:80,marginBottom:10,position:"relative"},image:{width:"100%",height:"100%",objectFit:"contain",borderRadius:100},headerContainer:{width:"100%"},hospitalName:{fontSize:20,fontWeight:"bold",fontFamily:"NotoSans",marginBottom:4,textAlign:"left"},address:{fontSize:12,fontFamily:"NotoSans",marginBottom:2,textAlign:"left"},phone:{fontSize:12,fontFamily:"NotoSans",textAlign:"left"}});t.default=e=>{let{diagnosticState:t,fallbackImageUrl:i="/images/demo-fallback-logo.png",timeoutDuration:n=3e3}=e,r=(0,a._)({key:"print-show-division-name",defaultValue:"true"}),s=sessionStorage.getItem("diagnostic-logo")||i;return(0,o.jsxs)(l.G7,{style:u.container,children:[(0,o.jsx)(l.G7,{style:u.logoContainer,children:s&&(0,o.jsx)(l.Ee,{src:s,style:u.image})}),(0,o.jsxs)(l.G7,{style:u.headerContainer,children:[(0,o.jsx)(l.xv,{style:u.hospitalName,children:null==t?void 0:t.name}),(0,o.jsxs)(l.xv,{style:u.address,children:[null==t?void 0:t.address,"true"===r&&(null==t?void 0:t.division)?", ".concat(null==t?void 0:t.division):""]}),(0,o.jsxs)(l.xv,{style:u.phone,children:["Phone: ",null==t?void 0:t.phone1,(null==t?void 0:t.phone2)?", ".concat(null==t?void 0:t.phone2):""]})]})]})}},26809:function(e,t,i){"use strict";var o=i(68328);i(4505);var n=i(65850),l=i(97698);let a=n.mM.create({container:{paddingVertical:5,fontSize:12},group:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},text:{fontSize:12,fontWeight:700},circle:{width:6,height:6,borderRadius:3,backgroundColor:"black",marginHorizontal:2},divider:{borderTop:"1px solid #787878",marginVertical:3}});t.Z=e=>{var t,i,r,s;let{small:d,dates:u,userName:c}=e,m=e=>(0,l.Z)(e?new Date(e):new Date,"dd-MMM-yyyy");return(0,o.jsxs)(n.G7,{style:a.container,children:[(0,o.jsx)(n.G7,{style:a.divider}),(0,o.jsxs)(n.G7,{style:a.group,children:[(0,o.jsxs)(n.G7,{style:{flexDirection:"row",alignItems:"center"},children:[(0,o.jsx)(n.xv,{style:[a.text,{fontSize:10}],children:"Period : "}),(0,o.jsx)(n.xv,{style:[a.text,{fontSize:10}],children:m(null!==(s=null==u?void 0:null===(t=u.dates)||void 0===t?void 0:t[0])&&void 0!==s?s:new Date)}),(0,o.jsxs)(n.xv,{style:[a.text,{fontSize:10}],children:[" "," To "," "]}),(0,o.jsx)(n.xv,{style:[a.text,{fontSize:10}],children:m((null==u?void 0:null===(i=u.dates)||void 0===i?void 0:i[1])||(null==u?void 0:null===(r=u.dates)||void 0===r?void 0:r[0])||new Date)})]}),(0,o.jsx)(n.G7,{style:a.circle}),(0,o.jsxs)(n.xv,{style:[a.text,{fontSize:10}],children:["Printed By : ",c||"Unknown"]}),(0,o.jsx)(n.G7,{style:a.circle}),(0,o.jsxs)(n.xv,{style:[a.text,{fontSize:10,marginTop:"15px"}],children:["Print Time : ",(0,l.Z)(new Date,"MM/dd/yyyy : hh:mm a")]})]}),!d&&(0,o.jsx)(n.G7,{style:a.divider})]})}},86431:function(e,t,i){"use strict";var o=i(68328),n=i(65850);t.Z=e=>{let{diagnosticSettings:t}=e;return(0,o.jsx)(n.G7,{children:(null==t?void 0:t.viewId)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.xv,{style:{textTransform:"capitalize",fontSize:12,fontWeight:"bold"},children:["Viewing as: ",(null==t?void 0:t.viewName)||"N/A"]}),(0,o.jsxs)(n.xv,{style:{fontSize:12},children:["Email: ",(null==t?void 0:t.viewEmail)||"N/A"]})]})})}},25985:function(e,t,i){"use strict";var o=i(68328),n=i(65850),l=i(6780),a=i(4505);let r=n.mM.create({wrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",zIndex:-1},watermark:{opacity:.08}});t.Z=e=>{let{diagnosticState:t,fallbackImageUrl:i="/images/demo-fallback-logo.png",timeoutDuration:s=5e3,pageSize:d="A4"}=e,[u,c]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1),v=(null==t?void 0:t.logo)||(null==t?void 0:t.offlineLogo)||null;if((0,a.useEffect)(()=>{if(!v){f(!0),h(!1);return}h(!0),(async()=>{try{let e=await l.default.get(v,{timeout:s,responseType:"blob"}),t=await new Promise((t,i)=>{let o=new FileReader;o.onload=()=>t(o.result),o.onerror=i,o.readAsDataURL(e.data)});c(t),f(!1)}catch(e){f(!0)}finally{h(!1)}})()},[v,s]),m)return null;let x=p?i:u;if(!x)return null;let g=d.includes("A5");return(0,o.jsx)(n.G7,{fixed:!0,style:r.wrapper,children:(0,o.jsx)(n.Ee,{src:x,style:[r.watermark,{width:g?250:450,height:g?250:450}]})})}},15139:function(e,t,i){"use strict";i.d(t,{P:function(){return r}});var o=i(68328),n=i(32451),l=i(29013),a=i(98553);let r=(0,i(4505).forwardRef)(function(e,t){let{style:i,...r}=e;return(0,o.jsx)(n.Box,{component:"span",ref:t,style:{display:"flex",...i},...r,children:(0,o.jsxs)("span",{style:{display:"flex",position:"relative"},children:[(0,o.jsx)(l.Z,{size:"1em",stroke:1}),(0,o.jsx)(a.Z,{style:{position:"absolute",right:"0.1em",top:"0"},size:"0.4em",stroke:3})]})})})},72940:function(e,t,i){"use strict";i.d(t,{FD:function(){return n},Hn:function(){return o},y4:function(){return l}});let o={headers:{"Content-Type":"application/json"}},n={withCredentials:!0},l={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78284:function(e,t,i){"use strict";i.d(t,{p:function(){return l}});var o=i(4505),n=i(90685);function l(e){let{data:t}=(0,n.wz)(e);return(0,o.useMemo)(()=>{var e,i,o,n,l,a,r;let s=null==t?void 0:null===(o=t.data)||void 0===o?void 0:null===(i=o.BedSubCategory)||void 0===i?void 0:null===(e=i.BedCategory)||void 0===e?void 0:e.name,d=null==t?void 0:null===(l=t.data)||void 0===l?void 0:null===(n=l.BedSubCategory)||void 0===n?void 0:n.name,u=null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.bedNumber,c=null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.roomNo;return s&&d&&u&&c?"".concat(s,"/").concat(d," B").concat(u,"-R").concat(c):"Not Selected"},[null==t?void 0:t.data])}},84944:function(e,t,i){"use strict";i.d(t,{yV:function(){return m}});var o=i(68328),n=i(62471),l=i(22041),a=i(98641),r=i(78284),s=i(4505);let d=e=>{let{bedId:t}=e,i=(0,r.p)(null!=t?t:"");return(0,o.jsx)(l.Text,{children:i||"-"})},u={billId:{id:"billId",label:"Bill ID",defaultLabel:"Bill ID",visible:!0,order:0},patientName:{id:"patientName",label:"Patient Name(P.ID)",defaultLabel:"Patient Name(P.ID)",visible:!0,order:1},bed:{id:"bed",label:"Bed",defaultLabel:"Bed",visible:!0,order:2},dateTime:{id:"dateTime",label:"Bill Date & Time",defaultLabel:"Bill Date & Time",visible:!0,order:3},user:{id:"user",label:"User",defaultLabel:"User",visible:!0,order:4},status:{id:"status",label:"Status",defaultLabel:"Status",visible:!0,order:5},paidToday:{id:"paidToday",label:"Paid Today",defaultLabel:"Paid Today",visible:!0,order:6},totalPaid:{id:"totalPaid",label:"Total Paid",defaultLabel:"Total Paid",visible:!0,order:7},diagnosis:{id:"diagnosis",label:"Diagnosis",defaultLabel:"Diagnosis",visible:!0,order:8},admissionFee:{id:"admissionFee",label:"Add. Fee",defaultLabel:"Add. Fee",visible:!0,order:9},advanceFee:{id:"advanceFee",label:"Advance",defaultLabel:"Advance",visible:!0,order:10}},c={billId:e=>(0,a.OU)(e),patientName:e=>{var t,i,o;return(null!==(o=null===(t=e.patient)||void 0===t?void 0:t.name)&&void 0!==o?o:"")+"("+((null==e?void 0:null===(i=e.patient)||void 0===i?void 0:i.patientId)||"")+")"},bed:e=>{var t,i;return(0,o.jsx)(d,{bedId:null===(i=e.bookings)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.bedId},"bed-".concat(e.billId))},dateTime:e=>(0,a.t2)(e),user:e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.name},status:e=>e.status,paidToday:e=>e.paidInAmountTotal,totalPaid:e=>e.paidAmount,diagnosis:e=>e.diagnosis,admissionFee:e=>e.admissionFee,advanceFee:e=>e.advanceFee},m=()=>{let[e,t]=(0,n.I)({key:"indoor-patient-columns-settings",defaultValue:u,serialize:e=>JSON.stringify(e),deserialize:e=>e?JSON.parse(e):u}),[i,o]=(0,s.useTransition)(),l=(0,s.useRef)(null),a=(0,s.useCallback)(t=>{let i=Object.values(e).filter(e=>e.visible).sort((e,t)=>e.order-t.order);return t&&t.length>0?i.filter(e=>t.includes(e.id)):i},[e]),r=(0,s.useCallback)((e,i)=>{o(()=>{t(t=>{let o={...t};return o[e]={...o[e],label:i},o})})},[o]);return{columnSettings:e,getVisibleColumns:a,updateColumnLabel:r,toggleColumnVisibility:(0,s.useCallback)(e=>{l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{o(()=>{t(t=>{let i=t[e];if(!i)return console.error("Column not found:",e),t;let o=!i.visible,n={...t};return n[e]={...i,visible:o},n})}),l.current=null},0)},[o]),reorderColumns:(0,s.useCallback)(e=>{o(()=>{t(t=>{let i={...t};return e.forEach((e,t)=>{i[e]&&(i[e]={...i[e],order:t})}),i})})},[o]),resetToDefaults:(0,s.useCallback)(()=>{o(()=>{t(u)})},[o]),columnAccessors:c,isPending:i}}},38670:function(e,t,i){"use strict";i.d(t,{O:function(){return a}});var o=i(72940),n=i(6780),l=i(67732);let a=async e=>{let{dates:t,isOwn:i,userId:a}=e;try{let e=new Date,l=new Date;if(t){let[i,o]=t;i&&(e=new Date(i)),o&&(l=new Date(o))}e.setHours(0,0,0,0),l.setHours(23,59,59,999);let r="".concat("http://sasthotech.local:5000/api/v1","/admin/dashboard/hospital?from=").concat(new Date(e).toISOString(),"&to=").concat(new Date(l).toISOString());i&&(r+="&isOwn=".concat(!0)),a&&(r+="&userId=".concat(a));let s=await n.default.get(r,o.FD);return{success:!0,data:s.data.data}}catch(e){if(e instanceof l.d7){var r;return{success:!1,data:null===(r=e.response)||void 0===r?void 0:r.data.message}}return{success:!1,data:"An error occurred"}}}},50555:function(e,t,i){"use strict";i.d(t,{y:function(){return a}});var o=i(72940),n=i(6780),l=i(67732);let a=async e=>{try{let t=await n.default.delete("".concat("http://sasthotech.local:5000/api/v1","/hospitalBill/").concat(e),o.FD);return{success:!0,data:t.data.message}}catch(e){if(e instanceof l.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}}},65971:function(e,t,i){"use strict";i.d(t,{q:function(){return a}});var o=i(72940),n=i(6780),l=i(67732);let a=async e=>{let{from:t,to:i,isPaid:a,isOwn:r,phone:s,patientId:d,limit:u,page:c,status:m,userId:h,serviceId:p,doctorId:f,pCId:v,nurseId:x,referredDoctorId:g,isCommissionPaid:y,isAdmissionFeePaid:b}=e;try{t&&(t=new Date(t)).setHours(0,0,0,0),i&&(i=new Date(i)).setHours(23,59,59,999);let e=await n.default.get("hospitalBill",{baseURL:"http://sasthotech.local:5000/api/v1",params:{from:t,to:i,isPaid:a,isOwn:r,phone:s,patientId:d,limit:u,page:c,status:m,userId:h,serviceId:p,doctorId:f,pCId:v,nurseId:x,referredDoctorId:g,isCommissionPaid:y,isAdmissionFeePaid:b},...o.FD});return{success:!0,data:e.data.data}}catch(e){if(e instanceof l.d7){var j;return{success:!1,data:null===(j=e.response)||void 0===j?void 0:j.data.message}}return{success:!1,data:"An error occurred"}}}},78101:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});var o=i(49854),n=i(68240),l=i(94183),a=i(28317);let r=(0,n.LC)({baseQuery:(0,l.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async i=>{let n="string"==typeof e?e:e.url;return n.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,a.t8)(n,await i.clone().json().catch(()=>null),(0,o.x)()),i}).catch(async i=>{if(i instanceof TypeError){let i="string"==typeof e?e:e.url;if(!i.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,a.U2)(i,(0,o.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw i})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},74559:function(e,t,i){"use strict";i.d(t,{Im:function(){return a},av:function(){return l},nC:function(){return n}});let o=(0,i(79258).createSlice)({name:"auth",initialState:{isAuth:null,user:null,isProfileIncomplete:!1,diagnostic:null},reducers:{setUser:(e,t)=>{var i;e.user=t.payload,e.isAuth=!!t.payload,(null===(i=t.payload)||void 0===i?void 0:i.name)?localStorage.setItem("name",t.payload.name):localStorage.removeItem("name")},setDiagnostic:(e,t)=>{let i=t.payload;"hospital.sasthotech.com"===window.location.hostname?i.activeLogo=i.logo:i.activeLogo=i.offlineLogo,e.diagnostic=i},setProfileIncomplete:(e,t)=>{e.isProfileIncomplete=t.payload}}}),n=e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.role},{setUser:l,setDiagnostic:a}=o.actions;t.ZP=o.reducer},90685:function(e,t,i){"use strict";i.d(t,{fN:function(){return r},kt:function(){return n},lq:function(){return d},ww:function(){return s},wz:function(){return l}});let o=i(78101).g.injectEndpoints({endpoints:e=>({getBeds:e.query({query:()=>({url:"/bed/Bed"}),keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createBed:e.mutation({query:e=>({url:"/bed/beds",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:i,queryFulfilled:n}=t,l=Date.now().toString(36),a=i(o.util.updateQueryData("getBeds",void 0,t=>{t.data.push({...e,id:l,loading:!0})}));try{let{data:e}=await n;i(o.util.updateQueryData("getBeds",void 0,t=>{let i=t.data.findIndex(e=>e.id===l);i>=0&&(t.data[i]=e.data)}))}catch(e){a.undo()}}}),createMultipleBeds:e.mutation({query:e=>({url:"/bed/beds/multi",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:i,queryFulfilled:n}=t,l=e.map(()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5)),a=i(o.util.updateQueryData("getBeds",void 0,t=>{l.forEach((i,o)=>{t.data.push({...e[o],id:i,loading:!0})})}));try{let{data:e}=await n;i(o.util.updateQueryData("getBeds",void 0,t=>{e.data.forEach((e,i)=>{let o=l[i],n=t.data.findIndex(e=>e.id===o);n>=0&&(t.data[n]=e)})}))}catch(e){a.undo()}}}),updateBed:e.mutation({query:e=>{let{id:t,...i}=e;return{url:"/bed/beds/".concat(t),method:"PATCH",body:i}},async onQueryStarted(e,t){let{id:i,...n}=e,{dispatch:l,queryFulfilled:a}=t,r=l(o.util.updateQueryData("getBeds",void 0,e=>{let t=e.data.findIndex(e=>e.id===i);t>=0&&(e.data[t]={...e.data[t],...n})}));try{let{data:e}=await a;l(o.util.updateQueryData("getBeds",void 0,t=>{let o=t.data.findIndex(e=>e.id===i);o>=0&&(t.data[o]=e.data)}))}catch(e){r.undo()}}}),deleteBed:e.mutation({query:e=>({url:"/bed/beds/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:i,queryFulfilled:n}=t,l=i(o.util.updateQueryData("getBeds",void 0,t=>{let i=t.data.find(t=>t.id===e);i&&(i.loading=!0)}));try{await n,i(o.util.updateQueryData("getBeds",void 0,t=>{let i=t.data.findIndex(t=>t.id===e);i>=0&&t.data.splice(i,1)}))}catch(e){l.undo()}}}),getSingleBed:e.query({query:e=>({url:"/bed/beds/".concat(e)})})})}),{useCreateBedMutation:n,useGetSingleBedQuery:l,useGetBedsQuery:a,useCreateMultipleBedsMutation:r,useUpdateBedMutation:s,useDeleteBedMutation:d}=o},13603:function(e,t,i){"use strict";i.d(t,{rm:function(){return d},uA:function(){return s}});var o=i(79258),n=i(69192),l=i(4646),a=i(14685);let r=(0,o.createSlice)({name:"dates",initialState:{dates:[null,null]},reducers:{setDates:(e,t)=>{e.dates=t.payload}}}),s=(0,n.createSelector)([e=>e.dates.dates],e=>{let[t,i]=e;return[t?new Date(t):(0,l.Z)(),i?new Date(i):(0,a.Z)()]}),{setDates:d}=r.actions;t.ZP=r.reducer},25499:function(e,t,i){"use strict";i.d(t,{C:function(){return l},T:function(){return n}});var o=i(53502);let n=()=>(0,o.I0)(),l=o.v9},49854:function(e,t,i){"use strict";let o;i.d(t,{d:function(){return d},x:function(){return s}});var n=i(72940),l=i(6780),a=i(67732),r=i(28317);function s(){return o||(o=(0,r.MT)("cached-responses-store","cached-responses")),o}async function d(e,t){try{let i=await l.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...n.FD});return await (0,r.t8)(e,i.data,s()),i.data}catch(t){if(t instanceof a.d7&&[a.d7.ERR_NETWORK,a.d7.ETIMEDOUT].includes(t.code)){let t=await (0,r.U2)(e,s());if(t)return t}throw t instanceof a.d7&&t.response&&401===t.response.status||console.error(t),t}}},97722:function(e){e.exports={table:"SummaryTable_table__2sSSa"}}},function(e){e.O(0,[1601,2975,3313,9826,4404,3439,7281,748,3069,6945,3852,1656,9722,4670,9258,966,12,7538,6029,154,6306,7698,4927,4890,817,2802,9342,9175,7402,1744],function(){return e(e.s=33848)}),_N_E=e.O()}]);