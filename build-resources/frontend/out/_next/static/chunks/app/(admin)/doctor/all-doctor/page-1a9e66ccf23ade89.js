(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3134],{17804:function(e,t,a){Promise.resolve().then(a.bind(a,4866))},4866:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return W}});var s=a(68328),n=a(58539),o=a(28301),i=a(25499),r=a(48604),l=a(36409),c=a(41224),d=a(14587),u=a(22041),m=a(9722),h=a(22614),g=a(87967),x=a(31204),p=a(7140),v=a(9286),f=a(37199),j=a(56651),w=a(86083),b=a(12697),y=a(12450),C=a(4505),N=a(70818),D=a(53502),k=a(90660),A=a.n(k),S=a(14443),E=a(56815),I=a.n(E),L=a(32278),F=a(8283),Z=a(16721),B=a(72940),T=a(6780),O=a(67732);let P=async()=>{try{let e=await T.default.delete("".concat("http://sasthotech.local:5000/api/v1","/admin/doctor/all"),B.FD);return{success:!0,data:e.data.data}}catch(t){if(t instanceof O.d7){var e;return{success:!1,data:null===(e=t.response)||void 0===e?void 0:e.data.message}}return{success:!1,data:"An error occurred"}}};var _=a(76594);let z=["Doctor Name","Designation","Phone-Number","Commission","Actions"];var K=e=>{var t;let{deleteDoctor:a,setTotalDoctors:k,totalDoctors:E}=e,B=(0,y.useRouter)(),T=(0,i.T)(),O=(0,y.useSearchParams)(),[K,M]=(0,C.useState)(!0),W=(0,D.v9)(e=>e.doctors),q=(0,i.C)(e=>{var t,a;return null==e?void 0:null===(a=e.auth)||void 0===a?void 0:null===(t=a.user)||void 0===t?void 0:t.role}),[H,R]=(0,C.useState)(""),[V,Y]=(0,C.useState)(""),[G,U]=(0,C.useState)(!1),[J,Q]=(0,C.useState)(1),X=(0,F.o)(),[$,ee]=(0,C.useState)([]);console.log(W);let et=async()=>{try{U(!0);let{success:e,data:t}=await (0,n.c)(parseInt(O.get("page")||"1"),parseInt(O.get("limit")||"16"),V);if(e)Q(null==t?void 0:t.totalPage),ee(null==t?void 0:t.items),T((0,o.cv)(null==t?void 0:t.items)),k(null==t?void 0:t.totalItems);else throw Error(t)}catch(e){A().fire("Error",e instanceof Error?e.message:"UnKnown Error Happened","error")}finally{U(!1)}};(0,C.useEffect)(()=>{et()},[T,W.chamberedDoctors,O,k,V]);let ea=async()=>{(await A().fire({title:"Are you sure?",text:"You won't be able to revert this! All doctors will be permanently deleted.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete all!",showLoaderOnConfirm:!0,preConfirm:async()=>{try{let{success:e,data:t}=await P();if(!e)throw Error(t);return e}catch(e){A().showValidationMessage("Request failed: ".concat(e))}},allowOutsideClick:()=>!A().isLoading()})).isConfirmed&&(await et(),await A().fire({title:"Deleted!",text:"All doctors have been deleted.",icon:"success"}))},es=(0,C.useCallback)((0,_.debounce)(e=>{Y(e.toLowerCase())},1e3),[]),en=e=>{R(e),console.log(e,"hhere"),es(e)};return G?(0,s.jsx)(()=>(0,s.jsx)(r.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,children:(0,s.jsx)(l.M,{style:{minHeight:"100vh"},children:(0,s.jsxs)(c.Stack,{align:"center",gap:"md",children:[(0,s.jsx)(d.Loader,{size:"lg",color:"blue"}),(0,s.jsx)(u.Text,{size:"sm",c:"dimmed",children:"Loading/Filtering doctors..."})]})})}),{}):(0,s.jsxs)("div",{className:"".concat(I().container),children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"fw-bold",children:"Doctor List"})}),(0,s.jsx)("div",{className:"d-flex flex-column align-items-end gap-3",children:(0,s.jsxs)("div",{className:"d-flex gap-3",children:[(0,s.jsx)("div",{className:"bg-white px-2 py-1 rounded-3 cursor",children:(0,s.jsx)(v.Z,{})}),(0,s.jsx)("div",{onClick:()=>M(!0),className:"".concat(K?"bg-white":"bg-none"," cursor px-2 py-1 rounded-3"),children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)("div",{onClick:()=>M(!1),className:"".concat(K?"bg-none":"bg-white"," cursor px-2 py-1 rounded-3"),children:(0,s.jsx)(j.Z,{})})]})})]}),(0,s.jsx)(m.I,{leftSection:(0,s.jsx)(w.Z,{size:20}),placeholder:"Search by name ",value:H,onChange:e=>en(e.target.value),variant:"filled",size:"md",radius:"md",width:"350px",type:"text",name:"text",mt:"lg"}),(0,s.jsxs)(h.Group,{justify:"space-between",className:"mt-3",children:[(0,s.jsxs)(u.Text,{children:[E," doctors"]}),(0,s.jsx)(g.P,{label:"Select Limit",data:["16","32","48","100","200","500","1000"],value:O.get("limit")||"16",onChange:e=>B.push("?limit=".concat(e,"&page=").concat(O.get("page")||1))})]}),"labAssistant"!==q&&(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-3 py-3",children:[(0,s.jsx)(x.Button,{onClick:()=>{X.openModal({title:"Import Doctors",children:(0,s.jsx)(Z.Z,{modals:X,load:et}),centered:!0,closeOnClickOutside:!1,size:"80%"})},children:"Import Doctor from Excel File"}),(0,s.jsx)(x.Button,{onClick:ea,bg:"red",leftSection:(0,s.jsx)(b.Z,{}),children:"Delete All"})]}),(0,s.jsx)(N.default,{className:"mt-4",children:(0,s.jsx)(s.Fragment,{children:K?(0,s.jsx)(s.Fragment,{children:null==W?void 0:null===(t=W.paginatedAdminDoctors)||void 0===t?void 0:t.map((e,t)=>(0,s.jsx)(L.Z,{deleteDoctor:a,isDoctorList:!0,doctor:e,searchTerm:V},t))}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S.Z,{dataKeys:["name",["designation","specialist"],["phone1","phone2"],"percentage"],headers:z,isImage:!0,data:null==W?void 0:W.paginatedAdminDoctors,imageKeyName:"image",keyNameWithImage:"name",isEditable:!0,isViewAble:!1,isDeleteAble:!0,deleteFunction:a,editLink:"/doctor/details",viewLink:"/doctor/details",queryParamName:"doctorId"})})})}),(0,s.jsx)("div",{className:I().pagination,children:(0,s.jsx)(p.t,{value:parseInt(O.get("page")||"1"),onChange:e=>B.push("?limit=".concat(O.get("limit")||16,"&page=").concat(e)),total:J})})]})},M=a(78256),W=()=>{let[e,t]=(0,C.useState)(0),a=(0,i.T)(),n=(0,i.C)(e=>e.doctors.adminDoctors),r=async e=>{let{success:s,data:i}=await (0,M.W)(e);s&&(a((0,o.At)(e)),n&&a((0,o.id)(e)),t(e=>e-1))};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(K,{totalDoctors:e,setTotalDoctors:t,deleteDoctor:r})})}},78256:function(e,t,a){"use strict";a.d(t,{W:function(){return i}});var s=a(72940),n=a(6780),o=a(67732);let i=async e=>{try{let t=await n.default.delete("".concat("http://sasthotech.local:5000/api/v1","/admin/doctor/").concat(e),s.FD);return{success:!0,data:t.data.data}}catch(e){if(e instanceof o.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}}}},function(e){e.O(0,[1601,2975,7852,3069,6945,3852,1656,9722,4670,9258,9533,1166,7967,6029,154,7698,4927,7140,1805,6129,3535,6666,7481,4662,8779,9175,7402,1744],function(){return e(e.s=17804)}),_N_E=e.O()}]);