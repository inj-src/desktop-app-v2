(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6626],{5002:function(e,t,n){Promise.resolve().then(n.bind(n,43159))},43159:function(e,t,n){"use strict";n.r(t);var s=n(68328),r=n(25922),o=n(13603),i=n(25499),a=n(89043),l=n(22614),d=n(58812),c=n(22041),u=n(48604),p=n(32451),m=n(11114),h=n(41224),x=n(29663),f=n(77303),g=n(34473),j=n(14587),y=n(68242),v=n(8720),T=n(67781),b=n(7965),w=n(34499),C=n(58211);function G(e){let{icon:t,title:n,value:r,color:o,currency:i=!1}=e;return(0,s.jsx)(a.X,{p:"md",radius:"md",withBorder:!0,children:(0,s.jsxs)(l.Group,{children:[(0,s.jsx)(d.k,{size:"lg",variant:"light",color:o,children:t}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Text,{size:"xs",color:"dimmed",tt:"uppercase",fw:700,children:n}),(0,s.jsx)(c.Text,{fw:700,size:"xl",children:i?"৳".concat(r.toLocaleString()):r})]})]})})}function q(e){let{doctor:t}=e,n=t.oldPatientCount+t.newPatientCount,r=t.oldPatientTotalCollection+t.newPatientTotalCollection;return(0,s.jsxs)(u.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,s.jsx)(u.Z.Section,{p:"md",bg:"gray.0",children:(0,s.jsx)(l.Group,{justify:"space-between",align:"flex-start",children:(0,s.jsxs)(p.Box,{flex:1,children:[(0,s.jsxs)(l.Group,{align:"center",justify:"space-between",mb:"xs",gap:"xs",children:[(0,s.jsxs)(l.Group,{mb:"xs",children:[(0,s.jsx)(d.k,{variant:"light",color:"blue",size:"sm",children:(0,s.jsx)(v.Z,{size:16})}),(0,s.jsx)(c.Text,{fw:600,size:"sm",color:"blue",children:"Doctor Profile"})]}),(0,s.jsx)(m.C,{color:n>0?"green":"gray",variant:"light",leftSection:(0,s.jsx)(T.Z,{size:12}),children:n>0?"Active":"No Appointments"})]}),(0,s.jsx)(c.Text,{fw:700,size:"lg",mb:"xs",children:t.doctorName}),t.designation&&(0,s.jsx)(c.Text,{size:"sm",color:"dimmed",mb:"md",children:t.designation})]})})}),(0,s.jsxs)(h.Stack,{gap:"md",mt:"xs",children:[(0,s.jsxs)(x.Grid,{children:[(0,s.jsx)(x.Grid.Col,{span:6,children:(0,s.jsx)(G,{icon:(0,s.jsx)(b.Z,{size:20}),title:"Old Patients",value:t.oldPatientCount,color:"blue"})}),(0,s.jsx)(x.Grid.Col,{span:6,children:(0,s.jsx)(G,{icon:(0,s.jsx)(w.Z,{size:20}),title:"New Patients",value:t.newPatientCount,color:"green"})})]}),(0,s.jsx)(f.Divider,{}),(0,s.jsxs)(x.Grid,{children:[(0,s.jsx)(x.Grid.Col,{span:6,children:(0,s.jsx)(G,{icon:(0,s.jsx)(C.Z,{size:20}),title:"Old Patient Collection",value:t.oldPatientTotalCollection,color:"orange",currency:!0})}),(0,s.jsx)(x.Grid.Col,{span:6,children:(0,s.jsx)(G,{icon:(0,s.jsx)(C.Z,{size:20}),title:"New Patient Collection",value:t.newPatientTotalCollection,color:"teal",currency:!0})})]}),(0,s.jsx)(a.X,{p:"sm",bg:"gray.1",radius:"sm",children:(0,s.jsxs)(l.Group,{justify:"space-between",children:[(0,s.jsx)(c.Text,{size:"xs",fw:600,children:"Total Summary"}),(0,s.jsxs)(l.Group,{gap:"lg",children:[(0,s.jsxs)(c.Text,{size:"sm",children:[(0,s.jsx)(c.Text,{span:!0,fw:700,color:"blue",children:n})," ","patients"]}),(0,s.jsxs)(c.Text,{size:"sm",children:[(0,s.jsxs)(c.Text,{span:!0,fw:700,color:"green",children:["৳",r.toLocaleString()]})," ","collected"]})]})]})})]})]})}n(4505),t.default=function(){let e=(0,i.C)(o.uA),t=e[0],n=e[1],{data:a,isLoading:d}=(0,r.mu)({from:t,to:n}),u=(null==a?void 0:a.data)||[],p=u.reduce((e,t)=>e+t.oldPatientCount,0),v=u.reduce((e,t)=>e+t.newPatientCount,0),P=u.reduce((e,t)=>e+t.oldPatientTotalCollection+t.newPatientTotalCollection,0);return d?(0,s.jsx)(g.Container,{size:"lg",py:"xl",children:(0,s.jsx)(h.Stack,{align:"center",justify:"center",h:"50vh",children:(0,s.jsx)(j.Loader,{size:"lg",type:"circular"})})}):(0,s.jsx)(g.Container,{size:"lg",py:"xl",children:(0,s.jsxs)(h.Stack,{gap:"xl",children:[(0,s.jsxs)(l.Group,{justify:"space-between",align:"center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.Title,{order:1,mb:"xs",children:"Appointment Dashboard"}),(0,s.jsxs)(c.Text,{size:"lg",color:"dimmed",children:["Overview of today","'","s appointments and collections"]})]}),(0,s.jsxs)(m.C,{size:"lg",variant:"gradient",gradient:{from:"blue",to:"cyan"},children:[u.length," Doctors"]})]}),(0,s.jsxs)(x.Grid,{children:[(0,s.jsx)(x.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(G,{icon:(0,s.jsx)(b.Z,{size:24}),title:"Total Old Patients",value:p,color:"blue"})}),(0,s.jsx)(x.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(G,{icon:(0,s.jsx)(w.Z,{size:24}),title:"Total New Patients",value:v,color:"green"})}),(0,s.jsx)(x.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(G,{icon:(0,s.jsx)(T.Z,{size:24}),title:"Total Patients",value:p+v,color:"violet"})}),(0,s.jsx)(x.Grid.Col,{span:{base:12,sm:6,md:3},children:(0,s.jsx)(G,{icon:(0,s.jsx)(C.Z,{size:24}),title:"Total Collection",value:P,color:"orange",currency:!0})})]}),(0,s.jsx)(f.Divider,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.Title,{order:2,mb:"lg",children:"Doctor-wise Breakdown"}),(0,s.jsx)(h.Stack,{gap:"lg",children:(0,s.jsx)(x.Grid,{children:u.map(e=>(0,s.jsx)(x.Grid.Col,{span:{base:12,sm:6,md:4},children:(0,s.jsx)(q,{doctor:e})},e.doctorId))})})]})]})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return r},Hn:function(){return s},y4:function(){return o}});let s={headers:{"Content-Type":"application/json"}},r={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},25922:function(e,t,n){"use strict";n.d(t,{BG:function(){return f},Fp:function(){return g},LW:function(){return s},U6:function(){return m},XK:function(){return x},_C:function(){return a},bX:function(){return o},ei:function(){return r},lF:function(){return p},mu:function(){return d},mx:function(){return l},tP:function(){return u}});let{useGetAllDoctorQuery:s,useGetDoctorQuery:r,useGetSingleDoctorQuery:o,useGetAllTimeSlotQuery:i,useCreateAppointmentMutation:a,useAllAppointmentsQuery:l,useGetAppointmentDashboardQuery:d,useUpdateAppointmentMutation:c,useCreateReservedAppointmentMutation:u,useGetAllReservedTimeSlotQuery:p,useStartQueueMutation:m,useGetRunningSessionsQuery:h,useGetAppointmentQuery:x,useAllAppointmentsWithoutGroupingQuery:f,useGetSingleDoctorTestsQuery:g}=n(78101).g.injectEndpoints({endpoints:e=>({getAllDoctor:e.query({query:()=>({url:"/doctorchamber",method:"GET"}),providesTags:["doctor"],transformResponse:e=>({data:e.data})}),getAllAdminDoctor:e.query({query:()=>({url:"/doctorchamber",method:"GET"}),providesTags:["doctor"],transformResponse:e=>({data:e.data})}),getDoctor:e.query({query:e=>({url:"/doctorchamber/".concat(e),method:"GET"}),providesTags:["doctor"],transformResponse:e=>({data:e.data})}),getSingleDoctor:e.query({query:e=>({url:"/doctor/".concat(e),method:"GET"}),providesTags:["doctor"],transformResponse:e=>({data:e.data})}),getAppointmentDashboard:e.query({query:e=>{let{from:t,to:n}=e;return{url:"/appointment/dashboard",method:"GET",params:{from:t instanceof Date?t.toISOString():t,to:n instanceof Date?n.toISOString():n}}},providesTags:["doctor"],keepUnusedDataFor:86400,transformResponse:e=>e}),getAllTimeSlot:e.query({query:e=>({url:"appointment/available-time-slots",method:"GET",params:e}),providesTags:["appointment"],transformResponse:e=>({data:e.data})}),createAppointment:e.mutation({query:e=>({url:"/appointment",method:"POST",body:e}),invalidatesTags:["appointment"]}),getAllReservedTimeSlot:e.query({query:e=>({url:"appointment/reserved-slots",method:"GET",params:e}),providesTags:["appointment"],transformResponse:e=>({data:e.data})}),createReservedAppointment:e.mutation({query:e=>({url:"/appointment/fill-reserved",method:"POST",body:e}),invalidatesTags:["appointment"]}),updateAppointment:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/appointment/".concat(t),method:"PATCH",body:n}},invalidatesTags:["appointment"]}),allAppointments:e.query({query:e=>({url:"/appointment/doctor",method:"GET",params:e}),providesTags:["appointment"],transformResponse:e=>({data:e.data})}),allAppointmentsWithoutGrouping:e.query({query:e=>({url:"/appointment",method:"GET",params:e}),transformResponse:e=>{var t;return{data:null===(t=e.data)||void 0===t?void 0:t.items}}}),startQueue:e.mutation({query:e=>({url:"/appointment/start-queue",method:"POST",body:e}),invalidatesTags:["appointment"]}),getRunningSessions:e.query({query:()=>({url:"/appointment/live/running-sessions",method:"GET"}),providesTags:["appointment"],transformResponse:e=>({message:e.message,sessions:e.sessions})}),getAppointment:e.query({query:e=>({url:"/appointment/".concat(e),method:"GET"}),providesTags:["appointment"],transformResponse:e=>({data:e.data})}),getSingleDoctorTests:e.query({query:e=>({url:"/doctor/".concat(e,"/tests")})})})})},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var s=n(49854),r=n(68240),o=n(94183),i=n(28317);let a=(0,r.LC)({baseQuery:(0,o.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let r="string"==typeof e?e:e.url;return r.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,i.t8)(r,await n.clone().json().catch(()=>null),(0,s.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,i.U2)(n,(0,s.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},13603:function(e,t,n){"use strict";n.d(t,{rm:function(){return d},uA:function(){return l}});var s=n(79258),r=n(69192),o=n(4646),i=n(14685);let a=(0,s.createSlice)({name:"dates",initialState:{dates:[null,null]},reducers:{setDates:(e,t)=>{e.dates=t.payload}}}),l=(0,r.createSelector)([e=>e.dates.dates],e=>{let[t,n]=e;return[t?new Date(t):(0,o.Z)(),n?new Date(n):(0,i.Z)()]}),{setDates:d}=a.actions;t.ZP=a.reducer},25499:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return r}});var s=n(53502);let r=()=>(0,s.I0)(),o=s.v9},49854:function(e,t,n){"use strict";let s;n.d(t,{d:function(){return d},x:function(){return l}});var r=n(72940),o=n(6780),i=n(67732),a=n(28317);function l(){return s||(s=(0,a.MT)("cached-responses-store","cached-responses")),s}async function d(e,t){try{let n=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...r.FD});return await (0,a.t8)(e,n.data,l()),n.data}catch(t){if(t instanceof i.d7&&[i.d7.ERR_NETWORK,i.d7.ETIMEDOUT].includes(t.code)){let t=await (0,a.U2)(e,l());if(t)return t}throw t instanceof i.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[3069,6945,3852,9258,966,1493,1313,9175,7402,1744],function(){return e(e.s=5002)}),_N_E=e.O()}]);