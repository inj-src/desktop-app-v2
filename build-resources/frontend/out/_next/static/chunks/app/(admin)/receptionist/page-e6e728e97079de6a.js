(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1339],{40585:function(e,s,n){Promise.resolve().then(n.bind(n,80218))},80218:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return eh}});var i=n(68328),t=n(4505),a=n(34473),o=n(41224),r=n(25499),l=n(89043),c=n(22614),d=n(32451),u=n(58812),m=n(53729),h=n(11114),v=n(68242),g=n(22041),p=n(55911),x=n(76029),f=n(3741),j=n(69861),y=n(86083),b=n(50430);let w=e=>{let{receptionistsCount:s,query:n,onQueryChange:t,onRefresh:a,refreshLoading:o}=e;return(0,i.jsxs)(l.X,{p:"xl",radius:"lg",withBorder:!0,bg:"var(--mantine-color-body)",children:[(0,i.jsxs)(c.Group,{justify:"space-between",align:"flex-end",children:[(0,i.jsxs)(d.Box,{children:[(0,i.jsxs)(c.Group,{align:"center",gap:"sm",mb:"xs",children:[(0,i.jsx)(u.k,{size:42,radius:"md",variant:"gradient",gradient:{from:"blue",to:"cyan",deg:45},children:(0,i.jsx)(j.Z,{style:{width:(0,m.h)(24),height:(0,m.h)(24)},stroke:1.5})}),(0,i.jsx)(h.C,{variant:"gradient",gradient:{from:"blue",to:"cyan"},size:"lg",radius:"sm",children:"Admin Portal"})]}),(0,i.jsx)(v.Title,{order:1,fw:900,style:{fontSize:(0,m.h)(32),letterSpacing:-1},children:"Receptionist Management"}),(0,i.jsx)(g.Text,{c:"dimmed",size:"lg",mt:4,maw:600,children:"Create and manage receptionist accounts, configure access permissions, and monitor activity."})]}),(0,i.jsx)(c.Group,{align:"flex-end",gap:"md",children:(0,i.jsxs)(d.Box,{children:[(0,i.jsx)(g.Text,{size:"xs",fw:700,c:"dimmed",mb:4,tt:"uppercase",children:"Total Staff"}),(0,i.jsxs)(h.C,{size:"xl",variant:"light",color:"blue",radius:"md",leftSection:(0,i.jsx)(j.Z,{size:16}),styles:{root:{height:42}},children:[s," Receptionist",1!==s?"s":""]})]})})]}),(0,i.jsxs)(c.Group,{mt:"xl",justify:"space-between",children:[(0,i.jsx)(p.TextInput,{placeholder:"Search by email address...",leftSection:(0,i.jsx)(y.Z,{size:16,stroke:1.5}),value:n,onChange:e=>t(e.currentTarget.value),size:"md",radius:"md",style:{width:320}}),(0,i.jsx)(x.u,{label:"Refresh list",withArrow:!0,children:(0,i.jsx)(f.A,{size:42,variant:"default",radius:"md",onClick:a,loading:o,children:(0,i.jsx)(b.Z,{size:20,stroke:1.5})})})]})]})};var S=n(48604),M=n(13822),D=n(49905),I=n(13367),z=n(31204),A=n(34499),C=n(58895),k=n(8372),P=n(47720),G=n(9323);let O=e=>{let{loading:s,onSubmit:n}=e,t=(0,P.c)({initialValues:{email:"",password:""},validate:{email:e=>/^(([^<>()\[\]\\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?null:"Invalid email",password:e=>e.length<6?"Password must be at least 6 characters":e.length>127?"Password is too long":null}});return(0,G.a)("(max-width: 600px)"),(0,i.jsxs)(S.Z,{shadow:"sm",padding:"xl",radius:"lg",withBorder:!0,children:[(0,i.jsx)(M.f,{visible:s,zIndex:10,overlayProps:{radius:"lg",blur:2}}),(0,i.jsxs)(c.Group,{align:"center",gap:"sm",mb:"lg",children:[(0,i.jsx)(u.k,{size:"lg",radius:"md",variant:"light",color:"teal",style:{width:(0,m.h)(32),height:(0,m.h)(32)},children:(0,i.jsx)(A.Z,{style:{width:(0,m.h)(18),height:(0,m.h)(18)},stroke:2})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(v.Title,{order:4,fw:700,children:"Add New Receptionist"}),(0,i.jsx)(g.Text,{size:"xs",c:"dimmed",children:"Create a new account with default permissions"})]})]}),(0,i.jsx)("form",{onSubmit:t.onSubmit(n),children:(0,i.jsxs)(D.M,{cols:{base:1,sm:1,md:3},spacing:"md",verticalSpacing:"md",children:[(0,i.jsx)(p.TextInput,{name:"email",size:"md",variant:"filled",radius:"md",label:"Email Address",placeholder:"receptionist@example.com",leftSection:(0,i.jsx)(C.Z,{size:16,stroke:1.5}),...t.getInputProps("email")}),(0,i.jsx)(I.W,{size:"md",variant:"filled",radius:"md",name:"password",label:"Password",placeholder:"Minimum 6 characters",leftSection:(0,i.jsx)(k.Z,{size:16,stroke:1.5}),...t.getInputProps("password")}),(0,i.jsx)("div",{style:{display:"flex",alignItems:"flex-end",width:"100%"},children:(0,i.jsx)(z.Button,{type:"submit",size:"md",radius:"md",fullWidth:!0,variant:"gradient",gradient:{from:"teal",to:"green",deg:45},leftSection:(0,i.jsx)(A.Z,{size:18,stroke:1.5}),children:"Create Account"})})]})})]})};var T=n(97428),E=n(77303),N=n(39467),Z=n(72375),B=n(29259),F=n(81209),R=n(65974),H=n(12697),L=n(98542),X=n(49238),_=n(29728),q=n(76283);let Y=["canManageDoctors","canManagePCs","canManageTests","canManageAppointments","canManageOutdoorBills","canManageIndoorBills","canManageExpenses","canManageInventory","canManageIncomes","canManageStatements","canManageSMS","canManagePathologists","canManageSerialManagers"],$=Y.length,U=e=>{let s=e||{};return[{value:"canManageDoctors",label:"Manage Doctors"},{value:"canManagePCs",label:"Manage PCs (Patient Collectors)"},{value:"canManageTests",label:"Manage Tests"},{value:"canManageAppointments",label:"Manage Appointments",disabled:!(null==s?void 0:s.isSerialManagement)},{value:"canManageOutdoorBills",label:"Manage Outdoor Bills",disabled:!(null==s?void 0:s.isOutdoorManagement)},{value:"canManageIndoorBills",label:"Manage Indoor Bills",disabled:!(null==s?void 0:s.isHospitalManagement)},{value:"canManageExpenses",label:"Manage Expenses",disabled:!(null==s?void 0:s.inExpenseManagement)},{value:"canManageInventory",label:"Manage Inventory",disabled:!(null==s?void 0:s.isInventoryManagement)},{value:"canManageIncomes",label:"Manage Incomes",disabled:!(null==s?void 0:s.isIncomeManagement)},{value:"canManageStatements",label:"Manage Statements",disabled:!(null==s?void 0:s.showStatements)},{value:"canManageSMS",label:"Manage SMS",disabled:!(null==s?void 0:s.isSMSManagement)},{value:"canManagePathologists",label:"Manage Pathologists",disabled:!(null==s?void 0:s.isLabManagement)},{value:"canManageSerialManagers",label:"Manage Serial Managers",disabled:!(null==s?void 0:s.isSerialManagement)}]},W=e=>{let s={};return Y.forEach(n=>{s[n]=e.includes(n)}),s},Q=(e,s)=>{if(!e||0===Object.keys(e).length)return s;let n=[];return s.forEach(s=>{!0===e[s]&&n.push(s)}),n};var V=n(40794),J=n(25299),K=n(46557);let ee=e=>{var s,n,a,d,m,v,p,j,y,b,w,M,I,A,C,k,P,G,O;let{receptionist:Y,permissionOptions:U,receptionistPermissions:W,savingPermissions:Q,onPermissionChange:ee,onSavePermissions:es,onSaveInventoryStores:en,onDelete:ei,onApplyDiscountToOthers:et}=e,ea=(0,r.C)(e=>e.auth.diagnostic),[eo,er]=(0,t.useState)(Y.inventoryStores||[]),[el,ec]=(0,t.useState)(!1),[ed,{toggle:eu}]=(0,K.q)(!1);(0,t.useEffect)(()=>{er(Y.inventoryStores||[])},[Y.inventoryStores]);let[em,eh]=(0,t.useState)({maximumOutdoorDiscountPercent:null!==(j=null===(s=Y.permissions)||void 0===s?void 0:s.maximumOutdoorDiscountPercent)&&void 0!==j?j:null,maximumIndoorDiscountPercent:null!==(y=null===(n=Y.permissions)||void 0===n?void 0:n.maximumIndoorDiscountPercent)&&void 0!==y?y:null,canGiveOutdoorDiscount:null===(b=null===(a=Y.permissions)||void 0===a?void 0:a.canGiveOutdoorDiscount)||void 0===b||b,canGiveIndoorDiscount:null===(w=null===(d=Y.permissions)||void 0===d?void 0:d.canGiveIndoorDiscount)||void 0===w||w,canGiveOutdoorDiscountInAmount:null===(M=null===(m=Y.permissions)||void 0===m?void 0:m.canGiveOutdoorDiscountInAmount)||void 0===M||M,canGiveIndoorDiscountInAmount:null===(I=null===(v=Y.permissions)||void 0===v?void 0:v.canGiveIndoorDiscountInAmount)||void 0===I||I});(0,t.useEffect)(()=>{var e,s,n,i,t,a,o,r,l,c,d,u;eh({maximumOutdoorDiscountPercent:null!==(o=null===(e=Y.permissions)||void 0===e?void 0:e.maximumOutdoorDiscountPercent)&&void 0!==o?o:null,maximumIndoorDiscountPercent:null!==(r=null===(s=Y.permissions)||void 0===s?void 0:s.maximumIndoorDiscountPercent)&&void 0!==r?r:null,canGiveOutdoorDiscount:null===(l=null===(n=Y.permissions)||void 0===n?void 0:n.canGiveOutdoorDiscount)||void 0===l||l,canGiveIndoorDiscount:null===(c=null===(i=Y.permissions)||void 0===i?void 0:i.canGiveIndoorDiscount)||void 0===c||c,canGiveOutdoorDiscountInAmount:null===(d=null===(t=Y.permissions)||void 0===t?void 0:t.canGiveOutdoorDiscountInAmount)||void 0===d||d,canGiveIndoorDiscountInAmount:null===(u=null===(a=Y.permissions)||void 0===a?void 0:a.canGiveIndoorDiscountInAmount)||void 0===u||u})},[Y.permissions]);let ev=(W[Y.id]||[]).length,eg=!(null==Y?void 0:Y.permissions)||0===Object.keys(Y.permissions).length,ep=ev===$||eg,ex=async e=>{ec(!0);try{await en(e,eo)}finally{ec(!1)}};return(0,i.jsxs)(S.Z,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,style:{transition:"all 0.2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"var(--mantine-shadow-md)"}},children:[(0,i.jsxs)(c.Group,{justify:"space-between",align:"flex-start",mb:"md",children:[(0,i.jsxs)(c.Group,{children:[(0,i.jsx)(T.q,{color:"blue",radius:"md",size:"lg",variant:"gradient",gradient:{from:"blue",to:"cyan",deg:45},children:Y.email.charAt(0).toUpperCase()}),(0,i.jsxs)("div",{children:[(0,i.jsx)(g.Text,{fw:700,size:"md",children:Y.email}),(0,i.jsxs)(c.Group,{gap:"xs",mt:4,children:[(0,i.jsxs)(h.C,{size:"sm",variant:"dot",color:"gray",children:["ID: ",null===(p=Y.id)||void 0===p?void 0:p.slice(0,8)]}),ep?(0,i.jsx)(h.C,{size:"sm",variant:"gradient",gradient:{from:"teal",to:"lime",deg:45},leftSection:(0,i.jsx)(R.Z,{size:12}),children:"Full Access"}):(0,i.jsxs)(h.C,{size:"sm",variant:"light",color:ev>0?"green":"gray",leftSection:(0,i.jsx)(R.Z,{size:12}),children:[ev," Permission",1!==ev?"s":""]})]})]})]}),(0,i.jsx)(x.u,{label:"Delete receptionist",children:(0,i.jsx)(f.A,{color:"red",variant:"subtle",size:"lg",onClick:()=>ei(Y.id),children:(0,i.jsx)(H.Z,{size:18,stroke:1.5})})})]}),(0,i.jsx)(E.Divider,{mb:"md"}),(0,i.jsxs)(o.Stack,{gap:"md",children:[(0,i.jsxs)(c.Group,{gap:"xs",onClick:eu,style:{cursor:"pointer"},children:[(0,i.jsx)(u.k,{size:"sm",radius:"sm",variant:"light",color:"violet",children:(0,i.jsx)(R.Z,{size:14})}),(0,i.jsx)(g.Text,{size:"sm",fw:600,c:"dimmed",style:{flex:1},children:"Access Permissions"}),(0,i.jsx)(f.A,{variant:"subtle",size:"sm",color:"gray",children:ed?(0,i.jsx)(L.Z,{size:14}):(0,i.jsx)(X.Z,{size:14})})]}),(0,i.jsx)(N.U,{in:ed,children:(0,i.jsx)(l.X,{withBorder:!0,p:"xs",radius:"md",bg:"var(--mantine-color-gray-0)",children:(0,i.jsx)(D.M,{cols:2,spacing:"xs",children:U.map(e=>(0,i.jsx)(Z.X,{label:e.label,value:e.value,size:"xs",checked:(W[Y.id]||[]).includes(e.value),onChange:s=>{let n=W[Y.id]||[];s.currentTarget.checked?ee(Y.id,[...n,e.value]):ee(Y.id,n.filter(s=>s!==e.value))},disabled:e.disabled},e.value))})})}),(0,i.jsx)(E.Divider,{my:"xs",label:"Discount Settings",labelPosition:"center"}),(0,i.jsxs)(o.Stack,{gap:"md",children:[(0,i.jsxs)(l.X,{withBorder:!0,p:"sm",radius:"md",children:[(0,i.jsx)(g.Text,{size:"xs",fw:700,c:"dimmed",tt:"uppercase",mb:"xs",children:"Outdoor Discount"}),(0,i.jsxs)(D.M,{cols:2,spacing:"sm",children:[(0,i.jsx)(B.Y,{label:"Max Discount %",placeholder:"0-100",value:null!==(A=em.maximumOutdoorDiscountPercent)&&void 0!==A?A:void 0,onChange:e=>eh(s=>({...s,maximumOutdoorDiscountPercent:"number"==typeof e?e:null})),min:0,max:100,disabled:!(null==ea?void 0:ea.isOutdoorManagement),size:"xs",radius:"md"}),(0,i.jsxs)(o.Stack,{gap:4,mt:2,children:[(0,i.jsx)(F.r,{label:"Allow Discount",checked:null===(C=em.canGiveOutdoorDiscount)||void 0===C||C,onChange:e=>{var s,n;let i=null!==(n=null===(s=e.currentTarget)||void 0===s?void 0:s.checked)&&void 0!==n&&n;eh(e=>({...e,canGiveOutdoorDiscount:i}))},disabled:!(null==ea?void 0:ea.isOutdoorManagement),size:"xs"}),(0,i.jsx)(F.r,{label:"Allow Amount Discount",checked:null===(k=em.canGiveOutdoorDiscountInAmount)||void 0===k||k,onChange:e=>{var s,n;let i=null!==(n=null===(s=e.currentTarget)||void 0===s?void 0:s.checked)&&void 0!==n&&n;eh(e=>({...e,canGiveOutdoorDiscountInAmount:i}))},disabled:!(null==ea?void 0:ea.isOutdoorManagement),size:"xs"})]})]})]}),(0,i.jsxs)(l.X,{withBorder:!0,p:"sm",radius:"md",children:[(0,i.jsx)(g.Text,{size:"xs",fw:700,c:"dimmed",tt:"uppercase",mb:"xs",children:"Indoor Discount"}),(0,i.jsxs)(D.M,{cols:2,spacing:"sm",children:[(0,i.jsx)(B.Y,{label:"Max Discount %",placeholder:"0-100",value:null!==(P=em.maximumIndoorDiscountPercent)&&void 0!==P?P:void 0,onChange:e=>eh(s=>({...s,maximumIndoorDiscountPercent:"number"==typeof e?e:null})),min:0,max:100,disabled:!(null==ea?void 0:ea.isHospitalManagement),size:"xs",radius:"md"}),(0,i.jsxs)(o.Stack,{gap:4,mt:2,children:[(0,i.jsx)(F.r,{label:"Allow Discount",checked:null===(G=em.canGiveIndoorDiscount)||void 0===G||G,onChange:e=>{var s,n;let i=null!==(n=null===(s=e.currentTarget)||void 0===s?void 0:s.checked)&&void 0!==n&&n;eh(e=>({...e,canGiveIndoorDiscount:i}))},disabled:!(null==ea?void 0:ea.isHospitalManagement),size:"xs"}),(0,i.jsx)(F.r,{label:"Allow Amount Discount",checked:null===(O=em.canGiveIndoorDiscountInAmount)||void 0===O||O,onChange:e=>{var s,n;let i=null!==(n=null===(s=e.currentTarget)||void 0===s?void 0:s.checked)&&void 0!==n&&n;eh(e=>({...e,canGiveIndoorDiscountInAmount:i}))},disabled:!(null==ea?void 0:ea.isHospitalManagement),size:"xs"})]})]})]})]}),(0,i.jsxs)(c.Group,{justify:"space-between",mt:"xs",children:[(0,i.jsx)(z.Button,{leftSection:(0,i.jsx)(_.Z,{size:16}),onClick:()=>{J.qk.openConfirmModal({title:"Apply Discount Permissions to All Receptionists",children:(0,i.jsxs)(g.Text,{size:"sm",children:["This will apply the current discount permissions to"," ",(0,i.jsx)("strong",{children:"ALL other receptionists"})," in the system. Do you want to continue?"]}),labels:{confirm:"Apply to All",cancel:"Cancel"},confirmProps:{color:"blue"},onConfirm:()=>{null==et||et(Y.id,em)}})},size:"xs",variant:"subtle",color:"blue",children:"Apply to All"}),(0,i.jsx)(z.Button,{leftSection:(0,i.jsx)(q.Z,{size:16}),onClick:()=>es(Y.id,em),loading:Q[Y.id],size:"xs",variant:"light",radius:"md",children:"Save Permissions"})]}),(0,i.jsx)(E.Divider,{my:"xs"}),(0,i.jsx)(V.d,{userId:Y.id,userEmail:Y.email,selectedStores:eo,onStoresChange:er,onSave:ex,saving:el})]})]})},es=e=>{let{receptionists:s,permissionOptions:n,receptionistPermissions:t,savingPermissions:a,listLoading:o,onPermissionChange:r,onSavePermissions:l,onSaveInventoryStores:c,onApplyDiscountToOthers:u,onDelete:m}=e;return(0,i.jsxs)(d.Box,{pos:"relative",children:[(0,i.jsx)(M.f,{visible:o,zIndex:10,overlayProps:{radius:"lg",blur:2}}),(0,i.jsx)(D.M,{cols:{base:1,md:2},spacing:"lg",children:s.map(e=>(0,i.jsx)(ee,{receptionist:e,permissionOptions:n,receptionistPermissions:t,savingPermissions:a,onPermissionChange:r,onSavePermissions:l,onSaveInventoryStores:c,onApplyDiscountToOthers:u,onDelete:m},e.id))})]})},en=e=>{let{query:s,onClearSearch:n}=e;return(0,i.jsx)(S.Z,{shadow:"sm",padding:"xl",radius:"lg",withBorder:!0,children:(0,i.jsxs)(o.Stack,{align:"center",gap:"lg",py:"xl",children:[(0,i.jsx)(u.k,{size:80,radius:"xl",variant:"gradient",gradient:{from:"gray.2",to:"gray.4",deg:45},children:(0,i.jsx)(j.Z,{style:{width:(0,m.h)(40),height:(0,m.h)(40)},stroke:1.5,color:"var(--mantine-color-gray-6)"})}),(0,i.jsxs)(o.Stack,{align:"center",gap:"xs",children:[(0,i.jsx)(g.Text,{size:"xl",fw:700,c:"dimmed",children:s?"No receptionists found":"No receptionists yet"}),(0,i.jsx)(g.Text,{c:"dimmed",size:"md",ta:"center",maw:400,children:s?"Try adjusting your search criteria or clear the filter to see all receptionists.":"Get started by adding your first receptionist using the form above."})]}),s&&(0,i.jsx)(z.Button,{variant:"light",onClick:n,leftSection:(0,i.jsx)(b.Z,{size:16}),radius:"md",children:"Clear Search"})]})})};var ei=n(22115),et=n(19604),ea=n(75001),eo=n(42227),er=n(72940),el=n(6780),ec=n(67732);let ed=async(e,s)=>{try{let n=await el.default.put("".concat("http://sasthotech.local:5000/api/v1","/admin/receptionist/permissions/").concat(e),s,{...er.FD,...er.Hn});return{success:!0,data:n.data.data}}catch(e){if(e instanceof ec.d7){var n;return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data.message}}return{success:!1,data:"An error occurred"}}},eu=()=>{let[e,s]=(0,t.useState)([]),[n,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(!1),[r,l]=(0,t.useState)({}),[c,d]=(0,t.useState)({}),u=(0,t.useCallback)(async()=>{try{o(!0);let{success:e,data:n}=await (0,ea.$)();if(e){let e=(null==n?void 0:n.items)||[];s(e);let i={};e.forEach(e=>{let s=Q(null==e?void 0:e.permissions,Y);i[e.id]=s}),l(i)}}catch(e){ei.N9.show({title:"Error",message:"Failed to load receptionists",color:"red"})}finally{o(!1)}},[]),m=(0,t.useCallback)(async e=>{i(!0);try{let{success:n,data:i}=await (0,et.u)(e);if(n)return ei.N9.show({title:"Success",message:"Receptionist added successfully",color:"green"}),s(e=>[...e,i]),l(e=>({...e,[i.id]:[]})),!0;return ei.N9.show({title:"Error",message:i||"Failed to add receptionist",color:"red"}),!1}catch(e){return ei.N9.show({title:"Error",message:"An error occurred",color:"red"}),!1}finally{i(!1)}},[]),h=(0,t.useCallback)(async e=>{try{let{success:n}=await (0,eo.X)(e);n?(ei.N9.show({title:"Success",message:"Receptionist deleted successfully",color:"green"}),s(s=>s.filter(s=>s.id!==e)),l(s=>{let n={...s};return delete n[e],n})):ei.N9.show({title:"Error",message:"Failed to delete receptionist",color:"red"})}catch(e){ei.N9.show({title:"Error",message:"An error occurred",color:"red"})}},[]),v=(0,t.useCallback)(async(e,s)=>{try{d(s=>({...s,[e]:!0}));let n=r[e]||[],i=W(n),{success:t}=await ed(e,{...i,...s});t?(ei.N9.show({title:"Success",message:"Permissions updated successfully",color:"green"}),await u()):ei.N9.show({title:"Error",message:"Failed to update permissions",color:"red"})}catch(e){ei.N9.show({title:"Error",message:"An error occurred while updating permissions",color:"red"})}finally{d(s=>({...s,[e]:!1}))}},[r,u]),g=(0,t.useCallback)(async(s,n)=>{let i=e.filter(e=>e.id!==s);if(0===i.length){ei.N9.show({title:"Info",message:"No other receptionists found",color:"blue"});return}try{let e=i.map(e=>ed(e.id,{...W(r[e.id]||[]),...n})),s=(await Promise.all(e)).filter(e=>e.success).length;s>0?(ei.N9.show({title:"Success",message:"Discount permissions applied to ".concat(s," receptionist(s)"),color:"green"}),await u()):ei.N9.show({title:"Error",message:"Failed to apply discount permissions to other receptionists",color:"red"})}catch(e){ei.N9.show({title:"Error",message:"An error occurred while applying discount permissions",color:"red"})}},[e,r,u]);return{receptionists:e,loading:n,listLoading:a,receptionistPermissions:r,savingPermissions:c,setReceptionistPermissions:l,loadReceptionists:u,handleAddReceptionist:m,handleDeleteReceptionist:h,handleSavePermissions:v,handleApplyDiscountToOthers:g}},em=async e=>{try{let s=await el.default.post("".concat("http://sasthotech.local:5000/api/v1","/admin/receptionist/setInventoryStores"),e,{...er.FD,...er.Hn});return{success:!0,data:s.data.data}}catch(e){if(e instanceof ec.d7){var s;return{success:!1,data:null===(s=e.response)||void 0===s?void 0:s.data.message}}return{success:!1,data:"An error occurred"}}};var eh=()=>{let e=(0,r.C)(e=>e.auth.diagnostic),[s,n]=(0,t.useState)(""),{receptionists:l,loading:c,listLoading:d,receptionistPermissions:u,savingPermissions:m,setReceptionistPermissions:h,loadReceptionists:v,handleAddReceptionist:g,handleDeleteReceptionist:p,handleSavePermissions:x,handleApplyDiscountToOthers:f}=eu();(0,t.useEffect)(()=>{v()},[v]);let j=(0,t.useMemo)(()=>U(e),[e]),y=(0,t.useMemo)(()=>{let e=s.trim().toLowerCase();return e?l.filter(s=>{var n;return null===(n=s.email)||void 0===n?void 0:n.toLowerCase().includes(e)}):l},[l,s]),b=async e=>{await g(e)},S=async(e,s)=>{try{let{success:n,data:i}=await em({userId:e,storeIds:s});n?(ei.N9.show({title:"Success",message:"Inventory access updated successfully",color:"green"}),await v()):ei.N9.show({title:"Error",message:i||"Failed to update inventory access",color:"red"})}catch(e){ei.N9.show({title:"Error",message:"An error occurred while updating inventory access",color:"red"})}};return(0,i.jsx)(a.Container,{size:"xl",py:"xl",children:(0,i.jsxs)(o.Stack,{gap:"xl",children:[(0,i.jsx)(w,{receptionistsCount:l.length,query:s,onQueryChange:n,onRefresh:v,refreshLoading:d}),(0,i.jsx)(O,{loading:c,onSubmit:b}),y.length>0&&(0,i.jsx)(es,{receptionists:y,permissionOptions:j,receptionistPermissions:u,savingPermissions:m,listLoading:d,onPermissionChange:(e,s)=>h(n=>({...n,[e]:s})),onSavePermissions:x,onSaveInventoryStores:S,onApplyDiscountToOthers:f,onDelete:p}),0===y.length&&!d&&(0,i.jsx)(en,{query:s,onClearSearch:()=>n("")})]})})}},19604:function(e,s,n){"use strict";n.d(s,{u:function(){return o}});var i=n(72940),t=n(6780),a=n(67732);let o=async(e,s)=>{try{let n=await t.default.post("".concat("http://sasthotech.local:5000/api/v1","/admin/").concat(null!=s?s:"receptionist"),e,{...i.FD,...i.Hn});return{success:!0,data:n.data.data}}catch(e){if(e instanceof a.d7){var n;return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data.message}}return{success:!1,data:"An error occurred"}}}},42227:function(e,s,n){"use strict";n.d(s,{X:function(){return o}});var i=n(72940),t=n(6780),a=n(67732);let o=async e=>{try{let s=await t.default.delete("".concat("http://sasthotech.local:5000/api/v1","/admin/receptionist/").concat(e),i.FD);return{success:!0,data:s.data.data}}catch(e){if(e instanceof a.d7){var s;return{success:!1,data:null===(s=e.response)||void 0===s?void 0:s.data.message}}return{success:!1,data:"An error occurred"}}}},75001:function(e,s,n){"use strict";n.d(s,{$:function(){return o}});var i=n(72940),t=n(6780),a=n(67732);let o=async e=>{try{let s=await t.default.get("".concat("http://sasthotech.local:5000/api/v1","/admin/").concat(null!=e?e:"receptionist"),i.FD);return{success:!0,data:s.data.data}}catch(e){if(e instanceof a.d7){var s;return{success:!1,data:null===(s=e.response)||void 0===s?void 0:s.data.message}}return{success:!1,data:"An error occurred"}}}}},function(e){e.O(0,[1601,3069,6945,3852,1656,9722,4670,9258,9533,966,1166,6029,6306,4927,9645,4347,286,6121,1559,794,9175,7402,1744],function(){return e(e.s=40585)}),_N_E=e.O()}]);