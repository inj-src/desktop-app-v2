(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6245],{6311:function(e,t,n){Promise.resolve().then(n.bind(n,29905))},12856:function(e,t,n){"use strict";n.d(t,{L:function(){return m}});var i=n(68328),r=n(10713),a=n(31100),o=n(96871),l=n(91793),s=n(76283),d=n(23583),u=n(90660),c=n.n(u),y=n(14193);let f=y.Ry({name:y.Z_().required(l.B)}),m=e=>{var t;let{dailyExpenseCategory:n,onValue:l,onQueryStarted:u}=e,[y,{isLoading:m}]=(0,o.x3)(),[h,{isLoading:p}]=(0,o.Sq)();return(0,i.jsx)(d.J9,{validationSchema:f,initialValues:{name:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:""},onSubmit:async(e,t)=>{let{setSubmitting:i,resetForm:r}=t;if(!m&&!p)try{null==u||u(e);let{data:t}=await ((null==n?void 0:n.id)?h({id:n.id,...e}).unwrap():y(e).unwrap());null==l||l(t),r()}catch(e){console.error(e),c().fire("Failed","An unknown error occurred!","error")}finally{i(!1)}},children:(0,i.jsxs)(d.l0,{children:[(0,i.jsx)(r.Z,{name:"name",labelText:"DailyExpenseCategory Name",placeholder:"Type name",withAsterisk:!0,mt:0,"data-autofocus":!0,mb:"md"}),(0,i.jsx)(a.M,{size:"md",radius:"md",leftSection:(0,i.jsx)(s.Z,{}),children:"Save"})]})})}},29905:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var i=n(68328),r=n(7203),a=n(96871),o=n(54632),l=n(22614),s=n(3741),d=n(32451),u=n(22041),c=n(41224),y=n(68242),f=n(31204),m=n(89043),h=n(22975),p=n(46557),g=n(44019),x=n(12697),v=n(94131),C=n(4505),j=n(90660),w=n.n(j),b=n(12856);function T(){var e;let[t,{open:n,close:j}]=(0,p.q)(!1),[T,E]=(0,C.useState)(),{data:D,isLoading:I,isSuccess:A}=(0,a.Uz)(),[S]=(0,a.aI)();return(0,i.jsxs)(d.Box,{className:"p-3 bg-light p-md-5",children:[(0,i.jsxs)(c.Stack,{gap:"md",children:[(0,i.jsx)(l.Group,{children:(0,i.jsx)(y.Title,{children:"Daily Income Categories"})}),(0,i.jsx)(l.Group,{align:"right",children:(0,i.jsx)(f.Button,{size:"md",radius:"md",leftSection:(0,i.jsx)(v.Z,{}),onClick:()=>{E(void 0),n()},children:"Add New Category"})}),(0,i.jsx)(m.X,{bg:"white",p:"lg",radius:"md",shadow:"md",children:I?(0,i.jsx)(r.Z,{}):A&&(null==D?void 0:null===(e=D.data)||void 0===e?void 0:e.length)>0?(0,i.jsx)(o.i.ScrollContainer,{minWidth:767,children:(0,i.jsxs)(o.i,{layout:"fixed",children:[(0,i.jsx)(o.i.Thead,{children:(0,i.jsx)(o.i.Tr,{children:["Category Name","Actions"].map((e,t)=>(0,i.jsx)(o.i.Th,{children:e},"".concat(e).concat(t)))})}),(0,i.jsx)(o.i.Tbody,{children:D.data.map((e,t)=>(0,i.jsxs)(o.i.Tr,{bg:e.loading?"yellow.1":void 0,children:[(0,i.jsx)(o.i.Td,{children:e.name}),(0,i.jsx)(o.i.Td,{children:(0,i.jsxs)(l.Group,{children:[(0,i.jsx)(s.A,{variant:"transparent",onClick:()=>{E(e),n()},loading:e.loading,children:(0,i.jsx)(g.Z,{})}),(0,i.jsx)(s.A,{variant:"transparent",onClick:async()=>{if((await w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#fa5252",confirmButtonText:"Yes, delete it!",focusCancel:!0})).isConfirmed)try{await S(e.id).unwrap()}catch(e){console.error(e),w().fire("Error","Error","error")}},loading:e.loading,children:(0,i.jsx)(x.Z,{})})]})})]},e.id))})]})}):(0,i.jsx)(d.Box,{ta:"center",py:"xl",children:(0,i.jsx)(u.Text,{size:"lg",c:"dimmed",children:"No daily expense categories found"})})})]}),(0,i.jsx)(h.u,{opened:t,onClose:j,title:(T?"Edit":"Add New")+" Income Category",children:(0,i.jsx)(b.L,{dailyExpenseCategory:T,onQueryStarted:j},null==T?void 0:T.id)})]})}},7203:function(e,t,n){"use strict";var i=n(68328),r=n(14587);n(4505),t.Z=()=>(0,i.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:600},children:(0,i.jsx)(r.Loader,{color:"teal",variant:"dots"})})},10713:function(e,t,n){"use strict";n.d(t,{E:function(){return y}});var i=n(68328),r=n(30331),a=n(30293),o=n(55911),l=n(87513),s=n(58689),d=n(73626),u=n(23583),c=n(4505);let y={size:"md",variant:"default",radius:"md"},f=(0,a.F)((0,c.forwardRef)(function(e,t){let{labelText:n,labelTextColor:a,size:f=y.size,variant:m=y.variant,radius:h=y.radius,mt:p="md",withAsterisk:g=!1,onChange:x,onBlur:v,onClick:C,readonly:j,styles:w,value:b,...T}=e,E=Object.assign({label:{color:null!=a?a:"black"}},w),[{value:D,onChange:I,onBlur:A,...S},k,B]=(0,u.U$)(T.name),N=(0,c.useRef)(null),Q=(0,s.Yx)(t,N),q=(0,d.y)(()=>{if(N.current){let e;let{type:t,value:n}=N.current;B.setValue("number"===t?isNaN(e=parseFloat(n))?"":e:n)}},200);return(0,c.useEffect)(()=>{N.current&&N.current.value!==D&&!(document.hasFocus()&&document.activeElement===N.current)&&(N.current.value=null!=D?D:"")},[D]),(0,i.jsx)(o.TextInput,{label:n,readOnly:j,ref:Q,error:k.touched&&k.error,styles:E,defaultValue:D,onChange:e=>{q()},onBlur:e=>{null==v||v(e),A(e)},onClick:e=>{"number"===T.type&&"0"===e.currentTarget.value&&e.currentTarget.select(),null==C||C(e)},onWheel:r.P,rightSectionPointerEvents:"all",rightSection:(0,i.jsx)(l.P,{"aria-label":"Clear input",onClick:()=>{B.setValue(""),N.current&&(N.current.value="")},style:{display:D?void 0:"none"}}),...S,size:f,variant:m,radius:h,mt:p,withAsterisk:g,...T})}));t.Z=f},31100:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var i=n(68328),r=n(31204),a=n(23583);function o(e){let{loading:t,disabled:n,...o}=e,{isSubmitting:l}=(0,a.u6)();return(0,i.jsx)(r.Button,{type:"submit",loading:l||t,disabled:l||n,...o})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return r},Hn:function(){return i},y4:function(){return a}});let i={headers:{"Content-Type":"application/json"}},r={withCredentials:!0},a={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var i=n(49854),r=n(68240),a=n(94183),o=n(28317);let l=(0,r.LC)({baseQuery:(0,a.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let r="string"==typeof e?e:e.url;return r.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,o.t8)(r,await n.clone().json().catch(()=>null),(0,i.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(n,(0,i.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},96871:function(e,t,n){"use strict";n.d(t,{Sq:function(){return s},Uz:function(){return o},aI:function(){return d},x3:function(){return l}});var i=n(78101),r=n(40085);let a=i.g.injectEndpoints({endpoints:e=>({getDailyIncomeCategories:e.query({query:()=>({url:"/dailyExtraIncomeCategory"})}),createDailyIncomeCategory:e.mutation({query:e=>({url:"/dailyExtraIncomeCategory",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,o=(0,r.x0)(),l=n(a.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{t.data.push({id:o,...e,loading:!0})}));try{let{data:e}=await i;n(a.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{let n=t.data.findIndex(e=>e.id===o);n>=0&&(t.data[n]=e.data)}))}catch(e){l.undo()}}}),updateDailyIncomeCategory:e.mutation({query:e=>{let{id:t,name:n}=e;return{url:"/dailyExtraIncomeCategory/".concat(t),method:"PATCH",body:{name:n}}},async onQueryStarted(e,t){let{id:n,name:i}=e,{dispatch:r,queryFulfilled:o}=t,l=r(a.util.updateQueryData("getDailyIncomeCategories",void 0,e=>{let t=e.data.find(e=>e.id===n);t&&(void 0!==i&&(t.name=i),t.loading=!0)}));try{await o,r(a.util.updateQueryData("getDailyIncomeCategories",void 0,e=>{let t=e.data.find(e=>e.id===n);t&&delete t.loading}))}catch(e){l.undo()}}}),deleteDailyIncomeCategory:e.mutation({query:e=>({url:"/dailyExtraIncomeCategory/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,r=n(a.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{let n=t.data.find(t=>t.id===e);n&&(n.loading=!0)}));try{await i,n(a.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{let n=t.data.findIndex(t=>t.id===e);n>=0&&t.data.splice(n,1)}))}catch(e){r.undo()}}})})}),{useGetDailyIncomeCategoriesQuery:o,useCreateDailyIncomeCategoryMutation:l,useUpdateDailyIncomeCategoryMutation:s,useDeleteDailyIncomeCategoryMutation:d}=a},49854:function(e,t,n){"use strict";let i;n.d(t,{d:function(){return d},x:function(){return s}});var r=n(72940),a=n(6780),o=n(67732),l=n(28317);function s(){return i||(i=(0,l.MT)("cached-responses-store","cached-responses")),i}async function d(e,t){try{let n=await a.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...r.FD});return await (0,l.t8)(e,n.data,s()),n.data}catch(t){if(t instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(t.code)){let t=await (0,l.U2)(e,s());if(t)return t}throw t instanceof o.d7&&t.response&&401===t.response.status||console.error(t),t}}},30331:function(e,t,n){"use strict";function i(e){e.currentTarget.blur(),e.stopPropagation(),setTimeout(()=>{var t;null==e||null===(t=e.currentTarget)||void 0===t||t.focus()},0)}n.d(t,{P:function(){return i}})},91793:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});let i=e=>{let{label:t,path:n}=e;return"".concat(null!=t?t:n.split(".").map(e=>e?e[0].toUpperCase()+e.slice(1):"").join(" ")," is required")}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,966,12,7538,3583,4193,6334,9175,7402,1744],function(){return e(e.s=6311)}),_N_E=e.O()}]);