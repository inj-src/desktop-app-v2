(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7909],{29476:function(e,t,a){Promise.resolve().then(a.bind(a,28259))},28259:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var n=a(68328),r=a(12856),i=a(80805),o=a(96871),l=a(32451),d=a(68242),u=a(41224),s=a(13822),c=a(22041),y=a(87967),m=a(4923),p=a(55911),g=a(29259),f=a(22975),h=a(46373),x=a(22614),I=a(31204),v=a(47720),D=a(46557),E=a(35288),b=a(9326),C=a(4505),j=()=>{let[e,t]=(0,C.useState)("dailyIncome"),[a,{isLoading:j}]=(0,i.Dn)(),{data:w,isLoading:T,error:S}=(0,o.Uz)(),[Q,{open:A,close:q}]=(0,D.q)(!1),[P,F]=(0,C.useState)(),k=(0,v.c)({initialValues:{receivedFrom:"",amount:0,description:"",dailyIncomeCategoryId:""},validate:{receivedFrom:e=>0===e.trim().length?"Received from is required":null,amount:e=>e<=0?"Amount must be greater than 0":null,dailyIncomeCategoryId:e=>0===e.trim().length?"Income category is required":null}}),B=async e=>{try{await a(e).unwrap(),k.reset()}catch(e){console.error("Failed to add income:",e)}};return(0,n.jsxs)(l.Box,{p:"md",children:[(0,n.jsx)(d.Title,{order:1,mb:"lg",children:"Add Income"}),"dailyIncome"===e&&(0,n.jsx)("form",{onSubmit:k.onSubmit(B),children:(0,n.jsxs)(u.Stack,{gap:"md",pos:"relative",children:[(0,n.jsx)(s.f,{visible:j}),(0,n.jsxs)(l.Box,{children:[(0,n.jsx)(c.Text,{mb:"xs",children:"Income Category"}),(0,n.jsx)(y.P,{placeholder:"Select category",data:(null==w?void 0:w.data.map(e=>({value:e.id,label:e.name})))||[],searchable:!0,clearable:!0,nothingFoundMessage:(0,n.jsx)(m.k,{onClick:()=>{F(void 0),A()},bg:"#F1F3F5",p:6,className:"w-100 text-center",children:"Add new Expense Category"}),disabled:T,...k.getInputProps("dailyIncomeCategoryId")})]}),(0,n.jsx)(p.TextInput,{label:"Description",placeholder:"Enter description",...k.getInputProps("description")}),(0,n.jsx)(p.TextInput,{label:"Received From",placeholder:"Enter person/organization name",required:!0,...k.getInputProps("receivedFrom")}),(0,n.jsx)(g.Y,{label:"Amount",placeholder:"0",required:!0,min:0,leftSection:(0,n.jsx)(E.Z,{size:16}),...k.getInputProps("amount")}),(0,n.jsx)(f.u,{opened:Q,onClose:q,title:(P?"Edit":"Add New")+" Income Category",children:(0,n.jsx)(r.L,{dailyExpenseCategory:P,onQueryStarted:q},null==P?void 0:P.id)}),S&&(0,n.jsx)(h.b,{icon:(0,n.jsx)(b.Z,{size:16}),title:"Error",color:"red",children:"Failed to load income categories. Please try again."}),(0,n.jsx)(x.Group,{mt:"xl",children:(0,n.jsx)(I.Button,{type:"submit",loading:j,size:"md",children:"Add Income"})})]})}),"monthlyIncome"===e&&(0,n.jsx)(l.Box,{children:(0,n.jsx)(c.Text,{ta:"center",color:"dimmed",children:"Monthly income feature is not yet implemented."})})]})},w=()=>(0,n.jsx)(j,{})},12856:function(e,t,a){"use strict";a.d(t,{L:function(){return p}});var n=a(68328),r=a(10713),i=a(31100),o=a(96871),l=a(91793),d=a(76283),u=a(23583),s=a(90660),c=a.n(s),y=a(14193);let m=y.Ry({name:y.Z_().required(l.B)}),p=e=>{var t;let{dailyExpenseCategory:a,onValue:l,onQueryStarted:s}=e,[y,{isLoading:p}]=(0,o.x3)(),[g,{isLoading:f}]=(0,o.Sq)();return(0,n.jsx)(u.J9,{validationSchema:m,initialValues:{name:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:""},onSubmit:async(e,t)=>{let{setSubmitting:n,resetForm:r}=t;if(!p&&!f)try{null==s||s(e);let{data:t}=await ((null==a?void 0:a.id)?g({id:a.id,...e}).unwrap():y(e).unwrap());null==l||l(t),r()}catch(e){console.error(e),c().fire("Failed","An unknown error occurred!","error")}finally{n(!1)}},children:(0,n.jsxs)(u.l0,{children:[(0,n.jsx)(r.Z,{name:"name",labelText:"DailyExpenseCategory Name",placeholder:"Type name",withAsterisk:!0,mt:0,"data-autofocus":!0,mb:"md"}),(0,n.jsx)(i.M,{size:"md",radius:"md",leftSection:(0,n.jsx)(d.Z,{}),children:"Save"})]})})}},10713:function(e,t,a){"use strict";a.d(t,{E:function(){return y}});var n=a(68328),r=a(30331),i=a(30293),o=a(55911),l=a(87513),d=a(58689),u=a(73626),s=a(23583),c=a(4505);let y={size:"md",variant:"default",radius:"md"},m=(0,i.F)((0,c.forwardRef)(function(e,t){let{labelText:a,labelTextColor:i,size:m=y.size,variant:p=y.variant,radius:g=y.radius,mt:f="md",withAsterisk:h=!1,onChange:x,onBlur:I,onClick:v,readonly:D,styles:E,value:b,...C}=e,j=Object.assign({label:{color:null!=i?i:"black"}},E),[{value:w,onChange:T,onBlur:S,...Q},A,q]=(0,s.U$)(C.name),P=(0,c.useRef)(null),F=(0,d.Yx)(t,P),k=(0,u.y)(()=>{if(P.current){let e;let{type:t,value:a}=P.current;q.setValue("number"===t?isNaN(e=parseFloat(a))?"":e:a)}},200);return(0,c.useEffect)(()=>{P.current&&P.current.value!==w&&!(document.hasFocus()&&document.activeElement===P.current)&&(P.current.value=null!=w?w:"")},[w]),(0,n.jsx)(o.TextInput,{label:a,readOnly:D,ref:F,error:A.touched&&A.error,styles:j,defaultValue:w,onChange:e=>{k()},onBlur:e=>{null==I||I(e),S(e)},onClick:e=>{"number"===C.type&&"0"===e.currentTarget.value&&e.currentTarget.select(),null==v||v(e)},onWheel:r.P,rightSectionPointerEvents:"all",rightSection:(0,n.jsx)(l.P,{"aria-label":"Clear input",onClick:()=>{q.setValue(""),P.current&&(P.current.value="")},style:{display:w?void 0:"none"}}),...Q,size:m,variant:p,radius:g,mt:f,withAsterisk:h,...C})}));t.Z=m},31100:function(e,t,a){"use strict";a.d(t,{M:function(){return o}});var n=a(68328),r=a(31204),i=a(23583);function o(e){let{loading:t,disabled:a,...o}=e,{isSubmitting:l}=(0,i.u6)();return(0,n.jsx)(r.Button,{type:"submit",loading:l||t,disabled:l||a,...o})}},72940:function(e,t,a){"use strict";a.d(t,{FD:function(){return r},Hn:function(){return n},y4:function(){return i}});let n={headers:{"Content-Type":"application/json"}},r={withCredentials:!0},i={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78101:function(e,t,a){"use strict";a.d(t,{g:function(){return l}});var n=a(49854),r=a(68240),i=a(94183),o=a(28317);let l=(0,r.LC)({baseQuery:(0,i.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async a=>{let r="string"==typeof e?e:e.url;return r.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,o.t8)(r,await a.clone().json().catch(()=>null),(0,n.x)()),a}).catch(async a=>{if(a instanceof TypeError){let a="string"==typeof e?e:e.url;if(!a.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(a,(0,n.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw a})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},80805:function(e,t,a){"use strict";a.d(t,{Dn:function(){return l},EP:function(){return u},Qd:function(){return d},aW:function(){return o}});var n=a(78101),r=a(40085);let i=n.g.injectEndpoints({endpoints:e=>({getDailyExtraIncomes:e.query({query:e=>{let{from:t,to:a,userId:n}=e,r=new URLSearchParams;return t&&r.append("from",t),a&&r.append("to",a),n&&r.append("userId",n),console.log("params",r.toString()),{url:"/dailyExtraIncome?".concat(r.toString())}}}),createDailyExtraIncome:e.mutation({query:e=>({url:"/dailyExtraIncome",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,o=(0,r.x0)(),l=new Date().toISOString(),d=a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{t.data.push({id:o,...e,createdAt:l,updatedAt:l,loading:!0})})),u=a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{t.data.push({id:o,...e,createdAt:l,updatedAt:l,loading:!0})}));try{let{data:e}=await n;a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{let a=t.data.findIndex(e=>e.id===o);a>=0&&(t.data[a]=e.data)})),a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{let a=t.data.findIndex(e=>e.id===o);a>=0&&(t.data[a]=e.data)}))}catch(e){d.undo(),u.undo()}}}),updateDailyExtraIncome:e.mutation({query:e=>{let{id:t,...a}=e;return{url:"/dailyExtraIncome/".concat(t),method:"PATCH",body:a}},async onQueryStarted(e,t){let{id:a,...n}=e,{dispatch:r,queryFulfilled:o}=t,l=r(i.util.updateQueryData("getDailyExtraIncomes",{},e=>{let t=e.data.find(e=>e.id===a);t&&(Object.assign(t,n),t.loading=!0)})),d=r(i.util.updateQueryData("getDailyExtraIncomes",{},e=>{let t=e.data.find(e=>e.id===a);t&&(Object.assign(t,n),t.loading=!0)}));try{await o,r(i.util.updateQueryData("getDailyExtraIncomes",{},e=>{let t=e.data.find(e=>e.id===a);t&&delete t.loading})),r(i.util.updateQueryData("getDailyExtraIncomes",{},e=>{let t=e.data.find(e=>e.id===a);t&&delete t.loading}))}catch(e){l.undo(),d.undo()}}}),deleteDailyExtraIncome:e.mutation({query:e=>({url:"/dailyExtraIncome/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,r=a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{let a=t.data.find(t=>t.id===e);a&&(a.loading=!0)})),o=a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{let a=t.data.find(t=>t.id===e);a&&(a.loading=!0)}));try{await n,a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{let a=t.data.findIndex(t=>t.id===e);a>=0&&t.data.splice(a,1)})),a(i.util.updateQueryData("getDailyExtraIncomes",{},t=>{let a=t.data.findIndex(t=>t.id===e);a>=0&&t.data.splice(a,1)}))}catch(e){r.undo(),o.undo()}}})})}),{useGetDailyExtraIncomesQuery:o,useCreateDailyExtraIncomeMutation:l,useUpdateDailyExtraIncomeMutation:d,useDeleteDailyExtraIncomeMutation:u}=i},96871:function(e,t,a){"use strict";a.d(t,{Sq:function(){return d},Uz:function(){return o},aI:function(){return u},x3:function(){return l}});var n=a(78101),r=a(40085);let i=n.g.injectEndpoints({endpoints:e=>({getDailyIncomeCategories:e.query({query:()=>({url:"/dailyExtraIncomeCategory"})}),createDailyIncomeCategory:e.mutation({query:e=>({url:"/dailyExtraIncomeCategory",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,o=(0,r.x0)(),l=a(i.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{t.data.push({id:o,...e,loading:!0})}));try{let{data:e}=await n;a(i.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{let a=t.data.findIndex(e=>e.id===o);a>=0&&(t.data[a]=e.data)}))}catch(e){l.undo()}}}),updateDailyIncomeCategory:e.mutation({query:e=>{let{id:t,name:a}=e;return{url:"/dailyExtraIncomeCategory/".concat(t),method:"PATCH",body:{name:a}}},async onQueryStarted(e,t){let{id:a,name:n}=e,{dispatch:r,queryFulfilled:o}=t,l=r(i.util.updateQueryData("getDailyIncomeCategories",void 0,e=>{let t=e.data.find(e=>e.id===a);t&&(void 0!==n&&(t.name=n),t.loading=!0)}));try{await o,r(i.util.updateQueryData("getDailyIncomeCategories",void 0,e=>{let t=e.data.find(e=>e.id===a);t&&delete t.loading}))}catch(e){l.undo()}}}),deleteDailyIncomeCategory:e.mutation({query:e=>({url:"/dailyExtraIncomeCategory/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:a,queryFulfilled:n}=t,r=a(i.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{let a=t.data.find(t=>t.id===e);a&&(a.loading=!0)}));try{await n,a(i.util.updateQueryData("getDailyIncomeCategories",void 0,t=>{let a=t.data.findIndex(t=>t.id===e);a>=0&&t.data.splice(a,1)}))}catch(e){r.undo()}}})})}),{useGetDailyIncomeCategoriesQuery:o,useCreateDailyIncomeCategoryMutation:l,useUpdateDailyIncomeCategoryMutation:d,useDeleteDailyIncomeCategoryMutation:u}=i},49854:function(e,t,a){"use strict";let n;a.d(t,{d:function(){return u},x:function(){return d}});var r=a(72940),i=a(6780),o=a(67732),l=a(28317);function d(){return n||(n=(0,l.MT)("cached-responses-store","cached-responses")),n}async function u(e,t){try{let a=await i.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...r.FD});return await (0,l.t8)(e,a.data,d()),a.data}catch(t){if(t instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(t.code)){let t=await (0,l.U2)(e,d());if(t)return t}throw t instanceof o.d7&&t.response&&401===t.response.status||console.error(t),t}}},30331:function(e,t,a){"use strict";function n(e){e.currentTarget.blur(),e.stopPropagation(),setTimeout(()=>{var t;null==e||null===(t=e.currentTarget)||void 0===t||t.focus()},0)}a.d(t,{P:function(){return n}})},91793:function(e,t,a){"use strict";a.d(t,{B:function(){return n}});let n=e=>{let{label:t,path:a}=e;return"".concat(null!=t?t:a.split(".").map(e=>e?e[0].toUpperCase()+e.slice(1):"").join(" ")," is required")}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6306,3583,4193,9645,7735,4929,9175,7402,1744],function(){return e(e.s=29476)}),_N_E=e.O()}]);