(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5287],{9e3:function(e,r,i){Promise.resolve().then(i.bind(i,29194))},29194:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return D}});var s=i(68328),t=i(34473),a=i(41224),l=i(90660),n=i.n(l),d=i(4505),o=i(22789),c=i(89043),u=i(22614),m=i(32451),h=i(58812),x=i(53729),g=i(11114),v=i(68242),j=i(22041),f=i(55911),p=i(76029),w=i(3741),b=i(69861),z=i(86083),C=i(50430);let y=e=>{let{managersCount:r,query:i,onQueryChange:t,onRefresh:a,refreshLoading:l}=e;return(0,s.jsxs)(c.X,{p:"xl",radius:"lg",withBorder:!0,bg:"var(--mantine-color-body)",children:[(0,s.jsxs)(u.Group,{justify:"space-between",align:"flex-end",children:[(0,s.jsxs)(m.Box,{children:[(0,s.jsxs)(u.Group,{align:"center",gap:"sm",mb:"xs",children:[(0,s.jsx)(h.k,{size:42,radius:"md",variant:"gradient",gradient:{from:"violet",to:"grape",deg:45},children:(0,s.jsx)(b.Z,{style:{width:(0,x.h)(24),height:(0,x.h)(24)},stroke:1.5})}),(0,s.jsx)(g.C,{variant:"gradient",gradient:{from:"violet",to:"grape"},size:"lg",radius:"sm",children:"Admin Portal"})]}),(0,s.jsx)(v.Title,{order:1,fw:900,style:{fontSize:(0,x.h)(32),letterSpacing:-1},children:"Serial Manager"}),(0,s.jsx)(j.Text,{c:"dimmed",size:"lg",mt:4,maw:600,children:"Create and manage serial manager accounts and their assigned chambers."})]}),(0,s.jsx)(u.Group,{align:"flex-end",gap:"md",children:(0,s.jsxs)(m.Box,{children:[(0,s.jsx)(j.Text,{size:"xs",fw:700,c:"dimmed",mb:4,tt:"uppercase",children:"Total Managers"}),(0,s.jsxs)(g.C,{size:"xl",variant:"light",color:"violet",radius:"md",leftSection:(0,s.jsx)(b.Z,{size:16}),styles:{root:{height:42}},children:[r," Manager",1!==r?"s":""]})]})})]}),(0,s.jsxs)(u.Group,{mt:"xl",justify:"space-between",children:[(0,s.jsx)(f.TextInput,{placeholder:"Search by doctor name...",leftSection:(0,s.jsx)(z.Z,{size:16,stroke:1.5}),value:i,onChange:e=>t(e.currentTarget.value),size:"md",radius:"md",style:{width:320}}),(0,s.jsx)(p.u,{label:"Refresh list",withArrow:!0,children:(0,s.jsx)(w.A,{size:42,variant:"default",radius:"md",onClick:a,loading:l,children:(0,s.jsx)(C.Z,{size:20,stroke:1.5})})})]})]})};var S=i(48604),k=i(13822),A=i(49905),Z=i(13367),T=i(31204),B=i(34499),I=i(58895),P=i(8372),L=i(47720);let M=e=>{let{loading:r,onSubmit:i}=e,t=(0,L.c)({initialValues:{email:"",password:""},validate:{email:e=>/^(([^<>()\[\]\\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?null:"Invalid email",password:e=>e.length<6?"Password must be at least 6 characters":e.length>127?"Password is too long":null}});return(0,s.jsxs)(S.Z,{shadow:"sm",padding:"xl",radius:"lg",withBorder:!0,children:[(0,s.jsx)(k.f,{visible:r,zIndex:10,overlayProps:{radius:"lg",blur:2}}),(0,s.jsxs)(u.Group,{align:"center",gap:"sm",mb:"lg",children:[(0,s.jsx)(h.k,{size:"lg",radius:"md",variant:"light",color:"violet",style:{width:(0,x.h)(32),height:(0,x.h)(32)},children:(0,s.jsx)(B.Z,{style:{width:(0,x.h)(18),height:(0,x.h)(18)},stroke:2})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Title,{order:4,fw:700,children:"Add New Serial Manager"}),(0,s.jsx)(j.Text,{size:"xs",c:"dimmed",children:"Create a new account for serial management"})]})]}),(0,s.jsx)("form",{onSubmit:t.onSubmit(e=>{i(e),t.reset()}),children:(0,s.jsxs)(A.M,{cols:{base:1,sm:1,md:3},spacing:"md",verticalSpacing:"md",children:[(0,s.jsx)(f.TextInput,{name:"email",size:"md",variant:"filled",radius:"md",label:"Email Address",placeholder:"manager@example.com",leftSection:(0,s.jsx)(I.Z,{size:16,stroke:1.5}),...t.getInputProps("email")}),(0,s.jsx)(Z.W,{size:"md",variant:"filled",radius:"md",name:"password",label:"Password",placeholder:"Minimum 6 characters",leftSection:(0,s.jsx)(P.Z,{size:16,stroke:1.5}),...t.getInputProps("password")}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"flex-end",width:"100%"},children:(0,s.jsx)(T.Button,{type:"submit",size:"md",radius:"md",fullWidth:!0,variant:"gradient",gradient:{from:"violet",to:"grape",deg:45},leftSection:(0,s.jsx)(B.Z,{size:18,stroke:1.5}),children:"Create Account"})})]})})]})};var E=i(22975),_=i(46557),G=i(13336),N=i(93911);let O=e=>{let{managers:r,isLoading:i,refetch:t}=e,[a,l]=(0,d.useState)(""),[n,{open:o,close:u}]=(0,_.q)(!1),h=e=>{l(e),o()};return 0!==r.length||i?(0,s.jsxs)(m.Box,{pos:"relative",children:[(0,s.jsx)(k.f,{visible:i,zIndex:10,overlayProps:{radius:"lg",blur:2}}),(0,s.jsx)(m.Box,{children:r.map((e,r)=>(0,s.jsx)(G.A,{manager:e,index:r,onAddChamber:()=>h(e.id),onRefetch:t},e.id))}),(0,s.jsx)(E.u,{opened:n,onClose:()=>{u(),t()},closeOnClickOutside:!1,title:"Add Doctor Chamber",size:"xl",radius:"md",children:n&&(0,s.jsx)(N.Z,{userId:a,close:()=>{u(),t()}})})]}):(0,s.jsx)(c.X,{p:"xl",radius:"md",style:{textAlign:"center"},withBorder:!0,children:(0,s.jsx)(j.Text,{c:"dimmed",size:"md",children:"No serial managers found. Use the form above to add one."})})};var D=()=>{var e,r,i;let[l,{isLoading:c}]=(0,o.sc)(),{data:u,isLoading:m,refetch:h}=(0,o.$4)(),[x,g]=(0,d.useState)(""),v=async e=>{try{let r=await l(e);"error"in r?n().fire("Error","Unknown error occurred","error"):(n().fire({title:"Success",text:"Serial Manager Added",icon:"success",timer:1500,showConfirmButton:!1}),h())}catch(e){n().fire("Error","An error occurred","error")}},j=(0,d.useMemo)(()=>{var e;if(!(null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.items))return[];if(!x.trim())return u.data.items;let r=x.toLowerCase();return u.data.items.filter(e=>{let i=e.doctorChamber.some(e=>{var i,s;return null==e?void 0:null===(s=e.Doctor)||void 0===s?void 0:null===(i=s.name)||void 0===i?void 0:i.toLowerCase().includes(r)}),s=e.email.toLowerCase().includes(r);return i||s}).map(e=>({...e,doctorChamber:e.doctorChamber.filter(i=>{var s,t;return!!e.email.toLowerCase().includes(r)||(null==i?void 0:null===(t=i.Doctor)||void 0===t?void 0:null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(r))})}))},[null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.items,x]);return(0,s.jsx)(t.Container,{fluid:!0,p:"lg",children:(0,s.jsxs)(a.Stack,{gap:"xl",children:[(0,s.jsx)(y,{managersCount:(null==u?void 0:null===(i=u.data)||void 0===i?void 0:null===(r=i.items)||void 0===r?void 0:r.length)||0,query:x,onQueryChange:g,onRefresh:h,refreshLoading:m}),(0,s.jsx)(M,{loading:c,onSubmit:v}),(0,s.jsx)(O,{managers:j,isLoading:m,refetch:h})]})})}}},function(e){e.O(0,[1601,2975,7852,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,6029,6306,7698,3583,4193,1493,9645,4347,2018,2226,3336,9175,7402,1744],function(){return e(e.s=9e3)}),_N_E=e.O()}]);