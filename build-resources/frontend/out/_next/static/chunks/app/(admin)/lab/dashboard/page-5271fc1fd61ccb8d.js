(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5298],{32598:function(e,t,n){Promise.resolve().then(n.bind(n,88457))},88457:function(e,t,n){"use strict";n.r(t);var r=n(68328),s=n(4505),o=n(36409),i=n(14587),a=n(22041),l=n(89043),d=n(41224),c=n(68242),u=n(22614),h=n(77379),p=n(29663),g=n(44176),f=n(48604),b=n(11114),m=n(22115),y=n(55589),v=n(62471),T=n(12450);let F=[{bg:"#E7F5FF",hover:"#D0EBFF",border:"#74C0FC"},{bg:"#F3F0FF",hover:"#E5DBFF",border:"#B197FC"},{bg:"#E6FCF5",hover:"#C3FAE8",border:"#63E6BE"},{bg:"#FFF9DB",hover:"#FFF3BF",border:"#FFD43B"},{bg:"#FFDEEB",hover:"#FCC2D7",border:"#F783AC"}];t.default=()=>{var e,t;let[n,C]=(0,s.useState)("pending"),[x,w]=(0,v.I)({key:"lab-assistant-subcategory-id",defaultValue:""}),j=(0,T.useRouter)(),{data:E,isLoading:B,error:R}=(0,y.We)({}),A=e=>{console.log("Navigating to category: ".concat(e)),m.N9.show({title:"Category selected",message:"Viewing details for category: ".concat(e),color:"blue"}),w(e),setTimeout(()=>{j.push("/lab")},1e3)};if(B)return(0,r.jsx)(o.M,{style:{height:300},children:(0,r.jsx)(i.Loader,{size:"lg"})});if(R)return(0,r.jsx)(o.M,{style:{height:300},children:(0,r.jsx)(a.Text,{color:"red",children:"Error loading dashboard data. Please try again."})});let D=[..."pending"===n?(null==E?void 0:E.pendingBillTests)||[]:(null==E?void 0:E.completedBillReports)||[]].sort((e,t)=>t.totalTest-e.totalTest),k=(null==E?void 0:null===(e=E.pendingBillTests)||void 0===e?void 0:e.reduce((e,t)=>e+t.totalTest,0))||0,q=(null==E?void 0:null===(t=E.completedBillReports)||void 0===t?void 0:t.reduce((e,t)=>e+t.totalTest,0))||0;return(0,r.jsx)("div",{children:(0,r.jsx)(l.X,{shadow:"sm",p:"md",withBorder:!0,children:(0,r.jsxs)(d.Stack,{gap:"md",children:[(0,r.jsx)(c.Title,{order:2,children:"Lab Dashboard"}),(0,r.jsx)(u.Group,{children:(0,r.jsx)(h.s,{value:n,onChange:C,data:[{label:"Pending Tests (".concat(k,")"),value:"pending"},{label:"Completed Reports (".concat(q,")"),value:"completed"}],color:"pending"===n?"blue":"green"})}),(0,r.jsx)(p.Grid,{children:D.map((e,t)=>(0,r.jsx)(p.Grid.Col,{span:{base:12,md:6,lg:3},children:(0,r.jsx)(g.u,{mounted:!0,transition:"fade",duration:300,timingFunction:"ease",children:s=>(0,r.jsx)(f.Z,{style:{...s,backgroundColor:F[t%F.length].bg,borderColor:F[t%F.length].border,cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:F[t%F.length].hover,transform:"translateY(-5px)"}},shadow:"sm",p:"lg",radius:"md",withBorder:!0,onClick:()=>A(e.subTestCategoryId),children:(0,r.jsxs)(d.Stack,{gap:"xs",children:[(0,r.jsx)(a.Text,{fw:500,truncate:!0,children:e.subTestCategoryName}),(0,r.jsx)(a.Text,{size:"xl",fw:700,children:e.totalTest}),(0,r.jsx)(b.C,{color:"pending"===n?"blue":"green",variant:"light",children:"pending"===n?"Tests Pending":"Tests Completed"})]})})})},e.subTestCategoryId))}),(0,r.jsx)(a.Text,{color:"dimmed",size:"sm",ta:"center",children:"pending"===n?"Showing pending tests awaiting processing":"Showing completed test reports"})]})})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return s},Hn:function(){return r},y4:function(){return o}});let r={headers:{"Content-Type":"application/json"}},s={withCredentials:!0},o={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r=n(49854),s=n(68240),o=n(94183),i=n(28317);let a=(0,s.LC)({baseQuery:(0,o.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let s="string"==typeof e?e:e.url;return s.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,i.t8)(s,await n.clone().json().catch(()=>null),(0,r.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,i.U2)(n,(0,r.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},55589:function(e,t,n){"use strict";n.d(t,{FZ:function(){return r},We:function(){return i},Ys:function(){return s},_P:function(){return o}});let{useGetTestsQuery:r,useGetBillTestsQuery:s,useGetLabDoctorsQuery:o,useGetLabDashboardQuery:i}=n(78101).g.injectEndpoints({endpoints:e=>({getTests:e.query({query:e=>({url:"/admin/dashboard/labAssistantTest",params:{...e}}),transformResponse(e){try{if(!Array.isArray(null==e?void 0:e.data))throw Error("ERR_PARSE");return e.data.toSorted((e,t)=>t.quantity-e.quantity)}catch(e){return console.error(e),[]}}}),getBillTests:e.query({query:e=>{let{id:t,...n}=e;return{url:"/billTest/test".concat(t&&"/").concat(t),params:{...n}}},transformResponse:e=>e.data,providesTags:["BillTest"]}),getLabDoctors:e.query({query:()=>({url:"/admin/doctor/lab"}),transformResponse:e=>e.doctors}),getLabDashboard:e.query({query:()=>({url:"/admin/dashboard/labDashboard"}),transformResponse:e=>e.data})})})},49854:function(e,t,n){"use strict";let r;n.d(t,{d:function(){return d},x:function(){return l}});var s=n(72940),o=n(6780),i=n(67732),a=n(28317);function l(){return r||(r=(0,a.MT)("cached-responses-store","cached-responses")),r}async function d(e,t){try{let n=await o.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...s.FD});return await (0,a.t8)(e,n.data,l()),n.data}catch(t){if(t instanceof i.d7&&[i.d7.ERR_NETWORK,i.d7.ETIMEDOUT].includes(t.code)){let t=await (0,a.U2)(e,l());if(t)return t}throw t instanceof i.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[3069,6945,3852,9258,966,1493,5099,9175,7402,1744],function(){return e(e.s=32598)}),_N_E=e.O()}]);