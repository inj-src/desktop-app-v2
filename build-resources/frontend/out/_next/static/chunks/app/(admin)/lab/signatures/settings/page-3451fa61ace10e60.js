(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9609],{74167:function(e,t,n){Promise.resolve().then(n.bind(n,66432))},66432:function(e,t,n){"use strict";n.r(t);var a=n(68328),i=n(58690),l=n(41363),r=n(74559),s=n(25499),o=n(68718),d=n(48604),u=n(22614),c=n(68242),g=n(22041),h=n(81209),p=n(29259),f=n(77379),m=n(87967),v=n(14587),S=n(31204),b=n(62471),y=n(38156),x=n(92547),w=n(31456),T=n(42895),j=n(90655),C=n(76283),F=n(4505),k=n(90660),D=n.n(k);t.default=()=>{let e=(0,s.C)(e=>e.auth.diagnostic),t=(0,s.C)(e=>e.auth.user),n=(0,s.T)(),{data:k,isLoading:I}=(0,o.Ck)(),[A,z]=(0,F.useState)(0),[E,L]=(0,b.I)({key:"lab-single-signature-alignment-".concat(null==t?void 0:t.id),defaultValue:"center"}),[U,P]=(0,b.I)({key:"lab-signature-custom-settings-".concat(null==t?void 0:t.id),defaultValue:"false"}),[Q,R]=(0,F.useState)({labFirstSign:null,labSecondSign:null,labThirdSign:null}),Z=(e,t)=>{R(n=>({...n,[e]:t}))},q=(0,F.useMemo)(()=>{if(null==k?void 0:k.data){var e;return null==k?void 0:null===(e=k.data)||void 0===e?void 0:e.map(e=>({...e,value:e.id,label:e.name}))}},[null==k?void 0:k.data]);(0,F.useEffect)(()=>{let n="false"===U?e:t,a={labFirstSign:(null==n?void 0:n.labFirstSign)&&(null==n?void 0:n.labFirstSign)!==""?null==n?void 0:n.labFirstSign:null,labSecondSign:(null==n?void 0:n.labSecondSign)&&(null==n?void 0:n.labSecondSign)!==""?null==n?void 0:n.labSecondSign:null,labThirdSign:(null==n?void 0:n.labThirdSign)&&(null==n?void 0:n.labThirdSign)!==""?null==n?void 0:n.labThirdSign:null};z(((null==n?void 0:n.labFirstSign)?1:0)+((null==n?void 0:n.labSecondSign)?1:0)+((null==n?void 0:n.labThirdSign)?1:0)),R(a)},[null==e?void 0:e.labFirstSign,null==e?void 0:e.labSecondSign,null==e?void 0:e.labThirdSign,U,e,t]);let O=async()=>{try{if("false"===U){let{success:e,data:t}=await (0,l.$)({labFirstSign:A>=2?null==Q?void 0:Q.labFirstSign:"",labSecondSign:1===A||A>2?null==Q?void 0:Q.labSecondSign:"",labThirdSign:A>=2?null==Q?void 0:Q.labThirdSign:""});e?(n((0,r.Im)(t)),D().fire("Success","Hospital Updated","success")):D().fire("Failed",t,"error")}else{let{success:e,data:t}=await (0,i.k)({labFirstSign:A>=2?null==Q?void 0:Q.labFirstSign:"",labSecondSign:1===A||A>2?null==Q?void 0:Q.labSecondSign:"",labThirdSign:A>=2?null==Q?void 0:Q.labThirdSign:""});e?(n((0,r.av)(t)),D().fire("Success","User Settings Updated","success")):D().fire("Failed",t,"error")}}catch(e){D().fire("Error","Something went wrong","error")}};return(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2rem"},children:(0,a.jsxs)(d.Z,{style:{width:"80%"},shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,a.jsxs)(u.Group,{mb:20,children:[(0,a.jsx)(c.Title,{children:"Lab Signature Settings"}),(0,a.jsxs)(u.Group,{children:[(0,a.jsx)(g.Text,{size:"sm",color:U?"blue":"gray",children:U?"Custom Settings Enabled":"Default Settings"}),(0,a.jsx)(h.r,{checked:"true"===U,onChange:e=>{P(e.currentTarget.checked?"true":"false")},size:"md",color:"blue",onLabel:"ON",offLabel:"OFF",thumbIcon:U?(0,a.jsx)(y.Z,{size:"0.8rem",stroke:2.5}):null})]})]}),(0,a.jsx)(p.Y,{my:5,styles:{input:{backgroundColor:"white"}},min:0,max:3,label:"How many signatures will be shown (max 3)",description:"This signatures will be appear by default below each report",onChange:e=>z("string"==typeof e?parseInt(e):e),value:A}),1===A&&(0,a.jsxs)("div",{style:{marginTop:"15px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px"},children:[(0,a.jsx)(g.Text,{component:"span",size:"sm",fw:500,mb:5,children:"Signature Alignment"}),(0,a.jsx)(f.s,{value:E,onChange:L,w:"300px",data:[{value:"start",label:(0,a.jsxs)(u.Group,{children:[(0,a.jsx)(x.Z,{size:"1rem"}),(0,a.jsx)(g.Text,{size:"sm",children:"Left"})]})},{value:"center",label:(0,a.jsxs)(u.Group,{children:[(0,a.jsx)(w.Z,{size:"1rem"}),(0,a.jsx)(g.Text,{size:"sm",children:"Center"})]})},{value:"end",label:(0,a.jsxs)(u.Group,{children:[(0,a.jsx)(T.Z,{size:"1rem"}),(0,a.jsx)(g.Text,{size:"sm",children:"Right"})]})}]})]}),(0,a.jsxs)(u.Group,{my:10,justify:1===A?E:"space-between",children:[A>=2&&(0,a.jsx)(m.P,{label:"Left Signature",description:"",placeholder:"Select Left Signature",data:null!=q?q:[],limit:15,searchable:!0,variant:"default",clearable:!0,leftSection:(0,a.jsx)(j.Z,{}),rightSection:I?(0,a.jsx)(v.Loader,{size:18}):void 0,size:"lg",styles:{input:{backgroundColor:"white"}},value:null==Q?void 0:Q.labFirstSign,onChange:e=>Z("labFirstSign",e)}),(1===A||A>2)&&(0,a.jsx)(m.P,{label:"Center Signature",description:"",placeholder:"Select Center Signature",data:null!=q?q:[],limit:15,searchable:!0,variant:"default",clearable:!0,leftSection:(0,a.jsx)(j.Z,{}),rightSection:I?(0,a.jsx)(v.Loader,{size:18}):void 0,size:"lg",value:null==Q?void 0:Q.labSecondSign,styles:{input:{backgroundColor:"white"}},onChange:e=>Z("labSecondSign",e)}),A>=2&&(0,a.jsx)(m.P,{label:"Right Signature",description:"",placeholder:"Select Right Signature",data:null!=q?q:[],limit:15,searchable:!0,variant:"default",clearable:!0,value:null==Q?void 0:Q.labThirdSign,leftSection:(0,a.jsx)(j.Z,{}),rightSection:I?(0,a.jsx)(v.Loader,{size:18}):void 0,size:"lg",styles:{input:{backgroundColor:"white"}},onChange:e=>Z("labThirdSign",e)})]}),(0,a.jsx)(S.Button,{onClick:O,my:10,w:100,leftSection:(0,a.jsx)(C.Z,{}),children:"Save"})]})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return i},Hn:function(){return a},y4:function(){return l}});let a={headers:{"Content-Type":"application/json"}},i={withCredentials:!0},l={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},58690:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var a=n(72940),i=n(6780),l=n(67732);let r=async e=>{try{let t=await i.default.patch("".concat("http://sasthotech.local:5000/api/v1","/profile"),e,{...a.FD,...a.Hn});return{success:!0,data:t.data.data}}catch(e){if(e instanceof l.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}}},41363:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var a=n(72940),i=n(6780),l=n(67732);let r=async e=>{try{let t=await i.default.patch("".concat("http://sasthotech.local:5000/api/v1","/admin/diagnostic"),e,a.y4);return{success:!0,data:t.data.data}}catch(e){if(e instanceof l.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}}},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var a=n(49854),i=n(68240),l=n(94183),r=n(28317);let s=(0,i.LC)({baseQuery:(0,l.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let i="string"==typeof e?e:e.url;return i.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,r.t8)(i,await n.clone().json().catch(()=>null),(0,a.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,r.U2)(n,(0,a.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},74559:function(e,t,n){"use strict";n.d(t,{Im:function(){return r},av:function(){return l},nC:function(){return i}});let a=(0,n(79258).createSlice)({name:"auth",initialState:{isAuth:null,user:null,isProfileIncomplete:!1,diagnostic:null},reducers:{setUser:(e,t)=>{var n;e.user=t.payload,e.isAuth=!!t.payload,(null===(n=t.payload)||void 0===n?void 0:n.name)?localStorage.setItem("name",t.payload.name):localStorage.removeItem("name")},setDiagnostic:(e,t)=>{let n=t.payload;"hospital.sasthotech.com"===window.location.hostname?n.activeLogo=n.logo:n.activeLogo=n.offlineLogo,e.diagnostic=n},setProfileIncomplete:(e,t)=>{e.isProfileIncomplete=t.payload}}}),i=e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.role},{setUser:l,setDiagnostic:r}=a.actions;t.ZP=a.reducer},25499:function(e,t,n){"use strict";n.d(t,{C:function(){return l},T:function(){return i}});var a=n(53502);let i=()=>(0,a.I0)(),l=a.v9},68718:function(e,t,n){"use strict";n.d(t,{Ck:function(){return i},ER:function(){return r},U6:function(){return s},Um:function(){return o},ht:function(){return l}});let a=n(78101).g.injectEndpoints({endpoints:e=>({getSigns:e.query({query:()=>({url:"/signatures"}),keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e)}),createSign:e.mutation({query:e=>{var t;let n=new FormData;return n.append("name",e.name),e.designation&&n.append("designation",e.designation),e.image&&n.append("image",null==e?void 0:e.image,null==e?void 0:null===(t=e.image)||void 0===t?void 0:t.name),{url:"/signatures",method:"POST",body:n}},async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,l=Date.now().toString(36),r=n(a.util.updateQueryData("getSigns",void 0,t=>{t.data.push({...e,id:l,loading:!0})}));try{let{data:e}=await i;n(a.util.updateQueryData("getSigns",void 0,t=>{let n=t.data.findIndex(e=>e.id===l);n>=0&&(t.data[n]=e.data)}))}catch(e){r.undo()}}}),updateSign:e.mutation({query:e=>{let{id:t,...n}=e,a=new FormData;return a.append("name",n.name),n.designation&&a.append("designation",n.designation),n.image&&a.append("image",n.image,n.image.name),{url:"/signatures/".concat(t),method:"PATCH",body:a}},async onQueryStarted(e,t){let{id:n,...i}=e,{dispatch:l,queryFulfilled:r}=t,s=l(a.util.updateQueryData("getSigns",void 0,e=>{let t=e.data.findIndex(e=>e.id===n);t>=0&&(e.data[t]={...e.data[t],...i})}));try{let{data:e}=await r;l(a.util.updateQueryData("getSigns",void 0,t=>{let a=t.data.findIndex(e=>e.id===n);a>=0&&(t.data[a]=e.data)}))}catch(e){s.undo()}}}),deleteSign:e.mutation({query:e=>({url:"/signatures/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:i}=t,l=n(a.util.updateQueryData("getSigns",void 0,t=>{let n=t.data.find(t=>t.id===e);n&&(n.loading=!0)}));try{await i,n(a.util.updateQueryData("getSigns",void 0,t=>{let n=t.data.findIndex(t=>t.id===e);n>=0&&t.data.splice(n,1)}))}catch(e){l.undo()}}}),getSingleSign:e.query({query:e=>({url:"/signatures/".concat(e)})})})}),{useGetSignsQuery:i,useCreateSignMutation:l,useUpdateSignMutation:r,useDeleteSignMutation:s,useGetSingleSignQuery:o}=a},49854:function(e,t,n){"use strict";let a;n.d(t,{d:function(){return d},x:function(){return o}});var i=n(72940),l=n(6780),r=n(67732),s=n(28317);function o(){return a||(a=(0,s.MT)("cached-responses-store","cached-responses")),a}async function d(e,t){try{let n=await l.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...i.FD});return await (0,s.t8)(e,n.data,o()),n.data}catch(t){if(t instanceof r.d7&&[r.d7.ERR_NETWORK,r.d7.ETIMEDOUT].includes(t.code)){let t=await (0,s.U2)(e,o());if(t)return t}throw t instanceof r.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,9533,966,1166,7967,6306,833,8613,9175,7402,1744],function(){return e(e.s=74167)}),_N_E=e.O()}]);