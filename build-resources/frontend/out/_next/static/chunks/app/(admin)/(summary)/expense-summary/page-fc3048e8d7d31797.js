(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1356],{41099:function(t,e,o){Promise.resolve().then(o.bind(o,16973))},16973:function(t,e,o){"use strict";o.r(e);var a=o(68328),n=o(11114),i=o(34473),l=o(41224),s=o(32451),d=o(68242),r=o(53729),u=o(22041),c=o(4505),m=o(12450),p=o(25499),v=o(74559),g=o(13603),y=o(51087),h=o(63467),f=o(27405),A=o(41671),P=o(62904);e.default=()=>{var t,e;let[o,w]=(0,c.useState)(1),[b,x]=(0,c.useState)(1),[C,S]=(0,c.useState)(1),[k,T]=(0,c.useState)(1),[D,N]=(0,c.useState)({expenses:[],totalAmount:0}),[E,j]=(0,c.useState)({pcs:[],totalAmount:0,totalPaid:0}),[V,M]=(0,c.useState)({doctors:[],totalAmount:0,totalPaid:0}),[B,L]=(0,c.useState)({payments:[],totalAmount:0}),[I,O]=(0,c.useState)(!0),[U,Z]=(0,c.useState)(!0),[F,_]=(0,c.useState)(!0),[R,q]=(0,c.useState)(!0),z=(0,p.C)(v.nC),H=(0,p.C)(g.uA),Q=(0,p.C)(t=>t.diagnosticSettings.viewId),G=(0,m.useSearchParams)(),K="receptionist"===z?!G.get("overall"):void 0,W="admin"===z&&Q?Q:void 0;(0,c.useEffect)(()=>{O(!0),(0,y.b)(H[0],H[1],void 0,K,W,void 0,void 0).then(t=>{let{success:e,data:o}=t;if(e&&"string"!=typeof o){let t=Array.isArray(o)?o:[],e=t.reduce((t,e)=>t+(e.amount||0),0);N({expenses:t,totalAmount:e})}O(!1)})},[H,K,W]),(0,c.useEffect)(()=>{Z(!0),(0,h.h)(H[0],H[1],!0,K,W).then(t=>{let{success:e,data:o}=t;if(e&&"string"!=typeof o){var a,n,i;j({pcs:(null==o?void 0:null===(a=o.pc)||void 0===a?void 0:a.pcs)||[],totalAmount:(null==o?void 0:null===(n=o.pc)||void 0===n?void 0:n.totalPcAmount)||0,totalPaid:(null==o?void 0:null===(i=o.pc)||void 0===i?void 0:i.totalPcPaid)||0})}Z(!1)})},[H,K,W]),(0,c.useEffect)(()=>{_(!0),(0,h.h)(H[0],H[1],!1,K,W).then(t=>{let{success:e,data:o}=t;if(e&&"string"!=typeof o){var a,n,i;M({doctors:(null==o?void 0:null===(a=o.doctor)||void 0===a?void 0:a.doctors)||[],totalAmount:(null==o?void 0:null===(n=o.doctor)||void 0===n?void 0:n.totalDoctorAmount)||0,totalPaid:(null==o?void 0:null===(i=o.doctor)||void 0===i?void 0:i.totalDoctorPaid)||0})}_(!1)})},[H,K,W]);let{data:X,isLoading:J}=(0,f.H1)({from:null===(t=H[0])||void 0===t?void 0:t.toISOString(),to:null===(e=H[1])||void 0===e?void 0:e.toISOString(),isCommissionPaid:!0});(0,c.useEffect)(()=>{if(q(J),null==X?void 0:X.data){let t=X.data.items||[],e=t.reduce((t,e)=>t+(e.doctorAmount||0),0);L({payments:t,totalAmount:e})}},[X,J]);let Y=(0,c.useCallback)(t=>{w(t)},[]),$=(0,c.useCallback)(t=>{x(t)},[]),tt=(0,c.useCallback)(t=>{S(t)},[]),te=(0,c.useCallback)(t=>{T(t)},[]),to=(0,c.useMemo)(()=>[{key:"type",label:"Expense Note",width:200,getValue:t=>(null==t?void 0:t.type)||"N/A"},{key:"handedTo",label:"Handed To",width:150,getValue:t=>(null==t?void 0:t.handedTo)||"N/A"},{key:"amount",label:"Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.amount)||0),textProps:{fw:600,c:"red"}},{key:"category",label:"Category",width:150,getValue:t=>{var e;return(null==t?void 0:null===(e=t.DailyExpenseCategory)||void 0===e?void 0:e.name)||"N/A"}},{key:"createdBy",label:"Created By",width:150,getValue:t=>{var e;return(null==t?void 0:null===(e=t.User)||void 0===e?void 0:e.name)||"N/A"}},{key:"createdAt",label:"Date",width:120,getValue:t=>new Date(null==t?void 0:t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}],[]),ta=(0,c.useMemo)(()=>[{key:"name",label:"PC Name",width:200,getValue:t=>(null==t?void 0:t.name)||"N/A"},{key:"totalAmount",label:"Total Amount",width:150,getValue:t=>"৳".concat((null==t?void 0:t.totalAmount)||0),textProps:{fw:600}},{key:"paidAmount",label:"Paid Amount",width:150,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"dueAmount",label:"Due Amount",width:150,getValue:t=>"৳".concat(((null==t?void 0:t.totalAmount)||0)-((null==t?void 0:t.paidAmount)||0)),textProps:{fw:600,c:"red"}},{key:"status",label:"Status",width:100,render:t=>{let e=((null==t?void 0:t.totalAmount)||0)===((null==t?void 0:t.paidAmount)||0);return(0,a.jsx)(n.C,{color:e?"green":"orange",size:"sm",children:e?"Paid":"Pending"})}}],[]),tn=(0,c.useMemo)(()=>[{key:"name",label:"Doctor Name",width:200,getValue:t=>(null==t?void 0:t.name)||"N/A"},{key:"totalAmount",label:"Total Amount",width:150,getValue:t=>"৳".concat((null==t?void 0:t.totalAmount)||0),textProps:{fw:600}},{key:"paidAmount",label:"Paid Amount",width:150,getValue:t=>"৳".concat((null==t?void 0:t.paidAmount)||0),textProps:{fw:600,c:"green"}},{key:"dueAmount",label:"Due Amount",width:150,getValue:t=>"৳".concat(((null==t?void 0:t.totalAmount)||0)-((null==t?void 0:t.paidAmount)||0)),textProps:{fw:600,c:"red"}},{key:"status",label:"Status",width:100,render:t=>{let e=((null==t?void 0:t.totalAmount)||0)===((null==t?void 0:t.paidAmount)||0);return(0,a.jsx)(n.C,{color:e?"green":"orange",size:"sm",children:e?"Paid":"Pending"})}}],[]),ti=(0,c.useMemo)(()=>[{key:"doctorName",label:"Doctor Name",width:180,getValue:t=>{var e,o;return(null==t?void 0:null===(o=t.bill)||void 0===o?void 0:null===(e=o.doctor)||void 0===e?void 0:e.name)||"N/A"}},{key:"patientName",label:"Patient Name",width:150,getValue:t=>{var e,o;return(null==t?void 0:null===(o=t.bill)||void 0===o?void 0:null===(e=o.patient)||void 0===e?void 0:e.name)||"N/A"}},{key:"testName",label:"Test Name",width:150,getValue:t=>(null==t?void 0:t.name)||"N/A"},{key:"amount",label:"Amount",width:120,getValue:t=>"৳".concat((null==t?void 0:t.doctorAmount)||0),textProps:{fw:600,c:"green"}},{key:"paidAt",label:"Paid At",width:150,getValue:t=>(null==t?void 0:t.doctorCommissionPaidAt)?new Date(t.doctorCommissionPaidAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A"},{key:"status",label:"Status",width:100,render:t=>(0,a.jsx)(n.C,{color:"green",size:"sm",children:"Paid"})}],[]),tl=(0,c.useMemo)(()=>{let t=(o-1)*5;return D.expenses.slice(t,t+5)},[D.expenses,o]),ts=(0,c.useMemo)(()=>{let t=(b-1)*5;return E.pcs.slice(t,t+5)},[E.pcs,b]),td=(0,c.useMemo)(()=>{let t=(C-1)*5;return V.doctors.slice(t,t+5)},[V.doctors,C]),tr=(0,c.useMemo)(()=>{let t=(k-1)*5;return B.payments.slice(t,t+5)},[B.payments,k]);return(0,a.jsxs)(i.Container,{size:"xl",px:"md",children:[(0,a.jsx)(l.Stack,{gap:"lg",children:(0,a.jsxs)(s.Box,{p:"lg",children:[(0,a.jsx)(d.Title,{order:2,mb:(0,r.h)(4),children:"Expense Summary"}),(0,a.jsx)(u.Text,{size:"sm",c:"dimmed",children:"Summary of all expenses and commissions"})]})}),(0,a.jsxs)(s.Box,{p:"md",children:[(0,a.jsx)(A.Z,{title:"Daily Expense",data:tl,columns:to,totalAmount:D.totalAmount,totalAmountLabel:"Total Expense",totalCount:D.expenses.length,isLoading:I,currentPage:o,onPageChange:Y,itemsPerPage:5,emptyMessage:"No expenses found",renderCard:(t,e)=>(0,a.jsx)(P.Z,{item:t,type:"expense"},t.id||e)}),(0,a.jsx)(A.Z,{title:"PC Commission",data:ts,columns:ta,totalAmount:E.totalPaid,totalAmountLabel:"Total Paid",totalCount:E.pcs.length,isLoading:U,currentPage:b,onPageChange:$,itemsPerPage:5,emptyMessage:"No PC commissions found",renderCard:(t,e)=>(0,a.jsx)(P.Z,{item:t,type:"pc-commission"},t.id||e)}),(0,a.jsx)(A.Z,{title:"Doctor Commission",data:td,columns:tn,totalAmount:V.totalPaid,totalAmountLabel:"Total Paid",totalCount:V.doctors.length,isLoading:F,currentPage:C,onPageChange:tt,itemsPerPage:5,emptyMessage:"No doctor commissions found",renderCard:(t,e)=>(0,a.jsx)(P.Z,{item:t,type:"doctor-commission"},t.id||e)}),(0,a.jsx)(A.Z,{title:"Doctor Payment",data:tr,columns:ti,totalAmount:B.totalAmount,totalAmountLabel:"Total Paid",totalCount:B.payments.length,isLoading:R,currentPage:k,onPageChange:te,itemsPerPage:5,emptyMessage:"No doctor payments found",renderCard:(t,e)=>(0,a.jsx)(P.Z,{item:t,type:"doctor-payment"},t.id||e)})]})]})}},63467:function(t,e,o){"use strict";o.d(e,{h:function(){return l}});var a=o(72940),n=o(6780),i=o(67732);let l=async(t,e,o,l,s)=>{try{let i="".concat("http://sasthotech.local:5000/api/v1","/commission?isDoctor=",!0,"&isPC=",!0);o&&(i="".concat("http://sasthotech.local:5000/api/v1","/commission?isDoctor=",!1,"&isPC=",!0)),l&&(i+="&isOwn=".concat(l)),s&&(i+="&userId=".concat(s)),t&&e&&(i+="&from=".concat(new Date(t).toISOString(),"&to=").concat(new Date(e).toISOString()));let d=await n.default.get(i,a.FD);return{success:!0,data:d.data.data}}catch(t){if(t instanceof i.d7){var d;return{success:!1,data:null===(d=t.response)||void 0===d?void 0:d.data.message}}return{success:!1,data:"An error occurred"}}}},51087:function(t,e,o){"use strict";o.d(e,{b:function(){return l}});var a=o(72940),n=o(6780),i=o(67732);let l=async(t,e,o,l,s,d,r)=>{try{let i="".concat("http://sasthotech.local:5000/api/v1","/dailyExpense?");i+="from=".concat(new Date(t).toISOString(),"&to=").concat(new Date(e).toISOString()),o&&(i+="&dailyExpenseCategoryId=".concat(o)),l&&(i+="&isOwn=".concat(l)),s&&(i+="&userId=".concat(s)),d&&(i+="&isAllExpense=".concat(d)),r&&(i+="&search=".concat(encodeURIComponent(r)));let u=await n.default.get(i,a.FD);return{success:!0,data:u.data.data}}catch(t){if(t instanceof i.d7){var u;return{success:!1,data:null===(u=t.response)||void 0===u?void 0:u.data.message}}return{success:!1,data:"An error occurred"}}}},78101:function(t,e,o){"use strict";o.d(e,{g:function(){return s}});var a=o(49854),n=o(68240),i=o(94183),l=o(28317);let s=(0,n.LC)({baseQuery:(0,i.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(t,e)=>fetch(t,e).then(async o=>{let n="string"==typeof t?t:t.url;return n.includes("?")||(null==e?void 0:e.body)||"string"!=typeof t&&t.body||await (0,l.t8)(n,await o.clone().json().catch(()=>null),(0,a.x)()),o}).catch(async o=>{if(o instanceof TypeError){let o="string"==typeof t?t:t.url;if(!o.includes("?")&&!(null==e?void 0:e.body)&&!("string"!=typeof t&&t.body)){let t=await (0,l.U2)(o,(0,a.x)());if(t)return new Response(t,{headers:new Headers({"Content-Type":"application/json"})})}}throw o})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},27405:function(t,e,o){"use strict";o.d(e,{F1:function(){return n},H1:function(){return l},Py:function(){return s},lX:function(){return i}});let a=o(78101).g.injectEndpoints({endpoints:t=>({getSingleBillTest:t.query({query:t=>({url:"/billTest/".concat(t)}),keepUnusedDataFor:86400}),getPayableBillTests:t.query({query:t=>({url:"/billTest/payable-bill-test",params:t}),keepUnusedDataFor:86400}),updateBillTest:t.mutation({query:t=>{let{id:e,template:o,isTestSample:a,testTemplateId:n}=t;return{url:"/billTest/".concat(e),method:"PATCH",body:{template:o,isTestSample:a,testTemplateId:n}}},async onQueryStarted(t,e){let{id:o,template:n,isTestSample:i}=t,{dispatch:l,queryFulfilled:s}=e,d=l(a.util.updateQueryData("getSingleBillTest",o,t=>{void 0!==n&&(t.data.template=n),void 0!==i&&(t.data.isTestSample=i),t.data.loading=!0}));try{await s,l(a.util.updateQueryData("getSingleBillTest",o,t=>{t.data.loading=void 0}))}catch(t){d.undo()}},invalidatesTags:["BillTest"]})})}),{getSingleBillTest:n}=a.endpoints,{useGetSingleBillTestQuery:i,useGetPayableBillTestsQuery:l,useUpdateBillTestMutation:s}=a},49854:function(t,e,o){"use strict";let a;o.d(e,{d:function(){return r},x:function(){return d}});var n=o(72940),i=o(6780),l=o(67732),s=o(28317);function d(){return a||(a=(0,s.MT)("cached-responses-store","cached-responses")),a}async function r(t,e){try{let o=await i.default.get(t,{baseURL:"http://sasthotech.local:5000/api/v1",params:e,...n.FD});return await (0,s.t8)(t,o.data,d()),o.data}catch(e){if(e instanceof l.d7&&[l.d7.ERR_NETWORK,l.d7.ETIMEDOUT].includes(e.code)){let e=await (0,s.U2)(t,d());if(e)return e}throw e instanceof l.d7&&e.response&&401===e.response.status||console.error(e),e}}}},function(t){t.O(0,[1601,3069,6945,3852,4670,9258,966,7140,2389,6258,9175,7402,1744],function(){return t(t.s=41099)}),_N_E=t.O()}]);