(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4053],{97170:function(e,n,t){Promise.resolve().then(t.bind(t,70578))},70578:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var a=t(68328),i=t(16391),r=t(31204),o=t(72375),s=t(63998),l=t(79059),c=t(23583),u=t(4505),d=t(30630),p=t(70818),h=t(42062),m=t(14193),g=t(29684),v=t(10713),f=t(74512),x=t.n(f),j=t(12450);let b=m.Ry().shape({name:m.Z_().required("Doctor Name is Required"),designation:m.Z_().required("Designation is Required"),percentage:m.Z_().optional(),phone1:m.Z_().matches(/(^(\+88|0088)?(01){1}[3456789]{1}(\d){8})$/,"Not a valid phone number"),phone2:m.Z_().matches(/(^(\+88|0088)?(01){1}[3456789]{1}(\d){8})$/,"Not a valid phone number")});var y=e=>{let{isImageInputVisible:n=!0,newButton:t,onSubmitAction:f,doesContainDivision:y,state:C}=e,[D,N]=(0,u.useState)(b),[w,T]=(0,u.useState)(!1);(0,u.useEffect)(()=>{y&&N(D.shape({division:m.Z_().required("Division is Required")}))},[D,y]);let[S,Z]=(0,u.useState)(null),_=e=>{var n;let t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(t){let e=new FileReader;e.onload=e=>{var n;Z(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.result)},e.readAsDataURL(t)}},k=(0,j.useRouter)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.k,{align:"center",children:(0,a.jsx)(r.Button,{variant:"subtle",className:"mb-3",leftSection:(0,a.jsx)(s.Z,{size:16}),onClick:()=>k.back(),children:"Back to Commissioned Doctors"})}),(0,a.jsx)(c.J9,{validationSchema:D,enableReinitialize:!0,initialValues:{name:(null==C?void 0:C.name)||"",designation:(null==C?void 0:C.designation)||"",phone1:(null==C?void 0:C.phone1)||"",percentage:(null==C?void 0:C.percentage)||0,phone2:(null==C?void 0:C.phone2)||"",isAppointed:(null==C?void 0:C.isAppointed)||!1,division:(null==C?void 0:C.division)||""},onSubmit:async(e,n)=>{let{setSubmitting:t,resetForm:a}=n;try{f&&await f(e)}finally{t(!1)}},children:e=>{let{values:n,errors:t,touched:i,handleChange:s,handleBlur:c,handleSubmit:u,isSubmitting:m,setFieldValue:f,setFieldTouched:j}=e;return(0,a.jsxs)(d.Z,{onSubmit:u,className:"w-100 d-flex flex-column gap-1",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsxs)("div",{className:x().imgContainer,children:[S?(0,a.jsx)("img",{className:"w-100 h-100 rounded-circle",src:S,alt:""}):C&&!S?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("img",{className:"w-100 h-100 rounded-circle",src:C.image?C.image:"https://i.ibb.co/hfGdGHp/doctor.jpg",alt:""})}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("input",{accept:"image/png, image/gif, image/jpeg",type:"file",name:"image",id:"image",onChange:e=>{var n;_(e),f("image",null===(n=e.target.files)||void 0===n?void 0:n[0])}}),(0,a.jsx)("label",{htmlFor:"image",children:(0,a.jsx)(l.Z,{className:x().imgIcon})})]}),(0,a.jsx)(r.Button,{type:"submit",variant:"default",children:"Update Profile"})]}),(0,a.jsx)(v.Z,{labelText:"Doctor Name",placeholder:"Type Name",withAsterisk:!0,value:n.name,onChange:s,onBlur:c,type:"text",name:"name",error:"".concat(i.name&&t.name?t.name:"")}),(0,a.jsx)(v.Z,{labelText:"Designation",withAsterisk:!0,placeholder:"Type designation",value:n.designation,onChange:s,onBlur:c,type:"text",name:"designation",error:"".concat(i.designation&&t.designation?t.designation:"")}),y&&(0,a.jsx)(g.Z,{previousValue:n.division,error:i.division&&t.division?t.division:void 0,setFieldValue:f,setFieldTouched:j}),(0,a.jsx)(v.Z,{labelText:"Commission Charge",placeholder:"Enter",value:0===n.percentage&&w?"":n.percentage.toString(),onChange:e=>{n.percentage<0?f("percentage",0):n.percentage>100?f("percentage",100):s(e)},onBlur:e=>{n.percentage<0?f("percentage",0):n.percentage>100?f("percentage",100):c(e),T(!1)},onFocus:()=>{T(!0)},type:"number",name:"percentage",error:"".concat(i.percentage&&t.percentage?t.percentage:"")}),(0,a.jsx)(o.X,{name:"isAppointed",label:(0,a.jsx)("p",{className:"font-semibold text-md inline",children:"Commission Doctor Only"}),checked:n.isAppointed,value:n.isAppointed.toString(),onChange:s,onBlur:c}),(0,a.jsxs)(p.default,{children:[(0,a.jsx)(h.default,{md:12,lg:6,children:(0,a.jsx)(v.Z,{labelText:"Phone number primary",placeholder:"Type phone number",value:n.phone1,onChange:s,onBlur:c,type:"text",name:"phone1",error:"".concat(i.phone1&&t.phone1?t.phone1:"")})}),(0,a.jsx)(h.default,{children:(0,a.jsx)(v.Z,{labelText:"Phone number secondary",placeholder:"Type phone number",value:n.phone2,onChange:s,onBlur:c,type:"text",name:"phone2",error:"".concat(i.phone2&&t.phone2?t.phone2:"")})})]})]})}})]})},C=t(8260),D=t(72940),N=t(6780),w=t(67732);let T=async e=>{try{let n=await N.default.get("".concat("http://sasthotech.local:5000/api/v1","/doctor/").concat(e),D.FD);return{success:!0,data:n.data.data}}catch(e){if(e instanceof w.d7){var n;return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data.message}}return{success:!1,data:"An error occurred"}}};var S=t(90660),Z=t.n(S),_=()=>{let e=(0,j.useSearchParams)().get("doctorId"),[n,t]=(0,u.useState)([]),i=async n=>{let{phone1:t,phone2:a,commission:i,...r}=n,o=new FormData;Object.keys(n).map(e=>{"division"!==e&&n[e]&&o.append(e,n[e])}),e&&o.append("id",e);let{success:s,data:l}=await (0,C.M)(o);s?Z().fire("Success","Doctor Updated","success"):Z().fire("Failed",l,"error")};return((0,u.useEffect)(()=>{(async()=>{if(!e)return;let{data:n,success:a}=await T(e);a&&t(n)})()},[e]),e)?(0,a.jsx)("section",{className:"p-4",children:n?(0,a.jsx)(y,{state:n,onSubmitAction:i}):(0,a.jsx)(a.Fragment,{})}):(0,a.jsx)("section",{className:"p-4",children:(0,a.jsx)("p",{children:"No doctor ID provided"})})}},29684:function(e,n,t){"use strict";var a=t(68328),i=t(87967),r=t(49238);t(4505),n.Z=e=>{let{setFieldValue:n,setFieldTouched:t,error:o,previousValue:s}=e;return(0,a.jsx)(i.P,{mt:5,label:"Division",description:" ",withAsterisk:!0,rightSection:(0,a.jsx)(r.Z,{}),name:"division",value:s,onChange:e=>{n("division",e)},onBlur:e=>t("division",!0),variant:"filled",size:"md",error:o,placeholder:"Select Division",data:["Barisal","Chittagong","Dhaka","Khulna","Mymensingh","Rajshahi","Rangpur","Sylhet"]})}},10713:function(e,n,t){"use strict";t.d(n,{E:function(){return p}});var a=t(68328),i=t(30331),r=t(30293),o=t(55911),s=t(87513),l=t(58689),c=t(73626),u=t(23583),d=t(4505);let p={size:"md",variant:"default",radius:"md"},h=(0,r.F)((0,d.forwardRef)(function(e,n){let{labelText:t,labelTextColor:r,size:h=p.size,variant:m=p.variant,radius:g=p.radius,mt:v="md",withAsterisk:f=!1,onChange:x,onBlur:j,onClick:b,readonly:y,styles:C,value:D,...N}=e,w=Object.assign({label:{color:null!=r?r:"black"}},C),[{value:T,onChange:S,onBlur:Z,..._},k,F]=(0,u.U$)(N.name),B=(0,d.useRef)(null),R=(0,l.Yx)(n,B),A=(0,c.y)(()=>{if(B.current){let e;let{type:n,value:t}=B.current;F.setValue("number"===n?isNaN(e=parseFloat(t))?"":e:t)}},200);return(0,d.useEffect)(()=>{B.current&&B.current.value!==T&&!(document.hasFocus()&&document.activeElement===B.current)&&(B.current.value=null!=T?T:"")},[T]),(0,a.jsx)(o.TextInput,{label:t,readOnly:y,ref:R,error:k.touched&&k.error,styles:w,defaultValue:T,onChange:e=>{A()},onBlur:e=>{null==j||j(e),Z(e)},onClick:e=>{"number"===N.type&&"0"===e.currentTarget.value&&e.currentTarget.select(),null==b||b(e)},onWheel:i.P,rightSectionPointerEvents:"all",rightSection:(0,a.jsx)(s.P,{"aria-label":"Clear input",onClick:()=>{F.setValue(""),B.current&&(B.current.value="")},style:{display:T?void 0:"none"}}),..._,size:h,variant:m,radius:g,mt:v,withAsterisk:f,...N})}));n.Z=h},72940:function(e,n,t){"use strict";t.d(n,{FD:function(){return i},Hn:function(){return a},y4:function(){return r}});let a={headers:{"Content-Type":"application/json"}},i={withCredentials:!0},r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},8260:function(e,n,t){"use strict";t.d(n,{M:function(){return o}});var a=t(72940),i=t(6780),r=t(67732);let o=async e=>{try{let n=await i.default.post("".concat("http://sasthotech.local:5000/api/v1","/admin/doctor"),e,{...a.FD,...a.y4});return{success:!0,data:n.data.data}}catch(e){if(e instanceof r.d7){var n;return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data.message}}return{success:!1,data:"An error occurred"}}}},30331:function(e,n,t){"use strict";function a(e){e.currentTarget.blur(),e.stopPropagation(),setTimeout(()=>{var n;null==e||null===(n=e.currentTarget)||void 0===n||n.focus()},0)}t.d(n,{P:function(){return a}})},74512:function(e){e.exports={imgContainer:"DoctorDetails_imgContainer__59TCI",imgIcon:"DoctorDetails_imgIcon__REvPp"}}},function(e){e.O(0,[1601,2975,3069,6945,1656,9722,4670,9533,1166,7967,3583,4193,4927,630,1414,9175,7402,1744],function(){return e(e.s=97170)}),_N_E=e.O()}]);