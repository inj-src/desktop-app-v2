(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7200],{26072:function(e,t,n){Promise.resolve().then(n.bind(n,49558))},49558:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(68328),i=n(72190),a=n(7203),s=n(57247),o=n(30742),c=n(90660),l=n.n(c);let u=l().mixin({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#fa5252",confirmButtonText:"Yes, delete it!",focusCancel:!0});var d=n(22614),f=n(3741),m=n(32451),p=n(68242),y=n(31204),h=n(89043),v=n(22975),x=n(46557),g=n(44019),j=n(12697),A=n(94131),w=n(4505);function b(){let e;let[t,{open:n,close:c}]=(0,x.q)(!1),[b,T]=(0,w.useState)(),{data:C,isLoading:E,isSuccess:S}=(0,o.A3)(),[k]=(0,o._3)();return e=E?(0,r.jsx)(a.Z,{}):S?(0,s.K)([C.data,"id",e=>({bg:e.loading&&"yellow.1"})],[["Accessory Name","name"],["Price","price"],["Actions",e=>(0,r.jsxs)(d.Group,{children:[(0,r.jsx)(f.A,{variant:"transparent",onClick:()=>{T(e),n()},loading:e.loading,children:(0,r.jsx)(g.Z,{})}),(0,r.jsx)(f.A,{variant:"transparent",onClick:async()=>{if((await u.fire()).isConfirmed)try{await k(e.id).unwrap()}catch(e){console.error(e),l().fire("Error","Error","error")}},loading:e.loading,children:(0,r.jsx)(j.Z,{})})]})]],{layout:"fixed"}):(0,r.jsx)(m.Box,{className:"bg-light p-3 p-md-5",ta:"center",children:"An error Occurred"}),(0,r.jsxs)(m.Box,{className:"bg-light p-3 p-md-5",children:[(0,r.jsxs)(d.Group,{children:[(0,r.jsx)(p.Title,{mr:"auto",children:"Accessories"}),(0,r.jsx)(y.Button,{leftSection:(0,r.jsx)(A.Z,{}),onClick:()=>{T(void 0),n()},children:"Add New Accessory"})]}),(0,r.jsx)(h.X,{bg:"white",p:"lg",radius:"md",shadow:"md",mt:"md",children:e}),(0,r.jsx)(v.u,{opened:t,onClose:c,title:"".concat(b?"Edit":"Add New"," Accessory"),children:(0,r.jsx)(i.Z,{initialValues:b,onQueryStarted:c},null==b?void 0:b.id)})]})}},72190:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(68328),i=n(10713),a=n(31100),s=n(30742),o=n(91793),c=n(76283),l=n(23583),u=n(90660),d=n.n(u),f=n(14193);let m=f.Ry({name:f.Z_().required(o.B),price:f.Rx().min(0).required(o.B)}),p=e=>{var t,n;let{initialValues:o,onValue:u,onQueryStarted:f}=e,[p,{isLoading:y}]=(0,s.xQ)(),[h,{isLoading:v}]=(0,s.mS)();return(0,r.jsx)(l.J9,{validationSchema:m,initialValues:{name:null!==(t=null==o?void 0:o.name)&&void 0!==t?t:"",price:null!==(n=null==o?void 0:o.price)&&void 0!==n?n:""},onSubmit:async(e,t)=>{let{setSubmitting:n,resetForm:r}=t;if(!y&&!v)try{null==f||f(e);let{data:t}=await ((null==o?void 0:o.id)?h({id:o.id,...e}).unwrap():p(e).unwrap());null==u||u(t),r()}catch(e){console.error(e),d().fire("Failed","An unknown error occurred!","error")}finally{n(!1)}},children:(0,r.jsxs)(l.l0,{children:[(0,r.jsx)(i.Z,{name:"name",labelText:"Accessory Name",placeholder:"Type name",withAsterisk:!0,mt:0,"data-autofocus":!0,mb:"md"}),(0,r.jsx)(i.Z,{name:"price",type:"number",labelText:"Price",placeholder:"Type price",withAsterisk:!0,mt:0,mb:"md"}),(0,r.jsx)(a.M,{size:"md",radius:"md",leftSection:(0,r.jsx)(c.Z,{}),children:"Save"})]})})}},7203:function(e,t,n){"use strict";var r=n(68328),i=n(14587);n(4505),t.Z=()=>(0,r.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:600},children:(0,r.jsx)(i.Loader,{color:"teal",variant:"dots"})})},10713:function(e,t,n){"use strict";n.d(t,{E:function(){return f}});var r=n(68328),i=n(30331),a=n(30293),s=n(55911),o=n(87513),c=n(58689),l=n(73626),u=n(23583),d=n(4505);let f={size:"md",variant:"default",radius:"md"},m=(0,a.F)((0,d.forwardRef)(function(e,t){let{labelText:n,labelTextColor:a,size:m=f.size,variant:p=f.variant,radius:y=f.radius,mt:h="md",withAsterisk:v=!1,onChange:x,onBlur:g,onClick:j,readonly:A,styles:w,value:b,...T}=e,C=Object.assign({label:{color:null!=a?a:"black"}},w),[{value:E,onChange:S,onBlur:k,...B},N,Q]=(0,u.U$)(T.name),R=(0,d.useRef)(null),F=(0,c.Yx)(t,R),P=(0,l.y)(()=>{if(R.current){let e;let{type:t,value:n}=R.current;Q.setValue("number"===t?isNaN(e=parseFloat(n))?"":e:n)}},200);return(0,d.useEffect)(()=>{R.current&&R.current.value!==E&&!(document.hasFocus()&&document.activeElement===R.current)&&(R.current.value=null!=E?E:"")},[E]),(0,r.jsx)(s.TextInput,{label:n,readOnly:A,ref:F,error:N.touched&&N.error,styles:C,defaultValue:E,onChange:e=>{P()},onBlur:e=>{null==g||g(e),k(e)},onClick:e=>{"number"===T.type&&"0"===e.currentTarget.value&&e.currentTarget.select(),null==j||j(e)},onWheel:i.P,rightSectionPointerEvents:"all",rightSection:(0,r.jsx)(o.P,{"aria-label":"Clear input",onClick:()=>{Q.setValue(""),R.current&&(R.current.value="")},style:{display:E?void 0:"none"}}),...B,size:m,variant:p,radius:y,mt:h,withAsterisk:v,...T})}));t.Z=m},31100:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(68328),i=n(31204),a=n(23583);function s(e){let{loading:t,disabled:n,...s}=e,{isSubmitting:o}=(0,a.u6)();return(0,r.jsx)(i.Button,{type:"submit",loading:o||t,disabled:o||n,...s})}},57247:function(e,t,n){"use strict";n.d(t,{K:function(){return c},r:function(){return o}});var r=n(68328),i=n(86309),a=n(54632),s=n(52058);let o=(e,t)=>(0,r.jsx)(s.Nx,{children:(0,r.jsx)(s.wn,{children:e.map((e,n)=>(0,r.jsx)(s.c_,{...null==t?void 0:t[n][2],children:e},e))})});function c(e,t,n,c){let[l,u,d]=e;return(0,r.jsx)(i.d,{minWidth:764,...c,children:(0,r.jsxs)(a.i,{...n,children:[o(t.map(e=>{let[t]=e;return t}),t),(0,r.jsx)(a.i.Tbody,{children:l.map((e,n)=>(0,r.jsx)(a.i.Tr,{...d instanceof Function?d(e):d,children:t.map(t=>{let[n,i,a,o]=t;return(0,r.jsx)(s.ge,{...o instanceof Function?o(e):o,children:i instanceof Function?i(e):e[i]},n)})},u instanceof Function?u(e):e[u]))})]})})}},72940:function(e,t,n){"use strict";n.d(t,{FD:function(){return i},Hn:function(){return r},y4:function(){return a}});let r={headers:{"Content-Type":"application/json"}},i={withCredentials:!0},a={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},30742:function(e,t,n){"use strict";n.d(t,{A3:function(){return s},_3:function(){return l},mS:function(){return c},xQ:function(){return o}});var r=n(78101),i=n(40085);let a=r.g.injectEndpoints({endpoints:e=>({getAccessories:e.query({query:()=>({url:"/admin/accessory"}),keepUnusedDataFor:86400,transformResponse(e){try{var t;if(!Array.isArray(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.items))throw Error("ERR_PARSE");return e.data.items.sort((e,t)=>e.name.localeCompare(t.name)),e.data=e.data.items,e}catch(e){return console.error(e),[]}}}),createAccessory:e.mutation({query:e=>({url:"/admin/accessory",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,s=(0,i.x0)(),o=n(a.util.updateQueryData("getAccessories",void 0,t=>{t.data.push({id:s,...e,loading:!0})}));try{let{data:e}=await r;n(a.util.updateQueryData("getAccessories",void 0,t=>{let n=t.data.findIndex(e=>e.id===s);n>=0&&(t.data[n]=e.data)}))}catch(e){o.undo()}}}),updateAccessory:e.mutation({query:e=>{let{id:t,name:n,price:r}=e;return{url:"/admin/accessory/".concat(t),method:"PATCH",body:{name:n,price:r}}},async onQueryStarted(e,t){let{id:n,name:r,price:i}=e,{dispatch:s,queryFulfilled:o}=t,c=s(a.util.updateQueryData("getAccessories",void 0,e=>{let t=e.data.find(e=>e.id===n);t&&(void 0!==r&&(t.name=r),void 0!==i&&(t.price=i),t.loading=!0)}));try{await o,s(a.util.updateQueryData("getAccessories",void 0,e=>{let t=e.data.find(e=>e.id===n);t&&delete t.loading}))}catch(e){c.undo()}}}),deleteAccessory:e.mutation({query:e=>({url:"/admin/accessory/".concat(e),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,i=n(a.util.updateQueryData("getAccessories",void 0,t=>{let n=t.data.find(t=>t.id===e);n&&(n.loading=!0)}));try{await r,n(a.util.updateQueryData("getAccessories",void 0,t=>{let n=t.data.findIndex(t=>t.id===e);n>=0&&t.data.splice(n,1)}))}catch(e){i.undo()}}}),getSingleAccessory:e.query({query:e=>({url:"/admin/accessory/".concat(e)})})})}),{useGetAccessoriesQuery:s,useCreateAccessoryMutation:o,useUpdateAccessoryMutation:c,useDeleteAccessoryMutation:l,useGetSingleAccessoryQuery:u}=a},78101:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var r=n(49854),i=n(68240),a=n(94183),s=n(28317);let o=(0,i.LC)({baseQuery:(0,a.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async n=>{let i="string"==typeof e?e:e.url;return i.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,s.t8)(i,await n.clone().json().catch(()=>null),(0,r.x)()),n}).catch(async n=>{if(n instanceof TypeError){let n="string"==typeof e?e:e.url;if(!n.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,s.U2)(n,(0,r.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw n})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,t,n){"use strict";let r;n.d(t,{d:function(){return l},x:function(){return c}});var i=n(72940),a=n(6780),s=n(67732),o=n(28317);function c(){return r||(r=(0,o.MT)("cached-responses-store","cached-responses")),r}async function l(e,t){try{let n=await a.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...i.FD});return await (0,o.t8)(e,n.data,c()),n.data}catch(t){if(t instanceof s.d7&&[s.d7.ERR_NETWORK,s.d7.ETIMEDOUT].includes(t.code)){let t=await (0,o.U2)(e,c());if(t)return t}throw t instanceof s.d7&&t.response&&401===t.response.status||console.error(t),t}}},30331:function(e,t,n){"use strict";function r(e){e.currentTarget.blur(),e.stopPropagation(),setTimeout(()=>{var t;null==e||null===(t=e.currentTarget)||void 0===t||t.focus()},0)}n.d(t,{P:function(){return r}})},91793:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});let r=e=>{let{label:t,path:n}=e;return"".concat(null!=t?t:n.split(".").map(e=>e?e[0].toUpperCase()+e.slice(1):"").join(" ")," is required")}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,966,12,7538,3583,4193,2118,9175,7402,1744],function(){return e(e.s=26072)}),_N_E=e.O()}]);