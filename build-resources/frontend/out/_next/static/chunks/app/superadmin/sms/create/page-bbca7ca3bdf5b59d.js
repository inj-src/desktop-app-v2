(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2794],{66498:function(e,t,s){Promise.resolve().then(s.bind(s,52583))},52583:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(68328),r=s(4505),n=s(48604),i=s(22041),l=s(22614),o=s(29663),d=s(41224),c=s(31204),u=s(59406),m=s(54481),p=s(3591),h=s(65038),x=s(72071),f=s(43410),g=s(91611),y=s(1683),j=s(31151),v=s(24049);let b=v.Ry({name:v.Z_().min(3,"Package name must be at least 3 characters").max(50,"Package name must not exceed 50 characters"),totalSMS:v.Z_().transform(e=>parseInt(e,10)).refine(e=>!isNaN(e)&&e>0,{message:"SMS count must be a positive number"}).refine(e=>e<=1e6,{message:"SMS count cannot exceed 1,000,000"}),price:v.Z_().transform(e=>parseFloat(e)).refine(e=>!isNaN(e)&&e>0,{message:"Price must be a positive number"}).refine(e=>e<=1e5,{message:"Price cannot exceed 100,000"}),validityDays:v.Z_().min(1,"Please select a validityDays period"),discount:v.Z_().transform(e=>parseFloat(e)).refine(e=>!isNaN(e)&&e>=0,{message:"Discount must be a positive number"}).optional().default("0"),discountType:v.Km(["amount","percentage"]).optional().default("amount"),isPopular:v.O7().optional().default(!1),features:v.IX(v.Z_()).optional()});var S=s(12450);let T={name:"",totalSMS:"",price:"",validityDays:"",discount:"",discountType:"",isPopular:!0,features:[]};var k=()=>{let[e,t]=(0,r.useState)(!1),[s,v]=(0,r.useState)(null),[k,C]=(0,r.useState)(null),[w]=(0,y.aH)(),P=(0,S.useRouter)(),[z,M]=(0,r.useState)({name:"Business",totalSMS:"",price:"",validityDays:"",discount:"0",discountType:"amount",features:[]}),A=()=>{null==k||k.reset(T),M({name:"",totalSMS:"",price:"",validityDays:"",discount:"0",discountType:"amount",features:[]})},D=async e=>{t(!0),await new Promise(e=>setTimeout(e,1500));let s={id:Date.now(),name:e.name,totalSMS:parseInt(e.totalSMS),price:parseFloat(e.price),validityDays:e.validityDays,features:e.features,isPopular:e.isPopular||!1},a={name:e.name,totalSMS:parseInt(e.totalSMS),price:parseFloat(e.price),discount:parseFloat(e.discount),discountType:e.discountType,validityDays:parseInt(e.validityDays),features:e.features},r=j.toast.loading("Packing is creating...");try{let e=await w(a).unwrap();Object.keys(e).length>0?(j.toast.success(e.message,{id:r}),v(s)):j.toast.error("Failed to create Package",{id:r})}catch(e){j.toast.error("Failed to create Package",{id:r})}finally{t(!1),A()}};return s?(0,a.jsx)("div",{style:{padding:"2rem",backgroundColor:"#f4f4f4",minHeight:"100vh"},children:(0,a.jsxs)(n.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,style:{backgroundColor:"#fff",maxWidth:600,margin:"0 auto"},children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,a.jsx)(u.Z,{size:60,color:"green",style:{margin:"0 auto 1rem"}}),(0,a.jsx)(i.Text,{size:"xl",fw:600,c:"#2c2e33",mb:"sm",children:"Package Created Successfully!"}),(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",children:"Your SMS package has been created and is ready to use."})]}),(0,a.jsxs)(n.Z,{withBorder:!0,padding:"lg",style:{backgroundColor:"#f8f9fa"},children:[(0,a.jsx)(l.Group,{justify:"space-between",mb:"md",children:(0,a.jsx)(i.Text,{size:"lg",fw:600,children:null==s?void 0:s.name})}),(0,a.jsxs)(o.Grid,{gutter:"sm",mb:"md",children:[(0,a.jsxs)(o.Grid.Col,{span:6,children:[(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",children:"SMS Count"}),(0,a.jsx)(i.Text,{size:"lg",fw:600,children:null==s?void 0:s.totalSMS.toLocaleString()})]}),(0,a.jsxs)(o.Grid.Col,{span:6,children:[(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",children:"Price"}),(0,a.jsxs)(i.Text,{size:"lg",fw:600,children:["৳",null==s?void 0:s.price]})]}),(0,a.jsxs)(o.Grid.Col,{span:6,children:[(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",children:"validityDays"}),(0,a.jsx)(i.Text,{size:"lg",fw:600,children:null==s?void 0:s.validityDays})]}),(0,a.jsxs)(o.Grid.Col,{span:6,children:[(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",children:"Cost per SMS"}),(0,a.jsxs)(i.Text,{size:"lg",fw:600,children:["৳",((null==s?void 0:s.price)/(null==s?void 0:s.totalSMS)).toFixed(3)]})]})]}),(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",mb:"xs",children:"Features:"}),(0,a.jsx)(d.Stack,{gap:"xs",children:null==s?void 0:s.features.map((e,t)=>(0,a.jsxs)(l.Group,{gap:"xs",children:[(0,a.jsx)(u.Z,{size:16,color:"green"}),(0,a.jsx)(i.Text,{size:"sm",children:e})]},t))})]}),(0,a.jsxs)(l.Group,{justify:"center",mt:"xl",children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>v(null),children:"Create Another Package"}),(0,a.jsx)(c.Button,{onClick:()=>P.push("/superadmin/sms"),children:"View All Packages"})]})]})}):(0,a.jsxs)("div",{style:{padding:"2rem",backgroundColor:"#f4f4f4",minHeight:"100vh"},children:[(0,a.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,a.jsx)(i.Text,{size:"xl",fw:600,c:"#2c2e33",mb:"xs",children:"Create New SMS Package"}),(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",children:"Design and configure a new SMS package for your customers"})]}),(0,a.jsx)(p.Z,{onSubmit:D,resolver:(0,g.F)(b),defaultValues:T,onMethods:e=>{C(e);let t=e.watch((e,t)=>{let{name:s}=t;"features"===s&&M(t=>({...t,features:e.features||[]}))});return()=>t.unsubscribe()},children:(0,a.jsxs)(o.Grid,{gutter:"md",children:[(0,a.jsx)(o.Grid.Col,{span:{base:12,md:8},children:(0,a.jsxs)(n.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,style:{backgroundColor:"#fff"},children:[(0,a.jsx)(i.Text,{size:"lg",fw:600,mb:"md",c:"#2c2e33",children:"Package Details"}),(0,a.jsxs)(d.Stack,{gap:"md",children:[(0,a.jsx)(h.Z,{name:"name",label:"Package Name",placeholder:"E.g. Business Pack, Starter Pack",handleChange:e=>{M(t=>({...t,name:e}))}}),(0,a.jsxs)(o.Grid,{gutter:"md",children:[(0,a.jsx)(o.Grid.Col,{span:6,children:(0,a.jsx)(h.Z,{name:"totalSMS",label:"SMS Count",placeholder:"Enter SMS count",handleChange:e=>{M(t=>({...t,totalSMS:e}))}})}),(0,a.jsx)(o.Grid.Col,{span:6,children:(0,a.jsx)(h.Z,{name:"price",label:"Price (৳)",placeholder:"Enter price",handleChange:e=>{M(t=>({...t,price:e}))}})}),(0,a.jsx)(o.Grid.Col,{span:6,children:(0,a.jsx)(h.Z,{name:"discount",label:"Discount",placeholder:"Enter Discount",handleChange:e=>{M(t=>({...t,discount:e}))}})}),(0,a.jsx)(o.Grid.Col,{span:6,style:{marginTop:9},children:(0,a.jsx)(x.Z,{name:"discountType",label:"Discount Type",placeholder:"Enter Discount Type",handleChange:e=>{M(t=>({...t,discountType:e}))},options:[{value:"amount",label:"Amount"},{value:"percentage",label:"Percentage"}]})})]}),(0,a.jsx)(x.Z,{name:"validityDays",label:"validity Period",options:[{value:"7",label:"7 Days"},{value:"15",label:"15 Days"},{value:"30",label:"30 Days"},{value:"45",label:"45 Days"},{value:"60",label:"60 Days"},{value:"90",label:"90 Days"}],placeholder:"Select validity period",handleChange:e=>{M(t=>({...t,validityDays:e}))}})]})]})}),(0,a.jsx)(o.Grid.Col,{span:{base:12,md:4},children:(0,a.jsxs)(n.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,style:{backgroundColor:"#fff"},children:[(0,a.jsx)(i.Text,{size:"lg",fw:600,mb:"md",c:"#2c2e33",children:"Package Preview"}),(0,a.jsxs)(n.Z,{withBorder:!0,padding:"md",style:{backgroundColor:"#f8f9fa"},children:[(0,a.jsx)(l.Group,{justify:"space-between",mb:"sm",children:(0,a.jsx)(i.Text,{fw:600,children:z.name||"Package Name"})}),(0,a.jsx)(i.Text,{size:"xl",fw:700,c:"#2c2e33",children:parseInt(z.totalSMS||"0").toLocaleString()}),(0,a.jsx)(i.Text,{size:"sm",c:"#63707A",mb:"sm",children:"SMS Messages"}),(0,a.jsxs)(i.Text,{size:"lg",fw:600,c:"#1c7ed6",children:["৳",(()=>{let e=parseFloat(z.price)||0,t=parseFloat(z.discount)||0;return 0===t?e:"percentage"===z.discountType?e-e*t/100:e-t})().toFixed(2)]}),parseFloat(z.discount||"0")>0&&(0,a.jsxs)(i.Text,{size:"xs",c:"#63707A",td:"line-through",children:["Original: ৳",parseFloat(z.price||"0").toFixed(2)]}),(0,a.jsxs)(i.Text,{size:"xs",c:"#63707A",mb:"sm",children:["৳",(()=>{let e=parseInt(z.totalSMS)||0,t=parseFloat(z.price)||0;return e>0&&t>0?(t/e).toFixed(3):"0.000"})()," per SMS"]}),(0,a.jsxs)(i.Text,{size:"sm",c:"#63707A",children:["Valid for: ",z.validityDays||"Not selected"]}),z.features&&z.features.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Text,{size:"sm",fw:500,mt:"md",mb:"xs",children:"Features:"}),(0,a.jsx)(d.Stack,{gap:"xs",children:z.features.map((e,t)=>(0,a.jsxs)(l.Group,{gap:"xs",children:[(0,a.jsx)(u.Z,{size:14,color:"green"}),(0,a.jsx)(i.Text,{size:"xs",children:e})]},t))})]})]})]})}),(0,a.jsx)(o.Grid.Col,{span:12,children:(0,a.jsx)(f.Z,{name:"features",label:"Package Features",placeholder:"Enter a feature (e.g., 24/7 support)",emptyMessage:"No features added yet. Add some features to make your package more attractive."})}),(0,a.jsx)(o.Grid.Col,{span:12,children:(0,a.jsx)(n.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,style:{backgroundColor:"#fff"},children:(0,a.jsxs)(l.Group,{justify:"space-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(i.Text,{size:"xs",c:"#63707A",children:"Review all details before submitting"})}),(0,a.jsxs)(l.Group,{children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:A,type:"button",children:"Reset Form"}),(0,a.jsx)(c.Button,{type:"submit",loading:e,leftSection:(0,a.jsx)(m.Z,{size:16}),children:"Create Package"})]})]})})})]})})]})}},72940:function(e,t,s){"use strict";s.d(t,{FD:function(){return r},Hn:function(){return a},y4:function(){return n}});let a={headers:{"Content-Type":"application/json"}},r={withCredentials:!0},n={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},1683:function(e,t,s){"use strict";s.d(t,{AB:function(){return o},Er:function(){return r},Qs:function(){return l},aH:function(){return a},iE:function(){return i},tT:function(){return n}});let{useCreateSMSPlanMutation:a,useGetAllPackageQuery:r,useDeleteSMSPlanMutation:n,useUpdateSMSPlanMutation:i,useApproveSMSRequestMutation:l,useGetSMSPackageRequestQuery:o}=s(78101).g.injectEndpoints({endpoints:e=>({createSMSPlan:e.mutation({query:e=>({url:"/sms/package/superadmin",method:"POST",body:e}),invalidatesTags:["sms"]}),updateSMSPlan:e.mutation({query:e=>{let{id:t,body:s}=e;return{url:"/sms/package/superadmin/".concat(t),method:"PATCH",body:s}},invalidatesTags:["sms"]}),approveSMSRequest:e.mutation({query:e=>{let{id:t}=e;return{url:"/sms/package/superadmin/approve-package/".concat(t),method:"PATCH"}},invalidatesTags:["sms"]}),deleteSMSPlan:e.mutation({query:e=>({url:"/sms/package/superadmin/".concat(e),method:"DELETE"}),invalidatesTags:["sms"]}),getAllPackage:e.query({query:()=>({url:"/sms/package/superadmin",method:"GET"}),transformResponse:e=>(null==e?void 0:e.data)||e,providesTags:["sms"]}),getSMSPackageRequest:e.query({query:()=>({url:"/sms/package/superadmin/package-requests",method:"GET"}),transformResponse:e=>(null==e?void 0:e.data)||e,providesTags:["sms"]})})})},78101:function(e,t,s){"use strict";s.d(t,{g:function(){return l}});var a=s(49854),r=s(68240),n=s(94183),i=s(28317);let l=(0,r.LC)({baseQuery:(0,n.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,t)=>fetch(e,t).then(async s=>{let r="string"==typeof e?e:e.url;return r.includes("?")||(null==t?void 0:t.body)||"string"!=typeof e&&e.body||await (0,i.t8)(r,await s.clone().json().catch(()=>null),(0,a.x)()),s}).catch(async s=>{if(s instanceof TypeError){let s="string"==typeof e?e:e.url;if(!s.includes("?")&&!(null==t?void 0:t.body)&&!("string"!=typeof e&&e.body)){let e=await (0,i.U2)(s,(0,a.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw s})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},43410:function(e,t,s){"use strict";var a=s(68328),r=s(48604),n=s(22041),i=s(22614),l=s(55911),o=s(31204),d=s(41224),c=s(3741),u=s(9654),m=s(59406),p=s(12697),h=s(4505),x=s(80948);t.Z=e=>{let{name:t,label:s="Package Features",placeholder:f="Enter a feature (e.g., 24/7 support)",emptyMessage:g="No features added yet. Add some features to make your package more attractive.",cardProps:y={shadow:"sm",padding:"lg",radius:"md",withBorder:!0,style:{backgroundColor:"#fff"}}}=e,{control:j,setValue:v,getValues:b,formState:{errors:S}}=(0,x.Gc)(),[T,k]=(0,h.useState)(""),C=()=>{if(!T.trim())return;let e=b(t)||[];v(t,[...e,T.trim()]),k("")},w=e=>{let s=(b(t)||[]).filter((t,s)=>s!==e);v(t,s)};return(0,a.jsx)(x.Qr,{control:j,name:t,defaultValue:[],render:e=>{var h;let{field:x}=e;return(0,a.jsxs)(r.Z,{...y,children:[(0,a.jsx)(n.Text,{size:"lg",fw:600,mb:"md",c:"#2c2e33",children:s}),(0,a.jsxs)(i.Group,{mb:"md",children:[(0,a.jsx)(l.TextInput,{placeholder:f,value:T,onChange:e=>k(e.target.value),style:{flex:1},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),C())}}),(0,a.jsx)(o.Button,{leftSection:(0,a.jsx)(u.Z,{size:16}),onClick:C,disabled:!T.trim(),children:"Add Feature"})]}),S[t]&&(0,a.jsx)(n.Text,{size:"sm",c:"red",mb:"sm",children:(null===(h=S[t])||void 0===h?void 0:h.message)||"This field is required"}),(0,a.jsx)(d.Stack,{gap:"xs",children:(x.value||[]).map((e,t)=>(0,a.jsxs)(i.Group,{justify:"space-between",p:"sm",style:{backgroundColor:"#f8f9fa",borderRadius:"4px"},children:[(0,a.jsxs)(i.Group,{children:[(0,a.jsx)(m.Z,{size:16,color:"green"}),(0,a.jsx)(n.Text,{size:"sm",children:e})]}),(0,a.jsx)(c.A,{color:"red",variant:"light",onClick:()=>w(t),children:(0,a.jsx)(p.Z,{size:16})})]},t))}),(!x.value||0===x.value.length)&&(0,a.jsx)(n.Text,{size:"sm",c:"#63707A",ta:"center",py:"xl",children:g})]})}})}},3591:function(e,t,s){"use strict";var a=s(68328),r=s(4505),n=s(80948);t.Z=e=>{let{children:t,onSubmit:s,resolver:i,defaultValues:l,onMethods:o}=e,d={};i&&(d.resolver=i),l&&(d.defaultValues=l);let c=(0,n.cI)(d),{handleSubmit:u,reset:m,formState:{isSubmitSuccessful:p}}=c;return(0,r.useEffect)(()=>{o&&o(c)},[c,o]),(0,r.useEffect)(()=>{p&&m(l)},[p,m,l]),(0,a.jsx)(n.RV,{...c,children:(0,a.jsx)("form",{onSubmit:u(s),children:t})})}},65038:function(e,t,s){"use strict";var a=s(68328),r=s(55911),n=s(4505),i=s(80948);let l=(0,n.memo)(function(e){let{type:t="text",name:s,placeholder:l,size:o="sm",label:d,required:c,handleChange:u,defaultValue:m,disabled:p=!1}=e,{control:h,setValue:x}=(0,i.Gc)();return(0,n.useEffect)(()=>{m&&x(s,m)},[m,s,x]),(0,a.jsx)(i.Qr,{control:h,name:s,render:e=>{let{field:n,fieldState:{error:i}}=e;return(0,a.jsx)(r.TextInput,{...n,label:(0,a.jsxs)("span",{children:[d,c&&(0,a.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),type:t,size:o,onChange:e=>{n.onChange(e.target.value),null==u||u(e.target.value)},error:null==i?void 0:i.message,placeholder:l,disabled:p,onFocus:e=>{0==Number(e.currentTarget.value)&&x(s,"")}})}})});t.Z=l},72071:function(e,t,s){"use strict";var a=s(68328),r=s(4505),n=s(87967),i=s(80948);let l=(0,r.memo)(function(e){let{name:t,size:s="sm",label:l,placeholder:o,required:d=!1,options:c,handleChange:u,defaultValue:m,disabled:p=!1}=e,{control:h}=(0,i.Gc)(),{isSubmitSuccessful:x}=(0,i.cl)({control:h,name:t,exact:!0}),f=e=>{null==u||u(e)};return(0,a.jsx)(i.Qr,{control:h,name:t,defaultValue:m,render:e=>{let{field:t,fieldState:{error:a}}=e;return(0,r.createElement)(n.P,{...t,key:x?"reset":"normal",label:l,placeholder:o,onChange:e=>{t.onChange(e),f(e)},data:c,size:s,searchable:!0,required:d,value:t.value,error:null==a?void 0:a.message,disabled:p,clearable:!0})}})});t.Z=l},49854:function(e,t,s){"use strict";let a;s.d(t,{d:function(){return d},x:function(){return o}});var r=s(72940),n=s(6780),i=s(67732),l=s(28317);function o(){return a||(a=(0,l.MT)("cached-responses-store","cached-responses")),a}async function d(e,t){try{let s=await n.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:t,...r.FD});return await (0,l.t8)(e,s.data,o()),s.data}catch(t){if(t instanceof i.d7&&[i.d7.ERR_NETWORK,i.d7.ETIMEDOUT].includes(t.code)){let t=await (0,l.U2)(e,o());if(t)return t}throw t instanceof i.d7&&t.response&&401===t.response.status||console.error(t),t}}}},function(e){e.O(0,[1601,3069,6945,3852,1656,9722,4670,9258,9533,966,1166,7967,1493,7125,6004,7974,8965,9175,7402,1744],function(){return e(e.s=66498)}),_N_E=e.O()}]);