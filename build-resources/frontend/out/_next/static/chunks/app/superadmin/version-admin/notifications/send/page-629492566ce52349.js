(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6463],{8873:function(e,i,t){Promise.resolve().then(t.bind(t,23338))},23338:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return C}});var a=t(68328),n=t(34703),s=t(24774),o=t(34473),l=t(41224),r=t(22614),d=t(3741),c=t(68242),u=t(22041),v=t(29663),m=t(89043),p=t(87967),h=t(55911),f=t(57956),g=t(72375),E=t(48604),A=t(31204),b=t(23366),T=t(22115),S=t(63998),x=t(9329),y=t(12450),I=t(4505);let j=[{value:"VERSION_UPDATE",label:"Version Update"},{value:"VERSION_MANDATORY",label:"Mandatory Version Update"},{value:"SESSION_REVOKED",label:"Session Revoked"},{value:"SESSION_EXPIRED",label:"Session Expired"},{value:"DEVICE_BLOCKED",label:"Device Blocked"},{value:"DEVICE_UNBLOCKED",label:"Device Unblocked"},{value:"DEVICE_TRUST_ADDED",label:"Device Trusted"},{value:"DEVICE_TRUST_REMOVED",label:"Device Trust Removed"},{value:"NEW_DEVICE_LOGIN",label:"New Device Login"},{value:"SUSPICIOUS_LOGIN",label:"Suspicious Login Attempt"},{value:"PAYMENT_LATE",label:"Payment Overdue"},{value:"PAYMENT_REMINDER",label:"Payment Reminder"},{value:"PAYMENT_RECEIVED",label:"Payment Received"},{value:"PAYMENT_FAILED",label:"Payment Failed"},{value:"SALARY_PROCESSED",label:"Salary Processed"},{value:"SALARY_ADVANCE_APPROVED",label:"Salary Advance Approved"},{value:"SALARY_ADVANCE_REJECTED",label:"Salary Advance Rejected"},{value:"BONUS_AWARDED",label:"Bonus Awarded"},{value:"DIAGNOSTIC_BLOCKED",label:"Diagnostic Blocked"},{value:"DIAGNOSTIC_UNBLOCKED",label:"Diagnostic Unblocked"},{value:"DIAGNOSTIC_SUSPENDED",label:"Diagnostic Suspended"},{value:"DIAGNOSTIC_ACTIVATED",label:"Diagnostic Activated"},{value:"LEAVE_APPROVED",label:"Leave Approved"},{value:"LEAVE_REJECTED",label:"Leave Rejected"},{value:"ATTENDANCE_MARKED",label:"Attendance Marked"},{value:"SHIFT_CHANGED",label:"Shift Changed"},{value:"OVERTIME_APPROVED",label:"Overtime Approved"},{value:"PROMOTIONAL_OFFER",label:"Promotional Offer"},{value:"SEASONAL_WISHES",label:"Seasonal Wishes"},{value:"THANKSGIVING",label:"Thanksgiving Message"},{value:"ANNOUNCEMENT",label:"General Announcement"},{value:"NEWS_UPDATE",label:"News Update"},{value:"SYSTEM_MAINTENANCE",label:"System Maintenance"},{value:"SYSTEM_ALERT",label:"System Alert"},{value:"BACKUP_COMPLETED",label:"Backup Completed"},{value:"BACKUP_FAILED",label:"Backup Failed"},{value:"CUSTOM",label:"Custom Notification"}],D=[{value:"SECURITY",label:"Security"},{value:"FINANCIAL",label:"Financial"},{value:"SYSTEM",label:"System"},{value:"HR",label:"Human Resources"},{value:"PROMOTIONAL",label:"Promotional"},{value:"ADMINISTRATIVE",label:"Administrative"},{value:"OPERATIONAL",label:"Operational"}],N=[{value:"LOW",label:"Low Priority"},{value:"MEDIUM",label:"Medium Priority"},{value:"HIGH",label:"High Priority"},{value:"URGENT",label:"Urgent"}];function C(){let e=(0,y.useRouter)(),[i,{isLoading:t}]=(0,s.s8)(),[C,O]=(0,I.useState)({type:"ANNOUNCEMENT",category:"ADMINISTRATIVE",title:"",message:"",priority:"MEDIUM",shortText:"",isBroadcast:!1}),[R,_]=(0,I.useState)(null),[P,U]=(0,I.useState)(null),w=async t=>{if(t.preventDefault(),!C.title||!C.message){T.N9.show({title:"Validation Error",message:"Title and message are required",color:"red"});return}if(!C.isBroadcast&&!C.diagnosticId&&!C.userId&&!C.employeeId&&!C.versionAdminId){T.N9.show({title:"Validation Error",message:"Please select at least one recipient or enable broadcast mode",color:"red"});return}try{let t={...C,...R&&{scheduledFor:R.toISOString()},...P&&{expiresAt:P.toISOString()}};await i(t).unwrap(),T.N9.show({title:"Success",message:"Notification sent successfully",color:"green"}),e.push("/superadmin/version-admin/notifications")}catch(e){var a;T.N9.show({title:"Error",message:(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to send notification",color:"red"})}};return(0,a.jsxs)(o.Container,{fluid:!0,children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)(l.Stack,{gap:"lg",children:[(0,a.jsxs)(r.Group,{children:[(0,a.jsx)(d.A,{variant:"subtle",onClick:()=>e.push("/superadmin/version-admin/notifications"),children:(0,a.jsx)(S.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Title,{order:2,children:"Send Notification"}),(0,a.jsx)(u.Text,{size:"sm",c:"dimmed",mt:4,children:"Create and send notifications to users or diagnostics"})]})]}),(0,a.jsx)("form",{onSubmit:w,children:(0,a.jsxs)(v.Grid,{children:[(0,a.jsx)(v.Grid.Col,{span:{base:12,md:8},children:(0,a.jsxs)(l.Stack,{gap:"md",children:[(0,a.jsx)(m.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:(0,a.jsxs)(l.Stack,{gap:"md",children:[(0,a.jsx)(c.Title,{order:4,children:"Notification Details"}),(0,a.jsx)(p.P,{label:"Type",placeholder:"Select notification type",data:j,value:C.type,onChange:e=>O({...C,type:e}),required:!0,searchable:!0}),(0,a.jsx)(p.P,{label:"Category",placeholder:"Select category",data:D,value:C.category,onChange:e=>O({...C,category:e}),required:!0}),(0,a.jsx)(p.P,{label:"Priority",placeholder:"Select priority",data:N,value:C.priority,onChange:e=>O({...C,priority:e}),required:!0}),(0,a.jsx)(h.TextInput,{label:"Title",placeholder:"Enter notification title",value:C.title,onChange:e=>O({...C,title:e.target.value}),required:!0}),(0,a.jsx)(f.g,{label:"Message",placeholder:"Enter notification message",value:C.message,onChange:e=>O({...C,message:e.target.value}),minRows:4,required:!0}),(0,a.jsx)(h.TextInput,{label:"Short Text (Optional)",placeholder:"Brief preview text",value:C.shortText||"",onChange:e=>O({...C,shortText:e.target.value})})]})}),(0,a.jsx)(m.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:(0,a.jsxs)(l.Stack,{gap:"md",children:[(0,a.jsx)(c.Title,{order:4,children:"Action Button (Optional)"}),(0,a.jsx)(h.TextInput,{label:"Action URL",placeholder:"e.g., /billing/pay?invoice=123",value:C.actionUrl||"",onChange:e=>O({...C,actionUrl:e.target.value})}),(0,a.jsx)(h.TextInput,{label:"Action Label",placeholder:"e.g., Pay Now, View Details",value:C.actionLabel||"",onChange:e=>O({...C,actionLabel:e.target.value})}),(0,a.jsx)(h.TextInput,{label:"Image URL (Optional)",placeholder:"https://example.com/image.jpg",value:C.imageUrl||"",onChange:e=>O({...C,imageUrl:e.target.value})})]})})]})}),(0,a.jsx)(v.Grid.Col,{span:{base:12,md:4},children:(0,a.jsxs)(l.Stack,{gap:"md",children:[(0,a.jsx)(m.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:(0,a.jsxs)(l.Stack,{gap:"md",children:[(0,a.jsx)(c.Title,{order:4,children:"Recipients"}),(0,a.jsx)(g.X,{label:"Broadcast to all users",checked:C.isBroadcast,onChange:e=>O({...C,isBroadcast:e.currentTarget.checked})}),!C.isBroadcast&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.TextInput,{label:"Diagnostic ID",placeholder:"Enter diagnostic ID",value:C.diagnosticId||"",onChange:e=>O({...C,diagnosticId:e.target.value}),description:"Send to specific diagnostic center"}),(0,a.jsx)(h.TextInput,{label:"User ID",placeholder:"Enter user ID",value:C.userId||"",onChange:e=>O({...C,userId:e.target.value}),description:"Send to specific user"}),(0,a.jsx)(h.TextInput,{label:"Employee ID",placeholder:"Enter employee ID",value:C.employeeId||"",onChange:e=>O({...C,employeeId:e.target.value}),description:"Send to specific employee"}),(0,a.jsx)(h.TextInput,{label:"Version Admin ID",placeholder:"Enter version admin ID",value:C.versionAdminId||"",onChange:e=>O({...C,versionAdminId:e.target.value}),description:"Send to specific admin"})]})]})}),(0,a.jsx)(m.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:(0,a.jsxs)(l.Stack,{gap:"md",children:[(0,a.jsx)(c.Title,{order:4,children:"Scheduling (Optional)"}),(0,a.jsx)(b.x,{label:"Schedule For",placeholder:"Select date and time",value:R,onChange:_,clearable:!0,description:"Send notification at specific time"}),(0,a.jsx)(b.x,{label:"Expires At",placeholder:"Select expiry date",value:P,onChange:U,clearable:!0,description:"Hide notification after this date"})]})}),(0,a.jsx)(E.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,a.jsx)(l.Stack,{gap:"sm",children:(0,a.jsxs)(r.Group,{justify:"space-between",children:[(0,a.jsx)(A.Button,{variant:"default",onClick:()=>e.push("/superadmin/version-admin/notifications"),children:"Cancel"}),(0,a.jsx)(A.Button,{type:"submit",leftSection:(0,a.jsx)(x.Z,{size:16}),loading:t,children:"Send Notification"})]})})})]})})]})})]})]})}},34703:function(e,i,t){"use strict";t.d(i,{Z:function(){return p}});var a=t(68328),n=t(13342),s=t(12450),o=t(74556),l=t(56959),r=t(74625),d=t(71140),c=t(91024),u=t(31662),v=t(25539),m=t(39870);function p(){let e=(0,s.useRouter)(),i=(0,s.usePathname)();return(0,a.jsx)(n.m,{value:i.includes("/dashboard")?"dashboard":i.includes("/services")?"services":i.includes("/versions")?"versions":i.includes("/hospitals")?"hospitals":i.includes("/logs")?"logs":i.includes("/notifications")?"notifications":i.includes("/devices")?"devices":i.includes("/sessions")?"sessions":"dashboard",onChange:i=>{i&&e.push("/superadmin/version-admin/".concat(i))},mb:"lg",children:(0,a.jsxs)(n.m.List,{children:[(0,a.jsx)(n.m.Tab,{value:"dashboard",leftSection:(0,a.jsx)(o.Z,{size:16}),children:"Dashboard"}),(0,a.jsx)(n.m.Tab,{value:"services",leftSection:(0,a.jsx)(l.Z,{size:16}),children:"Services"}),(0,a.jsx)(n.m.Tab,{value:"versions",leftSection:(0,a.jsx)(r.Z,{size:16}),children:"Versions"}),(0,a.jsx)(n.m.Tab,{value:"hospitals",leftSection:(0,a.jsx)(d.Z,{size:16}),children:"Hospitals"}),(0,a.jsx)(n.m.Tab,{value:"logs",leftSection:(0,a.jsx)(c.Z,{size:16}),children:"Update Logs"}),(0,a.jsx)(n.m.Tab,{value:"notifications",leftSection:(0,a.jsx)(u.Z,{size:16}),children:"Notifications"}),(0,a.jsx)(n.m.Tab,{value:"sessions",leftSection:(0,a.jsx)(v.Z,{size:16}),children:"Sessions"}),(0,a.jsx)(n.m.Tab,{value:"devices",leftSection:(0,a.jsx)(m.Z,{size:16}),children:"Devices"})]})})}},72940:function(e,i,t){"use strict";t.d(i,{FD:function(){return n},Hn:function(){return a},y4:function(){return s}});let a={headers:{"Content-Type":"application/json"}},n={withCredentials:!0},s={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},24774:function(e,i,t){"use strict";t.d(i,{AI:function(){return c},JY:function(){return d},MQ:function(){return a},iU:function(){return o},j6:function(){return r},s8:function(){return l},sJ:function(){return u}});let{useGetAllNotificationsQuery:a,useGetNotificationsByDiagnosticQuery:n,useGetNotificationQuery:s,useGetNotificationStatsQuery:o,useCreateNotificationMutation:l,useMarkNotificationAsReadMutation:r,useMarkNotificationAsUnreadMutation:d,useRevokeNotificationMutation:c,useDeleteNotificationMutation:u}=t(78101).g.injectEndpoints({endpoints:e=>({getAllNotifications:e.query({query:e=>({url:"/version-admin/notifications",method:"GET",params:e||{limit:50,offset:0}}),providesTags:["versionAdmin-notifications"]}),getNotificationsByDiagnostic:e.query({query:e=>{let{diagnosticId:i,params:t}=e;return{url:"/version-admin/notifications/diagnostic/".concat(i),method:"GET",params:t||{limit:50,offset:0}}},providesTags:(e,i,t)=>{let{diagnosticId:a}=t;return[{type:"versionAdmin-notifications",id:a}]}}),getNotification:e.query({query:e=>({url:"/version-admin/notifications/".concat(e),method:"GET"}),providesTags:(e,i,t)=>[{type:"versionAdmin-notifications",id:t}]}),getNotificationStats:e.query({query:e=>({url:"/version-admin/notifications/stats",method:"GET",params:e||{}}),providesTags:["versionAdmin-notification-stats"]}),createNotification:e.mutation({query:e=>({url:"/version-admin/notifications",method:"POST",body:e}),invalidatesTags:["versionAdmin-notifications","versionAdmin-notification-stats"]}),markNotificationAsRead:e.mutation({query:e=>({url:"/version-admin/notifications/".concat(e,"/read"),method:"PATCH"}),invalidatesTags:(e,i,t)=>["versionAdmin-notifications","versionAdmin-notification-stats",{type:"versionAdmin-notifications",id:t}]}),markNotificationAsUnread:e.mutation({query:e=>({url:"/version-admin/notifications/".concat(e,"/unread"),method:"PATCH"}),invalidatesTags:(e,i,t)=>["versionAdmin-notifications","versionAdmin-notification-stats",{type:"versionAdmin-notifications",id:t}]}),revokeNotification:e.mutation({query:e=>{let{id:i,reason:t}=e;return{url:"/version-admin/notifications/".concat(i,"/revoke"),method:"PATCH",body:t?{reason:t}:{}}},invalidatesTags:(e,i,t)=>{let{id:a}=t;return["versionAdmin-notifications","versionAdmin-notification-stats",{type:"versionAdmin-notifications",id:a}]}}),deleteNotification:e.mutation({query:e=>({url:"/version-admin/notifications/".concat(e),method:"DELETE"}),invalidatesTags:["versionAdmin-notifications","versionAdmin-notification-stats"]})})})},78101:function(e,i,t){"use strict";t.d(i,{g:function(){return l}});var a=t(49854),n=t(68240),s=t(94183),o=t(28317);let l=(0,n.LC)({baseQuery:(0,s.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,i)=>fetch(e,i).then(async t=>{let n="string"==typeof e?e:e.url;return n.includes("?")||(null==i?void 0:i.body)||"string"!=typeof e&&e.body||await (0,o.t8)(n,await t.clone().json().catch(()=>null),(0,a.x)()),t}).catch(async t=>{if(t instanceof TypeError){let t="string"==typeof e?e:e.url;if(!t.includes("?")&&!(null==i?void 0:i.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(t,(0,a.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw t})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,i,t){"use strict";let a;t.d(i,{d:function(){return d},x:function(){return r}});var n=t(72940),s=t(6780),o=t(67732),l=t(28317);function r(){return a||(a=(0,l.MT)("cached-responses-store","cached-responses")),a}async function d(e,i){try{let t=await s.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:i,...n.FD});return await (0,l.t8)(e,t.data,r()),t.data}catch(i){if(i instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(i.code)){let i=await (0,l.U2)(e,r());if(i)return i}throw i instanceof o.d7&&i.response&&401===i.response.status||console.error(i),i}}}},function(e){e.O(0,[1601,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,7186,4927,1493,5978,1712,9175,7402,1744],function(){return e(e.s=8873)}),_N_E=e.O()}]);