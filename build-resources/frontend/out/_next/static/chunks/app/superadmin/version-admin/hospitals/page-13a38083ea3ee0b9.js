(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5498],{67799:function(e,s,i){Promise.resolve().then(i.bind(i,90420))},90420:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return b}});var n=i(68328),t=i(34473),r=i(41224),o=i(68242),a=i(48604),d=i(22041),l=i(22614),c=i(55911),u=i(31204),h=i(14587),m=i(46373),p=i(11114),v=i(86083),x=i(73395),f=i(50430),g=i(4505),j=i(12450),y=i(5966),T=i(34703);function b(){let e=(0,j.useRouter)(),[s,i]=(0,g.useState)(""),[b,w]=(0,g.useState)(""),{data:S,isLoading:A,error:z}=(0,y.VQ)(b,{skip:!b}),{data:E,isLoading:k,error:C}=(0,y.ai)({diagnosticId:b,limit:5},{skip:!b}),q=()=>{s.trim()&&w(s.trim())};return(0,n.jsxs)(t.Container,{fluid:!0,children:[(0,n.jsx)(T.Z,{}),(0,n.jsxs)(r.Stack,{gap:"lg",children:[(0,n.jsx)(o.Title,{order:2,children:"Hospitals Management"}),(0,n.jsx)(a.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,n.jsxs)(r.Stack,{gap:"md",children:[(0,n.jsx)(d.Text,{size:"sm",c:"dimmed",children:"Search for a hospital by Diagnostic ID to check for updates and view update history."}),(0,n.jsxs)(l.Group,{children:[(0,n.jsx)(c.TextInput,{placeholder:"Enter Diagnostic ID (e.g., hosp_001)",value:s,onChange:e=>i(e.target.value),style:{flex:1},onKeyDown:e=>"Enter"===e.key&&q()}),(0,n.jsx)(u.Button,{leftSection:(0,n.jsx)(v.Z,{size:16}),onClick:q,disabled:!s.trim(),children:"Search"})]})]})}),b&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(a.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,n.jsxs)(l.Group,{justify:"space-between",mb:"md",children:[(0,n.jsxs)(o.Title,{order:4,children:["Hospital: ",b]}),(0,n.jsx)(l.Group,{children:(0,n.jsx)(u.Button,{size:"xs",variant:"light",leftSection:(0,n.jsx)(x.Z,{size:14}),onClick:()=>e.push("/superadmin/version-admin/logs?diagnosticId=".concat(b)),children:"View Full History"})})]}),(0,n.jsx)(o.Title,{order:5,mb:"sm",children:"Services Status"}),A?(0,n.jsx)(l.Group,{justify:"center",py:"md",children:(0,n.jsx)(h.Loader,{size:"sm"})}):z?(0,n.jsx)(m.b,{color:"red",title:"Error",children:"Failed to check for updates. The hospital may not exist or there might be a network issue."}):S&&S.services.length>0?(0,n.jsx)(r.Stack,{gap:"sm",children:S.services.map(e=>(0,n.jsx)(a.Z,{p:"md",withBorder:!0,children:(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(d.Text,{fw:500,children:e.serviceName}),e.updateAvailable?(0,n.jsx)(p.C,{color:"orange",variant:"light",children:"Update Available"}):(0,n.jsx)(p.C,{color:"green",variant:"light",children:"Up to Date"}),e.isMandatory&&(0,n.jsx)(p.C,{color:"red",variant:"light",children:"Mandatory"})]}),(0,n.jsxs)(l.Group,{gap:"lg",mt:"xs",children:[(0,n.jsxs)(d.Text,{size:"sm",c:"dimmed",children:["Current:"," ",(0,n.jsx)(d.Text,{component:"span",fw:500,children:e.currentVersion||"Not installed"})]}),(0,n.jsxs)(d.Text,{size:"sm",c:"dimmed",children:["Latest:"," ",(0,n.jsx)(d.Text,{component:"span",fw:500,children:e.latestVersion})]})]}),e.releaseNotes&&(0,n.jsx)(d.Text,{size:"xs",c:"dimmed",mt:"xs",children:e.releaseNotes})]}),e.updateAvailable&&(0,n.jsx)(u.Button,{size:"xs",leftSection:(0,n.jsx)(f.Z,{size:14}),children:"Update Now"})]})},e.serviceId))}):(0,n.jsx)(d.Text,{c:"dimmed",children:"No services found for this hospital."}),(0,n.jsx)(o.Title,{order:5,mt:"lg",mb:"sm",children:"Recent Update History"}),k?(0,n.jsx)(l.Group,{justify:"center",py:"md",children:(0,n.jsx)(h.Loader,{size:"sm"})}):C?(0,n.jsx)(m.b,{color:"red",title:"Error",children:"Failed to load update history."}):E&&E.data.length>0?(0,n.jsx)(r.Stack,{gap:"xs",children:E.data.map(e=>(0,n.jsx)(a.Z,{p:"sm",withBorder:!0,children:(0,n.jsx)(l.Group,{justify:"space-between",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(d.Text,{size:"sm",fw:500,children:e.serviceName||"Service"}),(0,n.jsx)(p.C,{color:"completed"===e.status?"green":"failed"===e.status?"red":"in_progress"===e.status?"blue":"gray",size:"sm",children:e.status})]}),(0,n.jsxs)(d.Text,{size:"xs",c:"dimmed",children:[e.fromVersion&&"".concat(e.fromVersion," → "),e.toVersion," • ",new Date(e.startedAt).toLocaleString()]}),e.errorMessage&&(0,n.jsxs)(d.Text,{size:"xs",c:"red",mt:4,children:["Error: ",e.errorMessage]})]})})},e.id))}):(0,n.jsx)(d.Text,{c:"dimmed",children:"No update history available."})]})})]})]})}},34703:function(e,s,i){"use strict";i.d(s,{Z:function(){return p}});var n=i(68328),t=i(13342),r=i(12450),o=i(74556),a=i(56959),d=i(74625),l=i(71140),c=i(91024),u=i(31662),h=i(25539),m=i(39870);function p(){let e=(0,r.useRouter)(),s=(0,r.usePathname)();return(0,n.jsx)(t.m,{value:s.includes("/dashboard")?"dashboard":s.includes("/services")?"services":s.includes("/versions")?"versions":s.includes("/hospitals")?"hospitals":s.includes("/logs")?"logs":s.includes("/notifications")?"notifications":s.includes("/devices")?"devices":s.includes("/sessions")?"sessions":"dashboard",onChange:s=>{s&&e.push("/superadmin/version-admin/".concat(s))},mb:"lg",children:(0,n.jsxs)(t.m.List,{children:[(0,n.jsx)(t.m.Tab,{value:"dashboard",leftSection:(0,n.jsx)(o.Z,{size:16}),children:"Dashboard"}),(0,n.jsx)(t.m.Tab,{value:"services",leftSection:(0,n.jsx)(a.Z,{size:16}),children:"Services"}),(0,n.jsx)(t.m.Tab,{value:"versions",leftSection:(0,n.jsx)(d.Z,{size:16}),children:"Versions"}),(0,n.jsx)(t.m.Tab,{value:"hospitals",leftSection:(0,n.jsx)(l.Z,{size:16}),children:"Hospitals"}),(0,n.jsx)(t.m.Tab,{value:"logs",leftSection:(0,n.jsx)(c.Z,{size:16}),children:"Update Logs"}),(0,n.jsx)(t.m.Tab,{value:"notifications",leftSection:(0,n.jsx)(u.Z,{size:16}),children:"Notifications"}),(0,n.jsx)(t.m.Tab,{value:"sessions",leftSection:(0,n.jsx)(h.Z,{size:16}),children:"Sessions"}),(0,n.jsx)(t.m.Tab,{value:"devices",leftSection:(0,n.jsx)(m.Z,{size:16}),children:"Devices"})]})})}},72940:function(e,s,i){"use strict";i.d(s,{FD:function(){return t},Hn:function(){return n},y4:function(){return r}});let n={headers:{"Content-Type":"application/json"}},t={withCredentials:!0},r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},5966:function(e,s,i){"use strict";i.d(s,{Kp:function(){return o},Rs:function(){return r},VQ:function(){return c},a6:function(){return n},ai:function(){return d},nL:function(){return l}});let{useGetAllVersionReleasesQuery:n,useGetVersionConfigQuery:t,useReleaseVersionMutation:r,useGetRolloutStatusQuery:o,useAssignVersionToHospitalMutation:a,useGetUpdateHistoryQuery:d,useGetAllUpdateLogsQuery:l,useCheckForUpdatesQuery:c,useGetAvailableVersionsQuery:u,useGetDashboardStatsQuery:h,useLogUpdateMutation:m}=i(78101).g.injectEndpoints({endpoints:e=>({getAllVersionReleases:e.query({query:e=>({url:"/version-admin/versions/releases",method:"GET",params:e||{limit:50,offset:0}}),providesTags:["versionAdmin-versions"]}),getVersionConfig:e.query({query:e=>({url:"/version-admin/versions/".concat(e,"/config"),method:"GET"}),providesTags:(e,s,i)=>[{type:"versionAdmin-versions",id:i}]}),releaseVersion:e.mutation({query:e=>({url:"/version-admin/versions/release",method:"POST",body:e}),invalidatesTags:["versionAdmin-versions","versionAdmin-services"]}),getRolloutStatus:e.query({query:e=>{let{serviceId:s,version:i}=e;return{url:"/version-admin/versions/rollout-status/".concat(s,"/").concat(i),method:"GET"}},providesTags:(e,s,i)=>{let{serviceId:n,version:t}=i;return[{type:"versionAdmin-versions",id:"".concat(n,"-").concat(t)}]}}),assignVersionToHospital:e.mutation({query:e=>({url:"/version-admin/versions/assign-hospital",method:"POST",body:e}),invalidatesTags:["versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs"]}),getUpdateHistory:e.query({query:e=>{let{diagnosticId:s,limit:i=20,offset:n=0}=e;return{url:"/version-admin/versions/history/".concat(s),method:"GET",params:{limit:i,offset:n}}},providesTags:(e,s,i)=>{let{diagnosticId:n}=i;return[{type:"versionAdmin-logs",id:n}]}}),getAllUpdateLogs:e.query({query:e=>({url:"/version-admin/versions/logs",method:"GET",params:e||{limit:50,offset:0}}),providesTags:["versionAdmin-logs"]}),checkForUpdates:e.query({query:e=>({url:"/version-admin/versions/check",method:"GET",params:{diagnosticId:e}})}),getAvailableVersions:e.query({query:e=>({url:"/version-admin/versions/available/".concat(e),method:"GET"})}),getDashboardStats:e.query({query:()=>({url:"/version-admin/dashboard/stats",method:"GET"}),providesTags:["versionAdmin-services","versionAdmin-versions","versionAdmin-logs"]}),logUpdate:e.mutation({query:e=>({url:"/version-admin/versions/update-log",method:"POST",body:e}),invalidatesTags:["versionAdmin-logs"]})})})},78101:function(e,s,i){"use strict";i.d(s,{g:function(){return a}});var n=i(49854),t=i(68240),r=i(94183),o=i(28317);let a=(0,t.LC)({baseQuery:(0,r.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,s)=>fetch(e,s).then(async i=>{let t="string"==typeof e?e:e.url;return t.includes("?")||(null==s?void 0:s.body)||"string"!=typeof e&&e.body||await (0,o.t8)(t,await i.clone().json().catch(()=>null),(0,n.x)()),i}).catch(async i=>{if(i instanceof TypeError){let i="string"==typeof e?e:e.url;if(!i.includes("?")&&!(null==s?void 0:s.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(i,(0,n.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw i})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,s,i){"use strict";let n;i.d(s,{d:function(){return l},x:function(){return d}});var t=i(72940),r=i(6780),o=i(67732),a=i(28317);function d(){return n||(n=(0,a.MT)("cached-responses-store","cached-responses")),n}async function l(e,s){try{let i=await r.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:s,...t.FD});return await (0,a.t8)(e,i.data,d()),i.data}catch(s){if(s instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(s.code)){let s=await (0,a.U2)(e,d());if(s)return s}throw s instanceof o.d7&&s.response&&401===s.response.status||console.error(s),s}}}},function(e){e.O(0,[3069,6945,3852,1656,9722,9258,966,5978,7817,9175,7402,1744],function(){return e(e.s=67799)}),_N_E=e.O()}]);