(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6817],{67696:function(e,i,t){Promise.resolve().then(t.bind(t,62993))},62993:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return F}});var s=t(68328);let n=t(78101).g.injectEndpoints({endpoints:e=>({getDoctorUpdateInfos:e.query({query:e=>{let i={};return(null==e?void 0:e.isApproved)==="approved"?i.isApproved=!0:(null==e?void 0:e.isApproved)==="pending"&&(i.isApproved=!1),(null==e?void 0:e.operationName)&&!["all",""].includes(null==e?void 0:e.operationName)&&(i.operationName=null==e?void 0:e.operationName),{url:"/doctorUpdateInfo",params:i}},keepUnusedDataFor:86400,transformResponse:e=>(Array.isArray(null==e?void 0:e.data)&&e.data.sort((e,i)=>new Date(e.createdAt).getTime()-new Date(i.createdAt).getTime()),e)}),updateDoctorUpdateInfo:e.mutation({query:e=>{let{id:i,diagnosticIds:t,applyToOnlySuperAdmin:s,applyAllDiagnostics:n,isApproved:r}=e;return{url:"/doctorUpdateInfo/".concat(i),method:"PATCH",body:{diagnosticIds:t,applyToOnlySuperAdmin:"".concat(s),applyAllDiagnostics:"".concat(n),isApproved:"".concat(r)}}},async onQueryStarted(e,i){let{id:t}=e,{dispatch:s,queryFulfilled:r}=i,o=s(n.util.updateQueryData("getDoctorUpdateInfos",void 0,e=>{let i=e.data.items.find(e=>e.id===t);i&&(i.loading=!0)}));try{await r,s(n.util.updateQueryData("getDoctorUpdateInfos",void 0,e=>{let i=e.data.items.find(e=>e.id===t);i&&delete i.loading}))}catch(e){o.undo()}}}),deleteDoctorUpdateInfo:e.mutation({query:e=>({url:"/doctorUpdateInfo/".concat(e),method:"DELETE"}),async onQueryStarted(e,i){let{dispatch:t,queryFulfilled:s}=i,r=t(n.util.updateQueryData("getDoctorUpdateInfos",void 0,i=>{let t=i.data.items.find(i=>i.id===e);t&&(t.loading=!0)}));try{await s,t(n.util.updateQueryData("getDoctorUpdateInfos",void 0,i=>{let t=i.data.items.findIndex(i=>i.id===e);t>=0&&i.data.items.splice(t,1)}))}catch(e){r.undo()}}})})}),{useGetDoctorUpdateInfosQuery:r,useUpdateDoctorUpdateInfoMutation:o,useDeleteDoctorUpdateInfoMutation:a}=n;var l=t(32451),d=t(89043),c=t(13822),p=t(22614),u=t(68242),h=t(87967),x=t(54632),m=t(11114),j=t(75865),g=t(3741),v=t(22975),y=t(41224),f=t(22041),A=t(85033),T=t(81209),D=t(31204),C=t(46557),b=t(18190),w=t(60711),k=t(12697),I=t(22115),S=t(97698),P=t(4505),E=t(29663),N=t(77303);let G=e=>{var i,t;let{opened:n,onClose:r,data:o,onTakeAction:a}=e;return o?(0,s.jsx)(v.u,{opened:n,onClose:r,title:(0,s.jsx)(f.Text,{fw:600,size:"lg",children:"Request Details"}),size:"lg",children:(0,s.jsxs)(y.Stack,{children:[(0,s.jsxs)(l.Box,{children:[(0,s.jsx)(f.Text,{fw:500,mb:"xs",children:"Basic Information"}),(0,s.jsxs)(E.Grid,{children:[(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Doctor ID"}),(0,s.jsx)(f.Text,{children:o.doctorUniqueId})]}),(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Operation Type"}),(0,s.jsx)(m.C,{color:"CREATE"===o.operationName?"green":"UPDATE"===o.operationName?"blue":"red",children:o.operationName})]})]})]}),(0,s.jsx)(N.Divider,{}),(0,s.jsxs)(l.Box,{children:[(0,s.jsx)(f.Text,{fw:500,mb:"xs",children:"Status Information"}),(0,s.jsxs)(E.Grid,{children:[(0,s.jsxs)(E.Grid.Col,{span:4,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Approval Status"}),(0,s.jsx)(m.C,{color:o.isApproved?"green":"yellow",children:o.isApproved?"Approved":"Pending"})]}),(0,s.jsxs)(E.Grid.Col,{span:4,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Action Status"}),(0,s.jsx)(m.C,{color:o.hasActionTaken?"green":"gray",children:o.hasActionTaken?"Action Taken":"No Action"})]}),(0,s.jsxs)(E.Grid.Col,{span:4,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Approval Date"}),(0,s.jsx)(f.Text,{children:o.approvedAt?(0,S.Z)(new Date(o.approvedAt),"PPP"):"-"})]})]})]}),(0,s.jsx)(N.Divider,{}),(0,s.jsxs)(l.Box,{children:[(0,s.jsx)(f.Text,{fw:500,mb:"xs",children:"Doctor Details"}),(0,s.jsxs)(E.Grid,{children:[(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Previous Name"}),(0,s.jsx)(f.Text,{children:o.previousDoctorName||"-"})]}),(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Previous Designation"}),(0,s.jsx)(f.Text,{children:o.previousDesignation||"-"})]})]}),(0,s.jsxs)(E.Grid,{children:[(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Current Name"}),(0,s.jsx)(f.Text,{children:(null==o?void 0:null===(i=o.Doctor)||void 0===i?void 0:i.name)||"-"})]}),(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Current Designation"}),(0,s.jsx)(f.Text,{children:(null==o?void 0:null===(t=o.Doctor)||void 0===t?void 0:t.designation)||"-"})]})]})]}),(0,s.jsx)(N.Divider,{}),(0,s.jsxs)(l.Box,{children:[(0,s.jsx)(f.Text,{fw:500,mb:"xs",children:"Diagnostic Settings"}),(0,s.jsxs)(E.Grid,{children:[(0,s.jsxs)(E.Grid.Col,{span:12,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Diagnostic IDs"}),(0,s.jsx)(p.Group,{gap:"xs",mt:4,children:o.diagnosticIds.length>0?o.diagnosticIds.map(e=>(0,s.jsx)(m.C,{variant:"outline",children:e},e)):(0,s.jsx)(f.Text,{size:"sm",fs:"italic",children:"No diagnostic IDs assigned"})})]}),(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Apply to Super Admin Only"}),(0,s.jsx)(m.C,{color:o.applyToOnlySuperAdmin?"blue":"gray",children:o.applyToOnlySuperAdmin?"Yes":"No"})]}),(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Apply to All Diagnostics"}),(0,s.jsx)(m.C,{color:o.applyAllDiagnostics?"blue":"gray",children:o.applyAllDiagnostics?"Yes":"No"})]})]})]}),(0,s.jsx)(N.Divider,{}),(0,s.jsxs)(l.Box,{children:[(0,s.jsx)(f.Text,{fw:500,mb:"xs",children:"Timestamps"}),(0,s.jsxs)(E.Grid,{children:[(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Created At"}),(0,s.jsx)(f.Text,{children:(0,S.Z)(new Date(o.createdAt),"PPP")})]}),(0,s.jsxs)(E.Grid.Col,{span:6,children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Last Updated"}),(0,s.jsx)(f.Text,{children:(0,S.Z)(new Date(o.updatedAt),"PPP")})]})]})]}),(0,s.jsxs)(p.Group,{justify:"flex-end",mt:"xl",children:[!o.hasActionTaken&&a&&(0,s.jsx)(D.Button,{onClick:()=>{a(o),r()},children:"Take Action"}),(0,s.jsx)(D.Button,{variant:"light",onClick:r,children:"Close"})]})]})}):null};var U=t(25499),z=t(69593),O=t(16201),R=t(90660),q=t.n(R),B=t(47720),F=()=>{var e,i;let[t,n]=(0,P.useState)({operationName:"",isApproved:""}),[A,{open:T,close:D}]=(0,C.q)(!1),[E,{open:N,close:R}]=(0,C.q)(!1),B=e=>{Q(e),N()},F=(0,U.C)(e=>e.diagnostic.diagnostics),L=(0,U.T)();(0,P.useEffect)(()=>{(async()=>{let{success:e,data:i}=await (0,z.h)();e?L((0,O.Yr)(null==i?void 0:i.items)):q().fire("Error",i,"error")})()},[]);let[M,Q]=(0,P.useState)(null),[_,H]=(0,P.useState)({diagnosticIds:[],applyToOnlySuperAdmin:!0,applyAllDiagnostics:!1,isApproved:!1}),{data:Y,isLoading:V,refetch:W}=r(t),[K]=o(),[X]=a(),J=e=>{Q(e),H({diagnosticIds:e.diagnosticIds,applyToOnlySuperAdmin:e.applyToOnlySuperAdmin||!0,applyAllDiagnostics:e.applyAllDiagnostics||!1,isApproved:!1}),T()},$=async e=>{if(console.log(e),M)try{let i=await K({id:M.id,...e}).unwrap();if("error"in i)throw Error("Error");I.N9.show({title:"Success",message:"Request has been processed successfully",color:"green"}),W(),D()}catch(e){I.N9.show({title:"Error",message:"Failed to process request",color:"red"})}};return(0,s.jsxs)(l.Box,{p:"md",children:[(0,s.jsxs)(d.X,{shadow:"xs",p:"md",children:[(0,s.jsx)(c.f,{visible:V}),(0,s.jsxs)(p.Group,{justify:"space-between",mb:"lg",children:[(0,s.jsx)(u.Title,{order:2,children:"Doctor Update Requests"}),(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(h.P,{size:"sm",placeholder:"Operation Type",data:[{value:"CREATE",label:"Create"},{value:"UPDATE",label:"Update"},{value:"DELETE",label:"Delete"},{value:"all",label:"All Operation"}],value:t.operationName,onChange:e=>n(i=>({...i,operationName:e||""}))}),(0,s.jsx)(h.P,{size:"sm",placeholder:"Status",data:[{value:"approved",label:"Approved"},{value:"pending",label:"Pending"},{value:"all",label:"All"}],value:t.isApproved,onChange:e=>n(i=>({...i,isApproved:e||""}))})]})]}),(0,s.jsxs)(x.i,{striped:!0,highlightOnHover:!0,children:[(0,s.jsx)(x.i.Thead,{children:(0,s.jsxs)(x.i.Tr,{children:[(0,s.jsx)(x.i.Th,{children:"Doctor ID"}),(0,s.jsx)(x.i.Th,{children:"Operation"}),(0,s.jsx)(x.i.Th,{children:"Status"}),(0,s.jsx)(x.i.Th,{children:"Diagnostic Name"}),(0,s.jsx)(x.i.Th,{children:"Created Date"}),(0,s.jsx)(x.i.Th,{children:"Action Taken"}),(0,s.jsx)(x.i.Th,{style:{width:80},children:"Actions"})]})}),(0,s.jsx)(x.i.Tbody,{children:null==Y?void 0:null===(i=Y.data)||void 0===i?void 0:null===(e=i.items)||void 0===e?void 0:e.map(e=>{var i;return(0,s.jsxs)(x.i.Tr,{children:[(0,s.jsx)(x.i.Td,{children:e.doctorUniqueId}),(0,s.jsx)(x.i.Td,{children:(0,s.jsx)(m.C,{color:"CREATE"===e.operationName?"green":"UPDATE"===e.operationName?"blue":"red",children:e.operationName})}),(0,s.jsx)(x.i.Td,{children:(0,s.jsx)(m.C,{color:e.isApproved?"green":"yellow",children:e.isApproved?"Approved":"Pending"})}),(0,s.jsx)(x.i.Td,{children:null==e?void 0:null===(i=e.Diagnostic)||void 0===i?void 0:i.name}),(0,s.jsx)(x.i.Td,{children:(0,S.Z)(new Date(e.createdAt),"PPP")}),(0,s.jsx)(x.i.Td,{children:(0,s.jsx)(m.C,{color:e.hasActionTaken?"green":"gray",variant:"dot",children:e.hasActionTaken?"Yes":"No"})}),(0,s.jsx)(x.i.Td,{children:(0,s.jsxs)(j.v,{position:"bottom-end",withArrow:!0,children:[(0,s.jsx)(j.v.Target,{children:(0,s.jsx)(g.A,{variant:"subtle",color:"gray",children:(0,s.jsx)(b.Z,{size:16})})}),(0,s.jsxs)(j.v.Dropdown,{children:[(0,s.jsx)(j.v.Item,{leftSection:(0,s.jsx)(w.Z,{size:14}),onClick:()=>J(e),disabled:e.hasActionTaken,children:"Take Action"}),(0,s.jsx)(j.v.Item,{leftSection:(0,s.jsx)(w.Z,{size:14}),onClick:()=>B(e),children:"View Details"}),(0,s.jsx)(j.v.Item,{leftSection:(0,s.jsx)(k.Z,{size:14}),onClick:async()=>{try{if(!(await q().fire({html:"\n                                Are you Sure to Delete? <br /> Process is\n                                irreversible!\n                              ",title:"Warning",icon:"warning",focusCancel:!0})).isConfirmed)return;let i=await X(e.id).unwrap();if("error"in i)throw Error("Error");I.N9.show({title:"Success",message:"Info has been deleted successfully",color:"green"}),W(),D()}catch(e){I.N9.show({title:"Error",message:"Failed to process request",color:"red"})}},children:"Delete"})]})]})})]},e.id)})})]}),(0,s.jsx)(v.u,{opened:A,onClose:D,title:"Take Action on Request",size:"lg",children:(0,s.jsxs)(y.Stack,{children:[(0,s.jsxs)(l.Box,{mb:"md",children:[(0,s.jsx)(f.Text,{size:"sm",c:"dimmed",children:"Request Details"}),(0,s.jsxs)(f.Text,{children:["Doctor ID: ",null==M?void 0:M.doctorUniqueId]}),(0,s.jsxs)(f.Text,{children:["Operation: ",null==M?void 0:M.operationName]})]}),(0,s.jsx)(Z,{diagnostics:F,onSubmit:$,close:D})]})})]}),(0,s.jsx)(G,{opened:E,onClose:R,data:M,onTakeAction:J})]})};let Z=e=>{var i;let{diagnostics:t,onSubmit:n,close:r}=e,o=(0,B.c)({initialValues:{diagnosticIds:[],applyToOnlySuperAdmin:!0,applyAllDiagnostics:!1,isApproved:!0},validate:{}});return(0,s.jsx)("form",{onSubmit:o.onSubmit(n),children:(0,s.jsxs)(y.Stack,{gap:"md",children:[(0,s.jsx)(A.N,{label:"Select Diagnostics",placeholder:"Choose diagnostics",data:null!==(i=null==t?void 0:t.map(e=>({value:e.id,label:e.name})))&&void 0!==i?i:[],...o.getInputProps("diagnosticIds"),disabled:o.values.applyAllDiagnostics}),(0,s.jsx)(T.r,{label:"Apply to Super Admin Only",...o.getInputProps("applyToOnlySuperAdmin",{type:"checkbox"})}),(0,s.jsx)(T.r,{label:"Apply to All Diagnostics",...o.getInputProps("applyAllDiagnostics",{type:"checkbox"}),onChange:e=>{o.setFieldValue("applyAllDiagnostics",e.currentTarget.checked),e.currentTarget.checked&&o.setFieldValue("diagnosticIds",[])}}),(0,s.jsx)(T.r,{label:"Approve Request",...o.getInputProps("isApproved",{type:"checkbox"})}),(0,s.jsxs)(p.Group,{justify:"flex-end",mt:"md",children:[(0,s.jsx)(D.Button,{variant:"light",onClick:r,type:"button",children:"Cancel"}),(0,s.jsx)(D.Button,{type:"submit",children:"Submit"})]})]})})}},72940:function(e,i,t){"use strict";t.d(i,{FD:function(){return n},Hn:function(){return s},y4:function(){return r}});let s={headers:{"Content-Type":"application/json"}},n={withCredentials:!0},r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},69593:function(e,i,t){"use strict";t.d(i,{h:function(){return o}});var s=t(72940),n=t(6780),r=t(67732);let o=async()=>{try{let e=await n.default.get("".concat("http://sasthotech.local:5000/api/v1","/diagnostic"),s.FD);return{success:!0,data:e.data.data}}catch(i){if(i instanceof r.d7){var e;return{success:!1,data:null===(e=i.response)||void 0===e?void 0:e.data.message}}return{success:!1,data:"An error occurred"}}}},78101:function(e,i,t){"use strict";t.d(i,{g:function(){return a}});var s=t(49854),n=t(68240),r=t(94183),o=t(28317);let a=(0,n.LC)({baseQuery:(0,r.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,i)=>fetch(e,i).then(async t=>{let n="string"==typeof e?e:e.url;return n.includes("?")||(null==i?void 0:i.body)||"string"!=typeof e&&e.body||await (0,o.t8)(n,await t.clone().json().catch(()=>null),(0,s.x)()),t}).catch(async t=>{if(t instanceof TypeError){let t="string"==typeof e?e:e.url;if(!t.includes("?")&&!(null==i?void 0:i.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(t,(0,s.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw t})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},16201:function(e,i,t){"use strict";t.d(i,{C4:function(){return r},GU:function(){return l},WH:function(){return c},Yr:function(){return o},ZR:function(){return d},iw:function(){return p},kd:function(){return a},sI:function(){return n},tG:function(){return u}});let s=(0,t(79258).createSlice)({name:"diagnostic",initialState:{receptionist:[],diagnostics:[],pathologist:[],marketer:[]},reducers:{setReceptionist:(e,i)=>{Array.isArray(i.payload)?e.receptionist=i.payload:e.receptionist=[...e.receptionist,i.payload]},removeReceptionist:(e,i)=>{e.receptionist=e.receptionist.filter(e=>e.id!==i.payload)},setPathologist:(e,i)=>{Array.isArray(i.payload)?e.pathologist=i.payload:e.pathologist=[...e.pathologist,i.payload]},setMarketer:(e,i)=>{Array.isArray(i.payload)?e.marketer=i.payload:e.marketer=[...e.marketer,i.payload]},removeMarketer:(e,i)=>{e.marketer=e.marketer.filter(e=>e.id!==i.payload)},removePathologist:(e,i)=>{e.pathologist=e.pathologist.filter(e=>e.id!==i.payload)},setPathologistCategory:(e,i)=>{let{payload:{userId:t,categoryIds:s}}=i,n=e.pathologist.find(e=>e.id!==t);n&&(n.userTestCategory=s)},setDiagnosticList:(e,i)=>{Array.isArray(i.payload)?e.diagnostics=i.payload:e.diagnostics=[...e.diagnostics,i.payload]},removeFromDiagnosticLists:(e,i)=>{e.diagnostics=e.diagnostics.filter(e=>e.id!==i.payload)}}}),{setReceptionist:n,removeReceptionist:r,setDiagnosticList:o,removeFromDiagnosticLists:a,setPathologist:l,setMarketer:d,removeMarketer:c,removePathologist:p,setPathologistCategory:u}=s.actions;i.ZP=s.reducer},25499:function(e,i,t){"use strict";t.d(i,{C:function(){return r},T:function(){return n}});var s=t(53502);let n=()=>(0,s.I0)(),r=s.v9},49854:function(e,i,t){"use strict";let s;t.d(i,{d:function(){return d},x:function(){return l}});var n=t(72940),r=t(6780),o=t(67732),a=t(28317);function l(){return s||(s=(0,a.MT)("cached-responses-store","cached-responses")),s}async function d(e,i){try{let t=await r.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:i,...n.FD});return await (0,a.t8)(e,t.data,l()),t.data}catch(i){if(i instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(i.code)){let i=await (0,a.U2)(e,l());if(i)return i}throw i instanceof o.d7&&i.response&&401===i.response.status||console.error(i),i}}}},function(e){e.O(0,[1601,2975,3069,6945,3852,1656,9722,4670,9258,9533,966,12,7538,1166,7967,7698,1493,9645,4347,5865,8825,9175,7402,1744],function(){return e(e.s=67696)}),_N_E=e.O()}]);