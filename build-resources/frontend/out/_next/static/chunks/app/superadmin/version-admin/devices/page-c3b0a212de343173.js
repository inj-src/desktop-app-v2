(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7290],{88281:function(e,s,i){Promise.resolve().then(i.bind(i,56672))},56672:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return U}});var n=i(68328),t=i(22041),r=i(41224),o=i(55911),l=i(22614),c=i(31204),d=i(34473),a=i(14587),u=i(46373),h=i(68242),v=i(89043),m=i(29663),x=i(48604),j=i(76029),p=i(11114),f=i(3741),g=i(9326),y=i(86083),T=i(39870),k=i(65974),b=i(7965),w=i(92671),z=i(60711),A=i(93880),C=i(51367),S=i(41819),D=i(12697),Z=i(34558),B=i(4505),E=i(12450),G=i(22115),M=i(25299),N=i(34703),R=i(77303),L=i(54632),q=i(63998),I=i(98073),P=i(37895);function F(e){var s;let{deviceId:i}=e,o=(0,E.useRouter)(),{data:x,isLoading:y,error:T}=(0,Z.cT)(i),[b]=(0,Z.L9)(),[w]=(0,Z.u4)(),[z]=(0,Z._r)(),[B]=(0,Z.z3)(),[F]=(0,Z.bu)(),[U]=(0,Z.FR)(),[_]=(0,Z.Il)(),H=null==x?void 0:x.data,V=async e=>{if(H)try{e?(await w(i).unwrap(),G.N9.show({title:"Success",message:"Device trust removed",color:"green"})):(await b(i).unwrap(),G.N9.show({title:"Success",message:"Device marked as trusted",color:"green"}))}catch(e){var s;G.N9.show({title:"Error",message:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to update device",color:"red"})}},O=e=>{H&&(e?M.qk.openConfirmModal({title:"Unblock Device",children:(0,n.jsx)(t.Text,{size:"sm",children:"Are you sure you want to unblock this device? It will be able to access the system again."}),labels:{confirm:"Unblock",cancel:"Cancel"},confirmProps:{color:"green"},onConfirm:async()=>{try{await B(i).unwrap(),G.N9.show({title:"Success",message:"Device unblocked successfully",color:"green"})}catch(s){var e;G.N9.show({title:"Error",message:(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to unblock device",color:"red"})}}}):M.qk.open({title:"Block Device",children:(0,n.jsxs)(r.Stack,{gap:"md",children:[(0,n.jsx)(t.Text,{size:"sm",children:"Are you sure you want to block this device? All active sessions will be revoked and future login attempts will be denied."}),(0,n.jsx)("input",{type:"text",placeholder:"Enter reason...",id:"block-reason-input",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ced4da"}}),(0,n.jsxs)(l.Group,{justify:"flex-end",mt:"md",children:[(0,n.jsx)(c.Button,{variant:"default",onClick:()=>M.qk.closeAll(),children:"Cancel"}),(0,n.jsx)(c.Button,{color:"red",onClick:async()=>{var e,s;let n=(null===(e=document.getElementById("block-reason-input"))||void 0===e?void 0:e.value)||"Blocked by administrator";try{await z({deviceId:i,reason:n}).unwrap(),G.N9.show({title:"Success",message:"Device blocked successfully",color:"green"}),M.qk.closeAll()}catch(e){G.N9.show({title:"Error",message:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to block device",color:"red"})}},children:"Block Device"})]})]})}))},X=e=>{M.qk.openConfirmModal({title:"Revoke Session",children:(0,n.jsx)(t.Text,{size:"sm",children:"Are you sure you want to revoke this session? The user will be logged out."}),labels:{confirm:"Revoke",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:async()=>{try{await _(e).unwrap(),G.N9.show({title:"Success",message:"Session revoked successfully",color:"green"})}catch(e){var s;G.N9.show({title:"Error",message:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to revoke session",color:"red"})}}})},W=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return y?(0,n.jsxs)(d.Container,{fluid:!0,children:[(0,n.jsx)(N.Z,{}),(0,n.jsx)(l.Group,{justify:"center",py:"xl",children:(0,n.jsx)(a.Loader,{size:"lg"})})]}):T||!H?(0,n.jsxs)(d.Container,{fluid:!0,children:[(0,n.jsx)(N.Z,{}),(0,n.jsx)(u.b,{icon:(0,n.jsx)(g.Z,{size:16}),title:"Error",color:"red",children:"Failed to load device details. Please try again later."})]}):(0,n.jsxs)(d.Container,{fluid:!0,children:[(0,n.jsx)(N.Z,{}),(0,n.jsxs)(r.Stack,{gap:"lg",children:[(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsxs)(l.Group,{children:[(0,n.jsx)(f.A,{variant:"subtle",onClick:()=>o.push("/superadmin/version-admin/devices"),children:(0,n.jsx)(q.Z,{size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsxs)(h.Title,{order:2,children:[H.platform," ",H.osVersion]}),H.isTrusted&&(0,n.jsx)(j.u,{label:"Trusted Device",children:(0,n.jsx)(k.Z,{size:24,color:"green"})}),H.isBlocked&&(0,n.jsx)(p.C,{color:"red",variant:"filled",children:"Blocked"})]}),(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",mt:4,children:"Device Details and Session History"})]})]}),(0,n.jsxs)(l.Group,{children:[(0,n.jsx)(c.Button,{variant:"light",color:H.isTrusted?"gray":"green",leftSection:H.isTrusted?(0,n.jsx)(A.Z,{size:16}):(0,n.jsx)(k.Z,{size:16}),onClick:()=>V(H.isTrusted),children:H.isTrusted?"Remove Trust":"Trust Device"}),(0,n.jsx)(c.Button,{variant:"light",color:H.isBlocked?"green":"orange",leftSection:H.isBlocked?(0,n.jsx)(C.Z,{size:16}):(0,n.jsx)(S.Z,{size:16}),onClick:()=>O(H.isBlocked),children:H.isBlocked?"Unblock":"Block"}),(0,n.jsx)(c.Button,{variant:"light",color:"red",leftSection:(0,n.jsx)(D.Z,{size:16}),onClick:()=>{H&&M.qk.openConfirmModal({title:"Delete Device",children:(0,n.jsxs)(t.Text,{size:"sm",children:["Are you sure you want to delete this ",H.platform," device? All sessions will be revoked and the device record will be permanently removed. This action cannot be undone."]}),labels:{confirm:"Delete",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:async()=>{try{await F(i).unwrap(),G.N9.show({title:"Success",message:"Device deleted successfully",color:"green"}),o.push("/superadmin/version-admin/devices")}catch(s){var e;G.N9.show({title:"Error",message:(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to delete device",color:"red"})}}})},children:"Delete"})]})]}),H.isBlocked&&H.blockedReason&&(0,n.jsxs)(u.b,{icon:(0,n.jsx)(g.Z,{size:16}),color:"red",title:"Device Blocked",children:[(0,n.jsx)(t.Text,{size:"sm",children:H.blockedReason}),H.blockedAt&&(0,n.jsxs)(t.Text,{size:"xs",c:"dimmed",mt:4,children:["Blocked on: ",W(H.blockedAt)]})]}),(0,n.jsxs)(m.Grid,{children:[(0,n.jsx)(m.Grid.Col,{span:{base:12,md:6},children:(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsx)(h.Title,{order:4,mb:"md",children:"Device Information"}),(0,n.jsxs)(r.Stack,{gap:"sm",children:[(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Platform"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:H.platform})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"OS Version"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:H.osVersion})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Architecture"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:H.arch})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"App Version"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:H.appVersion})]}),(0,n.jsx)(R.Divider,{}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"CPU Cores"}),(0,n.jsxs)(p.C,{variant:"light",color:"blue",children:[H.cpuCores," cores"]})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Total Memory"}),(0,n.jsx)(p.C,{variant:"light",color:"violet",children:(s=H.totalMemory,"".concat((s/1073741824).toFixed(1)," GB"))})]}),(0,n.jsx)(R.Divider,{}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Public IP"}),(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(I.Z,{size:14}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:H.publicIP})]})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Timezone"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:H.timezone})]})]})]})}),(0,n.jsx)(m.Grid.Col,{span:{base:12,md:6},children:(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsx)(h.Title,{order:4,mb:"md",children:"Activity"}),(0,n.jsxs)(r.Stack,{gap:"sm",children:[(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"First Seen"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:W(H.firstSeenAt)})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Last Seen"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:W(H.lastSeenAt)})]}),H.firstLoginAt&&(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"First Login"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:W(H.firstLoginAt)})]}),H.lastActiveAt&&(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Last Active"}),(0,n.jsx)(t.Text,{size:"sm",fw:500,children:W(H.lastActiveAt)})]}),(0,n.jsx)(R.Divider,{}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Active Sessions"}),(0,n.jsx)(p.C,{color:"green",children:H.activeSessions||0})]}),(0,n.jsxs)(l.Group,{justify:"space-between",children:[(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"Total Sessions"}),(0,n.jsx)(p.C,{color:"blue",children:H.totalSessions||0})]})]})]})})]}),(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsxs)(l.Group,{justify:"space-between",mb:"md",children:[(0,n.jsx)(h.Title,{order:4,children:"Sessions"}),H.sessions&&H.sessions.length>0&&(0,n.jsx)(c.Button,{size:"sm",variant:"light",color:"red",leftSection:(0,n.jsx)(P.Z,{size:16}),onClick:()=>{M.qk.openConfirmModal({title:"Revoke All Sessions",children:(0,n.jsx)(t.Text,{size:"sm",children:"Are you sure you want to revoke all sessions for this device? All users will be logged out."}),labels:{confirm:"Revoke All",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:async()=>{try{let e=await U(i).unwrap();G.N9.show({title:"Success",message:"".concat(e.count," session(s) revoked successfully"),color:"green"})}catch(s){var e;G.N9.show({title:"Error",message:(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to revoke sessions",color:"red"})}}})},children:"Revoke All Sessions"})]}),H.sessions&&0!==H.sessions.length?(0,n.jsx)(L.i.ScrollContainer,{minWidth:800,children:(0,n.jsxs)(L.i,{striped:!0,highlightOnHover:!0,children:[(0,n.jsx)(L.i.Thead,{children:(0,n.jsxs)(L.i.Tr,{children:[(0,n.jsx)(L.i.Th,{children:"Status"}),(0,n.jsx)(L.i.Th,{children:"Created"}),(0,n.jsx)(L.i.Th,{children:"Last Used"}),(0,n.jsx)(L.i.Th,{children:"Expires"}),(0,n.jsx)(L.i.Th,{children:"Revoked"}),(0,n.jsx)(L.i.Th,{children:"Actions"})]})}),(0,n.jsx)(L.i.Tbody,{children:H.sessions.map(e=>(0,n.jsxs)(L.i.Tr,{children:[(0,n.jsx)(L.i.Td,{children:e.revokedAt?(0,n.jsx)(p.C,{color:"red",children:"Revoked"}):(0,n.jsx)(p.C,{color:"green",children:"Active"})}),(0,n.jsx)(L.i.Td,{children:(0,n.jsx)(t.Text,{size:"sm",children:W(e.createdAt)})}),(0,n.jsx)(L.i.Td,{children:(0,n.jsx)(t.Text,{size:"sm",children:W(e.lastUsedAt)})}),(0,n.jsx)(L.i.Td,{children:(0,n.jsx)(t.Text,{size:"sm",children:W(e.expiresAt)})}),(0,n.jsx)(L.i.Td,{children:e.revokedAt?(0,n.jsxs)("div",{children:[(0,n.jsx)(t.Text,{size:"sm",children:W(e.revokedAt)}),e.revokedReason&&(0,n.jsx)(t.Text,{size:"xs",c:"dimmed",children:e.revokedReason})]}):(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",children:"-"})}),(0,n.jsx)(L.i.Td,{children:!e.revokedAt&&(0,n.jsx)(j.u,{label:"Revoke Session",children:(0,n.jsx)(f.A,{variant:"light",color:"red",onClick:()=>X(e.id),children:(0,n.jsx)(P.Z,{size:18})})})})]},e.id))})]})}):(0,n.jsx)(t.Text,{c:"dimmed",ta:"center",py:"xl",children:"No sessions found for this device"})]}),H.networkInterfaces&&H.networkInterfaces.length>0&&(0,n.jsxs)(v.X,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[(0,n.jsx)(h.Title,{order:4,mb:"md",children:"Network Interfaces"}),(0,n.jsxs)(L.i,{children:[(0,n.jsx)(L.i.Thead,{children:(0,n.jsxs)(L.i.Tr,{children:[(0,n.jsx)(L.i.Th,{children:"MAC Address Hash"}),(0,n.jsx)(L.i.Th,{children:"Local IP"})]})}),(0,n.jsx)(L.i.Tbody,{children:H.networkInterfaces.map((e,s)=>(0,n.jsxs)(L.i.Tr,{children:[(0,n.jsx)(L.i.Td,{children:(0,n.jsx)(t.Text,{size:"sm",ff:"monospace",children:e.macHash})}),(0,n.jsx)(L.i.Td,{children:(0,n.jsx)(t.Text,{size:"sm",children:e.localIP})})]},s))})]})]})]})]})}function U(){let e=(0,E.useRouter)(),[s,i]=(0,B.useState)(""),{data:R,isLoading:L,error:q}=(0,Z.fE)(),[I]=(0,Z.L9)(),[P]=(0,Z.u4)(),[U]=(0,Z._r)(),[_]=(0,Z.z3)(),[H]=(0,Z.bu)(),V=(null==R?void 0:R.data)||[],O=(0,E.useSearchParams)().get("id");if(O)return(0,n.jsx)(F,{deviceId:O});let X=V.filter(e=>e.platform.toLowerCase().includes(s.toLowerCase())||e.osVersion.toLowerCase().includes(s.toLowerCase())||e.publicIP.includes(s)||e.appVersion.includes(s)),W=async(e,s)=>{try{s?(await P(e).unwrap(),G.N9.show({title:"Success",message:"Device trust removed",color:"green"})):(await I(e).unwrap(),G.N9.show({title:"Success",message:"Device marked as trusted",color:"green"}))}catch(e){var i;G.N9.show({title:"Error",message:(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.message)||"Failed to update device",color:"red"})}},K=(e,s)=>{s?M.qk.openConfirmModal({title:"Unblock Device",children:(0,n.jsx)(t.Text,{size:"sm",children:"Are you sure you want to unblock this device? It will be able to access the system again."}),labels:{confirm:"Unblock",cancel:"Cancel"},confirmProps:{color:"green"},onConfirm:async()=>{try{await _(e).unwrap(),G.N9.show({title:"Success",message:"Device unblocked successfully",color:"green"})}catch(e){var s;G.N9.show({title:"Error",message:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to unblock device",color:"red"})}}}):M.qk.open({title:"Block Device",children:(0,n.jsxs)(r.Stack,{gap:"md",children:[(0,n.jsx)(t.Text,{size:"sm",children:"Are you sure you want to block this device? All active sessions will be revoked and future login attempts will be denied."}),(0,n.jsx)(o.TextInput,{label:"Reason for blocking",placeholder:"Enter reason...",id:"block-reason-input","data-autofocus":!0}),(0,n.jsxs)(l.Group,{justify:"flex-end",mt:"md",children:[(0,n.jsx)(c.Button,{variant:"default",onClick:()=>M.qk.closeAll(),children:"Cancel"}),(0,n.jsx)(c.Button,{color:"red",onClick:async()=>{var s,i;let n=(null===(s=document.getElementById("block-reason-input"))||void 0===s?void 0:s.value)||"Blocked by administrator";try{await U({deviceId:e,reason:n}).unwrap(),G.N9.show({title:"Success",message:"Device blocked successfully",color:"green"}),M.qk.closeAll()}catch(e){G.N9.show({title:"Error",message:(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.message)||"Failed to block device",color:"red"})}},children:"Block Device"})]})]})})},Q=(e,s)=>{M.qk.openConfirmModal({title:"Delete Device",children:(0,n.jsxs)(t.Text,{size:"sm",children:["Are you sure you want to delete this ",s," device? All sessions will be revoked and the device record will be permanently removed. This action cannot be undone."]}),labels:{confirm:"Delete",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:async()=>{try{await H(e).unwrap(),G.N9.show({title:"Success",message:"Device deleted successfully",color:"green"})}catch(e){var s;G.N9.show({title:"Error",message:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to delete device",color:"red"})}}})},J=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Y=e=>"".concat((e/1073741824).toFixed(1)," GB");return L?(0,n.jsxs)(d.Container,{fluid:!0,children:[(0,n.jsx)(N.Z,{}),(0,n.jsx)(l.Group,{justify:"center",py:"xl",children:(0,n.jsx)(a.Loader,{size:"lg"})})]}):q?(0,n.jsxs)(d.Container,{fluid:!0,children:[(0,n.jsx)(N.Z,{}),(0,n.jsx)(u.b,{icon:(0,n.jsx)(g.Z,{size:16}),title:"Error",color:"red",children:"Failed to load devices. Please try again later."})]}):(0,n.jsxs)(d.Container,{fluid:!0,children:[(0,n.jsx)(N.Z,{}),(0,n.jsxs)(r.Stack,{gap:"lg",children:[(0,n.jsx)(l.Group,{justify:"space-between",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(h.Title,{order:2,children:"Devices"}),(0,n.jsx)(t.Text,{size:"sm",c:"dimmed",mt:4,children:"Manage all devices that have accessed the system"})]})}),(0,n.jsx)(o.TextInput,{placeholder:"Search devices by platform, OS, IP, or app version...",leftSection:(0,n.jsx)(y.Z,{size:16}),value:s,onChange:e=>i(e.target.value),size:"md"}),(0,n.jsxs)(v.X,{shadow:"sm",p:"md",radius:"md",withBorder:!0,children:[(0,n.jsxs)(l.Group,{gap:"xs",mb:"md",children:[(0,n.jsx)(T.Z,{size:20}),(0,n.jsxs)(t.Text,{fw:500,children:[X.length," Device",1!==X.length?"s":""]})]}),0===X.length?(0,n.jsx)(t.Text,{c:"dimmed",ta:"center",py:"xl",children:s?"No devices found matching your search":"No devices found"}):(0,n.jsx)(m.Grid,{children:X.map(s=>{var i;return(0,n.jsx)(m.Grid.Col,{span:{base:12,md:6,lg:4},children:(0,n.jsx)(x.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,n.jsxs)(r.Stack,{gap:"md",children:[(0,n.jsxs)(l.Group,{justify:"space-between",align:"flex-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(t.Text,{fw:600,size:"lg",children:s.platform}),s.isTrusted&&(0,n.jsx)(j.u,{label:"Trusted Device",children:(0,n.jsx)(k.Z,{size:18,color:"green"})})]}),(0,n.jsxs)(t.Text,{size:"sm",c:"dimmed",children:[s.osVersion," â€¢ ",s.arch]})]}),s.isBlocked&&(0,n.jsx)(p.C,{color:"red",variant:"filled",children:"Blocked"})]}),(0,n.jsxs)(r.Stack,{gap:"xs",children:[(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(b.Z,{size:14}),(0,n.jsx)(t.Text,{size:"sm",children:null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.email})]}),(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(w.Z,{size:14}),(0,n.jsxs)(t.Text,{size:"sm",children:["Last seen: ",J(s.lastSeenAt)]})]})]}),(0,n.jsxs)(l.Group,{gap:"md",children:[(0,n.jsxs)(p.C,{variant:"light",color:"blue",children:[s.cpuCores," cores"]}),(0,n.jsx)(p.C,{variant:"light",color:"violet",children:Y(s.totalMemory)}),(0,n.jsxs)(p.C,{variant:"light",color:"green",children:["v",s.appVersion]})]}),void 0!==s.activeSessions&&(0,n.jsxs)(l.Group,{gap:"lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(t.Text,{size:"xs",c:"dimmed",children:"Active Sessions"}),(0,n.jsx)(t.Text,{fw:600,children:s.activeSessions})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(t.Text,{size:"xs",c:"dimmed",children:"Total Sessions"}),(0,n.jsx)(t.Text,{fw:600,children:s.totalSessions})]})]}),s.isBlocked&&s.blockedReason&&(0,n.jsx)(u.b,{icon:(0,n.jsx)(g.Z,{size:16}),color:"red",variant:"light",p:"xs",children:(0,n.jsx)(t.Text,{size:"xs",children:s.blockedReason})}),(0,n.jsxs)(l.Group,{justify:"space-between",mt:"md",children:[(0,n.jsx)(j.u,{label:"View Details",children:(0,n.jsx)(f.A,{variant:"light",color:"blue",onClick:()=>e.push("/superadmin/version-admin/devices?id=".concat(s.id)),children:(0,n.jsx)(z.Z,{size:18})})}),(0,n.jsxs)(l.Group,{gap:"xs",children:[(0,n.jsx)(j.u,{label:s.isTrusted?"Remove Trust":"Trust Device",children:(0,n.jsx)(f.A,{variant:"light",color:s.isTrusted?"gray":"green",onClick:()=>W(s.id,s.isTrusted),children:s.isTrusted?(0,n.jsx)(A.Z,{size:18}):(0,n.jsx)(k.Z,{size:18})})}),(0,n.jsx)(j.u,{label:s.isBlocked?"Unblock":"Block Device",children:(0,n.jsx)(f.A,{variant:"light",color:s.isBlocked?"green":"orange",onClick:()=>K(s.id,s.isBlocked),children:s.isBlocked?(0,n.jsx)(C.Z,{size:18}):(0,n.jsx)(S.Z,{size:18})})}),(0,n.jsx)(j.u,{label:"Delete Device",children:(0,n.jsx)(f.A,{variant:"light",color:"red",onClick:()=>Q(s.id,s.platform),children:(0,n.jsx)(D.Z,{size:18})})})]})]})]})})},s.id)})})]})]})]})}},34703:function(e,s,i){"use strict";i.d(s,{Z:function(){return m}});var n=i(68328),t=i(13342),r=i(12450),o=i(74556),l=i(56959),c=i(74625),d=i(71140),a=i(91024),u=i(31662),h=i(25539),v=i(39870);function m(){let e=(0,r.useRouter)(),s=(0,r.usePathname)();return(0,n.jsx)(t.m,{value:s.includes("/dashboard")?"dashboard":s.includes("/services")?"services":s.includes("/versions")?"versions":s.includes("/hospitals")?"hospitals":s.includes("/logs")?"logs":s.includes("/notifications")?"notifications":s.includes("/devices")?"devices":s.includes("/sessions")?"sessions":"dashboard",onChange:s=>{s&&e.push("/superadmin/version-admin/".concat(s))},mb:"lg",children:(0,n.jsxs)(t.m.List,{children:[(0,n.jsx)(t.m.Tab,{value:"dashboard",leftSection:(0,n.jsx)(o.Z,{size:16}),children:"Dashboard"}),(0,n.jsx)(t.m.Tab,{value:"services",leftSection:(0,n.jsx)(l.Z,{size:16}),children:"Services"}),(0,n.jsx)(t.m.Tab,{value:"versions",leftSection:(0,n.jsx)(c.Z,{size:16}),children:"Versions"}),(0,n.jsx)(t.m.Tab,{value:"hospitals",leftSection:(0,n.jsx)(d.Z,{size:16}),children:"Hospitals"}),(0,n.jsx)(t.m.Tab,{value:"logs",leftSection:(0,n.jsx)(a.Z,{size:16}),children:"Update Logs"}),(0,n.jsx)(t.m.Tab,{value:"notifications",leftSection:(0,n.jsx)(u.Z,{size:16}),children:"Notifications"}),(0,n.jsx)(t.m.Tab,{value:"sessions",leftSection:(0,n.jsx)(h.Z,{size:16}),children:"Sessions"}),(0,n.jsx)(t.m.Tab,{value:"devices",leftSection:(0,n.jsx)(v.Z,{size:16}),children:"Devices"})]})})}},72940:function(e,s,i){"use strict";i.d(s,{FD:function(){return t},Hn:function(){return n},y4:function(){return r}});let n={headers:{"Content-Type":"application/json"}},t={withCredentials:!0},r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},34558:function(e,s,i){"use strict";i.d(s,{FR:function(){return l},Il:function(){return r},L9:function(){return a},_r:function(){return h},bu:function(){return m},cT:function(){return d},fE:function(){return c},ju:function(){return o},u4:function(){return u},wj:function(){return n},z3:function(){return v}});let{useGetAllSessionsQuery:n,useGetSessionsByDeviceQuery:t,useRevokeSessionMutation:r,useRevokeAllSessionsMutation:o,useRevokeAllDeviceSessionsMutation:l,useGetAllDevicesQuery:c,useGetDeviceQuery:d,useTrustDeviceMutation:a,useUntrustDeviceMutation:u,useBlockDeviceMutation:h,useUnblockDeviceMutation:v,useDeleteDeviceMutation:m}=i(78101).g.injectEndpoints({endpoints:e=>({getAllSessions:e.query({query:e=>({url:"/version-admin/auth/sessions",method:"GET",params:e||{limit:50,offset:0}}),providesTags:["versionAdmin-sessions"]}),getSessionsByDevice:e.query({query:e=>({url:"/version-admin/auth/sessions/device/".concat(e),method:"GET"}),providesTags:(e,s,i)=>[{type:"versionAdmin-sessions",id:i}]}),revokeSession:e.mutation({query:e=>({url:"/version-admin/auth/sessions/".concat(e),method:"DELETE"}),invalidatesTags:["versionAdmin-sessions","versionAdmin-devices"]}),revokeAllSessions:e.mutation({query:()=>({url:"/version-admin/auth/sessions",method:"DELETE"}),invalidatesTags:["versionAdmin-sessions","versionAdmin-devices"]}),revokeAllDeviceSessions:e.mutation({query:e=>({url:"/version-admin/auth/sessions/device/".concat(e,"/revoke-all"),method:"DELETE"}),invalidatesTags:(e,s,i)=>["versionAdmin-sessions","versionAdmin-devices",{type:"versionAdmin-sessions",id:i},{type:"versionAdmin-devices",id:i}]}),getAllDevices:e.query({query:e=>({url:"/version-admin/auth/devices",method:"GET",params:e||{limit:50,offset:0}}),providesTags:["versionAdmin-devices"]}),getDevice:e.query({query:e=>({url:"/version-admin/auth/devices/".concat(e),method:"GET"}),providesTags:(e,s,i)=>[{type:"versionAdmin-devices",id:i}]}),trustDevice:e.mutation({query:e=>({url:"/version-admin/auth/devices/".concat(e,"/trust"),method:"PATCH"}),invalidatesTags:(e,s,i)=>["versionAdmin-devices",{type:"versionAdmin-devices",id:i}]}),untrustDevice:e.mutation({query:e=>({url:"/version-admin/auth/devices/".concat(e,"/untrust"),method:"PATCH"}),invalidatesTags:(e,s,i)=>["versionAdmin-devices",{type:"versionAdmin-devices",id:i}]}),blockDevice:e.mutation({query:e=>{let{deviceId:s,reason:i}=e;return{url:"/version-admin/auth/devices/".concat(s,"/block"),method:"PATCH",body:{reason:i}}},invalidatesTags:(e,s,i)=>{let{deviceId:n}=i;return["versionAdmin-devices","versionAdmin-sessions",{type:"versionAdmin-devices",id:n}]}}),unblockDevice:e.mutation({query:e=>({url:"/version-admin/auth/devices/".concat(e,"/unblock"),method:"PATCH"}),invalidatesTags:(e,s,i)=>["versionAdmin-devices",{type:"versionAdmin-devices",id:i}]}),deleteDevice:e.mutation({query:e=>({url:"/version-admin/auth/devices/".concat(e),method:"DELETE"}),invalidatesTags:["versionAdmin-devices","versionAdmin-sessions"]})})})},78101:function(e,s,i){"use strict";i.d(s,{g:function(){return l}});var n=i(49854),t=i(68240),r=i(94183),o=i(28317);let l=(0,t.LC)({baseQuery:(0,r.ni)({baseUrl:"http://sasthotech.local:5000/api/v1",credentials:"include",fetchFn:(e,s)=>fetch(e,s).then(async i=>{let t="string"==typeof e?e:e.url;return t.includes("?")||(null==s?void 0:s.body)||"string"!=typeof e&&e.body||await (0,o.t8)(t,await i.clone().json().catch(()=>null),(0,n.x)()),i}).catch(async i=>{if(i instanceof TypeError){let i="string"==typeof e?e:e.url;if(!i.includes("?")&&!(null==s?void 0:s.body)&&!("string"!=typeof e&&e.body)){let e=await (0,o.U2)(i,(0,n.x)());if(e)return new Response(e,{headers:new Headers({"Content-Type":"application/json"})})}}throw i})}),endpoints:()=>({}),tagTypes:["BillTest","doctor","hospitalBill","inventory","appointment","patient","sms","sms-dashboard","sms-messages","sms-analytics","sms-status","notice","template","versionAdmin-services","versionAdmin-versions","versionAdmin-hospitals","versionAdmin-logs","versionAdmin-sessions","versionAdmin-devices","versionAdmin-notifications","versionAdmin-notification-stats","PCMeetup","MarketerTarget","Marketer"]})},49854:function(e,s,i){"use strict";let n;i.d(s,{d:function(){return d},x:function(){return c}});var t=i(72940),r=i(6780),o=i(67732),l=i(28317);function c(){return n||(n=(0,l.MT)("cached-responses-store","cached-responses")),n}async function d(e,s){try{let i=await r.default.get(e,{baseURL:"http://sasthotech.local:5000/api/v1",params:s,...t.FD});return await (0,l.t8)(e,i.data,c()),i.data}catch(s){if(s instanceof o.d7&&[o.d7.ERR_NETWORK,o.d7.ETIMEDOUT].includes(s.code)){let s=await (0,l.U2)(e,c());if(s)return s}throw s instanceof o.d7&&s.response&&401===s.response.status||console.error(s),s}}},48604:function(e,s,i){"use strict";i.d(s,{Z:function(){return g}});var n=i(68328),t=i(4505),r=i(63773),o=i(55622),l=i(65786),c=i(28266),d=i(4687),a=i(89043);let[u,h]=(0,i(98296).R)("Card component was not found in tree");var v=i(32451),m={root:"m_e615b15f",section:"m_599a2148"};let x={},j=(0,d.b)((e,s)=>{let{classNames:i,className:t,style:r,styles:o,vars:c,withBorder:d,inheritPadding:a,mod:u,...m}=(0,l.w)("CardSection",x,e),j=h();return(0,n.jsx)(v.Box,{ref:s,mod:[{"with-border":d,"inherit-padding":a},u],...j.getStyles("section",{className:t,style:r,styles:o,classNames:i}),...m})});j.classes=m,j.displayName="@mantine/core/CardSection";let p={},f=(0,o.Z)((e,s)=>{let{padding:i}=s;return{root:{"--card-padding":(0,r.bG)(i)}}}),g=(0,d.b)((e,s)=>{let i=(0,l.w)("Card",p,e),{classNames:r,className:o,style:d,styles:h,unstyled:v,vars:x,children:g,padding:y,...T}=i,k=(0,c.y)({name:"Card",props:i,classes:m,className:o,style:d,classNames:r,styles:h,unstyled:v,vars:x,varsResolver:f}),b=t.Children.toArray(g),w=b.map((e,s)=>"object"==typeof e&&e&&"type"in e&&e.type===j?(0,t.cloneElement)(e,{"data-first-section":0===s||void 0,"data-last-section":s===b.length-1||void 0}):e);return(0,n.jsx)(u,{value:{getStyles:k},children:(0,n.jsx)(a.X,{ref:s,unstyled:v,...k("root"),...T,children:w})})});g.classes=m,g.displayName="@mantine/core/Card",g.Section=j},77303:function(e,s,i){"use strict";i.r(s),i.d(s,{Divider:function(){return m}});var n=i(68328);i(4505);var t=i(63773),r=i(55622),o=i(12498),l=i(65786),c=i(28266),d=i(32451),a=i(36246),u={root:"m_3eebeb36",label:"m_9e365f20"};let h={orientation:"horizontal"},v=(0,r.Z)((e,s)=>{let{color:i,variant:n,size:r}=s;return{root:{"--divider-color":i?(0,o.p)(i,e):void 0,"--divider-border-style":n,"--divider-size":(0,t.ap)(r,"divider-size")}}}),m=(0,a.d5)((e,s)=>{let i=(0,l.w)("Divider",h,e),{classNames:t,className:r,style:o,styles:a,unstyled:m,vars:x,color:j,orientation:p,label:f,labelPosition:g,mod:y,...T}=i,k=(0,c.y)({name:"Divider",classes:u,props:i,className:r,style:o,classNames:t,styles:a,unstyled:m,vars:x,varsResolver:v});return(0,n.jsx)(d.Box,{ref:s,mod:[{orientation:p,"with-label":!!f},y],...k("root"),...T,role:"separator",children:f&&(0,n.jsx)(d.Box,{component:"span",mod:{position:g},...k("label"),children:f})})});m.classes=u,m.displayName="@mantine/core/Divider"},55911:function(e,s,i){"use strict";i.r(s),i.d(s,{TextInput:function(){return c}});var n=i(68328);i(4505);var t=i(65786),r=i(36246),o=i(80745);let l={},c=(0,r.d5)((e,s)=>{let i=(0,t.w)("TextInput",l,e);return(0,n.jsx)(o.M,{component:"input",ref:s,...i,__staticSelector:"TextInput"})});c.classes=o.M.classes,c.displayName="@mantine/core/TextInput"},33901:function(e,s,i){"use strict";function n(e,s){return"boolean"==typeof e?e:s.autoContrast}i.d(s,{o:function(){return n}})},70703:function(e,s,i){"use strict";i.d(s,{R:function(){return r},a:function(){return o}});var n=i(87585),t=i(73490);function r(e){let{color:s,theme:i,autoContrast:n}=e;return("boolean"==typeof n?n:i.autoContrast)&&(0,t.E)({color:s||i.primaryColor,theme:i}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function o(e,s){return r({color:e.colors[e.primaryColor][(0,n.j)(e,s)],theme:e,autoContrast:null})}},57434:function(e,s,i){"use strict";i.d(s,{C:function(){return t}});var n=i(4505);function t(e){let{value:s,defaultValue:i,finalValue:t,onChange:r=()=>{}}=e,[o,l]=(0,n.useState)(void 0!==i?i:t);return void 0!==s?[s,r,!0]:[o,function(e){for(var s=arguments.length,i=Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];l(e),null==r||r(e,...i)},!1]}},63998:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","arrow-left","ArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]])},41819:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","ban","Ban",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M5.7 5.7l12.6 12.6",key:"svg-1"}]])},51367:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","circle-check","CircleCheck",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]])},92671:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","clock","Clock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]])},60711:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","eye","Eye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]])},86083:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","search","Search",[["path",{d:"M3 10a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]])},12697:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","trash","Trash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])},7965:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(52165).Z)("outline","user","User",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]])}},function(e){e.O(0,[1601,3069,6945,3852,1656,9722,4670,9258,966,6029,1493,5978,286,7168,9175,7402,1744],function(){return e(e.s=88281)}),_N_E=e.O()}]);