(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2676],{34343:function(e,t,a){Promise.resolve().then(a.bind(a,56122))},56122:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var s=a(68328),r=a(48604),n=a(36409),c=a(41224),i=a(14587),o=a(22041),l=a(22614),d=a(31204),u=a(9722),h=a(87967),m=a(29593),g=a(7140),x=a(12921),p=a(56651),f=a(86083),v=a(56815),j=a.n(v),y=a(14443),w=a(72940),b=a(6780),S=a(67732);let N=async e=>{try{let t=await b.default.delete("".concat("http://sasthotech.local:5000/api/v1","/doctor/").concat(e),w.FD);return{success:!0,data:t.data.data}}catch(e){if(e instanceof S.d7){var t;return{success:!1,data:null===(t=e.response)||void 0===t?void 0:t.data.message}}return{success:!1,data:"An error occurred"}}},k=async(e,t,a)=>{try{let s=new URLSearchParams(Object.fromEntries(Object.entries({page:e,limit:t,search:a}).filter(e=>{let[t,a]=e;return void 0!==a}).map(e=>{let[t,a]=e;return[t,String(a)]}))),r=await b.default.get("".concat("http://sasthotech.local:5000/api/v1","/doctor?").concat(s.toString()),w.FD);return{success:!0,data:r.data.data}}catch(e){if(e instanceof S.d7){var s;return{success:!1,data:null===(s=e.response)||void 0===s?void 0:s.data.message}}return{success:!1,data:"An error occurred"}}};var C=a(25499),D=a(9286),E=a(37199),Z=a(12450),I=a(4505),L=a(70818),B=a(90660),F=a.n(B),O=a(32278),P=a(8283),A=a(16721);let T=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let e=await b.default.delete("".concat("http://sasthotech.local:5000/api/v1","/doctor"),w.FD);return{success:!0,data:e.data.data}}catch(t){if(t instanceof S.d7){var e;return{success:!1,data:null===(e=t.response)||void 0===e?void 0:e.data.message}}return{success:!1,data:"An error occurred"}}};var _=a(76594);let z=["Doctor Name","Designation","Phone-Number","Actions"];var M=()=>{let e=(0,Z.useRouter)();(0,C.T)();let t=(0,Z.useSearchParams)(),[a,v]=(0,I.useState)(!0),[w,b]=(0,I.useState)(1),[S,B]=(0,I.useState)([]),[M,K]=(0,I.useState)(0),[R,U]=(0,I.useState)(""),[G,q]=(0,I.useState)(""),[H,V]=(0,I.useState)(!1),W=async e=>{let{success:t,data:a}=await N(e);t?(Q(),F().fire("Success","Deleted","success")):F().fire("Success",a||"Invalid Server Response","error")},J=async()=>{if((await F().fire({title:"Error!",text:"Do you want to continue",icon:"error",confirmButtonText:"OK",cancelButtonText:"Cancel",confirmButtonColor:"red",cancelButtonColor:"green",showCancelButton:!0})).isConfirmed){let{success:e,data:t}=await T();e?Q():F().fire("Error",t,"error")}},Q=async()=>{try{V(!0);let{success:e,data:a}=await k(parseInt(t.get("page")||"1"),parseInt(t.get("limit")||"16"),G);e?(b(null==a?void 0:a.totalPage),B(null==a?void 0:a.items),K(null==a?void 0:a.totalItems)):F().fire("Error",a,"error")}catch(e){F().fire("Error","Unknown Error","error")}finally{V(!1)}};(0,I.useEffect)(()=>{Q()},[G,t]);let X=(0,P.o)(),Y=()=>{X.openModal({centered:!0,size:"xl",children:(0,s.jsx)(A.Z,{load:Q,modals:X}),closeOnClickOutside:!1})},$=(0,I.useCallback)((0,_.debounce)(e=>{q(e.toLowerCase())},1e3),[]),ee=e=>{U(e),console.log(e,"hhere"),$(e)};return H?(0,s.jsx)(()=>(0,s.jsx)(r.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,children:(0,s.jsx)(n.M,{style:{minHeight:"100vh"},children:(0,s.jsxs)(c.Stack,{align:"center",gap:"md",children:[(0,s.jsx)(i.Loader,{size:"lg",color:"blue"}),(0,s.jsx)(o.Text,{size:"sm",c:"dimmed",children:"Loading/Filtering doctors..."})]})})}),{}):(0,s.jsxs)("div",{className:j().container,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"fw-bold",children:"Doctor List"})}),(0,s.jsxs)(l.Group,{children:[(0,s.jsx)(d.Button,{leftSection:(0,s.jsx)(x.Z,{}),onClick:()=>Y(),children:"Import"}),(0,s.jsx)(d.Button,{bg:"red",onClick:()=>J(),children:"Delete All"})]}),(0,s.jsx)("div",{className:"d-flex flex-column align-items-end gap-3",children:(0,s.jsxs)("div",{className:"d-flex gap-3",children:[(0,s.jsx)("div",{className:"bg-white cursor px-2 py-1 rounded-3",children:(0,s.jsx)(D.Z,{})}),(0,s.jsx)("div",{onClick:()=>v(!0),className:"".concat(a?"bg-white":"bg-none"," cursor px-2 py-1 rounded-3"),children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)("div",{onClick:()=>v(!1),className:"".concat(a?"bg-none":"bg-white"," cursor px-2 py-1 rounded-3"),children:(0,s.jsx)(p.Z,{})})]})})]}),(0,s.jsx)(u.I,{leftSection:(0,s.jsx)(f.Z,{size:20}),placeholder:"Search by name ",value:R,onChange:e=>ee(e.target.value),variant:"filled",size:"md",radius:"md",width:"350px",type:"text",name:"text",mt:"lg"}),(0,s.jsxs)(l.Group,{justify:"space-between",className:"mt-3",children:[(0,s.jsxs)(o.Text,{children:[M," doctors"]}),(0,s.jsx)(h.P,{label:"Select Limit",data:["16","32","48","64","80","96"],value:t.get("limit")||"16",onChange:a=>e.push("?limit=".concat(a,"&page=").concat(t.get("page")||1))})]}),(0,s.jsx)(L.default,{className:"mt-4 ",children:(0,s.jsx)(s.Fragment,{children:a?(0,s.jsx)(s.Fragment,{children:null==S?void 0:S.map((e,t)=>(0,s.jsx)(O.Z,{deleteDoctor:W,isDoctorList:!0,doctor:e,searchTerm:G},t))}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(y.Z,{dataKeys:["name",["designation","specialist"],["phone1","phone2"]],headers:z,data:S,isImage:!0,imageKeyName:"image",keyNameWithImage:"name",isEditable:!0,isViewAble:!0,editLink:"/doctor/details",viewLink:"/doctor/details",queryParamName:"doctorId"})})})}),(0,s.jsx)(m.Space,{h:20}),(0,s.jsxs)("div",{className:j().pagination,children:[(0,s.jsx)(g.t,{value:parseInt(t.get("page")||"1"),onChange:a=>e.push("?limit=".concat(t.get("limit")||16,"&page=").concat(a)),total:w}),";"]})]})}},12921:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(52165).Z)("outline","upload","Upload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]])}},function(e){e.O(0,[1601,2975,7852,3069,6945,3852,1656,9722,4670,9258,9533,1166,7967,6029,154,7698,4927,7140,1805,6129,3535,6666,7481,4662,8779,9175,7402,1744],function(){return e(e.s=34343)}),_N_E=e.O()}]);