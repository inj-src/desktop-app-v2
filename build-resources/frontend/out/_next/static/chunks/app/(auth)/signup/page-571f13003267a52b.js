(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2129],{61746:function(e,a,s){Promise.resolve().then(s.bind(s,44423))},44423:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return C}});var r=s(68328),t=s(72940),n=s(6780),o=s(67732);let i=async e=>{try{let a=await n.default.post("".concat("http://sasthotech.local:5000/api/v1","/auth/signup"),e,{...t.FD,...t.Hn});return{success:!0,data:a.data.data}}catch(e){if(e instanceof o.d7){var a;return{success:!1,data:null===(a=e.response)||void 0===a?void 0:a.data.message}}return{success:!1,data:"An error occurred"}}};var l=s(74559),d=s(25499),c=s(9722),u=s(13367),m=s(31204),f=s(8372),p=s(23583),h=s(12450),w=s(85872),v=s(70818),g=s(42062),x=s(30630),y=s(90660),P=s.n(y),j=s(14193);let S=j.Ry().shape({password:j.Z_().min(6,"Password length cannot be less that 6").max(127,"Password is too long").required("Password is required"),confirmPassword:j.Z_().required("Please retype your password ").oneOf([j.iH("password")],"Your passwords do not match.")});var C=()=>{let e=(0,h.useSearchParams)(),a=e.get("email"),s=(0,d.T)(),t=(0,h.useRouter)();return(0,r.jsx)(w.Z,{fluid:!0,className:"d-flex h-100 p-0 align-items-center",children:(0,r.jsx)(v.default,{className:"justify-content-center  w-100",children:(0,r.jsxs)(g.default,{lg:6,children:[(0,r.jsx)("h1",{className:"text-center fw-bolder",children:"Sign Up"}),(0,r.jsx)(p.J9,{initialValues:{confirmPassword:"",password:""},validationSchema:S,onSubmit:async(a,r)=>{let{setSubmitting:n,resetForm:o}=r,d=e.get("token"),c=e.get("email");if(!d||!c){P().fire("Failed","Invalid Server Response","error");return}let{success:u,data:m}=await i({token:d,password:a.password});u?(s((0,l.av)(m)),t.push("/dashboard"),o()):P().fire("Failed",m,"error"),setTimeout(()=>{n(!1)},400)},children:e=>{let{values:s,errors:t,touched:n,handleChange:o,handleBlur:i,handleSubmit:l,isSubmitting:d}=e;return(0,r.jsxs)(x.Z,{onSubmit:l,className:"w-100 d-flex flex-column gap-1",children:[(0,r.jsx)(c.I,{leftSection:(0,r.jsx)(f.Z,{size:20}),value:a||"Invalid email",variant:"filled",readOnly:!0,radius:"md",onChange:o,onBlur:i,type:"email",name:"email",mt:"md"})," ",(0,r.jsx)(u.W,{leftSection:(0,r.jsx)(f.Z,{size:20}),placeholder:"Create Password",value:s.password,variant:"filled",radius:"md",onChange:o,onBlur:i,type:"password",name:"password",mt:"md",error:t.password&&n.password})," ",t.password&&n.password?(0,r.jsx)("p",{className:"text-danger",children:t.password}):null,(0,r.jsx)(u.W,{leftSection:(0,r.jsx)(f.Z,{size:20}),placeholder:"Confirm Password",value:s.confirmPassword,variant:"filled",radius:"md",onChange:o,onBlur:i,type:"password",name:"confirmPassword",mt:"md",error:t.confirmPassword&&n.confirmPassword})," ",t.confirmPassword&&n.confirmPassword?(0,r.jsx)("p",{className:"text-danger",children:t.confirmPassword}):null,(0,r.jsx)(m.Button,{fullWidth:!0,type:"submit",className:"mt-3",children:"Sign Up"})]})}})]})})})}},72940:function(e,a,s){"use strict";s.d(a,{FD:function(){return t},Hn:function(){return r},y4:function(){return n}});let r={headers:{"Content-Type":"application/json"}},t={withCredentials:!0},n={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}},74559:function(e,a,s){"use strict";s.d(a,{Im:function(){return o},av:function(){return n},nC:function(){return t}});let r=(0,s(79258).createSlice)({name:"auth",initialState:{isAuth:null,user:null,isProfileIncomplete:!1,diagnostic:null},reducers:{setUser:(e,a)=>{var s;e.user=a.payload,e.isAuth=!!a.payload,(null===(s=a.payload)||void 0===s?void 0:s.name)?localStorage.setItem("name",a.payload.name):localStorage.removeItem("name")},setDiagnostic:(e,a)=>{let s=a.payload;"hospital.sasthotech.com"===window.location.hostname?s.activeLogo=s.logo:s.activeLogo=s.offlineLogo,e.diagnostic=s},setProfileIncomplete:(e,a)=>{e.isProfileIncomplete=a.payload}}}),t=e=>{var a;return null===(a=e.auth.user)||void 0===a?void 0:a.role},{setUser:n,setDiagnostic:o}=r.actions;a.ZP=r.reducer},25499:function(e,a,s){"use strict";s.d(a,{C:function(){return n},T:function(){return t}});var r=s(53502);let t=()=>(0,r.I0)(),n=r.v9}},function(e){e.O(0,[2975,3069,6945,3852,1656,9722,9258,3583,4193,630,2604,9175,7402,1744],function(){return e(e.s=61746)}),_N_E=e.O()}]);